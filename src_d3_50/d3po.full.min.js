!function(){return function e(t,n,r){function i(o,s){if(!n[o]){if(!t[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){return i(t[o][1][e]||e)},c,c.exports,e,t,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}}()({1:[function(e,t,n){"use strict";n.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},n.toByteArray=function(e){for(var t,n=u(e),r=n[0],o=n[1],s=new a(function(e,t,n){return 3*(t+n)/4-n}(0,r,o)),l=0,c=o>0?r-4:r,f=0;f<c;f+=4)t=i[e.charCodeAt(f)]<<18|i[e.charCodeAt(f+1)]<<12|i[e.charCodeAt(f+2)]<<6|i[e.charCodeAt(f+3)],s[l++]=t>>16&255,s[l++]=t>>8&255,s[l++]=255&t;2===o&&(t=i[e.charCodeAt(f)]<<2|i[e.charCodeAt(f+1)]>>4,s[l++]=255&t);1===o&&(t=i[e.charCodeAt(f)]<<10|i[e.charCodeAt(f+1)]<<4|i[e.charCodeAt(f+2)]>>2,s[l++]=t>>8&255,s[l++]=255&t);return s},n.fromByteArray=function(e){for(var t,n=e.length,i=n%3,a=[],o=0,s=n-i;o<s;o+=16383)a.push(c(e,o,o+16383>s?s:o+16383));1===i?(t=e[n-1],a.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],a.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return a.join("")};for(var r=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=o.length;s<l;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,n){for(var i,a,o=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],2:[function(e,t,n){"use strict";function r(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}n.INT_BITS=32,n.INT_MAX=2147483647,n.INT_MIN=-1<<31,n.sign=function(e){return(e>0)-(e<0)},n.abs=function(e){var t=e>>31;return(e^t)-t},n.min=function(e,t){return t^(e^t)&-(e<t)},n.max=function(e,t){return e^(e^t)&-(e<t)},n.isPow2=function(e){return!(e&e-1||!e)},n.log2=function(e){var t,n;return t=(e>65535)<<4,t|=n=((e>>>=t)>255)<<3,t|=n=((e>>>=n)>15)<<2,(t|=n=((e>>>=n)>3)<<1)|(e>>>=n)>>1},n.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},n.popCount=function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},n.countTrailingZeros=r,n.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1},n.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},n.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var i=new Array(256);!function(e){for(var t=0;t<256;++t){var n=t,r=t,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;e[t]=r<<i&255}}(i),n.reverse=function(e){return i[255&e]<<24|i[e>>>8&255]<<16|i[e>>>16&255]<<8|i[e>>>24&255]},n.interleave2=function(e,t){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},n.deinterleave2=function(e,t){return(e=65535&((e=16711935&((e=252645135&((e=858993459&((e=e>>>t&1431655765)|e>>>1))|e>>>2))|e>>>4))|e>>>16))<<16>>16},n.interleave3=function(e,t,n){return e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2),(e|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},n.deinterleave3=function(e,t){return(e=1023&((e=4278190335&((e=251719695&((e=3272356035&((e=e>>>t&1227133513)|e>>>2))|e>>>4))|e>>>8))|e>>>16))<<22>>22},n.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>r(e)+1}},{}],3:[function(e,t,n){(function(t){"use strict";var r=e("base64-js"),i=e("ieee754");n.Buffer=t,n.SlowBuffer=function(e){+e!=e&&(e=0);return t.alloc(+e)},n.INSPECT_MAX_BYTES=50;var a=2147483647;function o(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');var n=new Uint8Array(e);return Object.setPrototypeOf(n,t.prototype),n}function t(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return u(e)}return s(e,t,n)}function s(e,n,r){if("string"==typeof e)return function(e,n){"string"==typeof n&&""!==n||(n="utf8");if(!t.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var r=0|d(e,n),i=o(r),a=i.write(e,n);a!==r&&(i=i.slice(0,a));return i}(e,n);if(ArrayBuffer.isView(e))return c(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(I(e,ArrayBuffer)||e&&I(e.buffer,ArrayBuffer))return function(e,n,r){if(n<0||e.byteLength<n)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<n+(r||0))throw new RangeError('"length" is outside of buffer bounds');var i;i=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);return Object.setPrototypeOf(i,t.prototype),i}(e,n,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return t.from(i,n,r);var a=function(e){if(t.isBuffer(e)){var n=0|f(e.length),r=o(n);return 0===r.length?r:(e.copy(r,0,0,n),r)}if(void 0!==e.length)return"number"!=typeof e.length||R(e.length)?o(0):c(e);if("Buffer"===e.type&&Array.isArray(e.data))return c(e.data)}(e);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return t.from(e[Symbol.toPrimitive]("string"),n,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return l(e),o(e<0?0:0|f(e))}function c(e){for(var t=e.length<0?0:0|f(e.length),n=o(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function f(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function d(e,n){if(t.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||I(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;for(var a=!1;;)switch(n){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return B(e).length;default:if(a)return i?-1:q(e).length;n=(""+n).toLowerCase(),a=!0}}function h(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function p(e,n,r,i,a){if(0===e.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),R(r=+r)&&(r=a?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(a)return-1;r=e.length-1}else if(r<0){if(!a)return-1;r=0}if("string"==typeof n&&(n=t.from(n,i)),t.isBuffer(n))return 0===n.length?-1:v(e,n,r,i,a);if("number"==typeof n)return n&=255,"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,n,r):Uint8Array.prototype.lastIndexOf.call(e,n,r):v(e,[n],r,i,a);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,r,i){var a,o=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,l/=2,n/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var c=-1;for(a=n;a<s;a++)if(u(e,a)===u(t,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===l)return c*o}else-1!==c&&(a-=a-c),c=-1}else for(n+l>s&&(n=s-l),a=n;a>=0;a--){for(var f=!0,d=0;d<l;d++)if(u(e,a+d)!==u(t,d)){f=!1;break}if(f)return a}return-1}function g(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=t.length;r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(R(s))return o;e[n+o]=s}return o}function m(e,t,n,r){return D(q(t,e.length-n),e,n,r)}function y(e,t,n,r){return D(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function b(e,t,n,r){return y(e,t,n,r)}function x(e,t,n,r){return D(B(t),e,n,r)}function _(e,t,n,r){return D(function(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function w(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function j(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,o,s,l,u=e[i],c=null,f=u>239?4:u>223?3:u>191?2:1;if(i+f<=n)switch(f){case 1:u<128&&(c=u);break;case 2:128==(192&(a=e[i+1]))&&(l=(31&u)<<6|63&a)>127&&(c=l);break;case 3:a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&(l=(15&u)<<12|(63&a)<<6|63&o)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(l=(15&u)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,f=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=f}return function(e){var t=e.length;if(t<=k)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=k));return n}(r)}n.kMaxLength=a,t.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),t.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(t.prototype,"parent",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.buffer}}),Object.defineProperty(t.prototype,"offset",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),t.poolSize=8192,t.from=function(e,t,n){return s(e,t,n)},Object.setPrototypeOf(t.prototype,Uint8Array.prototype),Object.setPrototypeOf(t,Uint8Array),t.alloc=function(e,t,n){return function(e,t,n){return l(e),e<=0?o(e):void 0!==t?"string"==typeof n?o(e).fill(t,n):o(e).fill(t):o(e)}(e,t,n)},t.allocUnsafe=function(e){return u(e)},t.allocUnsafeSlow=function(e){return u(e)},t.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==t.prototype},t.compare=function(e,n){if(I(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),I(n,Uint8Array)&&(n=t.from(n,n.offset,n.byteLength)),!t.isBuffer(e)||!t.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===n)return 0;for(var r=e.length,i=n.length,a=0,o=Math.min(r,i);a<o;++a)if(e[a]!==n[a]){r=e[a],i=n[a];break}return r<i?-1:i<r?1:0},t.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,n){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return t.alloc(0);var r;if(void 0===n)for(n=0,r=0;r<e.length;++r)n+=e[r].length;var i=t.allocUnsafe(n),a=0;for(r=0;r<e.length;++r){var o=e[r];if(I(o,Uint8Array)&&(o=t.from(o)),!t.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,a),a+=o.length}return i},t.byteLength=d,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)h(this,t,t+1);return this},t.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)h(this,t,t+3),h(this,t+1,t+2);return this},t.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)h(this,t,t+7),h(this,t+1,t+6),h(this,t+2,t+5),h(this,t+3,t+4);return this},t.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?j(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,n);case"utf8":case"utf-8":return j(this,t,n);case"ascii":return z(this,t,n);case"latin1":case"binary":return M(this,t,n);case"base64":return w(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},t.prototype.toLocaleString=t.prototype.toString,t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===t.compare(this,e)},t.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},t.prototype.compare=function(e,n,r,i,a){if(I(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),!t.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===n&&(n=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===a&&(a=this.length),n<0||r>e.length||i<0||a>this.length)throw new RangeError("out of range index");if(i>=a&&n>=r)return 0;if(i>=a)return-1;if(n>=r)return 1;if(this===e)return 0;for(var o=(a>>>=0)-(i>>>=0),s=(r>>>=0)-(n>>>=0),l=Math.min(o,s),u=this.slice(i,a),c=e.slice(n,r),f=0;f<l;++f)if(u[f]!==c[f]){o=u[f],s=c[f];break}return o<s?-1:s<o?1:0},t.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},t.prototype.indexOf=function(e,t,n){return p(this,e,t,n,!0)},t.prototype.lastIndexOf=function(e,t,n){return p(this,e,t,n,!1)},t.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return g(this,e,t,n);case"utf8":case"utf-8":return m(this,e,t,n);case"ascii":return y(this,e,t,n);case"latin1":case"binary":return b(this,e,t,n);case"base64":return x(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var k=4096;function z(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function M(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function A(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=F(e[a]);return i}function E(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function S(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function O(e,n,r,i,a,o){if(!t.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>a||n<o)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function T(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function C(e,t,n,r,a){return t=+t,n>>>=0,a||T(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function N(e,t,n,r,a){return t=+t,n>>>=0,a||T(e,0,n,8),i.write(e,t,n,r,52,8),n+8}t.prototype.slice=function(e,n){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(n=void 0===n?r:~~n)<0?(n+=r)<0&&(n=0):n>r&&(n=r),n<e&&(n=e);var i=this.subarray(e,n);return Object.setPrototypeOf(i,t.prototype),i},t.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||S(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},t.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||S(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},t.prototype.readUInt8=function(e,t){return e>>>=0,t||S(e,1,this.length),this[e]},t.prototype.readUInt16LE=function(e,t){return e>>>=0,t||S(e,2,this.length),this[e]|this[e+1]<<8},t.prototype.readUInt16BE=function(e,t){return e>>>=0,t||S(e,2,this.length),this[e]<<8|this[e+1]},t.prototype.readUInt32LE=function(e,t){return e>>>=0,t||S(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},t.prototype.readUInt32BE=function(e,t){return e>>>=0,t||S(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},t.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||S(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},t.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||S(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},t.prototype.readInt8=function(e,t){return e>>>=0,t||S(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},t.prototype.readInt16LE=function(e,t){e>>>=0,t||S(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt16BE=function(e,t){e>>>=0,t||S(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt32LE=function(e,t){return e>>>=0,t||S(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},t.prototype.readInt32BE=function(e,t){return e>>>=0,t||S(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},t.prototype.readFloatLE=function(e,t){return e>>>=0,t||S(e,4,this.length),i.read(this,e,!0,23,4)},t.prototype.readFloatBE=function(e,t){return e>>>=0,t||S(e,4,this.length),i.read(this,e,!1,23,4)},t.prototype.readDoubleLE=function(e,t){return e>>>=0,t||S(e,8,this.length),i.read(this,e,!0,52,8)},t.prototype.readDoubleBE=function(e,t){return e>>>=0,t||S(e,8,this.length),i.read(this,e,!1,52,8)},t.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||O(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},t.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||O(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},t.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,1,255,0),this[t]=255&e,t+1},t.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},t.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);O(this,e,t,n,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},t.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);O(this,e,t,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},t.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},t.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},t.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeFloatLE=function(e,t,n){return C(this,e,t,!0,n)},t.prototype.writeFloatBE=function(e,t,n){return C(this,e,t,!1,n)},t.prototype.writeDoubleLE=function(e,t,n){return N(this,e,t,!0,n)},t.prototype.writeDoubleBE=function(e,t,n){return N(this,e,t,!1,n)},t.prototype.copy=function(e,n,r,i){if(!t.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),n>=e.length&&(n=e.length),n||(n=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===e.length||0===this.length)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-n<i-r&&(i=e.length-n+r);var a=i-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(n,r,i);else if(this===e&&r<n&&n<i)for(var o=a-1;o>=0;--o)e[o+n]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,i),n);return a},t.prototype.fill=function(e,n,r,i){if("string"==typeof e){if("string"==typeof n?(i=n,n=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!t.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){var a=e.charCodeAt(0);("utf8"===i&&a<128||"latin1"===i)&&(e=a)}}else"number"==typeof e&&(e&=255);if(n<0||this.length<n||this.length<r)throw new RangeError("Out of range index");if(r<=n)return this;var o;if(n>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=n;o<r;++o)this[o]=e;else{var s=t.isBuffer(e)?e:t.from(e,i),l=s.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-n;++o)this[o+n]=s[o%l]}return this};var P=/[^+\/0-9A-Za-z-_]/g;function F(e){return e<16?"0"+e.toString(16):e.toString(16)}function q(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function B(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(P,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function D(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function I(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function R(e){return e!=e}}).call(this,e("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:42}],4:[function(e,t,n){"use strict";var r=e("./lib/thunk.js");function i(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}t.exports=function(e){var t=new i;t.pre=e.pre,t.body=e.body,t.post=e.post;var n=e.args.slice(0);t.argTypes=n;for(var a=0;a<n.length;++a){var o=n[a];if("array"===o||"object"==typeof o&&o.blockIndices){if(t.argTypes[a]="array",t.arrayArgs.push(a),t.arrayBlockIndices.push(o.blockIndices?o.blockIndices:0),t.shimArgs.push("array"+a),a<t.pre.args.length&&t.pre.args[a].count>0)throw new Error("cwise: pre() block may not reference array args");if(a<t.post.args.length&&t.post.args[a].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===o)t.scalarArgs.push(a),t.shimArgs.push("scalar"+a);else if("index"===o){if(t.indexArgs.push(a),a<t.pre.args.length&&t.pre.args[a].count>0)throw new Error("cwise: pre() block may not reference array index");if(a<t.body.args.length&&t.body.args[a].lvalue)throw new Error("cwise: body() block may not write to array index");if(a<t.post.args.length&&t.post.args[a].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===o){if(t.shapeArgs.push(a),a<t.pre.args.length&&t.pre.args[a].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(a<t.body.args.length&&t.body.args[a].lvalue)throw new Error("cwise: body() block may not write to array shape");if(a<t.post.args.length&&t.post.args[a].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof o||!o.offset)throw new Error("cwise: Unknown argument type "+n[a]);t.argTypes[a]="offset",t.offsetArgs.push({array:o.array,offset:o.offset}),t.offsetArgIndex.push(a)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>n.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>n.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>n.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,r(t)}},{"./lib/thunk.js":6}],5:[function(e,t,n){"use strict";var r=e("uniq");function i(e,t,n){var r,i,a=e.length,o=t.arrayArgs.length,s=t.indexArgs.length>0,l=[],u=[],c=0,f=0;for(r=0;r<a;++r)u.push(["i",r,"=0"].join(""));for(i=0;i<o;++i)for(r=0;r<a;++r)f=c,c=e[r],0===r?u.push(["d",i,"s",r,"=t",i,"p",c].join("")):u.push(["d",i,"s",r,"=(t",i,"p",c,"-s",f,"*t",i,"p",f,")"].join(""));for(u.length>0&&l.push("var "+u.join(",")),r=a-1;r>=0;--r)c=e[r],l.push(["for(i",r,"=0;i",r,"<s",c,";++i",r,"){"].join(""));for(l.push(n),r=0;r<a;++r){for(f=c,c=e[r],i=0;i<o;++i)l.push(["p",i,"+=d",i,"s",r].join(""));s&&(r>0&&l.push(["index[",f,"]-=s",f].join("")),l.push(["++index[",c,"]"].join(""))),l.push("}")}return l.join("\n")}function a(e,t,n){for(var r=e.body,i=[],a=[],o=0;o<e.args.length;++o){var s=e.args[o];if(!(s.count<=0)){var l=new RegExp(s.name,"g"),u="",c=t.arrayArgs.indexOf(o);switch(t.argTypes[o]){case"offset":var f=t.offsetArgIndex.indexOf(o);c=t.offsetArgs[f].array,u="+q"+f;case"array":u="p"+c+u;var d="l"+o,h="a"+c;if(0===t.arrayBlockIndices[c])1===s.count?"generic"===n[c]?s.lvalue?(i.push(["var ",d,"=",h,".get(",u,")"].join("")),r=r.replace(l,d),a.push([h,".set(",u,",",d,")"].join(""))):r=r.replace(l,[h,".get(",u,")"].join("")):r=r.replace(l,[h,"[",u,"]"].join("")):"generic"===n[c]?(i.push(["var ",d,"=",h,".get(",u,")"].join("")),r=r.replace(l,d),s.lvalue&&a.push([h,".set(",u,",",d,")"].join(""))):(i.push(["var ",d,"=",h,"[",u,"]"].join("")),r=r.replace(l,d),s.lvalue&&a.push([h,"[",u,"]=",d].join("")));else{for(var p=[s.name],v=[u],g=0;g<Math.abs(t.arrayBlockIndices[c]);g++)p.push("\\s*\\[([^\\]]+)\\]"),v.push("$"+(g+1)+"*t"+c+"b"+g);if(l=new RegExp(p.join(""),"g"),u=v.join("+"),"generic"===n[c])throw new Error("cwise: Generic arrays not supported in combination with blocks!");r=r.replace(l,[h,"[",u,"]"].join(""))}break;case"scalar":r=r.replace(l,"Y"+t.scalarArgs.indexOf(o));break;case"index":r=r.replace(l,"index");break;case"shape":r=r.replace(l,"shape")}}}return[i.join("\n"),r,a.join("\n")].join("\n").trim()}function o(e){for(var t=new Array(e.length),n=!0,r=0;r<e.length;++r){var i=e[r],a=i.match(/\d+/);a=a?a[0]:"",0===i.charAt(0)?t[r]="u"+i.charAt(1)+a:t[r]=i.charAt(0)+a,r>0&&(n=n&&t[r]===t[r-1])}return n?t[0]:t.join("")}t.exports=function(e,t){for(var n=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,s=new Array(e.arrayArgs.length),l=new Array(e.arrayArgs.length),u=0;u<e.arrayArgs.length;++u)l[u]=t[2*u],s[u]=t[2*u+1];var c=[],f=[],d=[],h=[],p=[];for(u=0;u<e.arrayArgs.length;++u){e.arrayBlockIndices[u]<0?(d.push(0),h.push(n),c.push(n),f.push(n+e.arrayBlockIndices[u])):(d.push(e.arrayBlockIndices[u]),h.push(e.arrayBlockIndices[u]+n),c.push(0),f.push(e.arrayBlockIndices[u]));for(var v=[],g=0;g<s[u].length;g++)d[u]<=s[u][g]&&s[u][g]<h[u]&&v.push(s[u][g]-d[u]);p.push(v)}var m=["SS"],y=["'use strict'"],b=[];for(g=0;g<n;++g)b.push(["s",g,"=SS[",g,"]"].join(""));for(u=0;u<e.arrayArgs.length;++u){for(m.push("a"+u),m.push("t"+u),m.push("p"+u),g=0;g<n;++g)b.push(["t",u,"p",g,"=t",u,"[",d[u]+g,"]"].join(""));for(g=0;g<Math.abs(e.arrayBlockIndices[u]);++g)b.push(["t",u,"b",g,"=t",u,"[",c[u]+g,"]"].join(""))}for(u=0;u<e.scalarArgs.length;++u)m.push("Y"+u);if(e.shapeArgs.length>0&&b.push("shape=SS.slice(0)"),e.indexArgs.length>0){var x=new Array(n);for(u=0;u<n;++u)x[u]="0";b.push(["index=[",x.join(","),"]"].join(""))}for(u=0;u<e.offsetArgs.length;++u){var _=e.offsetArgs[u],w=[];for(g=0;g<_.offset.length;++g)0!==_.offset[g]&&(1===_.offset[g]?w.push(["t",_.array,"p",g].join("")):w.push([_.offset[g],"*t",_.array,"p",g].join("")));0===w.length?b.push("q"+u+"=0"):b.push(["q",u,"=",w.join("+")].join(""))}var j=r([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));for((b=b.concat(j)).length>0&&y.push("var "+b.join(",")),u=0;u<e.arrayArgs.length;++u)y.push("p"+u+"|=0");e.pre.body.length>3&&y.push(a(e.pre,e,l));var k=a(e.body,e,l),z=function(e){for(var t=0,n=e[0].length;t<n;){for(var r=1;r<e.length;++r)if(e[r][t]!==e[0][t])return t;++t}return t}(p);z<n?y.push(function(e,t,n,r){for(var a=t.length,o=n.arrayArgs.length,s=n.blockSize,l=n.indexArgs.length>0,u=[],c=0;c<o;++c)u.push(["var offset",c,"=p",c].join(""));for(c=e;c<a;++c)u.push(["for(var j"+c+"=SS[",t[c],"]|0;j",c,">0;){"].join("")),u.push(["if(j",c,"<",s,"){"].join("")),u.push(["s",t[c],"=j",c].join("")),u.push(["j",c,"=0"].join("")),u.push(["}else{s",t[c],"=",s].join("")),u.push(["j",c,"-=",s,"}"].join("")),l&&u.push(["index[",t[c],"]=j",c].join(""));for(c=0;c<o;++c){for(var f=["offset"+c],d=e;d<a;++d)f.push(["j",d,"*t",c,"p",t[d]].join(""));u.push(["p",c,"=(",f.join("+"),")"].join(""))}for(u.push(i(t,n,r)),c=e;c<a;++c)u.push("}");return u.join("\n")}(z,p[0],e,k)):y.push(i(p[0],e,k)),e.post.body.length>3&&y.push(a(e.post,e,l)),e.debug&&console.log("-----Generated cwise routine for ",t,":\n"+y.join("\n")+"\n----------");var M=[e.funcName||"unnamed","_cwise_loop_",s[0].join("s"),"m",z,o(l)].join("");return new Function(["function ",M,"(",m.join(","),"){",y.join("\n"),"} return ",M].join(""))()}},{uniq:62}],6:[function(e,t,n){"use strict";var r=e("./compile.js");t.exports=function(e){var t=["'use strict'","var CACHED={}"],n=[],i=e.funcName+"_cwise_thunk";t.push(["return function ",i,"(",e.shimArgs.join(","),"){"].join(""));for(var a=[],o=[],s=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")],l=[],u=[],c=0;c<e.arrayArgs.length;++c){var f=e.arrayArgs[c];n.push(["t",f,"=array",f,".dtype,","r",f,"=array",f,".order"].join("")),a.push("t"+f),a.push("r"+f),o.push("t"+f),o.push("r"+f+".join()"),s.push("array"+f+".data"),s.push("array"+f+".stride"),s.push("array"+f+".offset|0"),c>0&&(l.push("array"+e.arrayArgs[0]+".shape.length===array"+f+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[c]))),u.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+f+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[c])+"]"))}for(e.arrayArgs.length>1&&(t.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),t.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}")),c=0;c<e.scalarArgs.length;++c)s.push("scalar"+e.scalarArgs[c]);return n.push(["type=[",o.join(","),"].join()"].join("")),n.push("proc=CACHED[type]"),t.push("var "+n.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",a.join(","),"])}","return proc(",s.join(","),")}"].join("")),e.debug&&console.log("-----Generated thunk:\n"+t.join("\n")+"\n----------"),new Function("compile",t.join("\n"))(r.bind(void 0,e))}},{"./compile.js":5}],7:[function(e,t,n){var r,i;r=this,i=function(e){"use strict";function t(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function n(e){var n;return 1===e.length&&(n=e,e=function(e,r){return t(n(e),r)}),{left:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)<0?r=a+1:i=a}return r},right:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)>0?i=a:r=a+1}return r}}}var r=n(t),i=r.right,a=r.left;function o(e,t){return[e,t]}function s(e){return null===e?NaN:+e}function l(e,t){var n,r,i=e.length,a=0,o=-1,l=0,u=0;if(null==t)for(;++o<i;)isNaN(n=s(e[o]))||(u+=(r=n-l)*(n-(l+=r/++a)));else for(;++o<i;)isNaN(n=s(t(e[o],o,e)))||(u+=(r=n-l)*(n-(l+=r/++a)));if(a>1)return u/(a-1)}function u(e,t){var n=l(e,t);return n?Math.sqrt(n):n}function c(e,t){var n,r,i,a=e.length,o=-1;if(null==t){for(;++o<a;)if(null!=(n=e[o])&&n>=n)for(r=i=n;++o<a;)null!=(n=e[o])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++o<a;)if(null!=(n=t(e[o],o,e))&&n>=n)for(r=i=n;++o<a;)null!=(n=t(e[o],o,e))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]}var f=Array.prototype,d=f.slice,h=f.map;function p(e){return function(){return e}}function v(e){return e}function g(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),a=new Array(i);++r<i;)a[r]=e+r*n;return a}var m=Math.sqrt(50),y=Math.sqrt(10),b=Math.sqrt(2);function x(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=m?10:a>=y?5:a>=b?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=m?10:a>=y?5:a>=b?2:1)}function _(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=m?i*=10:a>=y?i*=5:a>=b&&(i*=2),t<e?-i:i}function w(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1}function j(e,t,n){if(null==n&&(n=s),r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e);return o+(+n(e[a+1],a+1,e)-o)*(i-a)}}function k(e,t){var n,r,i=e.length,a=-1;if(null==t){for(;++a<i;)if(null!=(n=e[a])&&n>=n)for(r=n;++a<i;)null!=(n=e[a])&&r>n&&(r=n)}else for(;++a<i;)if(null!=(n=t(e[a],a,e))&&n>=n)for(r=n;++a<i;)null!=(n=t(e[a],a,e))&&r>n&&(r=n);return r}function z(e){if(!(i=e.length))return[];for(var t=-1,n=k(e,M),r=new Array(n);++t<n;)for(var i,a=-1,o=r[t]=new Array(i);++a<i;)o[a]=e[a][t];return r}function M(e){return e.length}e.bisect=i,e.bisectRight=i,e.bisectLeft=a,e.ascending=t,e.bisector=n,e.cross=function(e,t,n){var r,i,a,s,l=e.length,u=t.length,c=new Array(l*u);for(null==n&&(n=o),r=a=0;r<l;++r)for(s=e[r],i=0;i<u;++i,++a)c[a]=n(s,t[i]);return c},e.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},e.deviation=u,e.extent=c,e.histogram=function(){var e=v,t=c,n=w;function r(r){var a,o,s=r.length,l=new Array(s);for(a=0;a<s;++a)l[a]=e(r[a],a,r);var u=t(l),c=u[0],f=u[1],d=n(l,c,f);Array.isArray(d)||(d=_(c,f,d),d=g(Math.ceil(c/d)*d,f,d));for(var h=d.length;d[0]<=c;)d.shift(),--h;for(;d[h-1]>f;)d.pop(),--h;var p,v=new Array(h+1);for(a=0;a<=h;++a)(p=v[a]=[]).x0=a>0?d[a-1]:c,p.x1=a<h?d[a]:f;for(a=0;a<s;++a)c<=(o=l[a])&&o<=f&&v[i(d,o,0,h)].push(r[a]);return v}return r.value=function(t){return arguments.length?(e="function"==typeof t?t:p(t),r):e},r.domain=function(e){return arguments.length?(t="function"==typeof e?e:p([e[0],e[1]]),r):t},r.thresholds=function(e){return arguments.length?(n="function"==typeof e?e:Array.isArray(e)?p(d.call(e)):p(e),r):n},r},e.thresholdFreedmanDiaconis=function(e,n,r){return e=h.call(e,s).sort(t),Math.ceil((r-n)/(2*(j(e,.75)-j(e,.25))*Math.pow(e.length,-1/3)))},e.thresholdScott=function(e,t,n){return Math.ceil((n-t)/(3.5*u(e)*Math.pow(e.length,-1/3)))},e.thresholdSturges=w,e.max=function(e,t){var n,r,i=e.length,a=-1;if(null==t){for(;++a<i;)if(null!=(n=e[a])&&n>=n)for(r=n;++a<i;)null!=(n=e[a])&&n>r&&(r=n)}else for(;++a<i;)if(null!=(n=t(e[a],a,e))&&n>=n)for(r=n;++a<i;)null!=(n=t(e[a],a,e))&&n>r&&(r=n);return r},e.mean=function(e,t){var n,r=e.length,i=r,a=-1,o=0;if(null==t)for(;++a<r;)isNaN(n=s(e[a]))?--i:o+=n;else for(;++a<r;)isNaN(n=s(t(e[a],a,e)))?--i:o+=n;if(i)return o/i},e.median=function(e,n){var r,i=e.length,a=-1,o=[];if(null==n)for(;++a<i;)isNaN(r=s(e[a]))||o.push(r);else for(;++a<i;)isNaN(r=s(n(e[a],a,e)))||o.push(r);return j(o.sort(t),.5)},e.merge=function(e){for(var t,n,r,i=e.length,a=-1,o=0;++a<i;)o+=e[a].length;for(n=new Array(o);--i>=0;)for(t=(r=e[i]).length;--t>=0;)n[--o]=r[t];return n},e.min=k,e.pairs=function(e,t){null==t&&(t=o);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return a},e.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},e.quantile=j,e.range=g,e.scan=function(e,n){if(r=e.length){var r,i,a=0,o=0,s=e[o];for(null==n&&(n=t);++a<r;)(n(i=e[a],s)<0||0!==n(s,s))&&(s=i,o=a);return 0===n(s,s)?o:void 0}},e.shuffle=function(e,t,n){for(var r,i,a=(null==n?e.length:n)-(t=null==t?0:+t);a;)i=Math.random()*a--|0,r=e[a+t],e[a+t]=e[i+t],e[i+t]=r;return e},e.sum=function(e,t){var n,r=e.length,i=-1,a=0;if(null==t)for(;++i<r;)(n=+e[i])&&(a+=n);else for(;++i<r;)(n=+t(e[i],i,e))&&(a+=n);return a},e.ticks=function(e,t,n){var r,i,a,o,s=-1;if(n=+n,(e=+e)==(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(o=x(e,t,n))||!isFinite(o))return[];if(o>0)for(e=Math.ceil(e/o),t=Math.floor(t/o),a=new Array(i=Math.ceil(t-e+1));++s<i;)a[s]=(e+s)*o;else for(e=Math.floor(e*o),t=Math.ceil(t*o),a=new Array(i=Math.ceil(e-t+1));++s<i;)a[s]=(e-s)/o;return r&&a.reverse(),a},e.tickIncrement=x,e.tickStep=_,e.transpose=z,e.variance=l,e.zip=function(){return z(arguments)},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],8:[function(e,t,n){var r,i;r=this,i=function(e){"use strict";var t=Array.prototype.slice;function n(e){return e}var r=1,i=2,a=3,o=4,s=1e-6;function l(e){return"translate("+(e+.5)+",0)"}function u(e){return"translate(0,"+(e+.5)+")"}function c(){return!this.__axis}function f(e,f){var d=[],h=null,p=null,v=6,g=6,m=3,y=e===r||e===o?-1:1,b=e===o||e===i?"x":"y",x=e===r||e===a?l:u;function _(t){var l=null==h?f.ticks?f.ticks.apply(f,d):f.domain():h,u=null==p?f.tickFormat?f.tickFormat.apply(f,d):n:p,_=Math.max(v,0)+m,w=f.range(),j=+w[0]+.5,k=+w[w.length-1]+.5,z=(f.bandwidth?function(e){var t=Math.max(0,e.bandwidth()-1)/2;return e.round()&&(t=Math.round(t)),function(n){return+e(n)+t}}:function(e){return function(t){return+e(t)}})(f.copy()),M=t.selection?t.selection():t,A=M.selectAll(".domain").data([null]),E=M.selectAll(".tick").data(l,f).order(),S=E.exit(),O=E.enter().append("g").attr("class","tick"),T=E.select("line"),C=E.select("text");A=A.merge(A.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),E=E.merge(O),T=T.merge(O.append("line").attr("stroke","currentColor").attr(b+"2",y*v)),C=C.merge(O.append("text").attr("fill","currentColor").attr(b,y*_).attr("dy",e===r?"0em":e===a?"0.71em":"0.32em")),t!==M&&(A=A.transition(t),E=E.transition(t),T=T.transition(t),C=C.transition(t),S=S.transition(t).attr("opacity",s).attr("transform",function(e){return isFinite(e=z(e))?x(e):this.getAttribute("transform")}),O.attr("opacity",s).attr("transform",function(e){var t=this.parentNode.__axis;return x(t&&isFinite(t=t(e))?t:z(e))})),S.remove(),A.attr("d",e===o||e==i?g?"M"+y*g+","+j+"H0.5V"+k+"H"+y*g:"M0.5,"+j+"V"+k:g?"M"+j+","+y*g+"V0.5H"+k+"V"+y*g:"M"+j+",0.5H"+k),E.attr("opacity",1).attr("transform",function(e){return x(z(e))}),T.attr(b+"2",y*v),C.attr(b,y*_).text(u),M.filter(c).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===i?"start":e===o?"end":"middle"),M.each(function(){this.__axis=z})}return _.scale=function(e){return arguments.length?(f=e,_):f},_.ticks=function(){return d=t.call(arguments),_},_.tickArguments=function(e){return arguments.length?(d=null==e?[]:t.call(e),_):d.slice()},_.tickValues=function(e){return arguments.length?(h=null==e?null:t.call(e),_):h&&h.slice()},_.tickFormat=function(e){return arguments.length?(p=e,_):p},_.tickSize=function(e){return arguments.length?(v=g=+e,_):v},_.tickSizeInner=function(e){return arguments.length?(v=+e,_):v},_.tickSizeOuter=function(e){return arguments.length?(g=+e,_):g},_.tickPadding=function(e){return arguments.length?(m=+e,_):m},_}e.axisTop=function(e){return f(r,e)},e.axisRight=function(e){return f(i,e)},e.axisBottom=function(e){return f(a,e)},e.axisLeft=function(e){return f(o,e)},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],9:[function(e,t,n){var r,i;r=this,i=function(e,t,n,r,i,a){"use strict";function o(e){return function(){return e}}function s(e,t,n){this.target=e,this.type=t,this.selection=n}function l(){i.event.stopImmediatePropagation()}function u(){i.event.preventDefault(),i.event.stopImmediatePropagation()}var c={name:"drag"},f={name:"space"},d={name:"handle"},h={name:"center"};function p(e){return[+e[0],+e[1]]}function v(e){return[p(e[0]),p(e[1])]}var g={name:"x",handles:["w","e"].map(k),input:function(e,t){return null==e?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},m={name:"y",handles:["n","s"].map(k),input:function(e,t){return null==e?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},y={name:"xy",handles:["nw","n","ne","w","e","sw","s","se"].map(k),input:function(e){return null==e?null:v(e)},output:function(e){return e}},b={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},x={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},_={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},w={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},j={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function k(e){return{type:e}}function z(){return!i.event.ctrlKey&&!i.event.button}function M(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function A(){return navigator.maxTouchPoints||"ontouchstart"in this}function E(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function S(e){var p,y=M,S=z,O=A,T=!0,C=t.dispatch(P,"start","brush","end"),N=6;function P(t){var n=t.property("__brush",U).selectAll(".overlay").data([k("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",b.overlay).merge(n).each(function(){var e=E(this).extent;i.select(this).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1])}),t.selectAll(".selection").data([k("selection")]).enter().append("rect").attr("class","selection").attr("cursor",b.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=t.selectAll(".handle").data(e.handles,function(e){return e.type});r.exit().remove(),r.enter().append("rect").attr("class",function(e){return"handle handle--"+e.type}).attr("cursor",function(e){return b[e.type]}),t.each(F).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",I).filter(O).on("touchstart.brush",I).on("touchmove.brush",R).on("touchend.brush touchcancel.brush",L).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function F(){var e=i.select(this),t=E(this).selection;t?(e.selectAll(".selection").style("display",null).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1]),e.selectAll(".handle").style("display",null).attr("x",function(e){return"e"===e.type[e.type.length-1]?t[1][0]-N/2:t[0][0]-N/2}).attr("y",function(e){return"s"===e.type[0]?t[1][1]-N/2:t[0][1]-N/2}).attr("width",function(e){return"n"===e.type||"s"===e.type?t[1][0]-t[0][0]+N:N}).attr("height",function(e){return"e"===e.type||"w"===e.type?t[1][1]-t[0][1]+N:N})):e.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function q(e,t,n){return!n&&e.__brush.emitter||new B(e,t)}function B(e,t){this.that=e,this.args=t,this.state=e.__brush,this.active=0}function D(e){return i.clientPoint(e,i.event.touches?i.event.touches[0]:i.event)}function I(){if(i.event.touches){if(i.event.changedTouches.length<i.event.touches.length)return u()}else if(p)return;if(S.apply(this,arguments)){var t,r,o,s,v,y,k,z,M,A,O,C=this,N=i.event.target.__data__.type,P="selection"===(T&&i.event.metaKey?N="overlay":N)?c:T&&i.event.altKey?h:d,B=e===m?null:w[N],I=e===g?null:j[N],R=E(C),L=R.extent,U=R.selection,V=L[0][0],Y=L[0][1],H=L[1][0],G=L[1][1],X=0,W=0,Q=B&&I&&T&&i.event.shiftKey,Z=D(C),$=Z,J=q(C,arguments,!0).beforestart();"overlay"===N?(U&&(M=!0),R.selection=U=[[t=e===m?V:Z[0],o=e===g?Y:Z[1]],[v=e===m?H:t,k=e===g?G:o]]):(t=U[0][0],o=U[0][1],v=U[1][0],k=U[1][1]),r=t,s=o,y=v,z=k;var K=i.select(C).attr("pointer-events","none"),ee=K.selectAll(".overlay").attr("cursor",b[N]);if(i.event.touches)J.moved=ne,J.ended=ie;else{var te=i.select(i.event.view).on("mousemove.brush",ne,!0).on("mouseup.brush",ie,!0);T&&te.on("keydown.brush",function(){switch(i.event.keyCode){case 16:Q=B&&I;break;case 18:P===d&&(B&&(v=y-X*B,t=r+X*B),I&&(k=z-W*I,o=s+W*I),P=h,re());break;case 32:P!==d&&P!==h||(B<0?v=y-X:B>0&&(t=r-X),I<0?k=z-W:I>0&&(o=s-W),P=f,ee.attr("cursor",b.selection),re());break;default:return}u()},!0).on("keyup.brush",function(){switch(i.event.keyCode){case 16:Q&&(A=O=Q=!1,re());break;case 18:P===h&&(B<0?v=y:B>0&&(t=r),I<0?k=z:I>0&&(o=s),P=d,re());break;case 32:P===f&&(i.event.altKey?(B&&(v=y-X*B,t=r+X*B),I&&(k=z-W*I,o=s+W*I),P=h):(B<0?v=y:B>0&&(t=r),I<0?k=z:I>0&&(o=s),P=d),ee.attr("cursor",b[N]),re());break;default:return}u()},!0),n.dragDisable(i.event.view)}l(),a.interrupt(C),F.call(C),J.start()}function ne(){var e=D(C);!Q||A||O||(Math.abs(e[0]-$[0])>Math.abs(e[1]-$[1])?O=!0:A=!0),$=e,M=!0,u(),re()}function re(){var e;switch(X=$[0]-Z[0],W=$[1]-Z[1],P){case f:case c:B&&(X=Math.max(V-t,Math.min(H-v,X)),r=t+X,y=v+X),I&&(W=Math.max(Y-o,Math.min(G-k,W)),s=o+W,z=k+W);break;case d:B<0?(X=Math.max(V-t,Math.min(H-t,X)),r=t+X,y=v):B>0&&(X=Math.max(V-v,Math.min(H-v,X)),r=t,y=v+X),I<0?(W=Math.max(Y-o,Math.min(G-o,W)),s=o+W,z=k):I>0&&(W=Math.max(Y-k,Math.min(G-k,W)),s=o,z=k+W);break;case h:B&&(r=Math.max(V,Math.min(H,t-X*B)),y=Math.max(V,Math.min(H,v+X*B))),I&&(s=Math.max(Y,Math.min(G,o-W*I)),z=Math.max(Y,Math.min(G,k+W*I)))}y<r&&(B*=-1,e=t,t=v,v=e,e=r,r=y,y=e,N in x&&ee.attr("cursor",b[N=x[N]])),z<s&&(I*=-1,e=o,o=k,k=e,e=s,s=z,z=e,N in _&&ee.attr("cursor",b[N=_[N]])),R.selection&&(U=R.selection),A&&(r=U[0][0],y=U[1][0]),O&&(s=U[0][1],z=U[1][1]),U[0][0]===r&&U[0][1]===s&&U[1][0]===y&&U[1][1]===z||(R.selection=[[r,s],[y,z]],F.call(C),J.brush())}function ie(){if(l(),i.event.touches){if(i.event.touches.length)return;p&&clearTimeout(p),p=setTimeout(function(){p=null},500)}else n.dragEnable(i.event.view,M),te.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);var e;K.attr("pointer-events","all"),ee.attr("cursor",b.overlay),R.selection&&(U=R.selection),((e=U)[0][0]===e[1][0]||e[0][1]===e[1][1])&&(R.selection=null,F.call(C)),J.end()}}function R(){q(this,arguments).moved()}function L(){q(this,arguments).ended()}function U(){var t=this.__brush||{selection:null};return t.extent=v(y.apply(this,arguments)),t.dim=e,t}return P.move=function(t,n){t.selection?t.on("start.brush",function(){q(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){q(this,arguments).end()}).tween("brush",function(){var t=this,i=t.__brush,a=q(t,arguments),o=i.selection,s=e.input("function"==typeof n?n.apply(this,arguments):n,i.extent),l=r.interpolate(o,s);function u(e){i.selection=1===e&&null===s?null:l(e),F.call(t),a.brush()}return null!==o&&null!==s?u:u(1)}):t.each(function(){var t=arguments,r=this.__brush,i=e.input("function"==typeof n?n.apply(this,t):n,r.extent),o=q(this,t).beforestart();a.interrupt(this),r.selection=null===i?null:i,F.call(this),o.start().brush().end()})},P.clear=function(e){P.move(e,null)},B.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit("start")):this.emit("brush"),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(t){i.customEvent(new s(P,t,e.output(this.state.selection)),C.apply,C,[t,this.that,this.args])}},P.extent=function(e){return arguments.length?(y="function"==typeof e?e:o(v(e)),P):y},P.filter=function(e){return arguments.length?(S="function"==typeof e?e:o(!!e),P):S},P.handleSize=function(e){return arguments.length?(N=+e,P):N},P.keyModifiers=function(e){return arguments.length?(T=!!e,P):T},P.on=function(){var e=C.on.apply(C,arguments);return e===C?P:e},P}e.brush=function(){return S(y)},e.brushSelection=function(e){var t=e.__brush;return t?t.dim.output(t.selection):null},e.brushX=function(){return S(g)},e.brushY=function(){return S(m)},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n,e("d3-dispatch"),e("d3-drag"),e("d3-interpolate"),e("d3-selection"),e("d3-transition")):"function"==typeof define&&define.amd?define(["exports","d3-dispatch","d3-drag","d3-interpolate","d3-selection","d3-transition"],i):i((r=r||self).d3=r.d3||{},r.d3,r.d3,r.d3,r.d3,r.d3)},{"d3-dispatch":14,"d3-drag":15,"d3-interpolate":23,"d3-selection":30,"d3-transition":35}],10:[function(e,t,n){var r,i;r=this,i=function(e,t,n){"use strict";var r=Math.cos,i=Math.sin,a=Math.PI,o=a/2,s=2*a,l=Math.max,u=Array.prototype.slice;function c(e){return function(){return e}}function f(e){return e.source}function d(e){return e.target}function h(e){return e.radius}function p(e){return e.startAngle}function v(e){return e.endAngle}e.chord=function(){var e=0,n=null,r=null,i=null;function a(a){var o,u,c,f,d,h,p=a.length,v=[],g=t.range(p),m=[],y=[],b=y.groups=new Array(p),x=new Array(p*p);for(o=0,d=-1;++d<p;){for(u=0,h=-1;++h<p;)u+=a[d][h];v.push(u),m.push(t.range(p)),o+=u}for(n&&g.sort(function(e,t){return n(v[e],v[t])}),r&&m.forEach(function(e,t){e.sort(function(e,n){return r(a[t][e],a[t][n])})}),f=(o=l(0,s-e*p)/o)?e:s/p,u=0,d=-1;++d<p;){for(c=u,h=-1;++h<p;){var _=g[d],w=m[_][h],j=a[_][w],k=u,z=u+=j*o;x[w*p+_]={index:_,subindex:w,startAngle:k,endAngle:z,value:j}}b[_]={index:_,startAngle:c,endAngle:u,value:v[_]},u+=f}for(d=-1;++d<p;)for(h=d-1;++h<p;){var M=x[h*p+d],A=x[d*p+h];(M.value||A.value)&&y.push(M.value<A.value?{source:A,target:M}:{source:M,target:A})}return i?y.sort(i):y}return a.padAngle=function(t){return arguments.length?(e=l(0,t),a):e},a.sortGroups=function(e){return arguments.length?(n=e,a):n},a.sortSubgroups=function(e){return arguments.length?(r=e,a):r},a.sortChords=function(e){return arguments.length?(null==e?i=null:(t=e,i=function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)})._=e,a):i&&i._;var t},a},e.ribbon=function(){var e=f,t=d,a=h,s=p,l=v,g=null;function m(){var c,f=u.call(arguments),d=e.apply(this,f),h=t.apply(this,f),p=+a.apply(this,(f[0]=d,f)),v=s.apply(this,f)-o,m=l.apply(this,f)-o,y=p*r(v),b=p*i(v),x=+a.apply(this,(f[0]=h,f)),_=s.apply(this,f)-o,w=l.apply(this,f)-o;if(g||(g=c=n.path()),g.moveTo(y,b),g.arc(0,0,p,v,m),v===_&&m===w||(g.quadraticCurveTo(0,0,x*r(_),x*i(_)),g.arc(0,0,x,_,w)),g.quadraticCurveTo(0,0,y,b),g.closePath(),c)return g=null,c+""||null}return m.radius=function(e){return arguments.length?(a="function"==typeof e?e:c(+e),m):a},m.startAngle=function(e){return arguments.length?(s="function"==typeof e?e:c(+e),m):s},m.endAngle=function(e){return arguments.length?(l="function"==typeof e?e:c(+e),m):l},m.source=function(t){return arguments.length?(e=t,m):e},m.target=function(e){return arguments.length?(t=e,m):t},m.context=function(e){return arguments.length?(g=null==e?null:e,m):g},m},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n,e("d3-array"),e("d3-path")):"function"==typeof define&&define.amd?define(["exports","d3-array","d3-path"],i):i(r.d3=r.d3||{},r.d3,r.d3)},{"d3-array":7,"d3-path":24}],11:[function(e,t,n){var r,i;r=this,i=function(e){"use strict";function t(){}function n(e,n){var r=new t;if(e instanceof t)e.each(function(e,t){r.set(t,e)});else if(Array.isArray(e)){var i,a=-1,o=e.length;if(null==n)for(;++a<o;)r.set(a,e[a]);else for(;++a<o;)r.set(n(i=e[a],a,e),i)}else if(e)for(var s in e)r.set(s,e[s]);return r}function r(){return{}}function i(e,t,n){e[t]=n}function a(){return n()}function o(e,t,n){e.set(t,n)}function s(){}t.prototype=n.prototype={constructor:t,has:function(e){return"$"+e in this},get:function(e){return this["$"+e]},set:function(e,t){return this["$"+e]=t,this},remove:function(e){var t="$"+e;return t in this&&delete this[t]},clear:function(){for(var e in this)"$"===e[0]&&delete this[e]},keys:function(){var e=[];for(var t in this)"$"===t[0]&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)"$"===t[0]&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)"$"===t[0]&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)"$"===t[0]&&++e;return e},empty:function(){for(var e in this)if("$"===e[0])return!1;return!0},each:function(e){for(var t in this)"$"===t[0]&&e(this[t],t.slice(1),this)}};var l=n.prototype;function u(e,t){var n=new s;if(e instanceof s)e.each(function(e){n.add(e)});else if(e){var r=-1,i=e.length;if(null==t)for(;++r<i;)n.add(e[r]);else for(;++r<i;)n.add(t(e[r],r,e))}return n}s.prototype=u.prototype={constructor:s,has:l.has,add:function(e){return this["$"+(e+="")]=e,this},remove:l.remove,clear:l.clear,values:l.keys,size:l.size,empty:l.empty,each:l.each},e.nest=function(){var e,t,s,l=[],u=[];function c(r,i,a,o){if(i>=l.length)return null!=e&&r.sort(e),null!=t?t(r):r;for(var s,u,f,d=-1,h=r.length,p=l[i++],v=n(),g=a();++d<h;)(f=v.get(s=p(u=r[d])+""))?f.push(u):v.set(s,[u]);return v.each(function(e,t){o(g,t,c(e,i,a,o))}),g}return s={object:function(e){return c(e,0,r,i)},map:function(e){return c(e,0,a,o)},entries:function(e){return function e(n,r){if(++r>l.length)return n;var i,a=u[r-1];return null!=t&&r>=l.length?i=n.entries():(i=[],n.each(function(t,n){i.push({key:n,values:e(t,r)})})),null!=a?i.sort(function(e,t){return a(e.key,t.key)}):i}(c(e,0,a,o),0)},key:function(e){return l.push(e),s},sortKeys:function(e){return u[l.length-1]=e,s},sortValues:function(t){return e=t,s},rollup:function(e){return t=e,s}}},e.set=u,e.map=n,e.keys=function(e){var t=[];for(var n in e)t.push(n);return t},e.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},e.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],12:[function(e,t,n){var r,i;r=this,i=function(e){"use strict";function t(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function n(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function r(){}var i="\\s*([+-]?\\d+)\\s*",a="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",o="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",s=/^#([0-9a-f]{3})$/,l=/^#([0-9a-f]{6})$/,u=new RegExp("^rgb\\("+[i,i,i]+"\\)$"),c=new RegExp("^rgb\\("+[o,o,o]+"\\)$"),f=new RegExp("^rgba\\("+[i,i,i,a]+"\\)$"),d=new RegExp("^rgba\\("+[o,o,o,a]+"\\)$"),h=new RegExp("^hsl\\("+[a,o,o]+"\\)$"),p=new RegExp("^hsla\\("+[a,o,o,a]+"\\)$"),v={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function g(){return this.rgb().formatHex()}function m(){return this.rgb().formatRgb()}function y(e){var t;return e=(e+"").trim().toLowerCase(),(t=s.exec(e))?new j((t=parseInt(t[1],16))>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):(t=l.exec(e))?b(parseInt(t[1],16)):(t=u.exec(e))?new j(t[1],t[2],t[3],1):(t=c.exec(e))?new j(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=f.exec(e))?x(t[1],t[2],t[3],t[4]):(t=d.exec(e))?x(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=h.exec(e))?A(t[1],t[2]/100,t[3]/100,1):(t=p.exec(e))?A(t[1],t[2]/100,t[3]/100,t[4]):v.hasOwnProperty(e)?b(v[e]):"transparent"===e?new j(NaN,NaN,NaN,0):null}function b(e){return new j(e>>16&255,e>>8&255,255&e,1)}function x(e,t,n,r){return r<=0&&(e=t=n=NaN),new j(e,t,n,r)}function _(e){return e instanceof r||(e=y(e)),e?new j((e=e.rgb()).r,e.g,e.b,e.opacity):new j}function w(e,t,n,r){return 1===arguments.length?_(e):new j(e,t,n,null==r?1:r)}function j(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function k(){return"#"+M(this.r)+M(this.g)+M(this.b)}function z(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function M(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function A(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new O(e,t,n,r)}function E(e){if(e instanceof O)return new O(e.h,e.s,e.l,e.opacity);if(e instanceof r||(e=y(e)),!e)return new O;if(e instanceof O)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,a=Math.min(t,n,i),o=Math.max(t,n,i),s=NaN,l=o-a,u=(o+a)/2;return l?(s=t===o?(n-i)/l+6*(n<i):n===o?(i-t)/l+2:(t-n)/l+4,l/=u<.5?o+a:2-o-a,s*=60):l=u>0&&u<1?0:s,new O(s,l,u,e.opacity)}function S(e,t,n,r){return 1===arguments.length?E(e):new O(e,t,n,null==r?1:r)}function O(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function T(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}t(r,y,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:g,formatHex:g,formatHsl:function(){return E(this).formatHsl()},formatRgb:m,toString:m}),t(j,w,n(r,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new j(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new j(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:k,formatHex:k,formatRgb:z,toString:z})),t(O,S,n(r,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new O(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new O(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new j(T(e>=240?e-240:e+120,i,r),T(e,i,r),T(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var C=Math.PI/180,N=180/Math.PI,P=.96422,F=1,q=.82521,B=4/29,D=6/29,I=3*D*D,R=D*D*D;function L(e){if(e instanceof V)return new V(e.l,e.a,e.b,e.opacity);if(e instanceof Z)return $(e);e instanceof j||(e=_(e));var t,n,r=X(e.r),i=X(e.g),a=X(e.b),o=Y((.2225045*r+.7168786*i+.0606169*a)/F);return r===i&&i===a?t=n=o:(t=Y((.4360747*r+.3850649*i+.1430804*a)/P),n=Y((.0139322*r+.0971045*i+.7141733*a)/q)),new V(116*o-16,500*(t-o),200*(o-n),e.opacity)}function U(e,t,n,r){return 1===arguments.length?L(e):new V(e,t,n,null==r?1:r)}function V(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function Y(e){return e>R?Math.pow(e,1/3):e/I+B}function H(e){return e>D?e*e*e:I*(e-B)}function G(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function X(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function W(e){if(e instanceof Z)return new Z(e.h,e.c,e.l,e.opacity);if(e instanceof V||(e=L(e)),0===e.a&&0===e.b)return new Z(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*N;return new Z(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Q(e,t,n,r){return 1===arguments.length?W(e):new Z(e,t,n,null==r?1:r)}function Z(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function $(e){if(isNaN(e.h))return new V(e.l,0,0,e.opacity);var t=e.h*C;return new V(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}t(V,U,n(r,{brighter:function(e){return new V(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new V(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new j(G(3.1338561*(t=P*H(t))-1.6168667*(e=F*H(e))-.4906146*(n=q*H(n))),G(-.9787684*t+1.9161415*e+.033454*n),G(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),t(Z,Q,n(r,{brighter:function(e){return new Z(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new Z(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return $(this).rgb()}}));var J=-.14861,K=1.78277,ee=-.29227,te=-.90649,ne=1.97294,re=ne*te,ie=ne*K,ae=K*ee-te*J;function oe(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof se)return new se(e.h,e.s,e.l,e.opacity);e instanceof j||(e=_(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(ae*r+re*t-ie*n)/(ae+re-ie),a=r-i,o=(ne*(n-i)-ee*a)/te,s=Math.sqrt(o*o+a*a)/(ne*i*(1-i)),l=s?Math.atan2(o,a)*N-120:NaN;return new se(l<0?l+360:l,s,i,e.opacity)}(e):new se(e,t,n,null==r?1:r)}function se(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}t(se,oe,n(r,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new se(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new se(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*C,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new j(255*(t+n*(J*r+K*i)),255*(t+n*(ee*r+te*i)),255*(t+n*(ne*r)),this.opacity)}})),e.color=y,e.cubehelix=oe,e.gray=function(e,t){return new V(e,0,0,null==t?1:t)},e.hcl=Q,e.hsl=S,e.lab=U,e.lch=function(e,t,n,r){return 1===arguments.length?W(e):new Z(n,t,e,null==r?1:r)},e.rgb=w,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i((r=r||self).d3=r.d3||{})},{}],13:[function(e,t,n){var r,i;r=this,i=function(e,t){"use strict";var n=Array.prototype.slice;function r(e,t){return e-t}function i(e){return function(){return e}}function a(e,t){for(var n,r=-1,i=t.length;++r<i;)if(n=o(e,t[r]))return n;return 0}function o(e,t){for(var n=t[0],r=t[1],i=-1,a=0,o=e.length,l=o-1;a<o;l=a++){var u=e[a],c=u[0],f=u[1],d=e[l],h=d[0],p=d[1];if(s(u,d,t))return 0;f>r!=p>r&&n<(h-c)*(r-f)/(p-f)+c&&(i=-i)}return i}function s(e,t,n){var r,i,a,o;return function(e,t,n){return(t[0]-e[0])*(n[1]-e[1])==(n[0]-e[0])*(t[1]-e[1])}(e,t,n)&&(i=e[r=+(e[0]===t[0])],a=n[r],o=t[r],i<=a&&a<=o||o<=a&&a<=i)}function l(){}var u=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function c(){var e=1,o=1,s=t.thresholdSturges,c=p;function f(e){var n=s(e);if(Array.isArray(n))n=n.slice().sort(r);else{var i=t.extent(e),a=i[0],o=i[1];n=t.tickStep(a,o,n),n=t.range(Math.floor(a/n)*n,Math.floor(o/n)*n,n)}return n.map(function(t){return d(e,t)})}function d(t,n){var r=[],i=[];return function(t,n,r){var i,a,s,l,c,f,d=new Array,p=new Array;i=a=-1,l=t[0]>=n,u[l<<1].forEach(v);for(;++i<e-1;)s=l,l=t[i+1]>=n,u[s|l<<1].forEach(v);u[l<<0].forEach(v);for(;++a<o-1;){for(i=-1,l=t[a*e+e]>=n,c=t[a*e]>=n,u[l<<1|c<<2].forEach(v);++i<e-1;)s=l,l=t[a*e+e+i+1]>=n,f=c,c=t[a*e+i+1]>=n,u[s|l<<1|c<<2|f<<3].forEach(v);u[l|c<<3].forEach(v)}i=-1,c=t[a*e]>=n,u[c<<2].forEach(v);for(;++i<e-1;)f=c,c=t[a*e+i+1]>=n,u[c<<2|f<<3].forEach(v);function v(e){var t,n,o=[e[0][0]+i,e[0][1]+a],s=[e[1][0]+i,e[1][1]+a],l=h(o),u=h(s);(t=p[l])?(n=d[u])?(delete p[t.end],delete d[n.start],t===n?(t.ring.push(s),r(t.ring)):d[t.start]=p[n.end]={start:t.start,end:n.end,ring:t.ring.concat(n.ring)}):(delete p[t.end],t.ring.push(s),p[t.end=u]=t):(t=d[u])?(n=p[l])?(delete d[t.start],delete p[n.end],t===n?(t.ring.push(s),r(t.ring)):d[n.start]=p[t.end]={start:n.start,end:t.end,ring:n.ring.concat(t.ring)}):(delete d[t.start],t.ring.unshift(o),d[t.start=l]=t):d[l]=p[u]={start:l,end:u,ring:[o,s]}}u[c<<3].forEach(v)}(t,n,function(e){c(e,t,n),function(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}(e)>0?r.push([e]):i.push(e)}),i.forEach(function(e){for(var t,n=0,i=r.length;n<i;++n)if(-1!==a((t=r[n])[0],e))return void t.push(e)}),{type:"MultiPolygon",value:n,coordinates:r}}function h(t){return 2*t[0]+t[1]*(e+1)*4}function p(t,n,r){t.forEach(function(t){var i,a=t[0],s=t[1],l=0|a,u=0|s,c=n[u*e+l];a>0&&a<e&&l===a&&(i=n[u*e+l-1],t[0]=a+(r-i)/(c-i)-.5),s>0&&s<o&&u===s&&(i=n[(u-1)*e+l],t[1]=s+(r-i)/(c-i)-.5)})}return f.contour=d,f.size=function(t){if(!arguments.length)return[e,o];var n=Math.ceil(t[0]),r=Math.ceil(t[1]);if(!(n>0&&r>0))throw new Error("invalid size");return e=n,o=r,f},f.thresholds=function(e){return arguments.length?(s="function"==typeof e?e:Array.isArray(e)?i(n.call(e)):i(e),f):s},f.smooth=function(e){return arguments.length?(c=e?p:l,f):c===p},f}function f(e,t,n){for(var r=e.width,i=e.height,a=1+(n<<1),o=0;o<i;++o)for(var s=0,l=0;s<r+n;++s)s<r&&(l+=e.data[s+o*r]),s>=n&&(s>=a&&(l-=e.data[s-a+o*r]),t.data[s-n+o*r]=l/Math.min(s+1,r-1+a-s,a))}function d(e,t,n){for(var r=e.width,i=e.height,a=1+(n<<1),o=0;o<r;++o)for(var s=0,l=0;s<i+n;++s)s<i&&(l+=e.data[o+s*r]),s>=n&&(s>=a&&(l-=e.data[o+(s-a)*r]),t.data[o+(s-n)*r]=l/Math.min(s+1,i-1+a-s,a))}function h(e){return e[0]}function p(e){return e[1]}function v(){return 1}e.contours=c,e.contourDensity=function(){var e=h,r=p,a=v,o=960,s=500,l=20,u=2,g=3*l,m=o+2*g>>u,y=s+2*g>>u,b=i(20);function x(n){var i=new Float32Array(m*y),o=new Float32Array(m*y);n.forEach(function(t,n,o){var s=+e(t,n,o)+g>>u,l=+r(t,n,o)+g>>u,c=+a(t,n,o);s>=0&&s<m&&l>=0&&l<y&&(i[s+l*m]+=c)}),f({width:m,height:y,data:i},{width:m,height:y,data:o},l>>u),d({width:m,height:y,data:o},{width:m,height:y,data:i},l>>u),f({width:m,height:y,data:i},{width:m,height:y,data:o},l>>u),d({width:m,height:y,data:o},{width:m,height:y,data:i},l>>u),f({width:m,height:y,data:i},{width:m,height:y,data:o},l>>u),d({width:m,height:y,data:o},{width:m,height:y,data:i},l>>u);var s=b(i);if(!Array.isArray(s)){var h=t.max(i);s=t.tickStep(0,h,s),(s=t.range(0,Math.floor(h/s)*s,s)).shift()}return c().thresholds(s).size([m,y])(i).map(_)}function _(e){return e.value*=Math.pow(2,-2*u),e.coordinates.forEach(w),e}function w(e){e.forEach(j)}function j(e){e.forEach(k)}function k(e){e[0]=e[0]*Math.pow(2,u)-g,e[1]=e[1]*Math.pow(2,u)-g}function z(){return m=o+2*(g=3*l)>>u,y=s+2*g>>u,x}return x.x=function(t){return arguments.length?(e="function"==typeof t?t:i(+t),x):e},x.y=function(e){return arguments.length?(r="function"==typeof e?e:i(+e),x):r},x.weight=function(e){return arguments.length?(a="function"==typeof e?e:i(+e),x):a},x.size=function(e){if(!arguments.length)return[o,s];var t=Math.ceil(e[0]),n=Math.ceil(e[1]);if(!(t>=0||t>=0))throw new Error("invalid size");return o=t,s=n,z()},x.cellSize=function(e){if(!arguments.length)return 1<<u;if(!((e=+e)>=1))throw new Error("invalid cell size");return u=Math.floor(Math.log(e)/Math.LN2),z()},x.thresholds=function(e){return arguments.length?(b="function"==typeof e?e:Array.isArray(e)?i(n.call(e)):i(e),x):b},x.bandwidth=function(e){if(!arguments.length)return Math.sqrt(l*(l+1));if(!((e=+e)>=0))throw new Error("invalid bandwidth");return l=Math.round((Math.sqrt(4*e*e+1)-1)/2),z()},x},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n,e("d3-array")):"function"==typeof define&&define.amd?define(["exports","d3-array"],i):i(r.d3=r.d3||{},r.d3)},{"d3-array":7}],14:[function(e,t,n){var r,i;r=this,i=function(e){"use strict";var t={value:function(){}};function n(){for(var e,t=0,n=arguments.length,i={};t<n;++t){if(!(e=arguments[t]+"")||e in i)throw new Error("illegal type: "+e);i[e]=[]}return new r(i)}function r(e){this._=e}function i(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function a(e,n,r){for(var i=0,a=e.length;i<a;++i)if(e[i].name===n){e[i]=t,e=e.slice(0,i).concat(e.slice(i+1));break}return null!=r&&e.push({name:n,value:r}),e}r.prototype=n.prototype={constructor:r,on:function(e,t){var n,r,o=this._,s=(r=o,(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),l=-1,u=s.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++l<u;)if(n=(e=s[l]).type)o[n]=a(o[n],e.name,t);else if(null==t)for(n in o)o[n]=a(o[n],e.name,null);return this}for(;++l<u;)if((n=(e=s[l]).type)&&(n=i(o[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new r(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,n=(r=this._[e]).length;a<n;++a)r[a].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}},e.dispatch=n,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],15:[function(e,t,n){var r,i;r=this,i=function(e,t,n){"use strict";function r(){n.event.stopImmediatePropagation()}function i(){n.event.preventDefault(),n.event.stopImmediatePropagation()}function a(e){var t=e.document.documentElement,r=n.select(e).on("dragstart.drag",i,!0);"onselectstart"in t?r.on("selectstart.drag",i,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function o(e,t){var r=e.document.documentElement,a=n.select(e).on("dragstart.drag",null);t&&(a.on("click.drag",i,!0),setTimeout(function(){a.on("click.drag",null)},0)),"onselectstart"in r?a.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}function s(e){return function(){return e}}function l(e,t,n,r,i,a,o,s,l,u){this.target=e,this.type=t,this.subject=n,this.identifier=r,this.active=i,this.x=a,this.y=o,this.dx=s,this.dy=l,this._=u}function u(){return!n.event.ctrlKey&&!n.event.button}function c(){return this.parentNode}function f(e){return null==e?{x:n.event.x,y:n.event.y}:e}function d(){return navigator.maxTouchPoints||"ontouchstart"in this}l.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e},e.drag=function(){var e,h,p,v,g=u,m=c,y=f,b=d,x={},_=t.dispatch("start","drag","end"),w=0,j=0;function k(e){e.on("mousedown.drag",z).filter(b).on("touchstart.drag",E).on("touchmove.drag",S).on("touchend.drag touchcancel.drag",O).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function z(){if(!v&&g.apply(this,arguments)){var t=T("mouse",m.apply(this,arguments),n.mouse,this,arguments);t&&(n.select(n.event.view).on("mousemove.drag",M,!0).on("mouseup.drag",A,!0),a(n.event.view),r(),p=!1,e=n.event.clientX,h=n.event.clientY,t("start"))}}function M(){if(i(),!p){var t=n.event.clientX-e,r=n.event.clientY-h;p=t*t+r*r>j}x.mouse("drag")}function A(){n.select(n.event.view).on("mousemove.drag mouseup.drag",null),o(n.event.view,p),i(),x.mouse("end")}function E(){if(g.apply(this,arguments)){var e,t,i=n.event.changedTouches,a=m.apply(this,arguments),o=i.length;for(e=0;e<o;++e)(t=T(i[e].identifier,a,n.touch,this,arguments))&&(r(),t("start"))}}function S(){var e,t,r=n.event.changedTouches,a=r.length;for(e=0;e<a;++e)(t=x[r[e].identifier])&&(i(),t("drag"))}function O(){var e,t,i=n.event.changedTouches,a=i.length;for(v&&clearTimeout(v),v=setTimeout(function(){v=null},500),e=0;e<a;++e)(t=x[i[e].identifier])&&(r(),t("end"))}function T(e,t,r,i,a){var o,s,u,c=r(t,e),f=_.copy();if(n.customEvent(new l(k,"beforestart",o,e,w,c[0],c[1],0,0,f),function(){return null!=(n.event.subject=o=y.apply(i,a))&&(s=o.x-c[0]||0,u=o.y-c[1]||0,!0)}))return function d(h){var p,v=c;switch(h){case"start":x[e]=d,p=w++;break;case"end":delete x[e],--w;case"drag":c=r(t,e),p=w}n.customEvent(new l(k,h,o,e,p,c[0]+s,c[1]+u,c[0]-v[0],c[1]-v[1],f),f.apply,f,[h,i,a])}}return k.filter=function(e){return arguments.length?(g="function"==typeof e?e:s(!!e),k):g},k.container=function(e){return arguments.length?(m="function"==typeof e?e:s(e),k):m},k.subject=function(e){return arguments.length?(y="function"==typeof e?e:s(e),k):y},k.touchable=function(e){return arguments.length?(b="function"==typeof e?e:s(!!e),k):b},k.on=function(){var e=_.on.apply(_,arguments);return e===_?k:e},k.clickDistance=function(e){return arguments.length?(j=(e=+e)*e,k):Math.sqrt(j)},k},e.dragDisable=a,e.dragEnable=o,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n,e("d3-dispatch"),e("d3-selection")):"function"==typeof define&&define.amd?define(["exports","d3-dispatch","d3-selection"],i):i((r=r||self).d3=r.d3||{},r.d3,r.d3)},{"d3-dispatch":14,"d3-selection":30}],16:[function(e,t,n){var r,i;r=this,i=function(e){"use strict";var t={},n={},r=34,i=10,a=13;function o(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}")}function s(e){var t=Object.create(null),n=[];return e.forEach(function(e){for(var r in e)r in t||n.push(t[r]=r)}),n}function l(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function u(e){var t,n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),a=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":((t=e.getUTCFullYear())<0?"-"+l(-t,6):t>9999?"+"+l(t,6):l(t,4))+"-"+l(e.getUTCMonth()+1,2)+"-"+l(e.getUTCDate(),2)+(a?"T"+l(n,2)+":"+l(r,2)+":"+l(i,2)+"."+l(a,3)+"Z":i?"T"+l(n,2)+":"+l(r,2)+":"+l(i,2)+"Z":r||n?"T"+l(n,2)+":"+l(r,2)+"Z":"")}function c(e){var l=new RegExp('["'+e+"\n\r]"),c=e.charCodeAt(0);function f(e,o){var s,l=[],u=e.length,f=0,d=0,h=u<=0,p=!1;function v(){if(h)return n;if(p)return p=!1,t;var o,s,l=f;if(e.charCodeAt(l)===r){for(;f++<u&&e.charCodeAt(f)!==r||e.charCodeAt(++f)===r;);return(o=f)>=u?h=!0:(s=e.charCodeAt(f++))===i?p=!0:s===a&&(p=!0,e.charCodeAt(f)===i&&++f),e.slice(l+1,o-1).replace(/""/g,'"')}for(;f<u;){if((s=e.charCodeAt(o=f++))===i)p=!0;else if(s===a)p=!0,e.charCodeAt(f)===i&&++f;else if(s!==c)continue;return e.slice(l,o)}return h=!0,e.slice(l,u)}for(e.charCodeAt(u-1)===i&&--u,e.charCodeAt(u-1)===a&&--u;(s=v())!==n;){for(var g=[];s!==t&&s!==n;)g.push(s),s=v();o&&null==(g=o(g,d++))||l.push(g)}return l}function d(t,n){return t.map(function(t){return n.map(function(e){return p(t[e])}).join(e)})}function h(t){return t.map(p).join(e)}function p(e){return null==e?"":e instanceof Date?u(e):l.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,r,i=f(e,function(e,i){if(n)return n(e,i-1);r=e,n=t?function(e,t){var n=o(e);return function(r,i){return t(n(r),i,e)}}(e,t):o(e)});return i.columns=r||[],i},parseRows:f,format:function(t,n){return null==n&&(n=s(t)),[n.map(p).join(e)].concat(d(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=s(e)),d(e,t).join("\n")},formatRows:function(e){return e.map(h).join("\n")}}}var f=c(","),d=f.parse,h=f.parseRows,p=f.format,v=f.formatBody,g=f.formatRows,m=c("\t"),y=m.parse,b=m.parseRows,x=m.format,_=m.formatBody,w=m.formatRows;e.dsvFormat=c,e.csvParse=d,e.csvParseRows=h,e.csvFormat=p,e.csvFormatBody=v,e.csvFormatRows=g,e.tsvParse=y,e.tsvParseRows=b,e.tsvFormat=x,e.tsvFormatBody=_,e.tsvFormatRows=w,e.autoType=function(e){for(var t in e){var n,r=e[t].trim();if(r)if("true"===r)r=!0;else if("false"===r)r=!1;else if("NaN"===r)r=NaN;else if(isNaN(n=+r)){if(!/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/.test(r))continue;r=new Date(r)}else r=n;else r=null;e[t]=r}return e},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],17:[function(e,t,n){var r,i;r=this,i=function(e){"use strict";function t(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function n(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var r=function e(t){function n(e){return Math.pow(e,t)}return t=+t,n.exponent=e,n}(3),i=function e(t){function n(e){return 1-Math.pow(1-e,t)}return t=+t,n.exponent=e,n}(3),a=function e(t){function n(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,n.exponent=e,n}(3),o=Math.PI,s=o/2;function l(e){return(1-Math.cos(o*e))/2}function u(e){return((e*=2)<=1?Math.pow(2,10*e-10):2-Math.pow(2,10-10*e))/2}function c(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var f=4/11,d=6/11,h=8/11,p=.75,v=9/11,g=10/11,m=.9375,y=21/22,b=63/64,x=1/f/f;function _(e){return(e=+e)<f?x*e*e:e<h?x*(e-=d)*e+p:e<g?x*(e-=v)*e+m:x*(e-=y)*e+b}var w=function e(t){function n(e){return e*e*((t+1)*e-t)}return t=+t,n.overshoot=e,n}(1.70158),j=function e(t){function n(e){return--e*e*((t+1)*e+t)+1}return t=+t,n.overshoot=e,n}(1.70158),k=function e(t){function n(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,n.overshoot=e,n}(1.70158),z=2*Math.PI,M=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=z);function i(e){return t*Math.pow(2,10*--e)*Math.sin((r-e)/n)}return i.amplitude=function(t){return e(t,n*z)},i.period=function(n){return e(t,n)},i}(1,.3),A=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=z);function i(e){return 1-t*Math.pow(2,-10*(e=+e))*Math.sin((e+r)/n)}return i.amplitude=function(t){return e(t,n*z)},i.period=function(n){return e(t,n)},i}(1,.3),E=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=z);function i(e){return((e=2*e-1)<0?t*Math.pow(2,10*e)*Math.sin((r-e)/n):2-t*Math.pow(2,-10*e)*Math.sin((r+e)/n))/2}return i.amplitude=function(t){return e(t,n*z)},i.period=function(n){return e(t,n)},i}(1,.3);e.easeLinear=function(e){return+e},e.easeQuad=t,e.easeQuadIn=function(e){return e*e},e.easeQuadOut=function(e){return e*(2-e)},e.easeQuadInOut=t,e.easeCubic=n,e.easeCubicIn=function(e){return e*e*e},e.easeCubicOut=function(e){return--e*e*e+1},e.easeCubicInOut=n,e.easePoly=a,e.easePolyIn=r,e.easePolyOut=i,e.easePolyInOut=a,e.easeSin=l,e.easeSinIn=function(e){return 1-Math.cos(e*s)},e.easeSinOut=function(e){return Math.sin(e*s)},e.easeSinInOut=l,e.easeExp=u,e.easeExpIn=function(e){return Math.pow(2,10*e-10)},e.easeExpOut=function(e){return 1-Math.pow(2,-10*e)},e.easeExpInOut=u,e.easeCircle=c,e.easeCircleIn=function(e){return 1-Math.sqrt(1-e*e)},e.easeCircleOut=function(e){return Math.sqrt(1- --e*e)},e.easeCircleInOut=c,e.easeBounce=_,e.easeBounceIn=function(e){return 1-_(1-e)},e.easeBounceOut=_,e.easeBounceInOut=function(e){return((e*=2)<=1?1-_(1-e):_(e-1)+1)/2},e.easeBack=k,e.easeBackIn=w,e.easeBackOut=j,e.easeBackInOut=k,e.easeElastic=A,e.easeElasticIn=M,e.easeElasticOut=A,e.easeElasticInOut=E,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],18:[function(e,t,n){var r,i;r=this,i=function(e,t){"use strict";function n(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.blob()}function r(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.arrayBuffer()}function i(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function a(e,t){return fetch(e,t).then(i)}function o(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),a(t,n).then(function(t){return e(t,r)})}}var s=o(t.csvParse),l=o(t.tsvParse);function u(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.json()}function c(e){return function(t,n){return a(t,n).then(function(t){return(new DOMParser).parseFromString(t,e)})}}var f=c("application/xml"),d=c("text/html"),h=c("image/svg+xml");e.blob=function(e,t){return fetch(e,t).then(n)},e.buffer=function(e,t){return fetch(e,t).then(r)},e.dsv=function(e,n,r,i){3===arguments.length&&"function"==typeof r&&(i=r,r=void 0);var o=t.dsvFormat(e);return a(n,r).then(function(e){return o.parse(e,i)})},e.csv=s,e.tsv=l,e.image=function(e,t){return new Promise(function(n,r){var i=new Image;for(var a in t)i[a]=t[a];i.onerror=r,i.onload=function(){n(i)},i.src=e})},e.json=function(e,t){return fetch(e,t).then(u)},e.text=a,e.xml=f,e.html=d,e.svg=h,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n,e("d3-dsv")):"function"==typeof define&&define.amd?define(["exports","d3-dsv"],i):i(r.d3=r.d3||{},r.d3)},{"d3-dsv":16}],19:[function(e,t,n){var r,i;r=this,i=function(e,t,n,r,i){"use strict";function a(e){return function(){return e}}function o(){return 1e-6*(Math.random()-.5)}function s(e){return e.x+e.vx}function l(e){return e.y+e.vy}function u(e){return e.index}function c(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function f(e){return e.x}function d(e){return e.y}var h=10,p=Math.PI*(3-Math.sqrt(5));e.forceCenter=function(e,t){var n;function r(){var r,i,a=n.length,o=0,s=0;for(r=0;r<a;++r)o+=(i=n[r]).x,s+=i.y;for(o=o/a-e,s=s/a-t,r=0;r<a;++r)(i=n[r]).x-=o,i.y-=s}return null==e&&(e=0),null==t&&(t=0),r.initialize=function(e){n=e},r.x=function(t){return arguments.length?(e=+t,r):e},r.y=function(e){return arguments.length?(t=+e,r):t},r},e.forceCollide=function(e){var n,r,i=1,u=1;function c(){for(var e,a,c,d,h,p,v,g=n.length,m=0;m<u;++m)for(a=t.quadtree(n,s,l).visitAfter(f),e=0;e<g;++e)c=n[e],p=r[c.index],v=p*p,d=c.x+c.vx,h=c.y+c.vy,a.visit(y);function y(e,t,n,r,a){var s=e.data,l=e.r,u=p+l;if(!s)return t>d+u||r<d-u||n>h+u||a<h-u;if(s.index>c.index){var f=d-s.x-s.vx,g=h-s.y-s.vy,m=f*f+g*g;m<u*u&&(0===f&&(m+=(f=o())*f),0===g&&(m+=(g=o())*g),m=(u-(m=Math.sqrt(m)))/m*i,c.vx+=(f*=m)*(u=(l*=l)/(v+l)),c.vy+=(g*=m)*u,s.vx-=f*(u=1-u),s.vy-=g*u)}}}function f(e){if(e.data)return e.r=r[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function d(){if(n){var t,i,a=n.length;for(r=new Array(a),t=0;t<a;++t)i=n[t],r[i.index]=+e(i,t,n)}}return"function"!=typeof e&&(e=a(null==e?1:+e)),c.initialize=function(e){n=e,d()},c.iterations=function(e){return arguments.length?(u=+e,c):u},c.strength=function(e){return arguments.length?(i=+e,c):i},c.radius=function(t){return arguments.length?(e="function"==typeof t?t:a(+t),d(),c):e},c},e.forceLink=function(e){var t,r,i,s,l,f=u,d=function(e){return 1/Math.min(s[e.source.index],s[e.target.index])},h=a(30),p=1;function v(n){for(var i=0,a=e.length;i<p;++i)for(var s,u,c,f,d,h,v,g=0;g<a;++g)u=(s=e[g]).source,f=(c=s.target).x+c.vx-u.x-u.vx||o(),d=c.y+c.vy-u.y-u.vy||o(),f*=h=((h=Math.sqrt(f*f+d*d))-r[g])/h*n*t[g],d*=h,c.vx-=f*(v=l[g]),c.vy-=d*v,u.vx+=f*(v=1-v),u.vy+=d*v}function g(){if(i){var a,o,u=i.length,d=e.length,h=n.map(i,f);for(a=0,s=new Array(u);a<d;++a)(o=e[a]).index=a,"object"!=typeof o.source&&(o.source=c(h,o.source)),"object"!=typeof o.target&&(o.target=c(h,o.target)),s[o.source.index]=(s[o.source.index]||0)+1,s[o.target.index]=(s[o.target.index]||0)+1;for(a=0,l=new Array(d);a<d;++a)o=e[a],l[a]=s[o.source.index]/(s[o.source.index]+s[o.target.index]);t=new Array(d),m(),r=new Array(d),y()}}function m(){if(i)for(var n=0,r=e.length;n<r;++n)t[n]=+d(e[n],n,e)}function y(){if(i)for(var t=0,n=e.length;t<n;++t)r[t]=+h(e[t],t,e)}return null==e&&(e=[]),v.initialize=function(e){i=e,g()},v.links=function(t){return arguments.length?(e=t,g(),v):e},v.id=function(e){return arguments.length?(f=e,v):f},v.iterations=function(e){return arguments.length?(p=+e,v):p},v.strength=function(e){return arguments.length?(d="function"==typeof e?e:a(+e),m(),v):d},v.distance=function(e){return arguments.length?(h="function"==typeof e?e:a(+e),y(),v):h},v},e.forceManyBody=function(){var e,n,r,i,s=a(-30),l=1,u=1/0,c=.81;function h(i){var a,o=e.length,s=t.quadtree(e,f,d).visitAfter(v);for(r=i,a=0;a<o;++a)n=e[a],s.visit(g)}function p(){if(e){var t,n,r=e.length;for(i=new Array(r),t=0;t<r;++t)n=e[t],i[n.index]=+s(n,t,e)}}function v(e){var t,n,r,a,o,s=0,l=0;if(e.length){for(r=a=o=0;o<4;++o)(t=e[o])&&(n=Math.abs(t.value))&&(s+=t.value,l+=n,r+=n*t.x,a+=n*t.y);e.x=r/l,e.y=a/l}else{(t=e).x=t.data.x,t.y=t.data.y;do{s+=i[t.data.index]}while(t=t.next)}e.value=s}function g(e,t,a,s){if(!e.value)return!0;var f=e.x-n.x,d=e.y-n.y,h=s-t,p=f*f+d*d;if(h*h/c<p)return p<u&&(0===f&&(p+=(f=o())*f),0===d&&(p+=(d=o())*d),p<l&&(p=Math.sqrt(l*p)),n.vx+=f*e.value*r/p,n.vy+=d*e.value*r/p),!0;if(!(e.length||p>=u)){(e.data!==n||e.next)&&(0===f&&(p+=(f=o())*f),0===d&&(p+=(d=o())*d),p<l&&(p=Math.sqrt(l*p)));do{e.data!==n&&(h=i[e.data.index]*r/p,n.vx+=f*h,n.vy+=d*h)}while(e=e.next)}}return h.initialize=function(t){e=t,p()},h.strength=function(e){return arguments.length?(s="function"==typeof e?e:a(+e),p(),h):s},h.distanceMin=function(e){return arguments.length?(l=e*e,h):Math.sqrt(l)},h.distanceMax=function(e){return arguments.length?(u=e*e,h):Math.sqrt(u)},h.theta=function(e){return arguments.length?(c=e*e,h):Math.sqrt(c)},h},e.forceRadial=function(e,t,n){var r,i,o,s=a(.1);function l(e){for(var a=0,s=r.length;a<s;++a){var l=r[a],u=l.x-t||1e-6,c=l.y-n||1e-6,f=Math.sqrt(u*u+c*c),d=(o[a]-f)*i[a]*e/f;l.vx+=u*d,l.vy+=c*d}}function u(){if(r){var t,n=r.length;for(i=new Array(n),o=new Array(n),t=0;t<n;++t)o[t]=+e(r[t],t,r),i[t]=isNaN(o[t])?0:+s(r[t],t,r)}}return"function"!=typeof e&&(e=a(+e)),null==t&&(t=0),null==n&&(n=0),l.initialize=function(e){r=e,u()},l.strength=function(e){return arguments.length?(s="function"==typeof e?e:a(+e),u(),l):s},l.radius=function(t){return arguments.length?(e="function"==typeof t?t:a(+t),u(),l):e},l.x=function(e){return arguments.length?(t=+e,l):t},l.y=function(e){return arguments.length?(n=+e,l):n},l},e.forceSimulation=function(e){var t,a=1,o=.001,s=1-Math.pow(o,1/300),l=0,u=.6,c=n.map(),f=i.timer(v),d=r.dispatch("tick","end");function v(){g(),d.call("tick",t),a<o&&(f.stop(),d.call("end",t))}function g(n){var r,i,o=e.length;void 0===n&&(n=1);for(var f=0;f<n;++f)for(a+=(l-a)*s,c.each(function(e){e(a)}),r=0;r<o;++r)null==(i=e[r]).fx?i.x+=i.vx*=u:(i.x=i.fx,i.vx=0),null==i.fy?i.y+=i.vy*=u:(i.y=i.fy,i.vy=0);return t}function m(){for(var t,n=0,r=e.length;n<r;++n){if((t=e[n]).index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var i=h*Math.sqrt(n),a=n*p;t.x=i*Math.cos(a),t.y=i*Math.sin(a)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function y(t){return t.initialize&&t.initialize(e),t}return null==e&&(e=[]),m(),t={tick:g,restart:function(){return f.restart(v),t},stop:function(){return f.stop(),t},nodes:function(n){return arguments.length?(e=n,m(),c.each(y),t):e},alpha:function(e){return arguments.length?(a=+e,t):a},alphaMin:function(e){return arguments.length?(o=+e,t):o},alphaDecay:function(e){return arguments.length?(s=+e,t):+s},alphaTarget:function(e){return arguments.length?(l=+e,t):l},velocityDecay:function(e){return arguments.length?(u=1-e,t):1-u},force:function(e,n){return arguments.length>1?(null==n?c.remove(e):c.set(e,y(n)),t):c.get(e)},find:function(t,n,r){var i,a,o,s,l,u=0,c=e.length;for(null==r?r=1/0:r*=r,u=0;u<c;++u)(o=(i=t-(s=e[u]).x)*i+(a=n-s.y)*a)<r&&(l=s,r=o);return l},on:function(e,n){return arguments.length>1?(d.on(e,n),t):d.on(e)}}},e.forceX=function(e){var t,n,r,i=a(.1);function o(e){for(var i,a=0,o=t.length;a<o;++a)(i=t[a]).vx+=(r[a]-i.x)*n[a]*e}function s(){if(t){var a,o=t.length;for(n=new Array(o),r=new Array(o),a=0;a<o;++a)n[a]=isNaN(r[a]=+e(t[a],a,t))?0:+i(t[a],a,t)}}return"function"!=typeof e&&(e=a(null==e?0:+e)),o.initialize=function(e){t=e,s()},o.strength=function(e){return arguments.length?(i="function"==typeof e?e:a(+e),s(),o):i},o.x=function(t){return arguments.length?(e="function"==typeof t?t:a(+t),s(),o):e},o},e.forceY=function(e){var t,n,r,i=a(.1);function o(e){for(var i,a=0,o=t.length;a<o;++a)(i=t[a]).vy+=(r[a]-i.y)*n[a]*e}function s(){if(t){var a,o=t.length;for(n=new Array(o),r=new Array(o),a=0;a<o;++a)n[a]=isNaN(r[a]=+e(t[a],a,t))?0:+i(t[a],a,t)}}return"function"!=typeof e&&(e=a(null==e?0:+e)),o.initialize=function(e){t=e,s()},o.strength=function(e){return arguments.length?(i="function"==typeof e?e:a(+e),s(),o):i},o.y=function(t){return arguments.length?(e="function"==typeof t?t:a(+t),s(),o):e},o},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n,e("d3-quadtree"),e("d3-collection"),e("d3-dispatch"),e("d3-timer")):"function"==typeof define&&define.amd?define(["exports","d3-quadtree","d3-collection","d3-dispatch","d3-timer"],i):i(r.d3=r.d3||{},r.d3,r.d3,r.d3,r.d3)},{"d3-collection":11,"d3-dispatch":14,"d3-quadtree":26,"d3-timer":34}],20:[function(e,t,n){var r,i;r=this,i=function(e){"use strict";function t(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function n(e){return(e=t(Math.abs(e)))?e[1]:NaN}var r,i=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function a(e){return new o(e)}function o(e){if(!(t=i.exec(e)))throw new Error("invalid format: "+e);var t;this.fill=t[1]||" ",this.align=t[2]||">",this.sign=t[3]||"-",this.symbol=t[4]||"",this.zero=!!t[5],this.width=t[6]&&+t[6],this.comma=!!t[7],this.precision=t[8]&&+t[8].slice(1),this.trim=!!t[9],this.type=t[10]||""}function s(e,n){var r=t(e,n);if(!r)return e+"";var i=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")}a.prototype=o.prototype,o.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var l={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return s(100*e,t)},r:s,s:function(e,n){var i=t(e,n);if(!i)return e+"";var a=i[0],o=i[1],s=o-(r=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,l=a.length;return s===l?a:s>l?a+new Array(s-l+1).join("0"):s>0?a.slice(0,s)+"."+a.slice(s):"0."+new Array(1-s).join("0")+t(e,Math.max(0,n+s-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function u(e){return e}var c,f=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function d(e){var t,i,o=e.grouping&&e.thousands?(t=e.grouping,i=e.thousands,function(e,n){for(var r=e.length,a=[],o=0,s=t[0],l=0;r>0&&s>0&&(l+s+1>n&&(s=Math.max(1,n-l)),a.push(e.substring(r-=s,r+s)),!((l+=s+1)>n));)s=t[o=(o+1)%t.length];return a.reverse().join(i)}):u,s=e.currency,c=e.decimal,d=e.numerals?function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(e.numerals):u,h=e.percent||"%";function p(e){var t=(e=a(e)).fill,n=e.align,i=e.sign,u=e.symbol,p=e.zero,v=e.width,g=e.comma,m=e.precision,y=e.trim,b=e.type;"n"===b?(g=!0,b="g"):l[b]||(null==m&&(m=12),y=!0,b="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var x="$"===u?s[0]:"#"===u&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",_="$"===u?s[1]:/[%p]/.test(b)?h:"",w=l[b],j=/[defgprs%]/.test(b);function k(e){var a,s,l,u=x,h=_;if("c"===b)h=w(e)+h,e="";else{var k=(e=+e)<0;if(e=w(Math.abs(e),m),y&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(i>0){if(!+e[r])break e;i=0}}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),k&&0==+e&&(k=!1),u=(k?"("===i?i:"-":"-"===i||"("===i?"":i)+u,h=("s"===b?f[8+r/3]:"")+h+(k&&"("===i?")":""),j)for(a=-1,s=e.length;++a<s;)if(48>(l=e.charCodeAt(a))||l>57){h=(46===l?c+e.slice(a+1):e.slice(a))+h,e=e.slice(0,a);break}}g&&!p&&(e=o(e,1/0));var z=u.length+e.length+h.length,M=z<v?new Array(v-z+1).join(t):"";switch(g&&p&&(e=o(M+e,M.length?v-h.length:1/0),M=""),n){case"<":e=u+e+h+M;break;case"=":e=u+M+e+h;break;case"^":e=M.slice(0,z=M.length>>1)+u+e+h+M.slice(z);break;default:e=M+u+e+h}return d(e)}return m=null==m?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),k.toString=function(){return e+""},k}return{format:p,formatPrefix:function(e,t){var r=p(((e=a(e)).type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor(n(t)/3))),o=Math.pow(10,-i),s=f[8+i/3];return function(e){return r(o*e)+s}}}}function h(t){return c=d(t),e.format=c.format,e.formatPrefix=c.formatPrefix,c}h({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),e.formatDefaultLocale=h,e.formatLocale=d,e.formatSpecifier=a,e.precisionFixed=function(e){return Math.max(0,-n(Math.abs(e)))},e.precisionPrefix=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(n(t)/3)))-n(Math.abs(e)))},e.precisionRound=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,n(t)-n(e))+1},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],21:[function(e,t,n){var r,i;r=this,i=function(e,t){"use strict";function n(){return new r}function r(){this.reset()}r.prototype={constructor:r,reset:function(){this.s=this.t=0},add:function(e){a(i,e,this.t),a(this,i.s,this.s),this.s?this.t+=i.t:this.s=i.t},valueOf:function(){return this.s}};var i=new r;function a(e,t,n){var r=e.s=t+n,i=r-t,a=r-i;e.t=t-a+(n-i)}var o=1e-6,s=1e-12,l=Math.PI,u=l/2,c=l/4,f=2*l,d=180/l,h=l/180,p=Math.abs,v=Math.atan,g=Math.atan2,m=Math.cos,y=Math.ceil,b=Math.exp,x=Math.log,_=Math.pow,w=Math.sin,j=Math.sign||function(e){return e>0?1:e<0?-1:0},k=Math.sqrt,z=Math.tan;function M(e){return e>1?0:e<-1?l:Math.acos(e)}function A(e){return e>1?u:e<-1?-u:Math.asin(e)}function E(e){return(e=w(e/2))*e}function S(){}function O(e,t){e&&C.hasOwnProperty(e.type)&&C[e.type](e,t)}var T={Feature:function(e,t){O(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)O(n[r].geometry,t)}},C={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){N(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)N(n[r],t,0)},Polygon:function(e,t){P(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)P(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)O(n[r],t)}};function N(e,t,n){var r,i=-1,a=e.length-n;for(t.lineStart();++i<a;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function P(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)N(e[n],t,1);t.polygonEnd()}function F(e,t){e&&T.hasOwnProperty(e.type)?T[e.type](e,t):O(e,t)}var q,B,D,I,R,L=n(),U=n(),V={point:S,lineStart:S,lineEnd:S,polygonStart:function(){L.reset(),V.lineStart=Y,V.lineEnd=H},polygonEnd:function(){var e=+L;U.add(e<0?f+e:e),this.lineStart=this.lineEnd=this.point=S},sphere:function(){U.add(f)}};function Y(){V.point=G}function H(){X(q,B)}function G(e,t){V.point=X,q=e,B=t,D=e*=h,I=m(t=(t*=h)/2+c),R=w(t)}function X(e,t){var n=(e*=h)-D,r=n>=0?1:-1,i=r*n,a=m(t=(t*=h)/2+c),o=w(t),s=R*o,l=I*a+s*m(i),u=s*r*w(i);L.add(g(u,l)),D=e,I=a,R=o}function W(e){return[g(e[1],e[0]),A(e[2])]}function Q(e){var t=e[0],n=e[1],r=m(n);return[r*m(t),r*w(t),w(n)]}function Z(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function $(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function J(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function K(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function ee(e){var t=k(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var te,ne,re,ie,ae,oe,se,le,ue,ce,fe,de,he,pe,ve,ge,me,ye,be,xe,_e,we,je,ke,ze,Me,Ae=n(),Ee={point:Se,lineStart:Te,lineEnd:Ce,polygonStart:function(){Ee.point=Ne,Ee.lineStart=Pe,Ee.lineEnd=Fe,Ae.reset(),V.polygonStart()},polygonEnd:function(){V.polygonEnd(),Ee.point=Se,Ee.lineStart=Te,Ee.lineEnd=Ce,L<0?(te=-(re=180),ne=-(ie=90)):Ae>o?ie=90:Ae<-o&&(ne=-90),ce[0]=te,ce[1]=re},sphere:function(){te=-(re=180),ne=-(ie=90)}};function Se(e,t){ue.push(ce=[te=e,re=e]),t<ne&&(ne=t),t>ie&&(ie=t)}function Oe(e,t){var n=Q([e*h,t*h]);if(le){var r=$(le,n),i=$([r[1],-r[0],0],r);ee(i),i=W(i);var a,o=e-ae,s=o>0?1:-1,l=i[0]*d*s,u=p(o)>180;u^(s*ae<l&&l<s*e)?(a=i[1]*d)>ie&&(ie=a):u^(s*ae<(l=(l+360)%360-180)&&l<s*e)?(a=-i[1]*d)<ne&&(ne=a):(t<ne&&(ne=t),t>ie&&(ie=t)),u?e<ae?qe(te,e)>qe(te,re)&&(re=e):qe(e,re)>qe(te,re)&&(te=e):re>=te?(e<te&&(te=e),e>re&&(re=e)):e>ae?qe(te,e)>qe(te,re)&&(re=e):qe(e,re)>qe(te,re)&&(te=e)}else ue.push(ce=[te=e,re=e]);t<ne&&(ne=t),t>ie&&(ie=t),le=n,ae=e}function Te(){Ee.point=Oe}function Ce(){ce[0]=te,ce[1]=re,Ee.point=Se,le=null}function Ne(e,t){if(le){var n=e-ae;Ae.add(p(n)>180?n+(n>0?360:-360):n)}else oe=e,se=t;V.point(e,t),Oe(e,t)}function Pe(){V.lineStart()}function Fe(){Ne(oe,se),V.lineEnd(),p(Ae)>o&&(te=-(re=180)),ce[0]=te,ce[1]=re,le=null}function qe(e,t){return(t-=e)<0?t+360:t}function Be(e,t){return e[0]-t[0]}function De(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var Ie={sphere:S,point:Re,lineStart:Ue,lineEnd:He,polygonStart:function(){Ie.lineStart=Ge,Ie.lineEnd=Xe},polygonEnd:function(){Ie.lineStart=Ue,Ie.lineEnd=He}};function Re(e,t){e*=h;var n=m(t*=h);Le(n*m(e),n*w(e),w(t))}function Le(e,t,n){he+=(e-he)/++fe,pe+=(t-pe)/fe,ve+=(n-ve)/fe}function Ue(){Ie.point=Ve}function Ve(e,t){e*=h;var n=m(t*=h);ke=n*m(e),ze=n*w(e),Me=w(t),Ie.point=Ye,Le(ke,ze,Me)}function Ye(e,t){e*=h;var n=m(t*=h),r=n*m(e),i=n*w(e),a=w(t),o=g(k((o=ze*a-Me*i)*o+(o=Me*r-ke*a)*o+(o=ke*i-ze*r)*o),ke*r+ze*i+Me*a);de+=o,ge+=o*(ke+(ke=r)),me+=o*(ze+(ze=i)),ye+=o*(Me+(Me=a)),Le(ke,ze,Me)}function He(){Ie.point=Re}function Ge(){Ie.point=We}function Xe(){Qe(we,je),Ie.point=Re}function We(e,t){we=e,je=t,e*=h,t*=h,Ie.point=Qe;var n=m(t);ke=n*m(e),ze=n*w(e),Me=w(t),Le(ke,ze,Me)}function Qe(e,t){e*=h;var n=m(t*=h),r=n*m(e),i=n*w(e),a=w(t),o=ze*a-Me*i,s=Me*r-ke*a,l=ke*i-ze*r,u=k(o*o+s*s+l*l),c=A(u),f=u&&-c/u;be+=f*o,xe+=f*s,_e+=f*l,de+=c,ge+=c*(ke+(ke=r)),me+=c*(ze+(ze=i)),ye+=c*(Me+(Me=a)),Le(ke,ze,Me)}function Ze(e){return function(){return e}}function $e(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n}function Je(e,t){return[p(e)>l?e+Math.round(-e/f)*f:e,t]}function Ke(e,t,n){return(e%=f)?t||n?$e(tt(e),nt(t,n)):tt(e):t||n?nt(t,n):Je}function et(e){return function(t,n){return[(t+=e)>l?t-f:t<-l?t+f:t,n]}}function tt(e){var t=et(e);return t.invert=et(-e),t}function nt(e,t){var n=m(e),r=w(e),i=m(t),a=w(t);function o(e,t){var o=m(t),s=m(e)*o,l=w(e)*o,u=w(t),c=u*n+s*r;return[g(l*i-c*a,s*n-u*r),A(c*i+l*a)]}return o.invert=function(e,t){var o=m(t),s=m(e)*o,l=w(e)*o,u=w(t),c=u*i-l*a;return[g(l*i+u*a,s*n+c*r),A(c*n-s*r)]},o}function rt(e){function t(t){return(t=e(t[0]*h,t[1]*h))[0]*=d,t[1]*=d,t}return e=Ke(e[0]*h,e[1]*h,e.length>2?e[2]*h:0),t.invert=function(t){return(t=e.invert(t[0]*h,t[1]*h))[0]*=d,t[1]*=d,t},t}function it(e,t,n,r,i,a){if(n){var o=m(t),s=w(t),l=r*n;null==i?(i=t+r*f,a=t-l/2):(i=at(o,i),a=at(o,a),(r>0?i<a:i>a)&&(i+=r*f));for(var u,c=i;r>0?c>a:c<a;c-=l)u=W([o,-s*m(c),-s*w(c)]),e.point(u[0],u[1])}}function at(e,t){(t=Q(t))[0]-=e,ee(t);var n=M(-t[1]);return((-t[2]<0?-n:n)+f-o)%f}function ot(){var e,t=[];return{point:function(t,n){e.push([t,n])},lineStart:function(){t.push(e=[])},lineEnd:S,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function st(e,t){return p(e[0]-t[0])<o&&p(e[1]-t[1])<o}function lt(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function ut(e,t,n,r,i){var a,o,s=[],l=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],o=e[t];if(st(r,o)){for(i.lineStart(),a=0;a<t;++a)i.point((r=e[a])[0],r[1]);i.lineEnd()}else s.push(n=new lt(r,e,null,!0)),l.push(n.o=new lt(r,null,n,!1)),s.push(n=new lt(o,e,null,!1)),l.push(n.o=new lt(o,null,n,!0))}}),s.length){for(l.sort(t),ct(s),ct(l),a=0,o=l.length;a<o;++a)l[a].e=n=!n;for(var u,c,f=s[0];;){for(var d=f,h=!0;d.v;)if((d=d.n)===f)return;u=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,o=u.length;a<o;++a)i.point((c=u[a])[0],c[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(u=d.p.z,a=u.length-1;a>=0;--a)i.point((c=u[a])[0],c[1]);else r(d.x,d.p.x,-1,i);d=d.p}u=(d=d.o).z,h=!h}while(!d.v);i.lineEnd()}}}function ct(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}Je.invert=Je;var ft=n();function dt(e){return p(e[0])<=l?e[0]:j(e[0])*((p(e[0])+l)%f-l)}function ht(e,t){var n=dt(t),r=t[1],i=w(r),a=[w(n),-m(n),0],s=0,d=0;ft.reset(),1===i?r=u+o:-1===i&&(r=-u-o);for(var h=0,p=e.length;h<p;++h)if(y=(v=e[h]).length)for(var v,y,b=v[y-1],x=dt(b),_=b[1]/2+c,j=w(_),k=m(_),z=0;z<y;++z,x=E,j=O,k=T,b=M){var M=v[z],E=dt(M),S=M[1]/2+c,O=w(S),T=m(S),C=E-x,N=C>=0?1:-1,P=N*C,F=P>l,q=j*O;if(ft.add(g(q*N*w(P),k*T+q*m(P))),s+=F?C+N*f:C,F^x>=n^E>=n){var B=$(Q(b),Q(M));ee(B);var D=$(a,B);ee(D);var I=(F^C>=0?-1:1)*A(D[2]);(r>I||r===I&&(B[0]||B[1]))&&(d+=F^C>=0?1:-1)}}return(s<-o||s<o&&ft<-o)^1&d}function pt(e,n,r,i){return function(a){var o,s,l,u=n(a),c=ot(),f=n(c),d=!1,h={point:p,lineStart:g,lineEnd:m,polygonStart:function(){h.point=y,h.lineStart=b,h.lineEnd=x,s=[],o=[]},polygonEnd:function(){h.point=p,h.lineStart=g,h.lineEnd=m,s=t.merge(s);var e=ht(o,i);s.length?(d||(a.polygonStart(),d=!0),ut(s,gt,e,r,a)):e&&(d||(a.polygonStart(),d=!0),a.lineStart(),r(null,null,1,a),a.lineEnd()),d&&(a.polygonEnd(),d=!1),s=o=null},sphere:function(){a.polygonStart(),a.lineStart(),r(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function p(t,n){e(t,n)&&a.point(t,n)}function v(e,t){u.point(e,t)}function g(){h.point=v,u.lineStart()}function m(){h.point=p,u.lineEnd()}function y(e,t){l.push([e,t]),f.point(e,t)}function b(){f.lineStart(),l=[]}function x(){y(l[0][0],l[0][1]),f.lineEnd();var e,t,n,r,i=f.clean(),u=c.result(),h=u.length;if(l.pop(),o.push(l),l=null,h)if(1&i){if((t=(n=u[0]).length-1)>0){for(d||(a.polygonStart(),d=!0),a.lineStart(),e=0;e<t;++e)a.point((r=n[e])[0],r[1]);a.lineEnd()}}else h>1&&2&i&&u.push(u.pop().concat(u.shift())),s.push(u.filter(vt))}return h}}function vt(e){return e.length>1}function gt(e,t){return((e=e.x)[0]<0?e[1]-u-o:u-e[1])-((t=t.x)[0]<0?t[1]-u-o:u-t[1])}var mt=pt(function(){return!0},function(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(a,s){var c=a>0?l:-l,f=p(a-n);p(f-l)<o?(e.point(n,r=(r+s)/2>0?u:-u),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(c,r),e.point(a,r),t=0):i!==c&&f>=l&&(p(n-i)<o&&(n-=i*o),p(a-c)<o&&(a-=c*o),r=function(e,t,n,r){var i,a,s=w(e-n);return p(s)>o?v((w(t)*(a=m(r))*w(n)-w(r)*(i=m(t))*w(e))/(i*a*s)):(t+r)/2}(n,r,a,s),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(c,r),t=0),e.point(n=a,r=s),i=c},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}},function(e,t,n,r){var i;if(null==e)i=n*u,r.point(-l,i),r.point(0,i),r.point(l,i),r.point(l,0),r.point(l,-i),r.point(0,-i),r.point(-l,-i),r.point(-l,0),r.point(-l,i);else if(p(e[0]-t[0])>o){var a=e[0]<t[0]?l:-l;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])},[-l,-u]);function yt(e){var t=m(e),n=6*h,r=t>0,i=p(t)>o;function a(e,n){return m(e)*m(n)>t}function s(e,n,r){var i=[1,0,0],a=$(Q(e),Q(n)),s=Z(a,a),u=a[0],c=s-u*u;if(!c)return!r&&e;var f=t*s/c,d=-t*u/c,h=$(i,a),v=K(i,f);J(v,K(a,d));var g=h,m=Z(v,g),y=Z(g,g),b=m*m-y*(Z(v,v)-1);if(!(b<0)){var x=k(b),_=K(g,(-m-x)/y);if(J(_,v),_=W(_),!r)return _;var w,j=e[0],z=n[0],M=e[1],A=n[1];z<j&&(w=j,j=z,z=w);var E=z-j,S=p(E-l)<o;if(!S&&A<M&&(w=M,M=A,A=w),S||E<o?S?M+A>0^_[1]<(p(_[0]-j)<o?M:A):M<=_[1]&&_[1]<=A:E>l^(j<=_[0]&&_[0]<=z)){var O=K(g,(-m+x)/y);return J(O,v),[_,W(O)]}}}function u(t,n){var i=r?e:l-e,a=0;return t<-i?a|=1:t>i&&(a|=2),n<-i?a|=4:n>i&&(a|=8),a}return pt(a,function(e){var t,n,c,f,d;return{lineStart:function(){f=c=!1,d=1},point:function(h,p){var v,g=[h,p],m=a(h,p),y=r?m?0:u(h,p):m?u(h+(h<0?l:-l),p):0;if(!t&&(f=c=m)&&e.lineStart(),m!==c&&(!(v=s(t,g))||st(t,v)||st(g,v))&&(g[0]+=o,g[1]+=o,m=a(g[0],g[1])),m!==c)d=0,m?(e.lineStart(),v=s(g,t),e.point(v[0],v[1])):(v=s(t,g),e.point(v[0],v[1]),e.lineEnd()),t=v;else if(i&&t&&r^m){var b;y&n||!(b=s(g,t,!0))||(d=0,r?(e.lineStart(),e.point(b[0][0],b[0][1]),e.point(b[1][0],b[1][1]),e.lineEnd()):(e.point(b[1][0],b[1][1]),e.lineEnd(),e.lineStart(),e.point(b[0][0],b[0][1])))}!m||t&&st(t,g)||e.point(g[0],g[1]),t=g,c=m,n=y},lineEnd:function(){c&&e.lineEnd(),t=null},clean:function(){return d|(f&&c)<<1}}},function(t,r,i,a){it(a,e,n,i,t,r)},r?[0,-e]:[-l,e-l])}var bt=1e9,xt=-bt;function _t(e,n,r,i){function a(t,a){return e<=t&&t<=r&&n<=a&&a<=i}function s(t,a,o,s){var u=0,f=0;if(null==t||(u=l(t,o))!==(f=l(a,o))||c(t,a)<0^o>0)do{s.point(0===u||3===u?e:r,u>1?i:n)}while((u=(u+o+4)%4)!==f);else s.point(a[0],a[1])}function l(t,i){return p(t[0]-e)<o?i>0?0:3:p(t[0]-r)<o?i>0?2:1:p(t[1]-n)<o?i>0?1:0:i>0?3:2}function u(e,t){return c(e.x,t.x)}function c(e,t){var n=l(e,1),r=l(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(o){var l,c,f,d,h,p,v,g,m,y,b,x=o,_=ot(),w={point:j,lineStart:function(){w.point=k,c&&c.push(f=[]);y=!0,m=!1,v=g=NaN},lineEnd:function(){l&&(k(d,h),p&&m&&_.rejoin(),l.push(_.result()));w.point=j,m&&x.lineEnd()},polygonStart:function(){x=_,l=[],c=[],b=!0},polygonEnd:function(){var n=function(){for(var t=0,n=0,r=c.length;n<r;++n)for(var a,o,s=c[n],l=1,u=s.length,f=s[0],d=f[0],h=f[1];l<u;++l)a=d,o=h,f=s[l],d=f[0],h=f[1],o<=i?h>i&&(d-a)*(i-o)>(h-o)*(e-a)&&++t:h<=i&&(d-a)*(i-o)<(h-o)*(e-a)&&--t;return t}(),r=b&&n,a=(l=t.merge(l)).length;(r||a)&&(o.polygonStart(),r&&(o.lineStart(),s(null,null,1,o),o.lineEnd()),a&&ut(l,u,n,s,o),o.polygonEnd());x=o,l=c=f=null}};function j(e,t){a(e,t)&&x.point(e,t)}function k(t,o){var s=a(t,o);if(c&&f.push([t,o]),y)d=t,h=o,p=s,y=!1,s&&(x.lineStart(),x.point(t,o));else if(s&&m)x.point(t,o);else{var l=[v=Math.max(xt,Math.min(bt,v)),g=Math.max(xt,Math.min(bt,g))],u=[t=Math.max(xt,Math.min(bt,t)),o=Math.max(xt,Math.min(bt,o))];!function(e,t,n,r,i,a){var o,s=e[0],l=e[1],u=0,c=1,f=t[0]-s,d=t[1]-l;if(o=n-s,f||!(o>0)){if(o/=f,f<0){if(o<u)return;o<c&&(c=o)}else if(f>0){if(o>c)return;o>u&&(u=o)}if(o=i-s,f||!(o<0)){if(o/=f,f<0){if(o>c)return;o>u&&(u=o)}else if(f>0){if(o<u)return;o<c&&(c=o)}if(o=r-l,d||!(o>0)){if(o/=d,d<0){if(o<u)return;o<c&&(c=o)}else if(d>0){if(o>c)return;o>u&&(u=o)}if(o=a-l,d||!(o<0)){if(o/=d,d<0){if(o>c)return;o>u&&(u=o)}else if(d>0){if(o<u)return;o<c&&(c=o)}return u>0&&(e[0]=s+u*f,e[1]=l+u*d),c<1&&(t[0]=s+c*f,t[1]=l+c*d),!0}}}}}(l,u,e,n,r,i)?s&&(x.lineStart(),x.point(t,o),b=!1):(m||(x.lineStart(),x.point(l[0],l[1])),x.point(u[0],u[1]),s||x.lineEnd(),b=!1)}v=t,g=o,m=s}return w}}var wt,jt,kt,zt=n(),Mt={sphere:S,point:S,lineStart:function(){Mt.point=Et,Mt.lineEnd=At},lineEnd:S,polygonStart:S,polygonEnd:S};function At(){Mt.point=Mt.lineEnd=S}function Et(e,t){wt=e*=h,jt=w(t*=h),kt=m(t),Mt.point=St}function St(e,t){e*=h;var n=w(t*=h),r=m(t),i=p(e-wt),a=m(i),o=r*w(i),s=kt*n-jt*r*a,l=jt*n+kt*r*a;zt.add(g(k(o*o+s*s),l)),wt=e,jt=n,kt=r}function Ot(e){return zt.reset(),F(e,Mt),+zt}var Tt=[null,null],Ct={type:"LineString",coordinates:Tt};function Nt(e,t){return Tt[0]=e,Tt[1]=t,Ot(Ct)}var Pt={Feature:function(e,t){return qt(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)if(qt(n[r].geometry,t))return!0;return!1}},Ft={Sphere:function(){return!0},Point:function(e,t){return Bt(e.coordinates,t)},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(Bt(n[r],t))return!0;return!1},LineString:function(e,t){return Dt(e.coordinates,t)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(Dt(n[r],t))return!0;return!1},Polygon:function(e,t){return It(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(It(n[r],t))return!0;return!1},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)if(qt(n[r],t))return!0;return!1}};function qt(e,t){return!(!e||!Ft.hasOwnProperty(e.type))&&Ft[e.type](e,t)}function Bt(e,t){return 0===Nt(e,t)}function Dt(e,t){for(var n,r,i,a=0,o=e.length;a<o;a++){if(0===(r=Nt(e[a],t)))return!0;if(a>0&&(i=Nt(e[a],e[a-1]))>0&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<s*i)return!0;n=r}return!1}function It(e,t){return!!ht(e.map(Rt),Lt(t))}function Rt(e){return(e=e.map(Lt)).pop(),e}function Lt(e){return[e[0]*h,e[1]*h]}function Ut(e,n,r){var i=t.range(e,n-o,r).concat(n);return function(e){return i.map(function(t){return[e,t]})}}function Vt(e,n,r){var i=t.range(e,n-o,r).concat(n);return function(e){return i.map(function(t){return[t,e]})}}function Yt(){var e,n,r,i,a,s,l,u,c,f,d,h,v=10,g=v,m=90,b=360,x=2.5;function _(){return{type:"MultiLineString",coordinates:w()}}function w(){return t.range(y(i/m)*m,r,m).map(d).concat(t.range(y(u/b)*b,l,b).map(h)).concat(t.range(y(n/v)*v,e,v).filter(function(e){return p(e%m)>o}).map(c)).concat(t.range(y(s/g)*g,a,g).filter(function(e){return p(e%b)>o}).map(f))}return _.lines=function(){return w().map(function(e){return{type:"LineString",coordinates:e}})},_.outline=function(){return{type:"Polygon",coordinates:[d(i).concat(h(l).slice(1),d(r).reverse().slice(1),h(u).reverse().slice(1))]}},_.extent=function(e){return arguments.length?_.extentMajor(e).extentMinor(e):_.extentMinor()},_.extentMajor=function(e){return arguments.length?(i=+e[0][0],r=+e[1][0],u=+e[0][1],l=+e[1][1],i>r&&(e=i,i=r,r=e),u>l&&(e=u,u=l,l=e),_.precision(x)):[[i,u],[r,l]]},_.extentMinor=function(t){return arguments.length?(n=+t[0][0],e=+t[1][0],s=+t[0][1],a=+t[1][1],n>e&&(t=n,n=e,e=t),s>a&&(t=s,s=a,a=t),_.precision(x)):[[n,s],[e,a]]},_.step=function(e){return arguments.length?_.stepMajor(e).stepMinor(e):_.stepMinor()},_.stepMajor=function(e){return arguments.length?(m=+e[0],b=+e[1],_):[m,b]},_.stepMinor=function(e){return arguments.length?(v=+e[0],g=+e[1],_):[v,g]},_.precision=function(t){return arguments.length?(x=+t,c=Ut(s,a,90),f=Vt(n,e,x),d=Ut(u,l,90),h=Vt(i,r,x),_):x},_.extentMajor([[-180,-90+o],[180,90-o]]).extentMinor([[-180,-80-o],[180,80+o]])}function Ht(e){return e}var Gt,Xt,Wt,Qt,Zt=n(),$t=n(),Jt={point:S,lineStart:S,lineEnd:S,polygonStart:function(){Jt.lineStart=Kt,Jt.lineEnd=nn},polygonEnd:function(){Jt.lineStart=Jt.lineEnd=Jt.point=S,Zt.add(p($t)),$t.reset()},result:function(){var e=Zt/2;return Zt.reset(),e}};function Kt(){Jt.point=en}function en(e,t){Jt.point=tn,Gt=Wt=e,Xt=Qt=t}function tn(e,t){$t.add(Qt*e-Wt*t),Wt=e,Qt=t}function nn(){tn(Gt,Xt)}var rn,an,on,sn,ln=1/0,un=ln,cn=-ln,fn=cn,dn={point:function(e,t){e<ln&&(ln=e);e>cn&&(cn=e);t<un&&(un=t);t>fn&&(fn=t)},lineStart:S,lineEnd:S,polygonStart:S,polygonEnd:S,result:function(){var e=[[ln,un],[cn,fn]];return cn=fn=-(un=ln=1/0),e}},hn=0,pn=0,vn=0,gn=0,mn=0,yn=0,bn=0,xn=0,_n=0,wn={point:jn,lineStart:kn,lineEnd:An,polygonStart:function(){wn.lineStart=En,wn.lineEnd=Sn},polygonEnd:function(){wn.point=jn,wn.lineStart=kn,wn.lineEnd=An},result:function(){var e=_n?[bn/_n,xn/_n]:yn?[gn/yn,mn/yn]:vn?[hn/vn,pn/vn]:[NaN,NaN];return hn=pn=vn=gn=mn=yn=bn=xn=_n=0,e}};function jn(e,t){hn+=e,pn+=t,++vn}function kn(){wn.point=zn}function zn(e,t){wn.point=Mn,jn(on=e,sn=t)}function Mn(e,t){var n=e-on,r=t-sn,i=k(n*n+r*r);gn+=i*(on+e)/2,mn+=i*(sn+t)/2,yn+=i,jn(on=e,sn=t)}function An(){wn.point=jn}function En(){wn.point=On}function Sn(){Tn(rn,an)}function On(e,t){wn.point=Tn,jn(rn=on=e,an=sn=t)}function Tn(e,t){var n=e-on,r=t-sn,i=k(n*n+r*r);gn+=i*(on+e)/2,mn+=i*(sn+t)/2,yn+=i,bn+=(i=sn*e-on*t)*(on+e),xn+=i*(sn+t),_n+=3*i,jn(on=e,sn=t)}function Cn(e){this._context=e}Cn.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,f)}},result:S};var Nn,Pn,Fn,qn,Bn,Dn=n(),In={point:S,lineStart:function(){In.point=Rn},lineEnd:function(){Nn&&Ln(Pn,Fn),In.point=S},polygonStart:function(){Nn=!0},polygonEnd:function(){Nn=null},result:function(){var e=+Dn;return Dn.reset(),e}};function Rn(e,t){In.point=Ln,Pn=qn=e,Fn=Bn=t}function Ln(e,t){qn-=e,Bn-=t,Dn.add(k(qn*qn+Bn*Bn)),qn=e,Bn=t}function Un(){this._string=[]}function Vn(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Yn(e){return function(t){var n=new Hn;for(var r in e)n[r]=e[r];return n.stream=t,n}}function Hn(){}function Gn(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),F(n,e.stream(dn)),t(dn.result()),null!=r&&e.clipExtent(r),e}function Xn(e,t,n){return Gn(e,function(n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],a=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),o=+t[0][0]+(r-a*(n[1][0]+n[0][0]))/2,s=+t[0][1]+(i-a*(n[1][1]+n[0][1]))/2;e.scale(150*a).translate([o,s])},n)}function Wn(e,t,n){return Xn(e,[[0,0],t],n)}function Qn(e,t,n){return Gn(e,function(n){var r=+t,i=r/(n[1][0]-n[0][0]),a=(r-i*(n[1][0]+n[0][0]))/2,o=-i*n[0][1];e.scale(150*i).translate([a,o])},n)}function Zn(e,t,n){return Gn(e,function(n){var r=+t,i=r/(n[1][1]-n[0][1]),a=-i*n[0][0],o=(r-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([a,o])},n)}Un.prototype={_radius:4.5,_circle:Vn(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=Vn(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}},Hn.prototype={constructor:Hn,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var $n=16,Jn=m(30*h);function Kn(e,t){return+t?function(e,t){function n(r,i,a,s,l,u,c,f,d,h,v,m,y,b){var x=c-r,_=f-i,w=x*x+_*_;if(w>4*t&&y--){var j=s+h,z=l+v,M=u+m,E=k(j*j+z*z+M*M),S=A(M/=E),O=p(p(M)-1)<o||p(a-d)<o?(a+d)/2:g(z,j),T=e(O,S),C=T[0],N=T[1],P=C-r,F=N-i,q=_*P-x*F;(q*q/w>t||p((x*P+_*F)/w-.5)>.3||s*h+l*v+u*m<Jn)&&(n(r,i,a,s,l,u,C,N,O,j/=E,z/=E,M,y,b),b.point(C,N),n(C,N,O,j,z,M,c,f,d,h,v,m,y,b))}}return function(t){var r,i,a,o,s,l,u,c,f,d,h,p,v={point:g,lineStart:m,lineEnd:b,polygonStart:function(){t.polygonStart(),v.lineStart=x},polygonEnd:function(){t.polygonEnd(),v.lineStart=m}};function g(n,r){n=e(n,r),t.point(n[0],n[1])}function m(){c=NaN,v.point=y,t.lineStart()}function y(r,i){var a=Q([r,i]),o=e(r,i);n(c,f,u,d,h,p,c=o[0],f=o[1],u=r,d=a[0],h=a[1],p=a[2],$n,t),t.point(c,f)}function b(){v.point=g,t.lineEnd()}function x(){m(),v.point=_,v.lineEnd=w}function _(e,t){y(r=e,t),i=c,a=f,o=d,s=h,l=p,v.point=y}function w(){n(c,f,u,d,h,p,i,a,r,o,s,l,$n,t),v.lineEnd=b,b()}return v}}(e,t):function(e){return Yn({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}(e)}var er=Yn({point:function(e,t){this.stream.point(e*h,t*h)}});function tr(e,t,n,r){var i=m(r),a=w(r),o=i*e,s=a*e,l=i/e,u=a/e,c=(a*n-i*t)/e,f=(a*t+i*n)/e;function d(e,r){return[o*e-s*r+t,n-s*e-o*r]}return d.invert=function(e,t){return[l*e-u*t+c,f-u*e-l*t]},d}function nr(e){return rr(function(){return e})()}function rr(e){var t,n,r,i,a,o,s,l,u,c,f=150,p=480,v=250,g=0,m=0,y=0,b=0,x=0,_=0,w=null,j=mt,z=null,M=Ht,A=.5;function E(e){return l(e[0]*h,e[1]*h)}function S(e){return(e=l.invert(e[0],e[1]))&&[e[0]*d,e[1]*d]}function O(){var e=tr(f,0,0,_).apply(null,t(g,m)),r=(_?tr:function(e,t,n){function r(r,i){return[t+e*r,n-e*i]}return r.invert=function(r,i){return[(r-t)/e,(n-i)/e]},r})(f,p-e[0],v-e[1],_);return n=Ke(y,b,x),s=$e(t,r),l=$e(n,s),o=Kn(s,A),T()}function T(){return u=c=null,E}return E.stream=function(e){return u&&c===e?u:u=er(function(e){return Yn({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}(n)(j(o(M(c=e)))))},E.preclip=function(e){return arguments.length?(j=e,w=void 0,T()):j},E.postclip=function(e){return arguments.length?(M=e,z=r=i=a=null,T()):M},E.clipAngle=function(e){return arguments.length?(j=+e?yt(w=e*h):(w=null,mt),T()):w*d},E.clipExtent=function(e){return arguments.length?(M=null==e?(z=r=i=a=null,Ht):_t(z=+e[0][0],r=+e[0][1],i=+e[1][0],a=+e[1][1]),T()):null==z?null:[[z,r],[i,a]]},E.scale=function(e){return arguments.length?(f=+e,O()):f},E.translate=function(e){return arguments.length?(p=+e[0],v=+e[1],O()):[p,v]},E.center=function(e){return arguments.length?(g=e[0]%360*h,m=e[1]%360*h,O()):[g*d,m*d]},E.rotate=function(e){return arguments.length?(y=e[0]%360*h,b=e[1]%360*h,x=e.length>2?e[2]%360*h:0,O()):[y*d,b*d,x*d]},E.angle=function(e){return arguments.length?(_=e%360*h,O()):_*d},E.precision=function(e){return arguments.length?(o=Kn(s,A=e*e),T()):k(A)},E.fitExtent=function(e,t){return Xn(E,e,t)},E.fitSize=function(e,t){return Wn(E,e,t)},E.fitWidth=function(e,t){return Qn(E,e,t)},E.fitHeight=function(e,t){return Zn(E,e,t)},function(){return t=e.apply(this,arguments),E.invert=t.invert&&S,O()}}function ir(e){var t=0,n=l/3,r=rr(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*h,n=e[1]*h):[t*d,n*d]},i}function ar(e,t){var n=w(e),r=(n+w(t))/2;if(p(r)<o)return function(e){var t=m(e);function n(e,n){return[e*t,w(n)/t]}return n.invert=function(e,n){return[e/t,A(n*t)]},n}(e);var i=1+n*(2*r-n),a=k(i)/r;function s(e,t){var n=k(i-2*r*w(t))/r;return[n*w(e*=r),a-n*m(e)]}return s.invert=function(e,t){var n=a-t;return[g(e,p(n))/r*j(n),A((i-(e*e+n*n)*r*r)/(2*r))]},s}function or(){return ir(ar).scale(155.424).center([0,33.6442])}function sr(){return or().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function lr(e){return function(t,n){var r=m(t),i=m(n),a=e(r*i);return[a*i*w(t),a*w(n)]}}function ur(e){return function(t,n){var r=k(t*t+n*n),i=e(r),a=w(i),o=m(i);return[g(t*a,r*o),A(r&&n*a/r)]}}var cr=lr(function(e){return k(2/(1+e))});cr.invert=ur(function(e){return 2*A(e/2)});var fr=lr(function(e){return(e=M(e))&&e/w(e)});function dr(e,t){return[e,x(z((u+t)/2))]}function hr(e){var t,n,r,i=nr(e),a=i.center,o=i.scale,s=i.translate,u=i.clipExtent,c=null;function f(){var a=l*o(),s=i(rt(i.rotate()).invert([0,0]));return u(null==c?[[s[0]-a,s[1]-a],[s[0]+a,s[1]+a]]:e===dr?[[Math.max(s[0]-a,c),t],[Math.min(s[0]+a,n),r]]:[[c,Math.max(s[1]-a,t)],[n,Math.min(s[1]+a,r)]])}return i.scale=function(e){return arguments.length?(o(e),f()):o()},i.translate=function(e){return arguments.length?(s(e),f()):s()},i.center=function(e){return arguments.length?(a(e),f()):a()},i.clipExtent=function(e){return arguments.length?(null==e?c=t=n=r=null:(c=+e[0][0],t=+e[0][1],n=+e[1][0],r=+e[1][1]),f()):null==c?null:[[c,t],[n,r]]},f()}function pr(e){return z((u+e)/2)}function vr(e,t){var n=m(e),r=e===t?w(e):x(n/m(t))/x(pr(t)/pr(e)),i=n*_(pr(e),r)/r;if(!r)return dr;function a(e,t){i>0?t<-u+o&&(t=-u+o):t>u-o&&(t=u-o);var n=i/_(pr(t),r);return[n*w(r*e),i-n*m(r*e)]}return a.invert=function(e,t){var n=i-t,a=j(r)*k(e*e+n*n);return[g(e,p(n))/r*j(n),2*v(_(i/a,1/r))-u]},a}function gr(e,t){return[e,t]}function mr(e,t){var n=m(e),r=e===t?w(e):(n-m(t))/(t-e),i=n/r+e;if(p(r)<o)return gr;function a(e,t){var n=i-t,a=r*e;return[n*w(a),i-n*m(a)]}return a.invert=function(e,t){var n=i-t;return[g(e,p(n))/r*j(n),i-j(r)*k(e*e+n*n)]},a}fr.invert=ur(function(e){return e}),dr.invert=function(e,t){return[e,2*v(b(t))-u]},gr.invert=gr;var yr=1.340264,br=-.081106,xr=893e-6,_r=.003796,wr=k(3)/2;function jr(e,t){var n=A(wr*w(t)),r=n*n,i=r*r*r;return[e*m(n)/(wr*(yr+3*br*r+i*(7*xr+9*_r*r))),n*(yr+br*r+i*(xr+_r*r))]}function kr(e,t){var n=m(t),r=m(e)*n;return[n*w(e)/r,w(t)/r]}function zr(e,t,n,r){return 1===e&&1===t&&0===n&&0===r?Ht:Yn({point:function(i,a){this.stream.point(i*e+n,a*t+r)}})}function Mr(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function Ar(e,t){return[m(t)*w(e),w(t)]}function Er(e,t){var n=m(t),r=1+m(e)*n;return[n*w(e)/r,w(t)/r]}function Sr(e,t){return[x(z((u+t)/2)),-e]}jr.invert=function(e,t){for(var n,r=t,i=r*r,a=i*i*i,o=0;o<12&&(a=(i=(r-=n=(r*(yr+br*i+a*(xr+_r*i))-t)/(yr+3*br*i+a*(7*xr+9*_r*i)))*r)*i*i,!(p(n)<s));++o);return[wr*e*(yr+3*br*i+a*(7*xr+9*_r*i))/m(r),A(w(r)/wr)]},kr.invert=ur(v),Mr.invert=function(e,t){var n,r=t,i=25;do{var a=r*r,s=a*a;r-=n=(r*(1.007226+a*(.015085+s*(.028874*a-.044475-.005916*s)))-t)/(1.007226+a*(.045255+s*(.259866*a-.311325-.005916*11*s)))}while(p(n)>o&&--i>0);return[e/(.8707+(a=r*r)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979)),r]},Ar.invert=ur(A),Er.invert=ur(function(e){return 2*v(e)}),Sr.invert=function(e,t){return[-t,2*v(b(e))-u]},e.geoArea=function(e){return U.reset(),F(e,V),2*U},e.geoBounds=function(e){var t,n,r,i,a,o,s;if(ie=re=-(te=ne=1/0),ue=[],F(e,Ee),n=ue.length){for(ue.sort(Be),t=1,a=[r=ue[0]];t<n;++t)De(r,(i=ue[t])[0])||De(r,i[1])?(qe(r[0],i[1])>qe(r[0],r[1])&&(r[1]=i[1]),qe(i[0],r[1])>qe(r[0],r[1])&&(r[0]=i[0])):a.push(r=i);for(o=-1/0,t=0,r=a[n=a.length-1];t<=n;r=i,++t)i=a[t],(s=qe(r[1],i[0]))>o&&(o=s,te=i[0],re=r[1])}return ue=ce=null,te===1/0||ne===1/0?[[NaN,NaN],[NaN,NaN]]:[[te,ne],[re,ie]]},e.geoCentroid=function(e){fe=de=he=pe=ve=ge=me=ye=be=xe=_e=0,F(e,Ie);var t=be,n=xe,r=_e,i=t*t+n*n+r*r;return i<s&&(t=ge,n=me,r=ye,de<o&&(t=he,n=pe,r=ve),(i=t*t+n*n+r*r)<s)?[NaN,NaN]:[g(n,t)*d,A(r/k(i))*d]},e.geoCircle=function(){var e,t,n=Ze([0,0]),r=Ze(90),i=Ze(6),a={point:function(n,r){e.push(n=t(n,r)),n[0]*=d,n[1]*=d}};function o(){var o=n.apply(this,arguments),s=r.apply(this,arguments)*h,l=i.apply(this,arguments)*h;return e=[],t=Ke(-o[0]*h,-o[1]*h,0).invert,it(a,s,l,1),o={type:"Polygon",coordinates:[e]},e=t=null,o}return o.center=function(e){return arguments.length?(n="function"==typeof e?e:Ze([+e[0],+e[1]]),o):n},o.radius=function(e){return arguments.length?(r="function"==typeof e?e:Ze(+e),o):r},o.precision=function(e){return arguments.length?(i="function"==typeof e?e:Ze(+e),o):i},o},e.geoClipAntimeridian=mt,e.geoClipCircle=yt,e.geoClipExtent=function(){var e,t,n,r=0,i=0,a=960,o=500;return n={stream:function(n){return e&&t===n?e:e=_t(r,i,a,o)(t=n)},extent:function(s){return arguments.length?(r=+s[0][0],i=+s[0][1],a=+s[1][0],o=+s[1][1],e=t=null,n):[[r,i],[a,o]]}}},e.geoClipRectangle=_t,e.geoContains=function(e,t){return(e&&Pt.hasOwnProperty(e.type)?Pt[e.type]:qt)(e,t)},e.geoDistance=Nt,e.geoGraticule=Yt,e.geoGraticule10=function(){return Yt()()},e.geoInterpolate=function(e,t){var n=e[0]*h,r=e[1]*h,i=t[0]*h,a=t[1]*h,o=m(r),s=w(r),l=m(a),u=w(a),c=o*m(n),f=o*w(n),p=l*m(i),v=l*w(i),y=2*A(k(E(a-r)+o*l*E(i-n))),b=w(y),x=y?function(e){var t=w(e*=y)/b,n=w(y-e)/b,r=n*c+t*p,i=n*f+t*v,a=n*s+t*u;return[g(i,r)*d,g(a,k(r*r+i*i))*d]}:function(){return[n*d,r*d]};return x.distance=y,x},e.geoLength=Ot,e.geoPath=function(e,t){var n,r,i=4.5;function a(e){return e&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),F(e,n(r))),r.result()}return a.area=function(e){return F(e,n(Jt)),Jt.result()},a.measure=function(e){return F(e,n(In)),In.result()},a.bounds=function(e){return F(e,n(dn)),dn.result()},a.centroid=function(e){return F(e,n(wn)),wn.result()},a.projection=function(t){return arguments.length?(n=null==t?(e=null,Ht):(e=t).stream,a):e},a.context=function(e){return arguments.length?(r=null==e?(t=null,new Un):new Cn(t=e),"function"!=typeof i&&r.pointRadius(i),a):t},a.pointRadius=function(e){return arguments.length?(i="function"==typeof e?e:(r.pointRadius(+e),+e),a):i},a.projection(e).context(t)},e.geoAlbers=sr,e.geoAlbersUsa=function(){var e,t,n,r,i,a,s=sr(),l=or().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=or().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(e,t){a=[e,t]}};function f(e){var t=e[0],o=e[1];return a=null,n.point(t,o),a||(r.point(t,o),a)||(i.point(t,o),a)}function d(){return e=t=null,f}return f.invert=function(e){var t=s.scale(),n=s.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?l:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:s).invert(e)},f.stream=function(n){return e&&t===n?e:(r=[s.stream(t=n),l.stream(n),u.stream(n)],i=r.length,e={point:function(e,t){for(var n=-1;++n<i;)r[n].point(e,t)},sphere:function(){for(var e=-1;++e<i;)r[e].sphere()},lineStart:function(){for(var e=-1;++e<i;)r[e].lineStart()},lineEnd:function(){for(var e=-1;++e<i;)r[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<i;)r[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<i;)r[e].polygonEnd()}});var r,i},f.precision=function(e){return arguments.length?(s.precision(e),l.precision(e),u.precision(e),d()):s.precision()},f.scale=function(e){return arguments.length?(s.scale(e),l.scale(.35*e),u.scale(e),f.translate(s.translate())):s.scale()},f.translate=function(e){if(!arguments.length)return s.translate();var t=s.scale(),a=+e[0],f=+e[1];return n=s.translate(e).clipExtent([[a-.455*t,f-.238*t],[a+.455*t,f+.238*t]]).stream(c),r=l.translate([a-.307*t,f+.201*t]).clipExtent([[a-.425*t+o,f+.12*t+o],[a-.214*t-o,f+.234*t-o]]).stream(c),i=u.translate([a-.205*t,f+.212*t]).clipExtent([[a-.214*t+o,f+.166*t+o],[a-.115*t-o,f+.234*t-o]]).stream(c),d()},f.fitExtent=function(e,t){return Xn(f,e,t)},f.fitSize=function(e,t){return Wn(f,e,t)},f.fitWidth=function(e,t){return Qn(f,e,t)},f.fitHeight=function(e,t){return Zn(f,e,t)},f.scale(1070)},e.geoAzimuthalEqualArea=function(){return nr(cr).scale(124.75).clipAngle(179.999)},e.geoAzimuthalEqualAreaRaw=cr,e.geoAzimuthalEquidistant=function(){return nr(fr).scale(79.4188).clipAngle(179.999)},e.geoAzimuthalEquidistantRaw=fr,e.geoConicConformal=function(){return ir(vr).scale(109.5).parallels([30,30])},e.geoConicConformalRaw=vr,e.geoConicEqualArea=or,e.geoConicEqualAreaRaw=ar,e.geoConicEquidistant=function(){return ir(mr).scale(131.154).center([0,13.9389])},e.geoConicEquidistantRaw=mr,e.geoEqualEarth=function(){return nr(jr).scale(177.158)},e.geoEqualEarthRaw=jr,e.geoEquirectangular=function(){return nr(gr).scale(152.63)},e.geoEquirectangularRaw=gr,e.geoGnomonic=function(){return nr(kr).scale(144.049).clipAngle(60)},e.geoGnomonicRaw=kr,e.geoIdentity=function(){var e,t,n,r,i,a,o=1,s=0,l=0,u=1,c=1,f=Ht,d=null,h=Ht;function p(){return r=i=null,a}return a={stream:function(e){return r&&i===e?r:r=f(h(i=e))},postclip:function(r){return arguments.length?(h=r,d=e=t=n=null,p()):h},clipExtent:function(r){return arguments.length?(h=null==r?(d=e=t=n=null,Ht):_t(d=+r[0][0],e=+r[0][1],t=+r[1][0],n=+r[1][1]),p()):null==d?null:[[d,e],[t,n]]},scale:function(e){return arguments.length?(f=zr((o=+e)*u,o*c,s,l),p()):o},translate:function(e){return arguments.length?(f=zr(o*u,o*c,s=+e[0],l=+e[1]),p()):[s,l]},reflectX:function(e){return arguments.length?(f=zr(o*(u=e?-1:1),o*c,s,l),p()):u<0},reflectY:function(e){return arguments.length?(f=zr(o*u,o*(c=e?-1:1),s,l),p()):c<0},fitExtent:function(e,t){return Xn(a,e,t)},fitSize:function(e,t){return Wn(a,e,t)},fitWidth:function(e,t){return Qn(a,e,t)},fitHeight:function(e,t){return Zn(a,e,t)}}},e.geoProjection=nr,e.geoProjectionMutator=rr,e.geoMercator=function(){return hr(dr).scale(961/f)},e.geoMercatorRaw=dr,e.geoNaturalEarth1=function(){return nr(Mr).scale(175.295)},e.geoNaturalEarth1Raw=Mr,e.geoOrthographic=function(){return nr(Ar).scale(249.5).clipAngle(90+o)},e.geoOrthographicRaw=Ar,e.geoStereographic=function(){return nr(Er).scale(250).clipAngle(142)},e.geoStereographicRaw=Er,e.geoTransverseMercator=function(){var e=hr(Sr),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90]).scale(159.155)},e.geoTransverseMercatorRaw=Sr,e.geoRotation=rt,e.geoStream=F,e.geoTransform=function(e){return{stream:Yn(e)}},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n,e("d3-array")):"function"==typeof define&&define.amd?define(["exports","d3-array"],i):i(r.d3=r.d3||{},r.d3)},{"d3-array":7}],22:[function(e,t,n){var r,i;r=this,i=function(e){"use strict";function t(e,t){return e.parent===t.parent?1:2}function n(e,t){return e+t.x}function r(e,t){return Math.max(e,t.y)}function i(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function a(e,t){var n,r,i,a,s,c=new u(e),f=+e.value&&(c.value=e.value),d=[c];for(null==t&&(t=o);n=d.pop();)if(f&&(n.value=+n.data.value),(i=t(n.data))&&(s=i.length))for(n.children=new Array(s),a=s-1;a>=0;--a)d.push(r=n.children[a]=new u(i[a])),r.parent=n,r.depth=n.depth+1;return c.eachBefore(l)}function o(e){return e.children}function s(e){e.data=e.data.data}function l(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function u(e){this.data=e,this.depth=this.height=0,this.parent=null}u.prototype=a.prototype={constructor:u,count:function(){return this.eachAfter(i)},each:function(e){var t,n,r,i,a=this,o=[a];do{for(t=o.reverse(),o=[];a=t.pop();)if(e(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r])}while(o.length);return this},eachAfter:function(e){for(var t,n,r,i=this,a=[i],o=[];i=a.pop();)if(o.push(i),t=i.children)for(n=0,r=t.length;n<r;++n)a.push(t[n]);for(;i=o.pop();)e(i);return this},eachBefore:function(e){for(var t,n,r=this,i=[r];r=i.pop();)if(e(r),t=r.children)for(n=t.length-1;n>=0;--n)i.push(t[n]);return this},sum:function(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})},sort:function(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){var e=[];return this.each(function(t){e.push(t)}),e},leaves:function(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e},links:function(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t},copy:function(){return a(this).eachBefore(s)}};var c=Array.prototype.slice;function f(e){for(var t,n,r=0,i=(e=function(e){for(var t,n,r=e.length;r;)n=Math.random()*r--|0,t=e[r],e[r]=e[n],e[n]=t;return e}(c.call(e))).length,a=[];r<i;)t=e[r],n&&p(n,t)?++r:(n=g(a=d(a,t)),r=0);return n}function d(e,t){var n,r;if(v(t,e))return[t];for(n=0;n<e.length;++n)if(h(t,e[n])&&v(m(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(h(m(e[n],e[r]),t)&&h(m(e[n],t),e[r])&&h(m(e[r],t),e[n])&&v(y(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function h(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function p(e,t){var n=e.r-t.r+1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function v(e,t){for(var n=0;n<t.length;++n)if(!p(e,t[n]))return!1;return!0}function g(e){switch(e.length){case 1:return{x:(t=e[0]).x,y:t.y,r:t.r};case 2:return m(e[0],e[1]);case 3:return y(e[0],e[1],e[2])}var t}function m(e,t){var n=e.x,r=e.y,i=e.r,a=t.x,o=t.y,s=t.r,l=a-n,u=o-r,c=s-i,f=Math.sqrt(l*l+u*u);return{x:(n+a+l/f*c)/2,y:(r+o+u/f*c)/2,r:(f+i+s)/2}}function y(e,t,n){var r=e.x,i=e.y,a=e.r,o=t.x,s=t.y,l=t.r,u=n.x,c=n.y,f=n.r,d=r-o,h=r-u,p=i-s,v=i-c,g=l-a,m=f-a,y=r*r+i*i-a*a,b=y-o*o-s*s+l*l,x=y-u*u-c*c+f*f,_=h*p-d*v,w=(p*x-v*b)/(2*_)-r,j=(v*g-p*m)/_,k=(h*b-d*x)/(2*_)-i,z=(d*m-h*g)/_,M=j*j+z*z-1,A=2*(a+w*j+k*z),E=w*w+k*k-a*a,S=-(M?(A+Math.sqrt(A*A-4*M*E))/(2*M):E/A);return{x:r+w+j*S,y:i+k+z*S,r:S}}function b(e,t,n){var r,i,a,o,s=e.x-t.x,l=e.y-t.y,u=s*s+l*l;u?(i=t.r+n.r,i*=i,o=e.r+n.r,i>(o*=o)?(r=(u+o-i)/(2*u),a=Math.sqrt(Math.max(0,o/u-r*r)),n.x=e.x-r*s-a*l,n.y=e.y-r*l+a*s):(r=(u+i-o)/(2*u),a=Math.sqrt(Math.max(0,i/u-r*r)),n.x=t.x+r*s-a*l,n.y=t.y+r*l+a*s)):(n.x=t.x+n.r,n.y=t.y)}function x(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function _(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,a=(t.y*n.r+n.y*t.r)/r;return i*i+a*a}function w(e){this._=e,this.next=null,this.previous=null}function j(e){if(!(i=e.length))return 0;var t,n,r,i,a,o,s,l,u,c,d;if((t=e[0]).x=0,t.y=0,!(i>1))return t.r;if(n=e[1],t.x=-n.r,n.x=t.r,n.y=0,!(i>2))return t.r+n.r;b(n,t,r=e[2]),t=new w(t),n=new w(n),r=new w(r),t.next=r.previous=n,n.next=t.previous=r,r.next=n.previous=t;e:for(s=3;s<i;++s){b(t._,n._,r=e[s]),r=new w(r),l=n.next,u=t.previous,c=n._.r,d=t._.r;do{if(c<=d){if(x(l._,r._)){n=l,t.next=n,n.previous=t,--s;continue e}c+=l._.r,l=l.next}else{if(x(u._,r._)){(t=u).next=n,n.previous=t,--s;continue e}d+=u._.r,u=u.previous}}while(l!==u.next);for(r.previous=t,r.next=n,t.next=n.previous=n=r,a=_(t);(r=r.next)!==n;)(o=_(r))<a&&(t=r,a=o);n=t.next}for(t=[n._],r=n;(r=r.next)!==n;)t.push(r._);for(r=f(t),s=0;s<i;++s)(t=e[s]).x-=r.x,t.y-=r.y;return r.r}function k(e){if("function"!=typeof e)throw new Error;return e}function z(){return 0}function M(e){return function(){return e}}function A(e){return Math.sqrt(e.value)}function E(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function S(e,t){return function(n){if(r=n.children){var r,i,a,o=r.length,s=e(n)*t||0;if(s)for(i=0;i<o;++i)r[i].r+=s;if(a=j(r),s)for(i=0;i<o;++i)r[i].r-=s;n.r=a+s}}}function O(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function T(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function C(e,t,n,r,i){for(var a,o=e.children,s=-1,l=o.length,u=e.value&&(r-t)/e.value;++s<l;)(a=o[s]).y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*u}var N="$",P={depth:-1},F={};function q(e){return e.id}function B(e){return e.parentId}function D(e,t){return e.parent===t.parent?1:2}function I(e){var t=e.children;return t?t[0]:e.t}function R(e){var t=e.children;return t?t[t.length-1]:e.t}function L(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function U(e,t,n){return e.a.parent===t.parent?e.a:n}function V(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function Y(e,t,n,r,i){for(var a,o=e.children,s=-1,l=o.length,u=e.value&&(i-n)/e.value;++s<l;)(a=o[s]).x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*u}V.prototype=Object.create(u.prototype);var H=(1+Math.sqrt(5))/2;function G(e,t,n,r,i,a){for(var o,s,l,u,c,f,d,h,p,v,g,m=[],y=t.children,b=0,x=0,_=y.length,w=t.value;b<_;){l=i-n,u=a-r;do{c=y[x++].value}while(!c&&x<_);for(f=d=c,g=c*c*(v=Math.max(u/l,l/u)/(w*e)),p=Math.max(d/g,g/f);x<_;++x){if(c+=s=y[x].value,s<f&&(f=s),s>d&&(d=s),g=c*c*v,(h=Math.max(d/g,g/f))>p){c-=s;break}p=h}m.push(o={value:c,dice:l<u,children:y.slice(b,x)}),o.dice?C(o,n,r,i,w?r+=u*c/w:a):Y(o,n,r,w?n+=l*c/w:i,a),w-=c,b=x}return m}var X=function e(t){function n(e,n,r,i,a){G(t,e,n,r,i,a)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(H),W=function e(t){function n(e,n,r,i,a){if((o=e._squarify)&&o.ratio===t)for(var o,s,l,u,c,f=-1,d=o.length,h=e.value;++f<d;){for(l=(s=o[f]).children,u=s.value=0,c=l.length;u<c;++u)s.value+=l[u].value;s.dice?C(s,n,r,i,r+=(a-r)*s.value/h):Y(s,n,r,n+=(i-n)*s.value/h,a),h-=s.value}else e._squarify=o=G(t,e,n,r,i,a),o.ratio=t}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(H);e.cluster=function(){var e=t,i=1,a=1,o=!1;function s(t){var s,l=0;t.eachAfter(function(t){var i=t.children;i?(t.x=function(e){return e.reduce(n,0)/e.length}(i),t.y=function(e){return 1+e.reduce(r,0)}(i)):(t.x=s?l+=e(t,s):0,t.y=0,s=t)});var u=function(e){for(var t;t=e.children;)e=t[0];return e}(t),c=function(e){for(var t;t=e.children;)e=t[t.length-1];return e}(t),f=u.x-e(u,c)/2,d=c.x+e(c,u)/2;return t.eachAfter(o?function(e){e.x=(e.x-t.x)*i,e.y=(t.y-e.y)*a}:function(e){e.x=(e.x-f)/(d-f)*i,e.y=(1-(t.y?e.y/t.y:1))*a})}return s.separation=function(t){return arguments.length?(e=t,s):e},s.size=function(e){return arguments.length?(o=!1,i=+e[0],a=+e[1],s):o?null:[i,a]},s.nodeSize=function(e){return arguments.length?(o=!0,i=+e[0],a=+e[1],s):o?[i,a]:null},s},e.hierarchy=a,e.pack=function(){var e=null,t=1,n=1,r=z;function i(i){return i.x=t/2,i.y=n/2,e?i.eachBefore(E(e)).eachAfter(S(r,.5)).eachBefore(O(1)):i.eachBefore(E(A)).eachAfter(S(z,1)).eachAfter(S(r,i.r/Math.min(t,n))).eachBefore(O(Math.min(t,n)/(2*i.r))),i}return i.radius=function(t){return arguments.length?(e=null==(n=t)?null:k(n),i):e;var n},i.size=function(e){return arguments.length?(t=+e[0],n=+e[1],i):[t,n]},i.padding=function(e){return arguments.length?(r="function"==typeof e?e:M(+e),i):r},i},e.packSiblings=function(e){return j(e),e},e.packEnclose=f,e.partition=function(){var e=1,t=1,n=0,r=!1;function i(i){var a=i.height+1;return i.x0=i.y0=n,i.x1=e,i.y1=t/a,i.eachBefore(function(e,t){return function(r){r.children&&C(r,r.x0,e*(r.depth+1)/t,r.x1,e*(r.depth+2)/t);var i=r.x0,a=r.y0,o=r.x1-n,s=r.y1-n;o<i&&(i=o=(i+o)/2),s<a&&(a=s=(a+s)/2),r.x0=i,r.y0=a,r.x1=o,r.y1=s}}(t,a)),r&&i.eachBefore(T),i}return i.round=function(e){return arguments.length?(r=!!e,i):r},i.size=function(n){return arguments.length?(e=+n[0],t=+n[1],i):[e,t]},i.padding=function(e){return arguments.length?(n=+e,i):n},i},e.stratify=function(){var e=q,t=B;function n(n){var r,i,a,o,s,c,f,d=n.length,h=new Array(d),p={};for(i=0;i<d;++i)r=n[i],s=h[i]=new u(r),null!=(c=e(r,i,n))&&(c+="")&&(p[f=N+(s.id=c)]=f in p?F:s);for(i=0;i<d;++i)if(s=h[i],null!=(c=t(n[i],i,n))&&(c+="")){if(!(o=p[N+c]))throw new Error("missing: "+c);if(o===F)throw new Error("ambiguous: "+c);o.children?o.children.push(s):o.children=[s],s.parent=o}else{if(a)throw new Error("multiple roots");a=s}if(!a)throw new Error("no root");if(a.parent=P,a.eachBefore(function(e){e.depth=e.parent.depth+1,--d}).eachBefore(l),a.parent=null,d>0)throw new Error("cycle");return a}return n.id=function(t){return arguments.length?(e=k(t),n):e},n.parentId=function(e){return arguments.length?(t=k(e),n):t},n},e.tree=function(){var e=D,t=1,n=1,r=null;function i(i){var l=function(e){for(var t,n,r,i,a,o=new V(e,0),s=[o];t=s.pop();)if(r=t._.children)for(t.children=new Array(a=r.length),i=a-1;i>=0;--i)s.push(n=t.children[i]=new V(r[i],i)),n.parent=t;return(o.parent=new V(null,0)).children=[o],o}(i);if(l.eachAfter(a),l.parent.m=-l.z,l.eachBefore(o),r)i.eachBefore(s);else{var u=i,c=i,f=i;i.eachBefore(function(e){e.x<u.x&&(u=e),e.x>c.x&&(c=e),e.depth>f.depth&&(f=e)});var d=u===c?1:e(u,c)/2,h=d-u.x,p=t/(c.x+d+h),v=n/(f.depth||1);i.eachBefore(function(e){e.x=(e.x+h)*p,e.y=e.depth*v})}return i}function a(t){var n=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(n){!function(e){for(var t,n=0,r=0,i=e.children,a=i.length;--a>=0;)(t=i[a]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(t);var a=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+e(t._,i._),t.m=t.z-a):t.z=a}else i&&(t.z=i.z+e(t._,i._));t.parent.A=function(t,n,r){if(n){for(var i,a=t,o=t,s=n,l=a.parent.children[0],u=a.m,c=o.m,f=s.m,d=l.m;s=R(s),a=I(a),s&&a;)l=I(l),(o=R(o)).a=t,(i=s.z+f-a.z-u+e(s._,a._))>0&&(L(U(s,t,r),t,i),u+=i,c+=i),f+=s.m,u+=a.m,d+=l.m,c+=o.m;s&&!R(o)&&(o.t=s,o.m+=f-c),a&&!I(l)&&(l.t=a,l.m+=u-d,r=t)}return r}(t,i,t.parent.A||r[0])}function o(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function s(e){e.x*=t,e.y=e.depth*n}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i},e.treemap=function(){var e=X,t=!1,n=1,r=1,i=[0],a=z,o=z,s=z,l=z,u=z;function c(e){return e.x0=e.y0=0,e.x1=n,e.y1=r,e.eachBefore(f),i=[0],t&&e.eachBefore(T),e}function f(t){var n=i[t.depth],r=t.x0+n,c=t.y0+n,f=t.x1-n,d=t.y1-n;f<r&&(r=f=(r+f)/2),d<c&&(c=d=(c+d)/2),t.x0=r,t.y0=c,t.x1=f,t.y1=d,t.children&&(n=i[t.depth+1]=a(t)/2,r+=u(t)-n,c+=o(t)-n,(f-=s(t)-n)<r&&(r=f=(r+f)/2),(d-=l(t)-n)<c&&(c=d=(c+d)/2),e(t,r,c,f,d))}return c.round=function(e){return arguments.length?(t=!!e,c):t},c.size=function(e){return arguments.length?(n=+e[0],r=+e[1],c):[n,r]},c.tile=function(t){return arguments.length?(e=k(t),c):e},c.padding=function(e){return arguments.length?c.paddingInner(e).paddingOuter(e):c.paddingInner()},c.paddingInner=function(e){return arguments.length?(a="function"==typeof e?e:M(+e),c):a},c.paddingOuter=function(e){return arguments.length?c.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):c.paddingTop()},c.paddingTop=function(e){return arguments.length?(o="function"==typeof e?e:M(+e),c):o},c.paddingRight=function(e){return arguments.length?(s="function"==typeof e?e:M(+e),c):s},c.paddingBottom=function(e){return arguments.length?(l="function"==typeof e?e:M(+e),c):l},c.paddingLeft=function(e){return arguments.length?(u="function"==typeof e?e:M(+e),c):u},c},e.treemapBinary=function(e,t,n,r,i){var a,o,s=e.children,l=s.length,u=new Array(l+1);for(u[0]=o=a=0;a<l;++a)u[a+1]=o+=s[a].value;!function e(t,n,r,i,a,o,l){if(t>=n-1){var c=s[t];return c.x0=i,c.y0=a,c.x1=o,void(c.y1=l)}for(var f=u[t],d=r/2+f,h=t+1,p=n-1;h<p;){var v=h+p>>>1;u[v]<d?h=v+1:p=v}d-u[h-1]<u[h]-d&&t+1<h&&--h;var g=u[h]-f,m=r-g;if(o-i>l-a){var y=(i*m+o*g)/r;e(t,h,g,i,a,y,l),e(h,n,m,y,a,o,l)}else{var b=(a*m+l*g)/r;e(t,h,g,i,a,o,b),e(h,n,m,i,b,o,l)}}(0,l,e.value,t,n,r,i)},e.treemapDice=C,e.treemapSlice=Y,e.treemapSliceDice=function(e,t,n,r,i){(1&e.depth?Y:C)(e,t,n,r,i)},e.treemapSquarify=X,e.treemapResquarify=W,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],23:[function(e,t,n){var r,i;r=this,i=function(e,t){"use strict";function n(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}function r(e){var t=e.length-1;return function(r){var i=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),a=e[i],o=e[i+1],s=i>0?e[i-1]:2*a-o,l=i<t-1?e[i+2]:2*o-a;return n((r-i/t)*t,s,a,o,l)}}function i(e){var t=e.length;return function(r){var i=Math.floor(((r%=1)<0?++r:r)*t),a=e[(i+t-1)%t],o=e[i%t],s=e[(i+1)%t],l=e[(i+2)%t];return n((r-i/t)*t,a,o,s,l)}}function a(e){return function(){return e}}function o(e,t){return function(n){return e+n*t}}function s(e,t){var n=t-e;return n?o(e,n>180||n<-180?n-360*Math.round(n/360):n):a(isNaN(e)?t:e)}function l(e){return 1==(e=+e)?u:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):a(isNaN(t)?n:t)}}function u(e,t){var n=t-e;return n?o(e,n):a(isNaN(e)?t:e)}var c=function e(n){var r=l(n);function i(e,n){var i=r((e=t.rgb(e)).r,(n=t.rgb(n)).r),a=r(e.g,n.g),o=r(e.b,n.b),s=u(e.opacity,n.opacity);return function(t){return e.r=i(t),e.g=a(t),e.b=o(t),e.opacity=s(t),e+""}}return i.gamma=e,i}(1);function f(e){return function(n){var r,i,a=n.length,o=new Array(a),s=new Array(a),l=new Array(a);for(r=0;r<a;++r)i=t.rgb(n[r]),o[r]=i.r||0,s[r]=i.g||0,l[r]=i.b||0;return o=e(o),s=e(s),l=e(l),i.opacity=1,function(e){return i.r=o(e),i.g=s(e),i.b=l(e),i+""}}}var d=f(r),h=f(i);function p(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=_(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<i;++n)o[n]=a[n](e);return o}}function v(e,t){var n=new Date;return t-=e=+e,function(r){return n.setTime(e+t*r),n}}function g(e,t){return t-=e=+e,function(n){return e+t*n}}function m(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=_(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var y=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,b=new RegExp(y.source,"g");function x(e,t){var n,r,i,a=y.lastIndex=b.lastIndex=0,o=-1,s=[],l=[];for(e+="",t+="";(n=y.exec(e))&&(r=b.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,l.push({i:o,x:g(n,r)})),a=b.lastIndex;return a<t.length&&(i=t.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function _(e,n){var r,i=typeof n;return null==n||"boolean"===i?a(n):("number"===i?g:"string"===i?(r=t.color(n))?(n=r,c):x:n instanceof t.color?c:n instanceof Date?v:Array.isArray(n)?p:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?m:g)(e,n)}var w,j,k,z,M=180/Math.PI,A={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function E(e,t,n,r,i,a){var o,s,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*M,skewX:Math.atan(l)*M,scaleX:o,scaleY:s}}function S(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(a,o){var s=[],l=[];return a=e(a),o=e(o),function(e,r,i,a,o,s){if(e!==i||r!==a){var l=o.push("translate(",null,t,null,n);s.push({i:l-4,x:g(e,i)},{i:l-2,x:g(r,a)})}else(i||a)&&o.push("translate("+i+t+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,s,l),function(e,t,n,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:g(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(a.rotate,o.rotate,s,l),function(e,t,n,a){e!==t?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:g(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(a.skewX,o.skewX,s,l),function(e,t,n,r,a,o){if(e!==n||t!==r){var s=a.push(i(a)+"scale(",null,",",null,")");o.push({i:s-4,x:g(e,n)},{i:s-2,x:g(t,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,s,l),a=o=null,function(e){for(var t,n=-1,r=l.length;++n<r;)s[(t=l[n]).i]=t.x(e);return s.join("")}}}var O=S(function(e){return"none"===e?A:(w||(w=document.createElement("DIV"),j=document.documentElement,k=document.defaultView),w.style.transform=e,e=k.getComputedStyle(j.appendChild(w),null).getPropertyValue("transform"),j.removeChild(w),E(+(e=e.slice(7,-1).split(","))[0],+e[1],+e[2],+e[3],+e[4],+e[5]))},"px, ","px)","deg)"),T=S(function(e){return null==e?A:(z||(z=document.createElementNS("http://www.w3.org/2000/svg","g")),z.setAttribute("transform",e),(e=z.transform.baseVal.consolidate())?E((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):A)},", ",")",")"),C=Math.SQRT2,N=2,P=4,F=1e-12;function q(e){return((e=Math.exp(e))+1/e)/2}function B(e){return function(n,r){var i=e((n=t.hsl(n)).h,(r=t.hsl(r)).h),a=u(n.s,r.s),o=u(n.l,r.l),s=u(n.opacity,r.opacity);return function(e){return n.h=i(e),n.s=a(e),n.l=o(e),n.opacity=s(e),n+""}}}var D=B(s),I=B(u);function R(e){return function(n,r){var i=e((n=t.hcl(n)).h,(r=t.hcl(r)).h),a=u(n.c,r.c),o=u(n.l,r.l),s=u(n.opacity,r.opacity);return function(e){return n.h=i(e),n.c=a(e),n.l=o(e),n.opacity=s(e),n+""}}}var L=R(s),U=R(u);function V(e){return function n(r){function i(n,i){var a=e((n=t.cubehelix(n)).h,(i=t.cubehelix(i)).h),o=u(n.s,i.s),s=u(n.l,i.l),l=u(n.opacity,i.opacity);return function(e){return n.h=a(e),n.s=o(e),n.l=s(Math.pow(e,r)),n.opacity=l(e),n+""}}return r=+r,i.gamma=n,i}(1)}var Y=V(s),H=V(u);e.interpolate=_,e.interpolateArray=p,e.interpolateBasis=r,e.interpolateBasisClosed=i,e.interpolateDate=v,e.interpolateDiscrete=function(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}},e.interpolateHue=function(e,t){var n=s(+e,+t);return function(e){var t=n(e);return t-360*Math.floor(t/360)}},e.interpolateNumber=g,e.interpolateObject=m,e.interpolateRound=function(e,t){return t-=e=+e,function(n){return Math.round(e+t*n)}},e.interpolateString=x,e.interpolateTransformCss=O,e.interpolateTransformSvg=T,e.interpolateZoom=function(e,t){var n,r,i=e[0],a=e[1],o=e[2],s=t[0],l=t[1],u=t[2],c=s-i,f=l-a,d=c*c+f*f;if(d<F)r=Math.log(u/o)/C,n=function(e){return[i+e*c,a+e*f,o*Math.exp(C*e*r)]};else{var h=Math.sqrt(d),p=(u*u-o*o+P*d)/(2*o*N*h),v=(u*u-o*o-P*d)/(2*u*N*h),g=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(v*v+1)-v);r=(m-g)/C,n=function(e){var t,n=e*r,s=q(g),l=o/(N*h)*(s*(t=C*n+g,((t=Math.exp(2*t))-1)/(t+1))-function(e){return((e=Math.exp(e))-1/e)/2}(g));return[i+l*c,a+l*f,o*s/q(C*n+g)]}}return n.duration=1e3*r,n},e.interpolateRgb=c,e.interpolateRgbBasis=d,e.interpolateRgbBasisClosed=h,e.interpolateHsl=D,e.interpolateHslLong=I,e.interpolateLab=function(e,n){var r=u((e=t.lab(e)).l,(n=t.lab(n)).l),i=u(e.a,n.a),a=u(e.b,n.b),o=u(e.opacity,n.opacity);return function(t){return e.l=r(t),e.a=i(t),e.b=a(t),e.opacity=o(t),e+""}},e.interpolateHcl=L,e.interpolateHclLong=U,e.interpolateCubehelix=Y,e.interpolateCubehelixLong=H,e.piecewise=function(e,t){for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return a[t](e-t)}},e.quantize=function(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n,e("d3-color")):"function"==typeof define&&define.amd?define(["exports","d3-color"],i):i(r.d3=r.d3||{},r.d3)},{"d3-color":12}],24:[function(e,t,n){var r,i;r=this,i=function(e){"use strict";var t=Math.PI,n=2*t,r=n-1e-6;function i(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function a(){return new i}i.prototype=a.prototype={constructor:i,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(e,n,r,i,a){e=+e,n=+n,r=+r,i=+i,a=+a;var o=this._x1,s=this._y1,l=r-e,u=i-n,c=o-e,f=s-n,d=c*c+f*f;if(a<0)throw new Error("negative radius: "+a);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=n);else if(d>1e-6)if(Math.abs(f*l-u*c)>1e-6&&a){var h=r-o,p=i-s,v=l*l+u*u,g=h*h+p*p,m=Math.sqrt(v),y=Math.sqrt(d),b=a*Math.tan((t-Math.acos((v+d-g)/(2*m*y)))/2),x=b/y,_=b/m;Math.abs(x-1)>1e-6&&(this._+="L"+(e+x*c)+","+(n+x*f)),this._+="A"+a+","+a+",0,0,"+ +(f*h>c*p)+","+(this._x1=e+_*l)+","+(this._y1=n+_*u)}else this._+="L"+(this._x1=e)+","+(this._y1=n);else;},arc:function(e,i,a,o,s,l){e=+e,i=+i,l=!!l;var u=(a=+a)*Math.cos(o),c=a*Math.sin(o),f=e+u,d=i+c,h=1^l,p=l?o-s:s-o;if(a<0)throw new Error("negative radius: "+a);null===this._x1?this._+="M"+f+","+d:(Math.abs(this._x1-f)>1e-6||Math.abs(this._y1-d)>1e-6)&&(this._+="L"+f+","+d),a&&(p<0&&(p=p%n+n),p>r?this._+="A"+a+","+a+",0,1,"+h+","+(e-u)+","+(i-c)+"A"+a+","+a+",0,1,"+h+","+(this._x1=f)+","+(this._y1=d):p>1e-6&&(this._+="A"+a+","+a+",0,"+ +(p>=t)+","+h+","+(this._x1=e+a*Math.cos(s))+","+(this._y1=i+a*Math.sin(s))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}},e.path=a,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i((r=r||self).d3=r.d3||{})},{}],25:[function(e,t,n){var r,i;r=this,i=function(e){"use strict";function t(e,t){return e[0]-t[0]||e[1]-t[1]}function n(e){for(var t,n,r,i=e.length,a=[0,1],o=2,s=2;s<i;++s){for(;o>1&&(t=e[a[o-2]],n=e[a[o-1]],r=e[s],(n[0]-t[0])*(r[1]-t[1])-(n[1]-t[1])*(r[0]-t[0])<=0);)--o;a[o++]=s}return a.slice(0,o)}e.polygonArea=function(e){for(var t,n=-1,r=e.length,i=e[r-1],a=0;++n<r;)t=i,i=e[n],a+=t[1]*i[0]-t[0]*i[1];return a/2},e.polygonCentroid=function(e){for(var t,n,r=-1,i=e.length,a=0,o=0,s=e[i-1],l=0;++r<i;)t=s,s=e[r],l+=n=t[0]*s[1]-s[0]*t[1],a+=(t[0]+s[0])*n,o+=(t[1]+s[1])*n;return[a/(l*=3),o/l]},e.polygonHull=function(e){if((i=e.length)<3)return null;var r,i,a=new Array(i),o=new Array(i);for(r=0;r<i;++r)a[r]=[+e[r][0],+e[r][1],r];for(a.sort(t),r=0;r<i;++r)o[r]=[a[r][0],-a[r][1]];var s=n(a),l=n(o),u=l[0]===s[0],c=l[l.length-1]===s[s.length-1],f=[];for(r=s.length-1;r>=0;--r)f.push(e[a[s[r]][2]]);for(r=+u;r<l.length-c;++r)f.push(e[a[l[r]][2]]);return f},e.polygonContains=function(e,t){for(var n,r,i=e.length,a=e[i-1],o=t[0],s=t[1],l=a[0],u=a[1],c=!1,f=0;f<i;++f)n=(a=e[f])[0],(r=a[1])>s!=u>s&&o<(l-n)*(s-r)/(u-r)+n&&(c=!c),l=n,u=r;return c},e.polygonLength=function(e){for(var t,n,r=-1,i=e.length,a=e[i-1],o=a[0],s=a[1],l=0;++r<i;)t=o,n=s,t-=o=(a=e[r])[0],n-=s=a[1],l+=Math.sqrt(t*t+n*n);return l},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],26:[function(e,t,n){var r,i;r=this,i=function(e){"use strict";function t(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,a,o,s,l,u,c,f,d,h=e._root,p={data:r},v=e._x0,g=e._y0,m=e._x1,y=e._y1;if(!h)return e._root=p,e;for(;h.length;)if((u=t>=(a=(v+m)/2))?v=a:m=a,(c=n>=(o=(g+y)/2))?g=o:y=o,i=h,!(h=h[f=c<<1|u]))return i[f]=p,e;if(s=+e._x.call(null,h.data),l=+e._y.call(null,h.data),t===s&&n===l)return p.next=h,i?i[f]=p:e._root=p,e;do{i=i?i[f]=new Array(4):e._root=new Array(4),(u=t>=(a=(v+m)/2))?v=a:m=a,(c=n>=(o=(g+y)/2))?g=o:y=o}while((f=c<<1|u)==(d=(l>=o)<<1|s>=a));return i[d]=h,i[f]=p,e}function n(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function r(e){return e[0]}function i(e){return e[1]}function a(e,t,n){var a=new o(null==t?r:t,null==n?i:n,NaN,NaN,NaN,NaN);return null==e?a:a.addAll(e)}function o(e,t,n,r,i,a){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function s(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var l=a.prototype=o.prototype;l.copy=function(){var e,t,n=new o(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=s(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=s(t));return n},l.add=function(e){var n=+this._x.call(null,e),r=+this._y.call(null,e);return t(this.cover(n,r),n,r,e)},l.addAll=function(e){var n,r,i,a,o=e.length,s=new Array(o),l=new Array(o),u=1/0,c=1/0,f=-1/0,d=-1/0;for(r=0;r<o;++r)isNaN(i=+this._x.call(null,n=e[r]))||isNaN(a=+this._y.call(null,n))||(s[r]=i,l[r]=a,i<u&&(u=i),i>f&&(f=i),a<c&&(c=a),a>d&&(d=a));if(u>f||c>d)return this;for(this.cover(u,c).cover(f,d),r=0;r<o;++r)t(this,s[r],l[r],e[r]);return this},l.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,a=(r=Math.floor(t))+1;else{for(var o,s,l=i-n,u=this._root;n>e||e>=i||r>t||t>=a;)switch(s=(t<r)<<1|e<n,(o=new Array(4))[s]=u,u=o,l*=2,s){case 0:i=n+l,a=r+l;break;case 1:n=i-l,a=r+l;break;case 2:i=n+l,r=a-l;break;case 3:n=i-l,r=a-l}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this},l.data=function(){var e=[];return this.visit(function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)}),e},l.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},l.find=function(e,t,r){var i,a,o,s,l,u,c,f=this._x0,d=this._y0,h=this._x1,p=this._y1,v=[],g=this._root;for(g&&v.push(new n(g,f,d,h,p)),null==r?r=1/0:(f=e-r,d=t-r,h=e+r,p=t+r,r*=r);u=v.pop();)if(!(!(g=u.node)||(a=u.x0)>h||(o=u.y0)>p||(s=u.x1)<f||(l=u.y1)<d))if(g.length){var m=(a+s)/2,y=(o+l)/2;v.push(new n(g[3],m,y,s,l),new n(g[2],a,y,m,l),new n(g[1],m,o,s,y),new n(g[0],a,o,m,y)),(c=(t>=y)<<1|e>=m)&&(u=v[v.length-1],v[v.length-1]=v[v.length-1-c],v[v.length-1-c]=u)}else{var b=e-+this._x.call(null,g.data),x=t-+this._y.call(null,g.data),_=b*b+x*x;if(_<r){var w=Math.sqrt(r=_);f=e-w,d=t-w,h=e+w,p=t+w,i=g.data}}return i},l.remove=function(e){if(isNaN(a=+this._x.call(null,e))||isNaN(o=+this._y.call(null,e)))return this;var t,n,r,i,a,o,s,l,u,c,f,d,h=this._root,p=this._x0,v=this._y0,g=this._x1,m=this._y1;if(!h)return this;if(h.length)for(;;){if((u=a>=(s=(p+g)/2))?p=s:g=s,(c=o>=(l=(v+m)/2))?v=l:m=l,t=h,!(h=h[f=c<<1|u]))return this;if(!h.length)break;(t[f+1&3]||t[f+2&3]||t[f+3&3])&&(n=t,d=f)}for(;h.data!==e;)if(r=h,!(h=h.next))return this;return(i=h.next)&&delete h.next,r?(i?r.next=i:delete r.next,this):t?(i?t[f]=i:delete t[f],(h=t[0]||t[1]||t[2]||t[3])&&h===(t[3]||t[2]||t[1]||t[0])&&!h.length&&(n?n[d]=h:this._root=h),this):(this._root=i,this)},l.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},l.root=function(){return this._root},l.size=function(){var e=0;return this.visit(function(t){if(!t.length)do{++e}while(t=t.next)}),e},l.visit=function(e){var t,r,i,a,o,s,l=[],u=this._root;for(u&&l.push(new n(u,this._x0,this._y0,this._x1,this._y1));t=l.pop();)if(!e(u=t.node,i=t.x0,a=t.y0,o=t.x1,s=t.y1)&&u.length){var c=(i+o)/2,f=(a+s)/2;(r=u[3])&&l.push(new n(r,c,f,o,s)),(r=u[2])&&l.push(new n(r,i,f,c,s)),(r=u[1])&&l.push(new n(r,c,a,o,f)),(r=u[0])&&l.push(new n(r,i,a,c,f))}return this},l.visitAfter=function(e){var t,r=[],i=[];for(this._root&&r.push(new n(this._root,this._x0,this._y0,this._x1,this._y1));t=r.pop();){var a=t.node;if(a.length){var o,s=t.x0,l=t.y0,u=t.x1,c=t.y1,f=(s+u)/2,d=(l+c)/2;(o=a[0])&&r.push(new n(o,s,l,f,d)),(o=a[1])&&r.push(new n(o,f,l,u,d)),(o=a[2])&&r.push(new n(o,s,d,f,c)),(o=a[3])&&r.push(new n(o,f,d,u,c))}i.push(t)}for(;t=i.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},l.x=function(e){return arguments.length?(this._x=e,this):this._x},l.y=function(e){return arguments.length?(this._y=e,this):this._y},e.quadtree=a,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],27:[function(e,t,n){var r,i;r=this,i=function(e){"use strict";function t(){return Math.random()}var n=function e(t){function n(e,n){return e=null==e?0:+e,n=null==n?1:+n,1===arguments.length?(n=e,e=0):n-=e,function(){return t()*n+e}}return n.source=e,n}(t),r=function e(t){function n(e,n){var r,i;return e=null==e?0:+e,n=null==n?1:+n,function(){var a;if(null!=r)a=r,r=null;else do{r=2*t()-1,a=2*t()-1,i=r*r+a*a}while(!i||i>1);return e+n*a*Math.sqrt(-2*Math.log(i)/i)}}return n.source=e,n}(t),i=function e(t){function n(){var e=r.source(t).apply(this,arguments);return function(){return Math.exp(e())}}return n.source=e,n}(t),a=function e(t){function n(e){return function(){for(var n=0,r=0;r<e;++r)n+=t();return n}}return n.source=e,n}(t),o=function e(t){function n(e){var n=a.source(t)(e);return function(){return n()/e}}return n.source=e,n}(t),s=function e(t){function n(e){return function(){return-Math.log(1-t())/e}}return n.source=e,n}(t);e.randomUniform=n,e.randomNormal=r,e.randomLogNormal=i,e.randomBates=o,e.randomIrwinHall=a,e.randomExponential=s,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],28:[function(e,t,n){var r,i;r=this,i=function(e,t,n){"use strict";function r(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}var i=r("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),a=r("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),o=r("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),s=r("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),l=r("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),u=r("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),c=r("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),f=r("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),d=r("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),h=r("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function p(e){return t.interpolateRgbBasis(e[e.length-1])}var v=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(r),g=p(v),m=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(r),y=p(m),b=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(r),x=p(b),_=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(r),w=p(_),j=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(r),k=p(j),z=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(r),M=p(z),A=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(r),E=p(A),S=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(r),O=p(S),T=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(r),C=p(T),N=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(r),P=p(N),F=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(r),q=p(F),B=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(r),D=p(B),I=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(r),R=p(I),L=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(r),U=p(L),V=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(r),Y=p(V),H=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(r),G=p(H),X=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(r),W=p(X),Q=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(r),Z=p(Q),$=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(r),J=p($),K=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(r),ee=p(K),te=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(r),ne=p(te),re=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(r),ie=p(re),ae=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(r),oe=p(ae),se=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(r),le=p(se),ue=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(r),ce=p(ue),fe=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(r),de=p(fe),he=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(r),pe=p(he),ve=t.interpolateCubehelixLong(n.cubehelix(300,.5,0),n.cubehelix(-240,.5,1)),ge=t.interpolateCubehelixLong(n.cubehelix(-100,.75,.35),n.cubehelix(80,1.5,.8)),me=t.interpolateCubehelixLong(n.cubehelix(260,.75,.35),n.cubehelix(80,1.5,.8)),ye=n.cubehelix(),be=n.rgb(),xe=Math.PI/3,_e=2*Math.PI/3;function we(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}var je=we(r("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),ke=we(r("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),ze=we(r("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Me=we(r("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));e.interpolateBlues=ie,e.interpolateBrBG=g,e.interpolateBuGn=P,e.interpolateBuPu=q,e.interpolateCool=me,e.interpolateCubehelixDefault=ve,e.interpolateGnBu=D,e.interpolateGreens=oe,e.interpolateGreys=le,e.interpolateInferno=ze,e.interpolateMagma=ke,e.interpolateOrRd=R,e.interpolateOranges=pe,e.interpolatePRGn=y,e.interpolatePiYG=x,e.interpolatePlasma=Me,e.interpolatePuBu=Y,e.interpolatePuBuGn=U,e.interpolatePuOr=w,e.interpolatePuRd=G,e.interpolatePurples=ce,e.interpolateRainbow=function(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return ye.h=360*e-100,ye.s=1.5-1.5*t,ye.l=.8-.9*t,ye+""},e.interpolateRdBu=k,e.interpolateRdGy=M,e.interpolateRdPu=W,e.interpolateRdYlBu=E,e.interpolateRdYlGn=O,e.interpolateReds=de,e.interpolateSinebow=function(e){var t;return e=(.5-e)*Math.PI,be.r=255*(t=Math.sin(e))*t,be.g=255*(t=Math.sin(e+xe))*t,be.b=255*(t=Math.sin(e+_e))*t,be+""},e.interpolateSpectral=C,e.interpolateViridis=je,e.interpolateWarm=ge,e.interpolateYlGn=J,e.interpolateYlGnBu=Z,e.interpolateYlOrBr=ee,e.interpolateYlOrRd=ne,e.schemeAccent=a,e.schemeBlues=re,e.schemeBrBG=v,e.schemeBuGn=N,e.schemeBuPu=F,e.schemeCategory10=i,e.schemeDark2=o,e.schemeGnBu=B,e.schemeGreens=ae,e.schemeGreys=se,e.schemeOrRd=I,e.schemeOranges=he,e.schemePRGn=m,e.schemePaired=s,e.schemePastel1=l,e.schemePastel2=u,e.schemePiYG=b,e.schemePuBu=V,e.schemePuBuGn=L,e.schemePuOr=_,e.schemePuRd=H,e.schemePurples=ue,e.schemeRdBu=j,e.schemeRdGy=z,e.schemeRdPu=X,e.schemeRdYlBu=A,e.schemeRdYlGn=S,e.schemeReds=fe,e.schemeSet1=c,e.schemeSet2=f,e.schemeSet3=d,e.schemeSpectral=T,e.schemeTableau10=h,e.schemeYlGn=$,e.schemeYlGnBu=Q,e.schemeYlOrBr=K,e.schemeYlOrRd=te,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n,e("d3-interpolate"),e("d3-color")):"function"==typeof define&&define.amd?define(["exports","d3-interpolate","d3-color"],i):i((r=r||self).d3=r.d3||{},r.d3,r.d3)},{"d3-color":12,"d3-interpolate":23}],29:[function(e,t,n){var r,i;r=this,i=function(e,t,n,r,i,a,o){"use strict";function s(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function l(e,t){switch(arguments.length){case 0:break;case 1:this.interpolator(e);break;default:this.interpolator(t).domain(e)}return this}var u=Array.prototype,c=u.map,f=u.slice,d={name:"implicit"};function h(){var e=t.map(),n=[],r=[],i=d;function a(t){var a=t+"",o=e.get(a);if(!o){if(i!==d)return i;e.set(a,o=n.push(t))}return r[(o-1)%r.length]}return a.domain=function(r){if(!arguments.length)return n.slice();n=[],e=t.map();for(var i,o,s=-1,l=r.length;++s<l;)e.has(o=(i=r[s])+"")||e.set(o,n.push(i));return a},a.range=function(e){return arguments.length?(r=f.call(e),a):r.slice()},a.unknown=function(e){return arguments.length?(i=e,a):i},a.copy=function(){return h(n,r).unknown(i)},s.apply(a,arguments),a}function p(){var e,t,r=h().unknown(void 0),i=r.domain,a=r.range,o=[0,1],l=!1,u=0,c=0,f=.5;function d(){var r=i().length,s=o[1]<o[0],d=o[s-0],h=o[1-s];e=(h-d)/Math.max(1,r-u+2*c),l&&(e=Math.floor(e)),d+=(h-d-e*(r-u))*f,t=e*(1-u),l&&(d=Math.round(d),t=Math.round(t));var p=n.range(r).map(function(t){return d+e*t});return a(s?p.reverse():p)}return delete r.unknown,r.domain=function(e){return arguments.length?(i(e),d()):i()},r.range=function(e){return arguments.length?(o=[+e[0],+e[1]],d()):o.slice()},r.rangeRound=function(e){return o=[+e[0],+e[1]],l=!0,d()},r.bandwidth=function(){return t},r.step=function(){return e},r.round=function(e){return arguments.length?(l=!!e,d()):l},r.padding=function(e){return arguments.length?(u=Math.min(1,c=+e),d()):u},r.paddingInner=function(e){return arguments.length?(u=Math.min(1,e),d()):u},r.paddingOuter=function(e){return arguments.length?(c=+e,d()):c},r.align=function(e){return arguments.length?(f=Math.max(0,Math.min(1,e)),d()):f},r.copy=function(){return p(i(),o).round(l).paddingInner(u).paddingOuter(c).align(f)},s.apply(d(),arguments)}function v(e){return+e}var g=[0,1];function m(e){return e}function y(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function b(e){var t,n=e[0],r=e[e.length-1];return n>r&&(t=n,n=r,r=t),function(e){return Math.max(n,Math.min(r,e))}}function x(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=y(i,r),a=n(o,a)):(r=y(r,i),a=n(a,o)),function(e){return a(r(e))}}function _(e,t,r){var i=Math.min(e.length,t.length)-1,a=new Array(i),o=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)a[s]=y(e[s],e[s+1]),o[s]=r(t[s],t[s+1]);return function(t){var r=n.bisect(e,t,1,i)-1;return o[r](a[r](t))}}function w(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function j(){var e,t,n,i,a,o,s=g,l=g,u=r.interpolate,d=m;function h(){return i=Math.min(s.length,l.length)>2?_:x,a=o=null,p}function p(t){return isNaN(t=+t)?n:(a||(a=i(s.map(e),l,u)))(e(d(t)))}return p.invert=function(n){return d(t((o||(o=i(l,s.map(e),r.interpolateNumber)))(n)))},p.domain=function(e){return arguments.length?(s=c.call(e,v),d===m||(d=b(s)),h()):s.slice()},p.range=function(e){return arguments.length?(l=f.call(e),h()):l.slice()},p.rangeRound=function(e){return l=f.call(e),u=r.interpolateRound,h()},p.clamp=function(e){return arguments.length?(d=e?b(s):m,p):d!==m},p.interpolate=function(e){return arguments.length?(u=e,h()):u},p.unknown=function(e){return arguments.length?(n=e,p):n},function(n,r){return e=n,t=r,h()}}function k(e,t){return j()(e,t)}function z(e,t,r,a){var o,s=n.tickStep(e,t,r);switch((a=i.formatSpecifier(null==a?",f":a)).type){case"s":var l=Math.max(Math.abs(e),Math.abs(t));return null!=a.precision||isNaN(o=i.precisionPrefix(s,l))||(a.precision=o),i.formatPrefix(a,l);case"":case"e":case"g":case"p":case"r":null!=a.precision||isNaN(o=i.precisionRound(s,Math.max(Math.abs(e),Math.abs(t))))||(a.precision=o-("e"===a.type));break;case"f":case"%":null!=a.precision||isNaN(o=i.precisionFixed(s))||(a.precision=o-2*("%"===a.type))}return i.format(a)}function M(e){var t=e.domain;return e.ticks=function(e){var r=t();return n.ticks(r[0],r[r.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return z(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(r){null==r&&(r=10);var i,a=t(),o=0,s=a.length-1,l=a[o],u=a[s];return u<l&&(i=l,l=u,u=i,i=o,o=s,s=i),(i=n.tickIncrement(l,u,r))>0?(l=Math.floor(l/i)*i,u=Math.ceil(u/i)*i,i=n.tickIncrement(l,u,r)):i<0&&(l=Math.ceil(l*i)/i,u=Math.floor(u*i)/i,i=n.tickIncrement(l,u,r)),i>0?(a[o]=Math.floor(l/i)*i,a[s]=Math.ceil(u/i)*i,t(a)):i<0&&(a[o]=Math.ceil(l*i)/i,a[s]=Math.floor(u*i)/i,t(a)),e},e}function A(e,t){var n,r=0,i=(e=e.slice()).length-1,a=e[r],o=e[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),e[r]=t.floor(a),e[i]=t.ceil(o),e}function E(e){return Math.log(e)}function S(e){return Math.exp(e)}function O(e){return-Math.log(-e)}function T(e){return-Math.exp(-e)}function C(e){return isFinite(e)?+("1e"+e):e<0?0:e}function N(e){return function(t){return-e(-t)}}function P(e){var t,r,a=e(E,S),o=a.domain,s=10;function l(){return t=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}(s),r=function(e){return 10===e?C:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}(s),o()[0]<0?(t=N(t),r=N(r),e(O,T)):e(E,S),a}return a.base=function(e){return arguments.length?(s=+e,l()):s},a.domain=function(e){return arguments.length?(o(e),l()):o()},a.ticks=function(e){var i,a=o(),l=a[0],u=a[a.length-1];(i=u<l)&&(h=l,l=u,u=h);var c,f,d,h=t(l),p=t(u),v=null==e?10:+e,g=[];if(!(s%1)&&p-h<v){if(h=Math.round(h)-1,p=Math.round(p)+1,l>0){for(;h<p;++h)for(f=1,c=r(h);f<s;++f)if(!((d=c*f)<l)){if(d>u)break;g.push(d)}}else for(;h<p;++h)for(f=s-1,c=r(h);f>=1;--f)if(!((d=c*f)<l)){if(d>u)break;g.push(d)}}else g=n.ticks(h,p,Math.min(p-h,v)).map(r);return i?g.reverse():g},a.tickFormat=function(e,n){if(null==n&&(n=10===s?".0e":","),"function"!=typeof n&&(n=i.format(n)),e===1/0)return n;null==e&&(e=10);var o=Math.max(1,s*e/a.ticks().length);return function(e){var i=e/r(Math.round(t(e)));return i*s<s-.5&&(i*=s),i<=o?n(e):""}},a.nice=function(){return o(A(o(),{floor:function(e){return r(Math.floor(t(e)))},ceil:function(e){return r(Math.ceil(t(e)))}}))},a}function F(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function q(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function B(e){var t=1,n=e(F(t),q(t));return n.constant=function(n){return arguments.length?e(F(t=+n),q(t)):t},M(n)}function D(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function I(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function R(e){return e<0?-e*e:e*e}function L(e){var t=e(m,m),n=1;return t.exponent=function(t){return arguments.length?1===(n=+t)?e(m,m):.5===n?e(I,R):e(D(n),D(1/n)):n},M(t)}function U(){var e=L(j());return e.copy=function(){return w(e,U()).exponent(e.exponent())},s.apply(e,arguments),e}var V=1e3,Y=60*V,H=60*Y,G=24*H,X=7*G,W=30*G,Q=365*G;function Z(e){return new Date(e)}function $(e){return e instanceof Date?+e:+new Date(+e)}function J(e,t,r,i,a,o,s,l,u){var f=k(m,m),d=f.invert,h=f.domain,p=u(".%L"),v=u(":%S"),g=u("%I:%M"),y=u("%I %p"),b=u("%a %d"),x=u("%b %d"),_=u("%B"),j=u("%Y"),z=[[s,1,V],[s,5,5*V],[s,15,15*V],[s,30,30*V],[o,1,Y],[o,5,5*Y],[o,15,15*Y],[o,30,30*Y],[a,1,H],[a,3,3*H],[a,6,6*H],[a,12,12*H],[i,1,G],[i,2,2*G],[r,1,X],[t,1,W],[t,3,3*W],[e,1,Q]];function M(n){return(s(n)<n?p:o(n)<n?v:a(n)<n?g:i(n)<n?y:t(n)<n?r(n)<n?b:x:e(n)<n?_:j)(n)}function E(t,r,i,a){if(null==t&&(t=10),"number"==typeof t){var o=Math.abs(i-r)/t,s=n.bisector(function(e){return e[2]}).right(z,o);s===z.length?(a=n.tickStep(r/Q,i/Q,t),t=e):s?(a=(s=z[o/z[s-1][2]<z[s][2]/o?s-1:s])[1],t=s[0]):(a=Math.max(n.tickStep(r,i,t),1),t=l)}return null==a?t:t.every(a)}return f.invert=function(e){return new Date(d(e))},f.domain=function(e){return arguments.length?h(c.call(e,$)):h().map(Z)},f.ticks=function(e,t){var n,r=h(),i=r[0],a=r[r.length-1],o=a<i;return o&&(n=i,i=a,a=n),n=(n=E(e,i,a,t))?n.range(i,a+1):[],o?n.reverse():n},f.tickFormat=function(e,t){return null==t?M:u(t)},f.nice=function(e,t){var n=h();return(e=E(e,n[0],n[n.length-1],t))?h(A(n,e)):f},f.copy=function(){return w(f,J(e,t,r,i,a,o,s,l,u))},f}function K(){var e,t,n,r,i,a=0,o=1,s=m,l=!1;function u(t){return isNaN(t=+t)?i:s(0===n?.5:(t=(r(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}return u.domain=function(i){return arguments.length?(e=r(a=+i[0]),t=r(o=+i[1]),n=e===t?0:1/(t-e),u):[a,o]},u.clamp=function(e){return arguments.length?(l=!!e,u):l},u.interpolator=function(e){return arguments.length?(s=e,u):s},u.unknown=function(e){return arguments.length?(i=e,u):i},function(i){return r=i,e=i(a),t=i(o),n=e===t?0:1/(t-e),u}}function ee(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function te(){var e=L(K());return e.copy=function(){return ee(e,te()).exponent(e.exponent())},l.apply(e,arguments)}function ne(){var e,t,n,r,i,a,o,s=0,l=.5,u=1,c=m,f=!1;function d(e){return isNaN(e=+e)?o:(e=.5+((e=+a(e))-t)*(e<t?r:i),c(f?Math.max(0,Math.min(1,e)):e))}return d.domain=function(o){return arguments.length?(e=a(s=+o[0]),t=a(l=+o[1]),n=a(u=+o[2]),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),d):[s,l,u]},d.clamp=function(e){return arguments.length?(f=!!e,d):f},d.interpolator=function(e){return arguments.length?(c=e,d):c},d.unknown=function(e){return arguments.length?(o=e,d):o},function(o){return a=o,e=o(s),t=o(l),n=o(u),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),d}}function re(){var e=L(ne());return e.copy=function(){return ee(e,re()).exponent(e.exponent())},l.apply(e,arguments)}e.scaleBand=p,e.scalePoint=function(){return function e(t){var n=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return e(n())},t}(p.apply(null,arguments).paddingInner(1))},e.scaleIdentity=function e(t){var n;function r(e){return isNaN(e=+e)?n:e}return r.invert=r,r.domain=r.range=function(e){return arguments.length?(t=c.call(e,v),r):t.slice()},r.unknown=function(e){return arguments.length?(n=e,r):n},r.copy=function(){return e(t).unknown(n)},t=arguments.length?c.call(t,v):[0,1],M(r)},e.scaleLinear=function e(){var t=k(m,m);return t.copy=function(){return w(t,e())},s.apply(t,arguments),M(t)},e.scaleLog=function e(){var t=P(j()).domain([1,10]);return t.copy=function(){return w(t,e()).base(t.base())},s.apply(t,arguments),t},e.scaleSymlog=function e(){var t=B(j());return t.copy=function(){return w(t,e()).constant(t.constant())},s.apply(t,arguments)},e.scaleOrdinal=h,e.scaleImplicit=d,e.scalePow=U,e.scaleSqrt=function(){return U.apply(null,arguments).exponent(.5)},e.scaleQuantile=function e(){var t,r=[],i=[],a=[];function o(){var e=0,t=Math.max(1,i.length);for(a=new Array(t-1);++e<t;)a[e-1]=n.quantile(r,e/t);return l}function l(e){return isNaN(e=+e)?t:i[n.bisect(a,e)]}return l.invertExtent=function(e){var t=i.indexOf(e);return t<0?[NaN,NaN]:[t>0?a[t-1]:r[0],t<a.length?a[t]:r[r.length-1]]},l.domain=function(e){if(!arguments.length)return r.slice();r=[];for(var t,i=0,a=e.length;i<a;++i)null==(t=e[i])||isNaN(t=+t)||r.push(t);return r.sort(n.ascending),o()},l.range=function(e){return arguments.length?(i=f.call(e),o()):i.slice()},l.unknown=function(e){return arguments.length?(t=e,l):t},l.quantiles=function(){return a.slice()},l.copy=function(){return e().domain(r).range(i).unknown(t)},s.apply(l,arguments)},e.scaleQuantize=function e(){var t,r=0,i=1,a=1,o=[.5],l=[0,1];function u(e){return e<=e?l[n.bisect(o,e,0,a)]:t}function c(){var e=-1;for(o=new Array(a);++e<a;)o[e]=((e+1)*i-(e-a)*r)/(a+1);return u}return u.domain=function(e){return arguments.length?(r=+e[0],i=+e[1],c()):[r,i]},u.range=function(e){return arguments.length?(a=(l=f.call(e)).length-1,c()):l.slice()},u.invertExtent=function(e){var t=l.indexOf(e);return t<0?[NaN,NaN]:t<1?[r,o[0]]:t>=a?[o[a-1],i]:[o[t-1],o[t]]},u.unknown=function(e){return arguments.length?(t=e,u):u},u.thresholds=function(){return o.slice()},u.copy=function(){return e().domain([r,i]).range(l).unknown(t)},s.apply(M(u),arguments)},e.scaleThreshold=function e(){var t,r=[.5],i=[0,1],a=1;function o(e){return e<=e?i[n.bisect(r,e,0,a)]:t}return o.domain=function(e){return arguments.length?(r=f.call(e),a=Math.min(r.length,i.length-1),o):r.slice()},o.range=function(e){return arguments.length?(i=f.call(e),a=Math.min(r.length,i.length-1),o):i.slice()},o.invertExtent=function(e){var t=i.indexOf(e);return[r[t-1],r[t]]},o.unknown=function(e){return arguments.length?(t=e,o):t},o.copy=function(){return e().domain(r).range(i).unknown(t)},s.apply(o,arguments)},e.scaleTime=function(){return s.apply(J(a.timeYear,a.timeMonth,a.timeWeek,a.timeDay,a.timeHour,a.timeMinute,a.timeSecond,a.timeMillisecond,o.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},e.scaleUtc=function(){return s.apply(J(a.utcYear,a.utcMonth,a.utcWeek,a.utcDay,a.utcHour,a.utcMinute,a.utcSecond,a.utcMillisecond,o.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},e.scaleSequential=function e(){var t=M(K()(m));return t.copy=function(){return ee(t,e())},l.apply(t,arguments)},e.scaleSequentialLog=function e(){var t=P(K()).domain([1,10]);return t.copy=function(){return ee(t,e()).base(t.base())},l.apply(t,arguments)},e.scaleSequentialPow=te,e.scaleSequentialSqrt=function(){return te.apply(null,arguments).exponent(.5)},e.scaleSequentialSymlog=function e(){var t=B(K());return t.copy=function(){return ee(t,e()).constant(t.constant())},l.apply(t,arguments)},e.scaleSequentialQuantile=function e(){var t=[],r=m;function i(e){if(!isNaN(e=+e))return r((n.bisect(t,e)-1)/(t.length-1))}return i.domain=function(e){if(!arguments.length)return t.slice();t=[];for(var r,a=0,o=e.length;a<o;++a)null==(r=e[a])||isNaN(r=+r)||t.push(r);return t.sort(n.ascending),i},i.interpolator=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return e(r).domain(t)},l.apply(i,arguments)},e.scaleDiverging=function e(){var t=M(ne()(m));return t.copy=function(){return ee(t,e())},l.apply(t,arguments)},e.scaleDivergingLog=function e(){var t=P(ne()).domain([.1,1,10]);return t.copy=function(){return ee(t,e()).base(t.base())},l.apply(t,arguments)},e.scaleDivergingPow=re,e.scaleDivergingSqrt=function(){return re.apply(null,arguments).exponent(.5)},e.scaleDivergingSymlog=function e(){var t=B(ne());return t.copy=function(){return ee(t,e()).constant(t.constant())},l.apply(t,arguments)},e.tickFormat=z,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n,e("d3-collection"),e("d3-array"),e("d3-interpolate"),e("d3-format"),e("d3-time"),e("d3-time-format")):"function"==typeof define&&define.amd?define(["exports","d3-collection","d3-array","d3-interpolate","d3-format","d3-time","d3-time-format"],i):i(r.d3=r.d3||{},r.d3,r.d3,r.d3,r.d3,r.d3,r.d3)},{"d3-array":7,"d3-collection":11,"d3-format":20,"d3-interpolate":23,"d3-time":33,"d3-time-format":32}],30:[function(e,t,n){var r,i;r=this,i=function(e){"use strict";var t="http://www.w3.org/1999/xhtml",n={svg:"http://www.w3.org/2000/svg",xhtml:t,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function r(e){var t=e+="",r=t.indexOf(":");return r>=0&&"xmlns"!==(t=e.slice(0,r))&&(e=e.slice(r+1)),n.hasOwnProperty(t)?{space:n[t],local:e}:e}function i(e){var n=r(e);return(n.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(e){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===t&&n.documentElement.namespaceURI===t?n.createElement(e):n.createElementNS(r,e)}})(n)}function a(){}function o(e){return null==e?a:function(){return this.querySelector(e)}}function s(){return[]}function l(e){return null==e?s:function(){return this.querySelectorAll(e)}}function u(e){return function(){return this.matches(e)}}function c(e){return new Array(e.length)}function f(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}f.prototype={constructor:f,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var d="$";function h(e,t,n,r,i,a){for(var o,s=0,l=t.length,u=a.length;s<u;++s)(o=t[s])?(o.__data__=a[s],r[s]=o):n[s]=new f(e,a[s]);for(;s<l;++s)(o=t[s])&&(i[s]=o)}function p(e,t,n,r,i,a,o){var s,l,u,c={},h=t.length,p=a.length,v=new Array(h);for(s=0;s<h;++s)(l=t[s])&&(v[s]=u=d+o.call(l,l.__data__,s,t),u in c?i[s]=l:c[u]=l);for(s=0;s<p;++s)(l=c[u=d+o.call(e,a[s],s,a)])?(r[s]=l,l.__data__=a[s],c[u]=null):n[s]=new f(e,a[s]);for(s=0;s<h;++s)(l=t[s])&&c[v[s]]===l&&(i[s]=l)}function v(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function g(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function m(e,t){return e.style.getPropertyValue(t)||g(e).getComputedStyle(e,null).getPropertyValue(t)}function y(e){return e.trim().split(/^|\s+/)}function b(e){return e.classList||new x(e)}function x(e){this._node=e,this._names=y(e.getAttribute("class")||"")}function _(e,t){for(var n=b(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function w(e,t){for(var n=b(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function j(){this.textContent=""}function k(){this.innerHTML=""}function z(){this.nextSibling&&this.parentNode.appendChild(this)}function M(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function A(){return null}function E(){var e=this.parentNode;e&&e.removeChild(this)}function S(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function O(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}x.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var T={};function C(e,t,n){return e=N(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function N(t,n,r){return function(i){var a=e.event;e.event=i;try{t.call(this,this.__data__,n,r)}finally{e.event=a}}}function P(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,a=t.length;r<a;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?t.length=i:delete this.__on}}}function F(e,t,n){var r=T.hasOwnProperty(e.type)?C:N;return function(i,a,o){var s,l=this.__on,u=r(t,a,o);if(l)for(var c=0,f=l.length;c<f;++c)if((s=l[c]).type===e.type&&s.name===e.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=u,s.capture=n),void(s.value=t);this.addEventListener(e.type,u,n),s={type:e.type,name:e.name,value:t,listener:u,capture:n},l?l.push(s):this.__on=[s]}}function q(e,t,n){var r=g(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}e.event=null,"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(T={mouseenter:"mouseover",mouseleave:"mouseout"}));var B=[null];function D(e,t){this._groups=e,this._parents=t}function I(){return new D([[document.documentElement]],B)}function R(e){return"string"==typeof e?new D([[document.querySelector(e)]],[document.documentElement]):new D([[e]],B)}D.prototype=I.prototype={constructor:D,select:function(e){"function"!=typeof e&&(e=o(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,s,l=t[i],u=l.length,c=r[i]=new Array(u),f=0;f<u;++f)(a=l[f])&&(s=e.call(a,a.__data__,f,l))&&("__data__"in a&&(s.__data__=a.__data__),c[f]=s);return new D(r,this._parents)},selectAll:function(e){"function"!=typeof e&&(e=l(e));for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o,s=t[a],u=s.length,c=0;c<u;++c)(o=s[c])&&(r.push(e.call(o,o.__data__,c,s)),i.push(o));return new D(r,i)},filter:function(e){"function"!=typeof e&&(e=u(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o=t[i],s=o.length,l=r[i]=[],c=0;c<s;++c)(a=o[c])&&e.call(a,a.__data__,c,o)&&l.push(a);return new D(r,this._parents)},data:function(e,t){if(!e)return g=new Array(this.size()),c=-1,this.each(function(e){g[++c]=e}),g;var n,r=t?p:h,i=this._parents,a=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var o=a.length,s=new Array(o),l=new Array(o),u=new Array(o),c=0;c<o;++c){var f=i[c],d=a[c],v=d.length,g=e.call(f,f&&f.__data__,c,i),m=g.length,y=l[c]=new Array(m),b=s[c]=new Array(m);r(f,d,y,b,u[c]=new Array(v),g,t);for(var x,_,w=0,j=0;w<m;++w)if(x=y[w]){for(w>=j&&(j=w+1);!(_=b[j])&&++j<m;);x._next=_||null}}return(s=new D(s,i))._enter=l,s._exit=u,s},enter:function(){return new D(this._enter||this._groups.map(c),this._parents)},exit:function(){return new D(this._exit||this._groups.map(c),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,a=this.exit();return r="function"==typeof e?e(r):r.append(e+""),null!=t&&(i=t(i)),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l,u=t[s],c=n[s],f=u.length,d=o[s]=new Array(f),h=0;h<f;++h)(l=u[h]||c[h])&&(d[h]=l);for(;s<r;++s)o[s]=t[s];return new D(o,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=v);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,s=n[a],l=s.length,u=i[a]=new Array(l),c=0;c<l;++c)(o=s[c])&&(u[c]=o);u.sort(t)}return new D(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){var e=0;return this.each(function(){++e}),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,a=t[n],o=0,s=a.length;o<s;++o)(i=a[o])&&e.call(i,i.__data__,o,a);return this},attr:function(e,t){var n=r(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==t?n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?n.local?function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}:function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}:n.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}:function(e,t,n){return function(){this.style.setProperty(e,t,n)}})(e,t,null==n?"":n)):m(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var n=y(e+"");if(arguments.length<2){for(var r=b(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?_:w)(this,e)}}:t?function(e){return function(){_(this,e)}}:function(e){return function(){w(this,e)}})(n,t))},text:function(e){return arguments.length?this.each(null==e?j:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?k:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(z)},lower:function(){return this.each(M)},append:function(e){var t="function"==typeof e?e:i(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:i(e),r=null==t?A:"function"==typeof t?t:o(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(E)},clone:function(e){return this.select(e?O:S)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,a=function(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}(e+""),o=a.length;if(!(arguments.length<2)){for(s=t?F:P,null==n&&(n=!1),r=0;r<o;++r)this.each(s(a[r],t,n));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(r=0,l=s[u];r<o;++r)if((i=a[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return q(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return q(this,e,t)}})(e,t))}};var L=0;function U(){return new V}function V(){this._="@"+(++L).toString(36)}function Y(){for(var t,n=e.event;t=n.sourceEvent;)n=t;return n}function H(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}V.prototype=U.prototype={constructor:V,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}},e.create=function(e){return R(i(e).call(document.documentElement))},e.creator=i,e.local=U,e.matcher=u,e.mouse=function(e){var t=Y();return t.changedTouches&&(t=t.changedTouches[0]),H(e,t)},e.namespace=r,e.namespaces=n,e.clientPoint=H,e.select=R,e.selectAll=function(e){return"string"==typeof e?new D([document.querySelectorAll(e)],[document.documentElement]):new D([null==e?[]:e],B)},e.selection=I,e.selector=o,e.selectorAll=l,e.style=m,e.touch=function(e,t,n){arguments.length<3&&(n=t,t=Y().changedTouches);for(var r,i=0,a=t?t.length:0;i<a;++i)if((r=t[i]).identifier===n)return H(e,r);return null},e.touches=function(e,t){null==t&&(t=Y().touches);for(var n=0,r=t?t.length:0,i=new Array(r);n<r;++n)i[n]=H(e,t[n]);return i},e.window=g,e.customEvent=function(t,n,r,i){var a=e.event;t.sourceEvent=e.event,e.event=t;try{return n.apply(r,i)}finally{e.event=a}},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],31:[function(e,t,n){var r,i;r=this,i=function(e,t){"use strict";function n(e){return function(){return e}}var r=Math.abs,i=Math.atan2,a=Math.cos,o=Math.max,s=Math.min,l=Math.sin,u=Math.sqrt,c=1e-12,f=Math.PI,d=f/2,h=2*f;function p(e){return e>=1?d:e<=-1?-d:Math.asin(e)}function v(e){return e.innerRadius}function g(e){return e.outerRadius}function m(e){return e.startAngle}function y(e){return e.endAngle}function b(e){return e&&e.padAngle}function x(e,t,n,r,i,a,s){var l=e-n,c=t-r,f=(s?a:-a)/u(l*l+c*c),d=f*c,h=-f*l,p=e+d,v=t+h,g=n+d,m=r+h,y=(p+g)/2,b=(v+m)/2,x=g-p,_=m-v,w=x*x+_*_,j=i-a,k=p*m-g*v,z=(_<0?-1:1)*u(o(0,j*j*w-k*k)),M=(k*_-x*z)/w,A=(-k*x-_*z)/w,E=(k*_+x*z)/w,S=(-k*x+_*z)/w,O=M-y,T=A-b,C=E-y,N=S-b;return O*O+T*T>C*C+N*N&&(M=E,A=S),{cx:M,cy:A,x01:-d,y01:-h,x11:M*(i/j-1),y11:A*(i/j-1)}}function _(e){this._context=e}function w(e){return new _(e)}function j(e){return e[0]}function k(e){return e[1]}function z(){var e=j,r=k,i=n(!0),a=null,o=w,s=null;function l(n){var l,u,c,f=n.length,d=!1;for(null==a&&(s=o(c=t.path())),l=0;l<=f;++l)!(l<f&&i(u=n[l],l,n))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(u,l,n),+r(u,l,n));if(c)return s=null,c+""||null}return l.x=function(t){return arguments.length?(e="function"==typeof t?t:n(+t),l):e},l.y=function(e){return arguments.length?(r="function"==typeof e?e:n(+e),l):r},l.defined=function(e){return arguments.length?(i="function"==typeof e?e:n(!!e),l):i},l.curve=function(e){return arguments.length?(o=e,null!=a&&(s=o(a)),l):o},l.context=function(e){return arguments.length?(null==e?a=s=null:s=o(a=e),l):a},l}function M(){var e=j,r=null,i=n(0),a=k,o=n(!0),s=null,l=w,u=null;function c(n){var c,f,d,h,p,v=n.length,g=!1,m=new Array(v),y=new Array(v);for(null==s&&(u=l(p=t.path())),c=0;c<=v;++c){if(!(c<v&&o(h=n[c],c,n))===g)if(g=!g)f=c,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),d=c-1;d>=f;--d)u.point(m[d],y[d]);u.lineEnd(),u.areaEnd()}g&&(m[c]=+e(h,c,n),y[c]=+i(h,c,n),u.point(r?+r(h,c,n):m[c],a?+a(h,c,n):y[c]))}if(p)return u=null,p+""||null}function f(){return z().defined(o).curve(l).context(s)}return c.x=function(t){return arguments.length?(e="function"==typeof t?t:n(+t),r=null,c):e},c.x0=function(t){return arguments.length?(e="function"==typeof t?t:n(+t),c):e},c.x1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:n(+e),c):r},c.y=function(e){return arguments.length?(i="function"==typeof e?e:n(+e),a=null,c):i},c.y0=function(e){return arguments.length?(i="function"==typeof e?e:n(+e),c):i},c.y1=function(e){return arguments.length?(a=null==e?null:"function"==typeof e?e:n(+e),c):a},c.lineX0=c.lineY0=function(){return f().x(e).y(i)},c.lineY1=function(){return f().x(e).y(a)},c.lineX1=function(){return f().x(r).y(i)},c.defined=function(e){return arguments.length?(o="function"==typeof e?e:n(!!e),c):o},c.curve=function(e){return arguments.length?(l=e,null!=s&&(u=l(s)),c):l},c.context=function(e){return arguments.length?(null==e?s=u=null:u=l(s=e),c):s},c}function A(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function E(e){return e}_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var S=T(w);function O(e){this._curve=e}function T(e){function t(t){return new O(e(t))}return t._curve=e,t}function C(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(e){return arguments.length?t(T(e)):t()._curve},e}function N(){return C(z().curve(S))}function P(){var e=M().curve(S),t=e.curve,n=e.lineX0,r=e.lineX1,i=e.lineY0,a=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return C(n())},delete e.lineX0,e.lineEndAngle=function(){return C(r())},delete e.lineX1,e.lineInnerRadius=function(){return C(i())},delete e.lineY0,e.lineOuterRadius=function(){return C(a())},delete e.lineY1,e.curve=function(e){return arguments.length?t(T(e)):t()._curve},e}function F(e,t){return[(t=+t)*Math.cos(e-=Math.PI/2),t*Math.sin(e)]}O.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};var q=Array.prototype.slice;function B(e){return e.source}function D(e){return e.target}function I(e){var r=B,i=D,a=j,o=k,s=null;function l(){var n,l=q.call(arguments),u=r.apply(this,l),c=i.apply(this,l);if(s||(s=n=t.path()),e(s,+a.apply(this,(l[0]=u,l)),+o.apply(this,l),+a.apply(this,(l[0]=c,l)),+o.apply(this,l)),n)return s=null,n+""||null}return l.source=function(e){return arguments.length?(r=e,l):r},l.target=function(e){return arguments.length?(i=e,l):i},l.x=function(e){return arguments.length?(a="function"==typeof e?e:n(+e),l):a},l.y=function(e){return arguments.length?(o="function"==typeof e?e:n(+e),l):o},l.context=function(e){return arguments.length?(s=null==e?null:e,l):s},l}function R(e,t,n,r,i){e.moveTo(t,n),e.bezierCurveTo(t=(t+r)/2,n,t,i,r,i)}function L(e,t,n,r,i){e.moveTo(t,n),e.bezierCurveTo(t,n=(n+i)/2,r,n,r,i)}function U(e,t,n,r,i){var a=F(t,n),o=F(t,n=(n+i)/2),s=F(r,n),l=F(r,i);e.moveTo(a[0],a[1]),e.bezierCurveTo(o[0],o[1],s[0],s[1],l[0],l[1])}var V={draw:function(e,t){var n=Math.sqrt(t/f);e.moveTo(n,0),e.arc(0,0,n,0,h)}},Y={draw:function(e,t){var n=Math.sqrt(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},H=Math.sqrt(1/3),G=2*H,X={draw:function(e,t){var n=Math.sqrt(t/G),r=n*H;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},W=Math.sin(f/10)/Math.sin(7*f/10),Q=Math.sin(h/10)*W,Z=-Math.cos(h/10)*W,$={draw:function(e,t){var n=Math.sqrt(.8908130915292852*t),r=Q*n,i=Z*n;e.moveTo(0,-n),e.lineTo(r,i);for(var a=1;a<5;++a){var o=h*a/5,s=Math.cos(o),l=Math.sin(o);e.lineTo(l*n,-s*n),e.lineTo(s*r-l*i,l*r+s*i)}e.closePath()}},J={draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},K=Math.sqrt(3),ee={draw:function(e,t){var n=-Math.sqrt(t/(3*K));e.moveTo(0,2*n),e.lineTo(-K*n,-n),e.lineTo(K*n,-n),e.closePath()}},te=-.5,ne=Math.sqrt(3)/2,re=1/Math.sqrt(12),ie=3*(re/2+1),ae={draw:function(e,t){var n=Math.sqrt(t/ie),r=n/2,i=n*re,a=r,o=n*re+n,s=-a,l=o;e.moveTo(r,i),e.lineTo(a,o),e.lineTo(s,l),e.lineTo(te*r-ne*i,ne*r+te*i),e.lineTo(te*a-ne*o,ne*a+te*o),e.lineTo(te*s-ne*l,ne*s+te*l),e.lineTo(te*r+ne*i,te*i-ne*r),e.lineTo(te*a+ne*o,te*o-ne*a),e.lineTo(te*s+ne*l,te*l-ne*s),e.closePath()}},oe=[V,Y,X,J,$,ee,ae];function se(){}function le(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function ue(e){this._context=e}function ce(e){this._context=e}function fe(e){this._context=e}function de(e,t){this._basis=new ue(e),this._beta=t}ue.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:le(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:le(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},ce.prototype={areaStart:se,areaEnd:se,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:le(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},fe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:le(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},de.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,i=e[0],a=t[0],o=e[n]-i,s=t[n]-a,l=-1;++l<=n;)r=l/n,this._basis.point(this._beta*e[l]+(1-this._beta)*(i+r*o),this._beta*t[l]+(1-this._beta)*(a+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var he=function e(t){function n(e){return 1===t?new ue(e):new de(e,t)}return n.beta=function(t){return e(+t)},n}(.85);function pe(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function ve(e,t){this._context=e,this._k=(1-t)/6}ve.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:pe(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:pe(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var ge=function e(t){function n(e){return new ve(e,t)}return n.tension=function(t){return e(+t)},n}(0);function me(e,t){this._context=e,this._k=(1-t)/6}me.prototype={areaStart:se,areaEnd:se,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:pe(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var ye=function e(t){function n(e){return new me(e,t)}return n.tension=function(t){return e(+t)},n}(0);function be(e,t){this._context=e,this._k=(1-t)/6}be.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:pe(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var xe=function e(t){function n(e){return new be(e,t)}return n.tension=function(t){return e(+t)},n}(0);function _e(e,t,n){var r=e._x1,i=e._y1,a=e._x2,o=e._y2;if(e._l01_a>c){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>c){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,f=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*u+e._x1*e._l23_2a-t*e._l12_2a)/f,o=(o*u+e._y1*e._l23_2a-n*e._l12_2a)/f}e._context.bezierCurveTo(r,i,a,o,e._x2,e._y2)}function we(e,t){this._context=e,this._alpha=t}we.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:_e(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var je=function e(t){function n(e){return t?new we(e,t):new ve(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function ke(e,t){this._context=e,this._alpha=t}ke.prototype={areaStart:se,areaEnd:se,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:_e(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var ze=function e(t){function n(e){return t?new ke(e,t):new me(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function Me(e,t){this._context=e,this._alpha=t}Me.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:_e(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Ae=function e(t){function n(e){return t?new Me(e,t):new be(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function Ee(e){this._context=e}function Se(e){return e<0?-1:1}function Oe(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(Se(a)+Se(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function Te(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Ce(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,s=(a-r)/3;e._context.bezierCurveTo(r+s,i+s*t,a-s,o-s*n,a,o)}function Ne(e){this._context=e}function Pe(e){this._context=new Fe(e)}function Fe(e){this._context=e}function qe(e){this._context=e}function Be(e){var t,n,r=e.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/a[t-1],a[t]-=n,o[t]-=n*o[t-1];for(i[r-1]=o[r-1]/a[r-1],t=r-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(a[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function De(e,t){this._context=e,this._t=t}function Ie(e,t){if((i=e.length)>1)for(var n,r,i,a=1,o=e[t[0]],s=o.length;a<i;++a)for(r=o,o=e[t[a]],n=0;n<s;++n)o[n][1]+=o[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}function Re(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Le(e,t){return e[t]}function Ue(e){var t=e.map(Ve);return Re(e).sort(function(e,n){return t[e]-t[n]})}function Ve(e){for(var t,n=-1,r=0,i=e.length,a=-1/0;++n<i;)(t=+e[n][1])>a&&(a=t,r=n);return r}function Ye(e){var t=e.map(He);return Re(e).sort(function(e,n){return t[e]-t[n]})}function He(e){for(var t,n=0,r=-1,i=e.length;++r<i;)(t=+e[r][1])&&(n+=t);return n}Ee.prototype={areaStart:se,areaEnd:se,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},Ne.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ce(this,this._t0,Te(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Ce(this,Te(this,n=Oe(this,e,t)),n);break;default:Ce(this,this._t0,n=Oe(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(Pe.prototype=Object.create(Ne.prototype)).point=function(e,t){Ne.prototype.point.call(this,t,e)},Fe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}},qe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=Be(e),i=Be(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],e[o],t[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},De.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}},e.arc=function(){var e=v,o=g,_=n(0),w=null,j=m,k=y,z=b,M=null;function A(){var n,v,g,m=+e.apply(this,arguments),y=+o.apply(this,arguments),b=j.apply(this,arguments)-d,A=k.apply(this,arguments)-d,E=r(A-b),S=A>b;if(M||(M=n=t.path()),y<m&&(v=y,y=m,m=v),y>c)if(E>h-c)M.moveTo(y*a(b),y*l(b)),M.arc(0,0,y,b,A,!S),m>c&&(M.moveTo(m*a(A),m*l(A)),M.arc(0,0,m,A,b,S));else{var O,T,C=b,N=A,P=b,F=A,q=E,B=E,D=z.apply(this,arguments)/2,I=D>c&&(w?+w.apply(this,arguments):u(m*m+y*y)),R=s(r(y-m)/2,+_.apply(this,arguments)),L=R,U=R;if(I>c){var V=p(I/m*l(D)),Y=p(I/y*l(D));(q-=2*V)>c?(P+=V*=S?1:-1,F-=V):(q=0,P=F=(b+A)/2),(B-=2*Y)>c?(C+=Y*=S?1:-1,N-=Y):(B=0,C=N=(b+A)/2)}var H=y*a(C),G=y*l(C),X=m*a(F),W=m*l(F);if(R>c){var Q,Z=y*a(N),$=y*l(N),J=m*a(P),K=m*l(P);if(E<f&&(Q=function(e,t,n,r,i,a,o,s){var l=n-e,u=r-t,f=o-i,d=s-a,h=d*l-f*u;if(!(h*h<c))return[e+(h=(f*(t-a)-d*(e-i))/h)*l,t+h*u]}(H,G,J,K,Z,$,X,W))){var ee=H-Q[0],te=G-Q[1],ne=Z-Q[0],re=$-Q[1],ie=1/l(((g=(ee*ne+te*re)/(u(ee*ee+te*te)*u(ne*ne+re*re)))>1?0:g<-1?f:Math.acos(g))/2),ae=u(Q[0]*Q[0]+Q[1]*Q[1]);L=s(R,(m-ae)/(ie-1)),U=s(R,(y-ae)/(ie+1))}}B>c?U>c?(O=x(J,K,H,G,y,U,S),T=x(Z,$,X,W,y,U,S),M.moveTo(O.cx+O.x01,O.cy+O.y01),U<R?M.arc(O.cx,O.cy,U,i(O.y01,O.x01),i(T.y01,T.x01),!S):(M.arc(O.cx,O.cy,U,i(O.y01,O.x01),i(O.y11,O.x11),!S),M.arc(0,0,y,i(O.cy+O.y11,O.cx+O.x11),i(T.cy+T.y11,T.cx+T.x11),!S),M.arc(T.cx,T.cy,U,i(T.y11,T.x11),i(T.y01,T.x01),!S))):(M.moveTo(H,G),M.arc(0,0,y,C,N,!S)):M.moveTo(H,G),m>c&&q>c?L>c?(O=x(X,W,Z,$,m,-L,S),T=x(H,G,J,K,m,-L,S),M.lineTo(O.cx+O.x01,O.cy+O.y01),L<R?M.arc(O.cx,O.cy,L,i(O.y01,O.x01),i(T.y01,T.x01),!S):(M.arc(O.cx,O.cy,L,i(O.y01,O.x01),i(O.y11,O.x11),!S),M.arc(0,0,m,i(O.cy+O.y11,O.cx+O.x11),i(T.cy+T.y11,T.cx+T.x11),S),M.arc(T.cx,T.cy,L,i(T.y11,T.x11),i(T.y01,T.x01),!S))):M.arc(0,0,m,F,P,S):M.lineTo(X,W)}else M.moveTo(0,0);if(M.closePath(),n)return M=null,n+""||null}return A.centroid=function(){var t=(+e.apply(this,arguments)+ +o.apply(this,arguments))/2,n=(+j.apply(this,arguments)+ +k.apply(this,arguments))/2-f/2;return[a(n)*t,l(n)*t]},A.innerRadius=function(t){return arguments.length?(e="function"==typeof t?t:n(+t),A):e},A.outerRadius=function(e){return arguments.length?(o="function"==typeof e?e:n(+e),A):o},A.cornerRadius=function(e){return arguments.length?(_="function"==typeof e?e:n(+e),A):_},A.padRadius=function(e){return arguments.length?(w=null==e?null:"function"==typeof e?e:n(+e),A):w},A.startAngle=function(e){return arguments.length?(j="function"==typeof e?e:n(+e),A):j},A.endAngle=function(e){return arguments.length?(k="function"==typeof e?e:n(+e),A):k},A.padAngle=function(e){return arguments.length?(z="function"==typeof e?e:n(+e),A):z},A.context=function(e){return arguments.length?(M=null==e?null:e,A):M},A},e.area=M,e.line=z,e.pie=function(){var e=E,t=A,r=null,i=n(0),a=n(h),o=n(0);function s(n){var s,l,u,c,f,d=n.length,p=0,v=new Array(d),g=new Array(d),m=+i.apply(this,arguments),y=Math.min(h,Math.max(-h,a.apply(this,arguments)-m)),b=Math.min(Math.abs(y)/d,o.apply(this,arguments)),x=b*(y<0?-1:1);for(s=0;s<d;++s)(f=g[v[s]=s]=+e(n[s],s,n))>0&&(p+=f);for(null!=t?v.sort(function(e,n){return t(g[e],g[n])}):null!=r&&v.sort(function(e,t){return r(n[e],n[t])}),s=0,u=p?(y-d*x)/p:0;s<d;++s,m=c)l=v[s],c=m+((f=g[l])>0?f*u:0)+x,g[l]={data:n[l],index:s,value:f,startAngle:m,endAngle:c,padAngle:b};return g}return s.value=function(t){return arguments.length?(e="function"==typeof t?t:n(+t),s):e},s.sortValues=function(e){return arguments.length?(t=e,r=null,s):t},s.sort=function(e){return arguments.length?(r=e,t=null,s):r},s.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:n(+e),s):i},s.endAngle=function(e){return arguments.length?(a="function"==typeof e?e:n(+e),s):a},s.padAngle=function(e){return arguments.length?(o="function"==typeof e?e:n(+e),s):o},s},e.areaRadial=P,e.radialArea=P,e.lineRadial=N,e.radialLine=N,e.pointRadial=F,e.linkHorizontal=function(){return I(R)},e.linkVertical=function(){return I(L)},e.linkRadial=function(){var e=I(U);return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e},e.symbol=function(){var e=n(V),r=n(64),i=null;function a(){var n;if(i||(i=n=t.path()),e.apply(this,arguments).draw(i,+r.apply(this,arguments)),n)return i=null,n+""||null}return a.type=function(t){return arguments.length?(e="function"==typeof t?t:n(t),a):e},a.size=function(e){return arguments.length?(r="function"==typeof e?e:n(+e),a):r},a.context=function(e){return arguments.length?(i=null==e?null:e,a):i},a},e.symbols=oe,e.symbolCircle=V,e.symbolCross=Y,e.symbolDiamond=X,e.symbolSquare=J,e.symbolStar=$,e.symbolTriangle=ee,e.symbolWye=ae,e.curveBasisClosed=function(e){return new ce(e)},e.curveBasisOpen=function(e){return new fe(e)},e.curveBasis=function(e){return new ue(e)},e.curveBundle=he,e.curveCardinalClosed=ye,e.curveCardinalOpen=xe,e.curveCardinal=ge,e.curveCatmullRomClosed=ze,e.curveCatmullRomOpen=Ae,e.curveCatmullRom=je,e.curveLinearClosed=function(e){return new Ee(e)},e.curveLinear=w,e.curveMonotoneX=function(e){return new Ne(e)},e.curveMonotoneY=function(e){return new Pe(e)},e.curveNatural=function(e){return new qe(e)},e.curveStep=function(e){return new De(e,.5)},e.curveStepAfter=function(e){return new De(e,1)},e.curveStepBefore=function(e){return new De(e,0)},e.stack=function(){var e=n([]),t=Re,r=Ie,i=Le;function a(n){var a,o,s=e.apply(this,arguments),l=n.length,u=s.length,c=new Array(u);for(a=0;a<u;++a){for(var f,d=s[a],h=c[a]=new Array(l),p=0;p<l;++p)h[p]=f=[0,+i(n[p],d,p,n)],f.data=n[p];h.key=d}for(a=0,o=t(c);a<u;++a)c[o[a]].index=a;return r(c,o),c}return a.keys=function(t){return arguments.length?(e="function"==typeof t?t:n(q.call(t)),a):e},a.value=function(e){return arguments.length?(i="function"==typeof e?e:n(+e),a):i},a.order=function(e){return arguments.length?(t=null==e?Re:"function"==typeof e?e:n(q.call(e)),a):t},a.offset=function(e){return arguments.length?(r=null==e?Ie:e,a):r},a},e.stackOffsetExpand=function(e,t){if((r=e.length)>0){for(var n,r,i,a=0,o=e[0].length;a<o;++a){for(i=n=0;n<r;++n)i+=e[n][a][1]||0;if(i)for(n=0;n<r;++n)e[n][a][1]/=i}Ie(e,t)}},e.stackOffsetDiverging=function(e,t){if((s=e.length)>0)for(var n,r,i,a,o,s,l=0,u=e[t[0]].length;l<u;++l)for(a=o=0,n=0;n<s;++n)(i=(r=e[t[n]][l])[1]-r[0])>=0?(r[0]=a,r[1]=a+=i):i<0?(r[1]=o,r[0]=o+=i):r[0]=a},e.stackOffsetNone=Ie,e.stackOffsetSilhouette=function(e,t){if((n=e.length)>0){for(var n,r=0,i=e[t[0]],a=i.length;r<a;++r){for(var o=0,s=0;o<n;++o)s+=e[o][r][1]||0;i[r][1]+=i[r][0]=-s/2}Ie(e,t)}},e.stackOffsetWiggle=function(e,t){if((i=e.length)>0&&(r=(n=e[t[0]]).length)>0){for(var n,r,i,a=0,o=1;o<r;++o){for(var s=0,l=0,u=0;s<i;++s){for(var c=e[t[s]],f=c[o][1]||0,d=(f-(c[o-1][1]||0))/2,h=0;h<s;++h){var p=e[t[h]];d+=(p[o][1]||0)-(p[o-1][1]||0)}l+=f,u+=d*f}n[o-1][1]+=n[o-1][0]=a,l&&(a-=u/l)}n[o-1][1]+=n[o-1][0]=a,Ie(e,t)}},e.stackOrderAppearance=Ue,e.stackOrderAscending=Ye,e.stackOrderDescending=function(e){return Ye(e).reverse()},e.stackOrderInsideOut=function(e){var t,n,r=e.length,i=e.map(He),a=Ue(e),o=0,s=0,l=[],u=[];for(t=0;t<r;++t)n=a[t],o<s?(o+=i[n],l.push(n)):(s+=i[n],u.push(n));return u.reverse().concat(l)},e.stackOrderNone=Re,e.stackOrderReverse=function(e){return Re(e).reverse()},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n,e("d3-path")):"function"==typeof define&&define.amd?define(["exports","d3-path"],i):i(r.d3=r.d3||{},r.d3)},{"d3-path":24}],32:[function(e,t,n){var r,i;r=this,i=function(e,t){"use strict";function n(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function r(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function i(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function a(e){var a=e.dateTime,o=e.date,l=e.time,u=e.periods,c=e.days,f=e.shortDays,d=e.months,me=e.shortMonths,ye=h(u),be=p(u),xe=h(c),_e=p(c),we=h(f),je=p(f),ke=h(d),ze=p(d),Me=h(me),Ae=p(me),Ee={a:function(e){return f[e.getDay()]},A:function(e){return c[e.getDay()]},b:function(e){return me[e.getMonth()]},B:function(e){return d[e.getMonth()]},c:null,d:P,e:P,f:I,H:F,I:q,j:B,L:D,m:R,M:L,p:function(e){return u[+(e.getHours()>=12)]},Q:ve,s:ge,S:U,u:V,U:Y,V:H,w:G,W:X,x:null,X:null,y:W,Y:Q,Z:Z,"%":pe},Se={a:function(e){return f[e.getUTCDay()]},A:function(e){return c[e.getUTCDay()]},b:function(e){return me[e.getUTCMonth()]},B:function(e){return d[e.getUTCMonth()]},c:null,d:$,e:$,f:ne,H:J,I:K,j:ee,L:te,m:re,M:ie,p:function(e){return u[+(e.getUTCHours()>=12)]},Q:ve,s:ge,S:ae,u:oe,U:se,V:le,w:ue,W:ce,x:null,X:null,y:fe,Y:de,Z:he,"%":pe},Oe={a:function(e,t,n){var r=we.exec(t.slice(n));return r?(e.w=je[r[0].toLowerCase()],n+r[0].length):-1},A:function(e,t,n){var r=xe.exec(t.slice(n));return r?(e.w=_e[r[0].toLowerCase()],n+r[0].length):-1},b:function(e,t,n){var r=Me.exec(t.slice(n));return r?(e.m=Ae[r[0].toLowerCase()],n+r[0].length):-1},B:function(e,t,n){var r=ke.exec(t.slice(n));return r?(e.m=ze[r[0].toLowerCase()],n+r[0].length):-1},c:function(e,t,n){return Ne(e,a,t,n)},d:k,e:k,f:O,H:M,I:M,j:z,L:S,m:j,M:A,p:function(e,t,n){var r=ye.exec(t.slice(n));return r?(e.p=be[r[0].toLowerCase()],n+r[0].length):-1},Q:C,s:N,S:E,u:g,U:m,V:y,w:v,W:b,x:function(e,t,n){return Ne(e,o,t,n)},X:function(e,t,n){return Ne(e,l,t,n)},y:_,Y:x,Z:w,"%":T};function Te(e,t){return function(n){var r,i,a,o=[],l=-1,u=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++l<c;)37===e.charCodeAt(l)&&(o.push(e.slice(u,l)),null!=(i=s[r=e.charAt(++l)])?r=e.charAt(++l):i="e"===r?" ":"0",(a=t[r])&&(r=a(n,i)),o.push(r),u=l+1);return o.push(e.slice(u,l)),o.join("")}}function Ce(e,n){return function(a){var o,s,l=i(1900);if(Ne(l,e,a+="",0)!=a.length)return null;if("Q"in l)return new Date(l.Q);if("p"in l&&(l.H=l.H%12+12*l.p),"V"in l){if(l.V<1||l.V>53)return null;"w"in l||(l.w=1),"Z"in l?(s=(o=r(i(l.y))).getUTCDay(),o=s>4||0===s?t.utcMonday.ceil(o):t.utcMonday(o),o=t.utcDay.offset(o,7*(l.V-1)),l.y=o.getUTCFullYear(),l.m=o.getUTCMonth(),l.d=o.getUTCDate()+(l.w+6)%7):(s=(o=n(i(l.y))).getDay(),o=s>4||0===s?t.timeMonday.ceil(o):t.timeMonday(o),o=t.timeDay.offset(o,7*(l.V-1)),l.y=o.getFullYear(),l.m=o.getMonth(),l.d=o.getDate()+(l.w+6)%7)}else("W"in l||"U"in l)&&("w"in l||(l.w="u"in l?l.u%7:"W"in l?1:0),s="Z"in l?r(i(l.y)).getUTCDay():n(i(l.y)).getDay(),l.m=0,l.d="W"in l?(l.w+6)%7+7*l.W-(s+5)%7:l.w+7*l.U-(s+6)%7);return"Z"in l?(l.H+=l.Z/100|0,l.M+=l.Z%100,r(l)):n(l)}}function Ne(e,t,n,r){for(var i,a,o=0,l=t.length,u=n.length;o<l;){if(r>=u)return-1;if(37===(i=t.charCodeAt(o++))){if(i=t.charAt(o++),!(a=Oe[i in s?t.charAt(o++):i])||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return Ee.x=Te(o,Ee),Ee.X=Te(l,Ee),Ee.c=Te(a,Ee),Se.x=Te(o,Se),Se.X=Te(l,Se),Se.c=Te(a,Se),{format:function(e){var t=Te(e+="",Ee);return t.toString=function(){return e},t},parse:function(e){var t=Ce(e+="",n);return t.toString=function(){return e},t},utcFormat:function(e){var t=Te(e+="",Se);return t.toString=function(){return e},t},utcParse:function(e){var t=Ce(e,r);return t.toString=function(){return e},t}}}var o,s={"-":"",_:" ",0:"0"},l=/^\s*\d+/,u=/^%/,c=/[\\^$*+?|[\]().{}]/g;function f(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function d(e){return e.replace(c,"\\$&")}function h(e){return new RegExp("^(?:"+e.map(d).join("|")+")","i")}function p(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function v(e,t,n){var r=l.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function g(e,t,n){var r=l.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function m(e,t,n){var r=l.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function y(e,t,n){var r=l.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function b(e,t,n){var r=l.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function x(e,t,n){var r=l.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function _(e,t,n){var r=l.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function w(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function j(e,t,n){var r=l.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function k(e,t,n){var r=l.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function z(e,t,n){var r=l.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function M(e,t,n){var r=l.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function A(e,t,n){var r=l.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function E(e,t,n){var r=l.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function S(e,t,n){var r=l.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function O(e,t,n){var r=l.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function T(e,t,n){var r=u.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function C(e,t,n){var r=l.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function N(e,t,n){var r=l.exec(t.slice(n));return r?(e.Q=1e3*+r[0],n+r[0].length):-1}function P(e,t){return f(e.getDate(),t,2)}function F(e,t){return f(e.getHours(),t,2)}function q(e,t){return f(e.getHours()%12||12,t,2)}function B(e,n){return f(1+t.timeDay.count(t.timeYear(e),e),n,3)}function D(e,t){return f(e.getMilliseconds(),t,3)}function I(e,t){return D(e,t)+"000"}function R(e,t){return f(e.getMonth()+1,t,2)}function L(e,t){return f(e.getMinutes(),t,2)}function U(e,t){return f(e.getSeconds(),t,2)}function V(e){var t=e.getDay();return 0===t?7:t}function Y(e,n){return f(t.timeSunday.count(t.timeYear(e),e),n,2)}function H(e,n){var r=e.getDay();return e=r>=4||0===r?t.timeThursday(e):t.timeThursday.ceil(e),f(t.timeThursday.count(t.timeYear(e),e)+(4===t.timeYear(e).getDay()),n,2)}function G(e){return e.getDay()}function X(e,n){return f(t.timeMonday.count(t.timeYear(e),e),n,2)}function W(e,t){return f(e.getFullYear()%100,t,2)}function Q(e,t){return f(e.getFullYear()%1e4,t,4)}function Z(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+f(t/60|0,"0",2)+f(t%60,"0",2)}function $(e,t){return f(e.getUTCDate(),t,2)}function J(e,t){return f(e.getUTCHours(),t,2)}function K(e,t){return f(e.getUTCHours()%12||12,t,2)}function ee(e,n){return f(1+t.utcDay.count(t.utcYear(e),e),n,3)}function te(e,t){return f(e.getUTCMilliseconds(),t,3)}function ne(e,t){return te(e,t)+"000"}function re(e,t){return f(e.getUTCMonth()+1,t,2)}function ie(e,t){return f(e.getUTCMinutes(),t,2)}function ae(e,t){return f(e.getUTCSeconds(),t,2)}function oe(e){var t=e.getUTCDay();return 0===t?7:t}function se(e,n){return f(t.utcSunday.count(t.utcYear(e),e),n,2)}function le(e,n){var r=e.getUTCDay();return e=r>=4||0===r?t.utcThursday(e):t.utcThursday.ceil(e),f(t.utcThursday.count(t.utcYear(e),e)+(4===t.utcYear(e).getUTCDay()),n,2)}function ue(e){return e.getUTCDay()}function ce(e,n){return f(t.utcMonday.count(t.utcYear(e),e),n,2)}function fe(e,t){return f(e.getUTCFullYear()%100,t,2)}function de(e,t){return f(e.getUTCFullYear()%1e4,t,4)}function he(){return"+0000"}function pe(){return"%"}function ve(e){return+e}function ge(e){return Math.floor(+e/1e3)}function me(t){return o=a(t),e.timeFormat=o.format,e.timeParse=o.parse,e.utcFormat=o.utcFormat,e.utcParse=o.utcParse,o}me({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var ye=Date.prototype.toISOString?function(e){return e.toISOString()}:e.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),be=+new Date("2000-01-01T00:00:00.000Z")?function(e){var t=new Date(e);return isNaN(t)?null:t}:e.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");e.timeFormatDefaultLocale=me,e.timeFormatLocale=a,e.isoFormat=ye,e.isoParse=be,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n,e("d3-time")):"function"==typeof define&&define.amd?define(["exports","d3-time"],i):i(r.d3=r.d3||{},r.d3)},{"d3-time":33}],33:[function(e,t,n){var r,i;r=this,i=function(e){"use strict";var t=new Date,n=new Date;function r(e,i,a,o){function s(t){return e(t=new Date(+t)),t}return s.floor=s,s.ceil=function(t){return e(t=new Date(t-1)),i(t,1),e(t),t},s.round=function(e){var t=s(e),n=s.ceil(e);return e-t<n-e?t:n},s.offset=function(e,t){return i(e=new Date(+e),null==t?1:Math.floor(t)),e},s.range=function(t,n,r){var a,o=[];if(t=s.ceil(t),r=null==r?1:Math.floor(r),!(t<n&&r>0))return o;do{o.push(a=new Date(+t)),i(t,r),e(t)}while(a<t&&t<n);return o},s.filter=function(t){return r(function(n){if(n>=n)for(;e(n),!t(n);)n.setTime(n-1)},function(e,n){if(e>=e)if(n<0)for(;++n<=0;)for(;i(e,-1),!t(e););else for(;--n>=0;)for(;i(e,1),!t(e););})},a&&(s.count=function(r,i){return t.setTime(+r),n.setTime(+i),e(t),e(n),Math.floor(a(t,n))},s.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?s.filter(o?function(t){return o(t)%e==0}:function(t){return s.count(0,t)%e==0}):s:null}),s}var i=r(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?r(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):i:null};var a=i.range,o=6e4,s=6048e5,l=r(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getUTCSeconds()}),u=l.range,c=r(function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds())},function(e,t){e.setTime(+e+t*o)},function(e,t){return(t-e)/o},function(e){return e.getMinutes()}),f=c.range,d=r(function(e){e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds()-e.getMinutes()*o)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getHours()}),h=d.range,p=r(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*o)/864e5},function(e){return e.getDate()-1}),v=p.range;function g(e){return r(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*o)/s})}var m=g(0),y=g(1),b=g(2),x=g(3),_=g(4),w=g(5),j=g(6),k=m.range,z=y.range,M=b.range,A=x.range,E=_.range,S=w.range,O=j.range,T=r(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),C=T.range,N=r(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});N.every=function(e){return isFinite(e=Math.floor(e))&&e>0?r(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null};var P=N.range,F=r(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*o)},function(e,t){return(t-e)/o},function(e){return e.getUTCMinutes()}),q=F.range,B=r(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getUTCHours()}),D=B.range,I=r(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5},function(e){return e.getUTCDate()-1}),R=I.range;function L(e){return r(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/s})}var U=L(0),V=L(1),Y=L(2),H=L(3),G=L(4),X=L(5),W=L(6),Q=U.range,Z=V.range,$=Y.range,J=H.range,K=G.range,ee=X.range,te=W.range,ne=r(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),re=ne.range,ie=r(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});ie.every=function(e){return isFinite(e=Math.floor(e))&&e>0?r(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null};var ae=ie.range;e.timeInterval=r,e.timeMillisecond=i,e.timeMilliseconds=a,e.utcMillisecond=i,e.utcMilliseconds=a,e.timeSecond=l,e.timeSeconds=u,e.utcSecond=l,e.utcSeconds=u,e.timeMinute=c,e.timeMinutes=f,e.timeHour=d,e.timeHours=h,e.timeDay=p,e.timeDays=v,e.timeWeek=m,e.timeWeeks=k,e.timeSunday=m,e.timeSundays=k,e.timeMonday=y,e.timeMondays=z,e.timeTuesday=b,e.timeTuesdays=M,e.timeWednesday=x,e.timeWednesdays=A,e.timeThursday=_,e.timeThursdays=E,e.timeFriday=w,e.timeFridays=S,e.timeSaturday=j,e.timeSaturdays=O,e.timeMonth=T,e.timeMonths=C,e.timeYear=N,e.timeYears=P,e.utcMinute=F,e.utcMinutes=q,e.utcHour=B,e.utcHours=D,e.utcDay=I,e.utcDays=R,e.utcWeek=U,e.utcWeeks=Q,e.utcSunday=U,e.utcSundays=Q,e.utcMonday=V,e.utcMondays=Z,e.utcTuesday=Y,e.utcTuesdays=$,e.utcWednesday=H,e.utcWednesdays=J,e.utcThursday=G,e.utcThursdays=K,e.utcFriday=X,e.utcFridays=ee,e.utcSaturday=W,e.utcSaturdays=te,e.utcMonth=ne,e.utcMonths=re,e.utcYear=ie,e.utcYears=ae,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],34:[function(e,t,n){var r,i;r=this,i=function(e){"use strict";var t,n,r=0,i=0,a=0,o=1e3,s=0,l=0,u=0,c="object"==typeof performance&&performance.now?performance:Date,f="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function d(){return l||(f(h),l=c.now()+u)}function h(){l=0}function p(){this._call=this._time=this._next=null}function v(e,t,n){var r=new p;return r.restart(e,t,n),r}function g(){d(),++r;for(var e,n=t;n;)(e=l-n._time)>=0&&n._call.call(null,e),n=n._next;--r}function m(){l=(s=c.now())+u,r=i=0;try{g()}finally{r=0,function(){var e,r,i=t,a=1/0;for(;i;)i._call?(a>i._time&&(a=i._time),e=i,i=i._next):(r=i._next,i._next=null,i=e?e._next=r:t=r);n=e,b(a)}(),l=0}}function y(){var e=c.now(),t=e-s;t>o&&(u-=t,s=e)}function b(e){r||(i&&(i=clearTimeout(i)),e-l>24?(e<1/0&&(i=setTimeout(m,e-c.now()-u)),a&&(a=clearInterval(a))):(a||(s=c.now(),a=setInterval(y,o)),r=1,f(m)))}p.prototype=v.prototype={constructor:p,restart:function(e,r,i){if("function"!=typeof e)throw new TypeError("callback is not a function");i=(null==i?d():+i)+(null==r?0:+r),this._next||n===this||(n?n._next=this:t=this,n=this),this._call=e,this._time=i,b()},stop:function(){this._call&&(this._call=null,this._time=1/0,b())}},e.now=d,e.timer=v,e.timerFlush=g,e.timeout=function(e,t,n){var r=new p;return t=null==t?0:+t,r.restart(function(n){r.stop(),e(n+t)},t,n),r},e.interval=function(e,t,n){var r=new p,i=t;return null==t?(r.restart(e,t,n),r):(t=+t,n=null==n?d():+n,r.restart(function a(o){o+=i,r.restart(a,i+=t,n),e(o)},t,n),r)},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],35:[function(e,t,n){var r,i;r=this,i=function(e,t,n,r,i,a,o){"use strict";var s=t.dispatch("start","end","cancel","interrupt"),l=[],u=0,c=1,f=2,d=3,h=4,p=5,v=6;function g(e,t,r,i,a,o){var g=e.__transition;if(g){if(r in g)return}else e.__transition={};!function(e,t,r){var i,a=e.__transition;function o(u){var p,g,m,y;if(r.state!==c)return l();for(p in a)if((y=a[p]).name===r.name){if(y.state===d)return n.timeout(o);y.state===h?(y.state=v,y.timer.stop(),y.on.call("interrupt",e,e.__data__,y.index,y.group),delete a[p]):+p<t&&(y.state=v,y.timer.stop(),y.on.call("cancel",e,e.__data__,y.index,y.group),delete a[p])}if(n.timeout(function(){r.state===d&&(r.state=h,r.timer.restart(s,r.delay,r.time),s(u))}),r.state=f,r.on.call("start",e,e.__data__,r.index,r.group),r.state===f){for(r.state=d,i=new Array(m=r.tween.length),p=0,g=-1;p<m;++p)(y=r.tween[p].value.call(e,e.__data__,r.index,r.group))&&(i[++g]=y);i.length=g+1}}function s(t){for(var n=t<r.duration?r.ease.call(null,t/r.duration):(r.timer.restart(l),r.state=p,1),a=-1,o=i.length;++a<o;)i[a].call(e,n);r.state===p&&(r.on.call("end",e,e.__data__,r.index,r.group),l())}function l(){for(var n in r.state=v,r.timer.stop(),delete a[t],a)return;delete e.__transition}a[t]=r,r.timer=n.timer(function(e){r.state=c,r.timer.restart(o,r.delay,r.time),r.delay<=e&&o(e-r.delay)},0,r.time)}(e,r,{name:t,index:i,group:a,on:s,tween:l,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:u})}function m(e,t){var n=b(e,t);if(n.state>u)throw new Error("too late; already scheduled");return n}function y(e,t){var n=b(e,t);if(n.state>d)throw new Error("too late; already running");return n}function b(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function x(e,t){var n,r,i,a=e.__transition,o=!0;if(a){for(i in t=null==t?null:t+"",a)(n=a[i]).name===t?(r=n.state>f&&n.state<p,n.state=v,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete a[i]):o=!1;o&&delete e.__transition}}function _(e,t,n){var r=e._id;return e.each(function(){var e=y(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return b(e,r).value[t]}}function w(e,t){var n;return("number"==typeof t?i.interpolateNumber:t instanceof r.color?i.interpolateRgb:(n=r.color(t))?(t=n,i.interpolateRgb):i.interpolateString)(e,t)}var j=a.selection.prototype.constructor;function k(e){return function(){this.style.removeProperty(e)}}var z=0;function M(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function A(e){return a.selection().transition(e)}function E(){return++z}var S=a.selection.prototype;M.prototype=A.prototype={constructor:M,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=a.selector(e));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var l,u,c=r[s],f=c.length,d=o[s]=new Array(f),h=0;h<f;++h)(l=c[h])&&(u=e.call(l,l.__data__,h,c))&&("__data__"in l&&(u.__data__=l.__data__),d[h]=u,g(d[h],t,n,h,d,b(l,n)));return new M(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=a.selectorAll(e));for(var r=this._groups,i=r.length,o=[],s=[],l=0;l<i;++l)for(var u,c=r[l],f=c.length,d=0;d<f;++d)if(u=c[d]){for(var h,p=e.call(u,u.__data__,d,c),v=b(u,n),m=0,y=p.length;m<y;++m)(h=p[m])&&g(h,t,n,m,p,v);o.push(p),s.push(u)}return new M(o,s,t,n)},filter:function(e){"function"!=typeof e&&(e=a.matcher(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,s=t[i],l=s.length,u=r[i]=[],c=0;c<l;++c)(o=s[c])&&e.call(o,o.__data__,c,s)&&u.push(o);return new M(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l,u=t[s],c=n[s],f=u.length,d=o[s]=new Array(f),h=0;h<f;++h)(l=u[h]||c[h])&&(d[h]=l);for(;s<r;++s)o[s]=t[s];return new M(o,this._parents,this._name,this._id)},selection:function(){return new j(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=E(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],l=s.length,u=0;u<l;++u)if(o=s[u]){var c=b(o,t);g(o,e,n,u,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new M(r,this._parents,e,n)},call:S.call,nodes:S.nodes,node:S.node,size:S.size,empty:S.empty,each:S.each,on:function(e,t){var n=this._id;return arguments.length<2?b(this.node(),n).on.on(e):this.each(function(e,t,n){var r,i,a=function(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}(t)?m:y;return function(){var o=a(this,e),s=o.on;s!==r&&(i=(r=s).copy()).on(t,n),o.on=i}}(n,e,t))},attr:function(e,t){var n=a.namespace(e),r="transform"===n?i.interpolateTransformSvg:w;return this.attrTween(e,"function"==typeof t?(n.local?function(e,t,n){var r,i,a;return function(){var o,s,l=n(this);if(null!=l)return(o=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:o===r&&s===i?a:(i=s,a=t(r=o,l));this.removeAttributeNS(e.space,e.local)}}:function(e,t,n){var r,i,a;return function(){var o,s,l=n(this);if(null!=l)return(o=this.getAttribute(e))===(s=l+"")?null:o===r&&s===i?a:(i=s,a=t(r=o,l));this.removeAttribute(e)}})(n,r,_(this,"attr."+e,t)):null==t?(n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}})(n):(n.local?function(e,t,n){var r,i,a=n+"";return function(){var o=this.getAttributeNS(e.space,e.local);return o===a?null:o===r?i:i=t(r=o,n)}}:function(e,t,n){var r,i,a=n+"";return function(){var o=this.getAttribute(e);return o===a?null:o===r?i:i=t(r=o,n)}})(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=a.namespace(e);return this.tween(n,(r.local?function(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t(n))}}(e,i)),n}return i._value=t,i}:function(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e,t){return function(n){this.setAttribute(e,t(n))}}(e,i)),n}return i._value=t,i})(r,t))},style:function(e,t,n){var r="transform"==(e+="")?i.interpolateTransformCss:w;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var o=a.style(this,e),s=(this.style.removeProperty(e),a.style(this,e));return o===s?null:o===n&&s===r?i:i=t(n=o,r=s)}}(e,r)).on("end.style."+e,k(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,i,o;return function(){var s=a.style(this,e),l=n(this),u=l+"";return null==l&&(this.style.removeProperty(e),u=l=a.style(this,e)),s===u?null:s===r&&u===i?o:(i=u,o=t(r=s,l))}}(e,r,_(this,"style."+e,t))).each(function(e,t){var n,r,i,a,o="style."+t,s="end."+o;return function(){var l=y(this,e),u=l.on,c=null==l.value[o]?a||(a=k(t)):void 0;u===n&&i===c||(r=(n=u).copy()).on(s,i=c),l.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,o=n+"";return function(){var s=a.style(this,e);return s===o?null:s===r?i:i=t(r=s,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,function(e,t,n){var r,i;function a(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&function(e,t,n){return function(r){this.style.setProperty(e,t(r),n)}}(e,a,n)),r}return a._value=t,a}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(_(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=b(this.node(),n).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===e)return r.value;return null}return this.each((null==t?function(e,t){var n,r;return function(){var i=y(this,e),a=i.tween;if(a!==n)for(var o=0,s=(r=n=a).length;o<s;++o)if(r[o].name===t){(r=r.slice()).splice(o,1);break}i.tween=r}}:function(e,t,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var a=y(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=s;break}l===u&&i.push(s)}a.tween=i}})(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){m(this,e).delay=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){m(this,e).delay=t}})(t,e)):b(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){y(this,e).duration=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){y(this,e).duration=t}})(t,e)):b(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){y(this,e).ease=t}}(t,e)):b(this.node(),t).ease},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},l={value:function(){0==--i&&a()}};n.each(function(){var n=y(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),n.on=t})})}};var O={time:null,delay:0,duration:250,ease:o.easeCubicInOut};function T(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))return O.time=n.now(),O;return r}a.selection.prototype.interrupt=function(e){return this.each(function(){x(this,e)})},a.selection.prototype.transition=function(e){var t,r;e instanceof M?(t=e._id,e=e._name):(t=E(),(r=O).time=n.now(),e=null==e?null:e+"");for(var i=this._groups,a=i.length,o=0;o<a;++o)for(var s,l=i[o],u=l.length,c=0;c<u;++c)(s=l[c])&&g(s,e,t,c,l,r||T(s,t));return new M(i,this._parents,e,t)};var C=[null];e.transition=A,e.active=function(e,t){var n,r,i=e.__transition;if(i)for(r in t=null==t?null:t+"",i)if((n=i[r]).state>c&&n.name===t)return new M([[e]],C,t,+r);return null},e.interrupt=x,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n,e("d3-dispatch"),e("d3-timer"),e("d3-color"),e("d3-interpolate"),e("d3-selection"),e("d3-ease")):"function"==typeof define&&define.amd?define(["exports","d3-dispatch","d3-timer","d3-color","d3-interpolate","d3-selection","d3-ease"],i):i(r.d3=r.d3||{},r.d3,r.d3,r.d3,r.d3,r.d3,r.d3)},{"d3-color":12,"d3-dispatch":14,"d3-ease":17,"d3-interpolate":23,"d3-selection":30,"d3-timer":34}],36:[function(e,t,n){var r,i;r=this,i=function(e){"use strict";function t(e){return function(){return e}}function n(e){return e[0]}function r(e){return e[1]}function i(){this._=null}function a(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function o(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function s(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function l(e){for(;e.L;)e=e.L;return e}function u(e,t,n,r){var i=[null,null],a=N.push(i)-1;return i.left=e,i.right=t,n&&f(i,e,t,n),r&&f(i,t,e,r),T[e.index].halfedges.push(a),T[t.index].halfedges.push(a),i}function c(e,t,n){var r=[t,n];return r.left=e,r}function f(e,t,n,r){e[0]||e[1]?e.left===n?e[1]=r:e[0]=r:(e[0]=r,e.left=t,e.right=n)}function d(e,t,n,r,i){var a,o=e[0],s=e[1],l=o[0],u=o[1],c=0,f=1,d=s[0]-l,h=s[1]-u;if(a=t-l,d||!(a>0)){if(a/=d,d<0){if(a<c)return;a<f&&(f=a)}else if(d>0){if(a>f)return;a>c&&(c=a)}if(a=r-l,d||!(a<0)){if(a/=d,d<0){if(a>f)return;a>c&&(c=a)}else if(d>0){if(a<c)return;a<f&&(f=a)}if(a=n-u,h||!(a>0)){if(a/=h,h<0){if(a<c)return;a<f&&(f=a)}else if(h>0){if(a>f)return;a>c&&(c=a)}if(a=i-u,h||!(a<0)){if(a/=h,h<0){if(a>f)return;a>c&&(c=a)}else if(h>0){if(a<c)return;a<f&&(f=a)}return!(c>0||f<1)||(c>0&&(e[0]=[l+c*d,u+c*h]),f<1&&(e[1]=[l+f*d,u+f*h]),!0)}}}}}function h(e,t,n,r,i){var a=e[1];if(a)return!0;var o,s,l=e[0],u=e.left,c=e.right,f=u[0],d=u[1],h=c[0],p=c[1],v=(f+h)/2,g=(d+p)/2;if(p===d){if(v<t||v>=r)return;if(f>h){if(l){if(l[1]>=i)return}else l=[v,n];a=[v,i]}else{if(l){if(l[1]<n)return}else l=[v,i];a=[v,n]}}else if(s=g-(o=(f-h)/(p-d))*v,o<-1||o>1)if(f>h){if(l){if(l[1]>=i)return}else l=[(n-s)/o,n];a=[(i-s)/o,i]}else{if(l){if(l[1]<n)return}else l=[(i-s)/o,i];a=[(n-s)/o,n]}else if(d<p){if(l){if(l[0]>=r)return}else l=[t,o*t+s];a=[r,o*r+s]}else{if(l){if(l[0]<t)return}else l=[r,o*r+s];a=[t,o*t+s]}return e[0]=l,e[1]=a,!0}function p(e,t){var n=e.site,r=t.left,i=t.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=t[1],i=t[0]):(r=t[0],i=t[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function v(e,t){return t[+(t.left!==e.site)]}function g(e,t){return t[+(t.left===e.site)]}i.prototype={constructor:i,insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=l(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(o(this,n),n=(e=n).U),n.C=!1,r.C=!0,s(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(s(this,n),n=(e=n).U),n.C=!1,r.C=!0,o(this,r)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,a=e.L,u=e.R;if(n=a?u?l(u):a:u,i?i.L===e?i.L=n:i.R=n:this._=n,a&&u?(r=n.C,n.C=e.C,n.L=a,a.U=n,n!==u?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=u,u.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===i.L){if((t=i.R).C&&(t.C=!1,i.C=!0,o(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,s(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,o(this,i),e=this._;break}}else if((t=i.L).C&&(t.C=!1,i.C=!0,s(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,o(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,s(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}};var m,y=[];function b(){a(this),this.x=this.y=this.arc=this.site=this.cy=null}function x(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,a=n.site;if(r!==a){var o=i[0],s=i[1],l=r[0]-o,u=r[1]-s,c=a[0]-o,f=a[1]-s,d=2*(l*f-u*c);if(!(d>=-F)){var h=l*l+u*u,p=c*c+f*f,v=(f*h-u*p)/d,g=(l*p-c*h)/d,x=y.pop()||new b;x.arc=e,x.site=i,x.x=v+o,x.y=(x.cy=g+s)+Math.sqrt(v*v+g*g),e.circle=x;for(var _=null,w=C._;w;)if(x.y<w.y||x.y===w.y&&x.x<=w.x){if(!w.L){_=w.P;break}w=w.L}else{if(!w.R){_=w;break}w=w.R}C.insert(_,x),_||(m=x)}}}}function _(e){var t=e.circle;t&&(t.P||(m=t.N),C.remove(t),y.push(t),a(t),e.circle=null)}var w=[];function j(){a(this),this.edge=this.site=this.circle=null}function k(e){var t=w.pop()||new j;return t.site=e,t}function z(e){_(e),O.remove(e),w.push(e),a(e)}function M(e){var t=e.circle,n=t.x,r=t.cy,i=[n,r],a=e.P,o=e.N,s=[e];z(e);for(var l=a;l.circle&&Math.abs(n-l.circle.x)<P&&Math.abs(r-l.circle.cy)<P;)a=l.P,s.unshift(l),z(l),l=a;s.unshift(l),_(l);for(var c=o;c.circle&&Math.abs(n-c.circle.x)<P&&Math.abs(r-c.circle.cy)<P;)o=c.N,s.push(c),z(c),c=o;s.push(c),_(c);var d,h=s.length;for(d=1;d<h;++d)c=s[d],l=s[d-1],f(c.edge,l.site,c.site,i);l=s[0],(c=s[h-1]).edge=u(l.site,c.site,null,i),x(l),x(c)}function A(e){for(var t,n,r,i,a=e[0],o=e[1],s=O._;s;)if((r=E(s,o)-a)>P)s=s.L;else{if(!((i=a-S(s,o))>P)){r>-P?(t=s.P,n=s):i>-P?(t=s,n=s.N):t=n=s;break}if(!s.R){t=s;break}s=s.R}!function(e){T[e.index]={site:e,halfedges:[]}}(e);var l=k(e);if(O.insert(t,l),t||n){if(t===n)return _(t),n=k(t.site),O.insert(l,n),l.edge=n.edge=u(t.site,l.site),x(t),void x(n);if(n){_(t),_(n);var c=t.site,d=c[0],h=c[1],p=e[0]-d,v=e[1]-h,g=n.site,m=g[0]-d,y=g[1]-h,b=2*(p*y-v*m),w=p*p+v*v,j=m*m+y*y,z=[(y*w-v*j)/b+d,(p*j-m*w)/b+h];f(n.edge,c,g,z),l.edge=u(c,e,null,z),n.edge=u(e,g,null,z),x(t),x(n)}else l.edge=u(t.site,l.site)}}function E(e,t){var n=e.site,r=n[0],i=n[1],a=i-t;if(!a)return r;var o=e.P;if(!o)return-1/0;var s=(n=o.site)[0],l=n[1],u=l-t;if(!u)return s;var c=s-r,f=1/a-1/u,d=c/u;return f?(-d+Math.sqrt(d*d-2*f*(c*c/(-2*u)-l+u/2+i-a/2)))/f+r:(r+s)/2}function S(e,t){var n=e.N;if(n)return E(n,t);var r=e.site;return r[1]===t?r[0]:1/0}var O,T,C,N,P=1e-6,F=1e-12;function q(e,t){return t[1]-e[1]||t[0]-e[0]}function B(e,t){var n,r,a,o=e.sort(q).pop();for(N=[],T=new Array(e.length),O=new i,C=new i;;)if(a=m,o&&(!a||o[1]<a.y||o[1]===a.y&&o[0]<a.x))o[0]===n&&o[1]===r||(A(o),n=o[0],r=o[1]),o=e.pop();else{if(!a)break;M(a.arc)}if(function(){for(var e,t,n,r,i=0,a=T.length;i<a;++i)if((e=T[i])&&(r=(t=e.halfedges).length)){var o=new Array(r),s=new Array(r);for(n=0;n<r;++n)o[n]=n,s[n]=p(e,N[t[n]]);for(o.sort(function(e,t){return s[t]-s[e]}),n=0;n<r;++n)s[n]=t[o[n]];for(n=0;n<r;++n)t[n]=s[n]}}(),t){var s=+t[0][0],l=+t[0][1],u=+t[1][0],f=+t[1][1];!function(e,t,n,r){for(var i,a=N.length;a--;)h(i=N[a],e,t,n,r)&&d(i,e,t,n,r)&&(Math.abs(i[0][0]-i[1][0])>P||Math.abs(i[0][1]-i[1][1])>P)||delete N[a]}(s,l,u,f),function(e,t,n,r){var i,a,o,s,l,u,f,d,h,p,m,y,b=T.length,x=!0;for(i=0;i<b;++i)if(a=T[i]){for(o=a.site,s=(l=a.halfedges).length;s--;)N[l[s]]||l.splice(s,1);for(s=0,u=l.length;s<u;)m=(p=g(a,N[l[s]]))[0],y=p[1],d=(f=v(a,N[l[++s%u]]))[0],h=f[1],(Math.abs(m-d)>P||Math.abs(y-h)>P)&&(l.splice(s,0,N.push(c(o,p,Math.abs(m-e)<P&&r-y>P?[e,Math.abs(d-e)<P?h:r]:Math.abs(y-r)<P&&n-m>P?[Math.abs(h-r)<P?d:n,r]:Math.abs(m-n)<P&&y-t>P?[n,Math.abs(d-n)<P?h:t]:Math.abs(y-t)<P&&m-e>P?[Math.abs(h-t)<P?d:e,t]:null))-1),++u);u&&(x=!1)}if(x){var _,w,j,k=1/0;for(i=0,x=null;i<b;++i)(a=T[i])&&(j=(_=(o=a.site)[0]-e)*_+(w=o[1]-t)*w)<k&&(k=j,x=a);if(x){var z=[e,t],M=[e,r],A=[n,r],E=[n,t];x.halfedges.push(N.push(c(o=x.site,z,M))-1,N.push(c(o,M,A))-1,N.push(c(o,A,E))-1,N.push(c(o,E,z))-1)}}for(i=0;i<b;++i)(a=T[i])&&(a.halfedges.length||delete T[i])}(s,l,u,f)}this.edges=N,this.cells=T,O=C=N=T=null}B.prototype={constructor:B,polygons:function(){var e=this.edges;return this.cells.map(function(t){var n=t.halfedges.map(function(n){return v(t,e[n])});return n.data=t.site.data,n})},triangles:function(){var e=[],t=this.edges;return this.cells.forEach(function(n,r){if(a=(i=n.halfedges).length)for(var i,a,o,s,l,u,c=n.site,f=-1,d=t[i[a-1]],h=d.left===c?d.right:d.left;++f<a;)o=h,h=(d=t[i[f]]).left===c?d.right:d.left,o&&h&&r<o.index&&r<h.index&&(l=o,u=h,((s=c)[0]-u[0])*(l[1]-s[1])-(s[0]-l[0])*(u[1]-s[1])<0)&&e.push([c.data,o.data,h.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(e,t,n){for(var r,i,a=this,o=a._found||0,s=a.cells.length;!(i=a.cells[o]);)if(++o>=s)return null;var l=e-i.site[0],u=t-i.site[1],c=l*l+u*u;do{i=a.cells[r=o],o=null,i.halfedges.forEach(function(n){var r=a.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var l=e-s[0],u=t-s[1],f=l*l+u*u;f<c&&(c=f,o=s.index)}})}while(null!==o);return a._found=r,null==n||c<=n*n?i.site:null}},e.voronoi=function(){var e=n,i=r,a=null;function o(t){return new B(t.map(function(n,r){var a=[Math.round(e(n,r,t)/P)*P,Math.round(i(n,r,t)/P)*P];return a.index=r,a.data=n,a}),a)}return o.polygons=function(e){return o(e).polygons()},o.links=function(e){return o(e).links()},o.triangles=function(e){return o(e).triangles()},o.x=function(n){return arguments.length?(e="function"==typeof n?n:t(+n),o):e},o.y=function(e){return arguments.length?(i="function"==typeof e?e:t(+e),o):i},o.extent=function(e){return arguments.length?(a=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],o):a&&[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},o.size=function(e){return arguments.length?(a=null==e?null:[[0,0],[+e[0],+e[1]]],o):a&&[a[1][0]-a[0][0],a[1][1]-a[0][1]]},o},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.d3=r.d3||{})},{}],37:[function(e,t,n){var r,i;r=this,i=function(e,t,n,r,i,a){"use strict";function o(e){return function(){return e}}function s(e,t,n){this.target=e,this.type=t,this.transform=n}function l(e,t,n){this.k=e,this.x=t,this.y=n}l.prototype={constructor:l,scale:function(e){return 1===e?this:new l(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new l(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var u=new l(1,0,0);function c(e){for(;!e.__zoom;)if(!(e=e.parentNode))return u;return e.__zoom}function f(){i.event.stopImmediatePropagation()}function d(){i.event.preventDefault(),i.event.stopImmediatePropagation()}function h(){return!i.event.ctrlKey&&!i.event.button}function p(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function v(){return this.__zoom||u}function g(){return-i.event.deltaY*(1===i.event.deltaMode?.05:i.event.deltaMode?1:.002)}function m(){return navigator.maxTouchPoints||"ontouchstart"in this}function y(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}c.prototype=l.prototype,e.zoom=function(){var e,c,b=h,x=p,_=y,w=g,j=m,k=[0,1/0],z=[[-1/0,-1/0],[1/0,1/0]],M=250,A=r.interpolateZoom,E=t.dispatch("start","zoom","end"),S=500,O=150,T=0;function C(e){e.property("__zoom",v).on("wheel.zoom",I).on("mousedown.zoom",R).on("dblclick.zoom",L).filter(j).on("touchstart.zoom",U).on("touchmove.zoom",V).on("touchend.zoom touchcancel.zoom",Y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function N(e,t){return(t=Math.max(k[0],Math.min(k[1],t)))===e.k?e:new l(t,e.x,e.y)}function P(e,t,n){var r=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return r===e.x&&i===e.y?e:new l(e.k,r,i)}function F(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function q(e,t,n){e.on("start.zoom",function(){B(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){B(this,arguments).end()}).tween("zoom",function(){var e=arguments,r=B(this,e),i=x.apply(this,e),a=null==n?F(i):"function"==typeof n?n.apply(this,e):n,o=Math.max(i[1][0]-i[0][0],i[1][1]-i[0][1]),s=this.__zoom,u="function"==typeof t?t.apply(this,e):t,c=A(s.invert(a).concat(o/s.k),u.invert(a).concat(o/u.k));return function(e){if(1===e)e=u;else{var t=c(e),n=o/t[2];e=new l(n,a[0]-t[0]*n,a[1]-t[1]*n)}r.zoom(null,e)}})}function B(e,t,n){return!n&&e.__zooming||new D(e,t)}function D(e,t){this.that=e,this.args=t,this.active=0,this.extent=x.apply(e,t),this.taps=0}function I(){if(b.apply(this,arguments)){var e=B(this,arguments),t=this.__zoom,n=Math.max(k[0],Math.min(k[1],t.k*Math.pow(2,w.apply(this,arguments)))),r=i.mouse(this);if(e.wheel)e.mouse[0][0]===r[0]&&e.mouse[0][1]===r[1]||(e.mouse[1]=t.invert(e.mouse[0]=r)),clearTimeout(e.wheel);else{if(t.k===n)return;e.mouse=[r,t.invert(r)],a.interrupt(this),e.start()}d(),e.wheel=setTimeout(function(){e.wheel=null,e.end()},O),e.zoom("mouse",_(P(N(t,n),e.mouse[0],e.mouse[1]),e.extent,z))}}function R(){if(!c&&b.apply(this,arguments)){var e=B(this,arguments,!0),t=i.select(i.event.view).on("mousemove.zoom",function(){if(d(),!e.moved){var t=i.event.clientX-o,n=i.event.clientY-s;e.moved=t*t+n*n>T}e.zoom("mouse",_(P(e.that.__zoom,e.mouse[0]=i.mouse(e.that),e.mouse[1]),e.extent,z))},!0).on("mouseup.zoom",function(){t.on("mousemove.zoom mouseup.zoom",null),n.dragEnable(i.event.view,e.moved),d(),e.end()},!0),r=i.mouse(this),o=i.event.clientX,s=i.event.clientY;n.dragDisable(i.event.view),f(),e.mouse=[r,this.__zoom.invert(r)],a.interrupt(this),e.start()}}function L(){if(b.apply(this,arguments)){var e=this.__zoom,t=i.mouse(this),n=e.invert(t),r=e.k*(i.event.shiftKey?.5:2),a=_(P(N(e,r),t,n),x.apply(this,arguments),z);d(),M>0?i.select(this).transition().duration(M).call(q,a,t):i.select(this).call(C.transform,a)}}function U(){if(b.apply(this,arguments)){var t,n,r,o,s=i.event.touches,l=s.length,u=B(this,arguments,i.event.changedTouches.length===l);for(f(),n=0;n<l;++n)r=s[n],o=[o=i.touch(this,s,r.identifier),this.__zoom.invert(o),r.identifier],u.touch0?u.touch1||u.touch0[2]===o[2]||(u.touch1=o,u.taps=0):(u.touch0=o,t=!0,u.taps=1+!!e);e&&(e=clearTimeout(e)),t&&(u.taps<2&&(e=setTimeout(function(){e=null},S)),a.interrupt(this),u.start())}}function V(){if(this.__zooming){var t,n,r,a,o=B(this,arguments),s=i.event.changedTouches,l=s.length;for(d(),e&&(e=clearTimeout(e)),o.taps=0,t=0;t<l;++t)n=s[t],r=i.touch(this,s,n.identifier),o.touch0&&o.touch0[2]===n.identifier?o.touch0[0]=r:o.touch1&&o.touch1[2]===n.identifier&&(o.touch1[0]=r);if(n=o.that.__zoom,o.touch1){var u=o.touch0[0],c=o.touch0[1],f=o.touch1[0],h=o.touch1[1],p=(p=f[0]-u[0])*p+(p=f[1]-u[1])*p,v=(v=h[0]-c[0])*v+(v=h[1]-c[1])*v;n=N(n,Math.sqrt(p/v)),r=[(u[0]+f[0])/2,(u[1]+f[1])/2],a=[(c[0]+h[0])/2,(c[1]+h[1])/2]}else{if(!o.touch0)return;r=o.touch0[0],a=o.touch0[1]}o.zoom("touch",_(P(n,r,a),o.extent,z))}}function Y(){if(this.__zooming){var e,t,n=B(this,arguments),r=i.event.changedTouches,a=r.length;for(f(),c&&clearTimeout(c),c=setTimeout(function(){c=null},S),e=0;e<a;++e)t=r[e],n.touch0&&n.touch0[2]===t.identifier?delete n.touch0:n.touch1&&n.touch1[2]===t.identifier&&delete n.touch1;if(n.touch1&&!n.touch0&&(n.touch0=n.touch1,delete n.touch1),n.touch0)n.touch0[1]=this.__zoom.invert(n.touch0[0]);else if(n.end(),2===n.taps){var o=i.select(this).on("dblclick.zoom");o&&o.apply(this,arguments)}}}return C.transform=function(e,t,n){var r=e.selection?e.selection():e;r.property("__zoom",v),e!==r?q(e,t,n):r.interrupt().each(function(){B(this,arguments).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},C.scaleBy=function(e,t,n){C.scaleTo(e,function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)},n)},C.scaleTo=function(e,t,n){C.transform(e,function(){var e=x.apply(this,arguments),r=this.__zoom,i=null==n?F(e):"function"==typeof n?n.apply(this,arguments):n,a=r.invert(i),o="function"==typeof t?t.apply(this,arguments):t;return _(P(N(r,o),i,a),e,z)},n)},C.translateBy=function(e,t,n){C.transform(e,function(){return _(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),x.apply(this,arguments),z)})},C.translateTo=function(e,t,n,r){C.transform(e,function(){var e=x.apply(this,arguments),i=this.__zoom,a=null==r?F(e):"function"==typeof r?r.apply(this,arguments):r;return _(u.translate(a[0],a[1]).scale(i.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,z)},r)},D.prototype={start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){i.customEvent(new s(C,e,this.that.__zoom),E.apply,E,[e,this.that,this.args])}},C.wheelDelta=function(e){return arguments.length?(w="function"==typeof e?e:o(+e),C):w},C.filter=function(e){return arguments.length?(b="function"==typeof e?e:o(!!e),C):b},C.touchable=function(e){return arguments.length?(j="function"==typeof e?e:o(!!e),C):j},C.extent=function(e){return arguments.length?(x="function"==typeof e?e:o([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),C):x},C.scaleExtent=function(e){return arguments.length?(k[0]=+e[0],k[1]=+e[1],C):[k[0],k[1]]},C.translateExtent=function(e){return arguments.length?(z[0][0]=+e[0][0],z[1][0]=+e[1][0],z[0][1]=+e[0][1],z[1][1]=+e[1][1],C):[[z[0][0],z[0][1]],[z[1][0],z[1][1]]]},C.constrain=function(e){return arguments.length?(_=e,C):_},C.duration=function(e){return arguments.length?(M=+e,C):M},C.interpolate=function(e){return arguments.length?(A=e,C):A},C.on=function(){var e=E.on.apply(E,arguments);return e===E?C:e},C.clickDistance=function(e){return arguments.length?(T=(e=+e)*e,C):Math.sqrt(T)},C},e.zoomIdentity=u,e.zoomTransform=c,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n,e("d3-dispatch"),e("d3-drag"),e("d3-interpolate"),e("d3-selection"),e("d3-transition")):"function"==typeof define&&define.amd?define(["exports","d3-dispatch","d3-drag","d3-interpolate","d3-selection","d3-transition"],i):i((r=r||self).d3=r.d3||{},r.d3,r.d3,r.d3,r.d3,r.d3)},{"d3-dispatch":14,"d3-drag":15,"d3-interpolate":23,"d3-selection":30,"d3-transition":35}],38:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("d3-array"),i=e("d3-axis"),a=e("d3-brush"),o=e("d3-chord"),s=e("d3-collection"),l=e("d3-color"),u=e("d3-contour"),c=e("d3-dispatch"),f=e("d3-drag"),d=e("d3-dsv"),h=e("d3-ease"),p=e("d3-fetch"),v=e("d3-force"),g=e("d3-format"),m=e("d3-geo"),y=e("d3-hierarchy"),b=e("d3-interpolate"),x=e("d3-path"),_=e("d3-polygon"),w=e("d3-quadtree"),j=e("d3-random"),k=e("d3-scale"),z=e("d3-scale-chromatic"),M=e("d3-selection"),A=e("d3-shape"),E=e("d3-time"),S=e("d3-time-format"),O=e("d3-timer"),T=e("d3-transition"),C=e("d3-voronoi"),N=e("d3-zoom");Object.keys(r).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})}),Object.keys(i).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}})}),Object.keys(a).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})}),Object.keys(o).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})}),Object.keys(s).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return s[e]}})}),Object.keys(l).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return l[e]}})}),Object.keys(u).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return u[e]}})}),Object.keys(c).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return c[e]}})}),Object.keys(f).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return f[e]}})}),Object.keys(d).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return d[e]}})}),Object.keys(h).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return h[e]}})}),Object.keys(p).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return p[e]}})}),Object.keys(v).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return v[e]}})}),Object.keys(g).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return g[e]}})}),Object.keys(m).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return m[e]}})}),Object.keys(y).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return y[e]}})}),Object.keys(b).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return b[e]}})}),Object.keys(x).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return x[e]}})}),Object.keys(_).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return _[e]}})}),Object.keys(w).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return w[e]}})}),Object.keys(j).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return j[e]}})}),Object.keys(k).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return k[e]}})}),Object.keys(z).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return z[e]}})}),Object.keys(M).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return M[e]}})}),Object.keys(A).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return A[e]}})}),Object.keys(E).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return E[e]}})}),Object.keys(S).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return S[e]}})}),Object.keys(O).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return O[e]}})}),Object.keys(T).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return T[e]}})}),Object.keys(C).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return C[e]}})}),Object.keys(N).forEach(function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return N[e]}})}),n.version="5.10.0"},{"d3-array":7,"d3-axis":8,"d3-brush":9,"d3-chord":10,"d3-collection":11,"d3-color":12,"d3-contour":13,"d3-dispatch":14,"d3-drag":15,"d3-dsv":16,"d3-ease":17,"d3-fetch":18,"d3-force":19,"d3-format":20,"d3-geo":21,"d3-hierarchy":22,"d3-interpolate":23,"d3-path":24,"d3-polygon":25,"d3-quadtree":26,"d3-random":27,"d3-scale":29,"d3-scale-chromatic":28,"d3-selection":30,"d3-shape":31,"d3-time":33,"d3-time-format":32,"d3-timer":34,"d3-transition":35,"d3-voronoi":36,"d3-zoom":37}],39:[function(e,t,n){"use strict";t.exports=function(e,t){switch(void 0===t&&(t=0),typeof e){case"number":if(e>0)return function(e,t){var n,r;for(n=new Array(e),r=0;r<e;++r)n[r]=t;return n}(0|e,t);break;case"object":if("number"==typeof e.length)return function e(t,n,r){var i=0|t[r];if(i<=0)return[];var a,o=new Array(i);if(r===t.length-1)for(a=0;a<i;++a)o[a]=n;else for(a=0;a<i;++a)o[a]=e(t,n,r+1);return o}(e,t,0)}return[]}},{}],40:[function(e,t,n){t.exports=e("./lib/heap")},{"./lib/heap":41}],41:[function(e,t,n){(function(){var e,r,i,a,o,s,l,u,c,f,d,h,p,v,g,m,y;i=Math.floor,f=Math.min,r=function(e,t){return e<t?-1:e>t?1:0},c=function(e,t,n,a,o){var s;if(null==n&&(n=0),null==o&&(o=r),n<0)throw new Error("lo must be non-negative");for(null==a&&(a=e.length);n<a;)o(t,e[s=i((n+a)/2)])<0?a=s:n=s+1;return[].splice.apply(e,[n,n-n].concat(t)),t},s=function(e,t,n){return null==n&&(n=r),e.push(t),v(e,0,e.length-1,n)},o=function(e,t){var n,i;return null==t&&(t=r),n=e.pop(),e.length?(i=e[0],e[0]=n,g(e,0,t)):i=n,i},u=function(e,t,n){var i;return null==n&&(n=r),i=e[0],e[0]=t,g(e,0,n),i},l=function(e,t,n){var i;return null==n&&(n=r),e.length&&n(e[0],t)<0&&(t=(i=[e[0],t])[0],e[0]=i[1],g(e,0,n)),t},a=function(e,t){var n,a,o,s,l,u;for(null==t&&(t=r),l=[],a=0,o=(s=function(){u=[];for(var t=0,n=i(e.length/2);0<=n?t<n:t>n;0<=n?t++:t--)u.push(t);return u}.apply(this).reverse()).length;a<o;a++)n=s[a],l.push(g(e,n,t));return l},p=function(e,t,n){var i;if(null==n&&(n=r),-1!==(i=e.indexOf(t)))return v(e,0,i,n),g(e,i,n)},d=function(e,t,n){var i,o,s,u,c;if(null==n&&(n=r),!(o=e.slice(0,t)).length)return o;for(a(o,n),s=0,u=(c=e.slice(t)).length;s<u;s++)i=c[s],l(o,i,n);return o.sort(n).reverse()},h=function(e,t,n){var i,s,l,u,d,h,p,v,g;if(null==n&&(n=r),10*t<=e.length){if(!(l=e.slice(0,t).sort(n)).length)return l;for(s=l[l.length-1],u=0,h=(p=e.slice(t)).length;u<h;u++)n(i=p[u],s)<0&&(c(l,i,0,null,n),l.pop(),s=l[l.length-1]);return l}for(a(e,n),g=[],d=0,v=f(t,e.length);0<=v?d<v:d>v;0<=v?++d:--d)g.push(o(e,n));return g},v=function(e,t,n,i){var a,o,s;for(null==i&&(i=r),a=e[n];n>t&&i(a,o=e[s=n-1>>1])<0;)e[n]=o,n=s;return e[n]=a},g=function(e,t,n){var i,a,o,s,l;for(null==n&&(n=r),a=e.length,l=t,o=e[t],i=2*t+1;i<a;)(s=i+1)<a&&!(n(e[i],e[s])<0)&&(i=s),e[t]=e[i],i=2*(t=i)+1;return e[t]=o,v(e,l,t,n)},e=function(){function e(e){this.cmp=null!=e?e:r,this.nodes=[]}return e.push=s,e.pop=o,e.replace=u,e.pushpop=l,e.heapify=a,e.updateItem=p,e.nlargest=d,e.nsmallest=h,e.prototype.push=function(e){return s(this.nodes,e,this.cmp)},e.prototype.pop=function(){return o(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return u(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return l(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return a(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return p(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return(t=new e).nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),m=this,y=function(){return e},"function"==typeof define&&define.amd?define([],y):"object"==typeof n?t.exports=y():m.Heap=y()}).call(this)},{}],42:[function(e,t,n){n.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,f=n?i-1:0,d=n?-1:1,h=e[t+f];for(f+=d,a=h&(1<<-c)-1,h>>=-c,c+=s;c>0;a=256*a+e[t+f],f+=d,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+e[t+f],f+=d,c-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),a-=u}return(h?-1:1)*o*Math.pow(2,a-r)},n.write=function(e,t,n,r,i,a){var o,s,l,u=8*a-i-1,c=(1<<u)-1,f=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,p=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+f>=1?d/l:d*Math.pow(2,1-f))*l>=2&&(o++,l/=2),o+f>=c?(s=0,o=c):o+f>=1?(s=(t*l-1)*Math.pow(2,i),o+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(o=o<<i|s,u+=i;u>0;e[n+h]=255&o,h+=p,o/=256,u-=8);e[n+h-p]|=128*v}},{}],43:[function(e,t,n){"use strict";var r=e("bit-twiddle");function i(e){var t=(r.nextPow2(e+1)>>>1)-1,n=e-t;return r.nextPow2(n)-1>=t?t:(t>>>1)+n}function a(e,t){if(e<=0)return 0;var n=i(e);return t>n?a(e-n-1,t-n-1):t===n?r.log2(e):a(n,t)}n.root=i,n.begin=function(e){return 0},n.end=function(e){return e-1},n.height=a,n.prev=function(e,t){return Math.max(t-1,0)},n.next=function(e,t){return Math.min(t+1,e-1)},n.parent=function e(t,n){if(t<=0)return-1;var r,a=i(t);return n>a?(r=e(t-a-1,n-a-1))<0?a:r+a+1:n===a?-1:(r=e(a,n))<0?a:r},n.left=function e(t,n){if(t<=0)return 0;var r=i(t);return n>r?e(t-r-1,n-r-1)+r+1:n===r?i(n):e(r,n)},n.right=function e(t,n){if(t<=0)return 0;var r=i(t);return n>r?e(t-r-1,n-r-1)+r+1:n===r?i(t-r-1)+r+1:e(r,n)},n.leaf=function(e,t){return 0===a(e,t)},n.lo=function(e,t){e|=0,t|=0;for(var n=0;e>1;){var r=i(e);if(t>r)n+=r+1,e-=r+1,t-=r+1;else{if(t===r)break;e=r}}return n},n.hi=function(e,t){e|=0,t|=0;for(var n=0;e>1;){var r=i(e);if(t>r)n+=r+1,e-=r+1,t-=r+1;else{if(t===r){n+=e-1;break}e=r}}return n}},{"bit-twiddle":44}],44:[function(e,t,n){arguments[4][2][0].apply(n,arguments)},{dup:2}],45:[function(e,t,n){"use strict";t.exports=function(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=n;return t}},{}],46:[function(e,t,n){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}t.exports=function(e){return null!=e&&(r(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}(e)||!!e._isBuffer)}},{}],47:[function(e,t,n){"use strict";var r=e("cwise-compiler"),i={body:"",args:[],thisVars:[],localVars:[]};function a(e){if(!e)return i;for(var t=0;t<e.args.length;++t){var n=e.args[t];e.args[t]=0===t?{name:n,lvalue:!0,rvalue:!!e.rvalue,count:e.count||1}:{name:n,lvalue:!1,rvalue:!0,count:1}}return e.thisVars||(e.thisVars=[]),e.localVars||(e.localVars=[]),e}function o(e){for(var t=[],n=0;n<e.args.length;++n)t.push("a"+n);return new Function("P",["return function ",e.funcName,"_ndarrayops(",t.join(","),") {P(",t.join(","),");return a0}"].join(""))(function(e){return r({args:e.args,pre:a(e.pre),body:a(e.body),post:a(e.proc),funcName:e.funcName})}(e))}var s={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var e in s){var t=s[e];n[e]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),n[e+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a"+t+"=b"},rvalue:!0,funcName:e+"eq"}),n[e+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),n[e+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a"+t+"=s"},rvalue:!0,funcName:e+"seq"})}}();var l={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var e in l){var t=l[e];n[e]=o({args:["array","array"],body:{args:["a","b"],body:"a="+t+"b"},funcName:e}),n[e+"eq"]=o({args:["array"],body:{args:["a"],body:"a="+t+"a"},rvalue:!0,count:2,funcName:e+"eq"})}}();var u={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var e in u){var t=u[e];n[e]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),n[e+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),n[e+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a=a"+t+"b"},rvalue:!0,count:2,funcName:e+"eq"}),n[e+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+t+"s"},rvalue:!0,count:2,funcName:e+"seq"})}}();var c=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var e=0;e<c.length;++e){var t=c[e];n[t]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:t}),n[t+"eq"]=o({args:["array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"})}}();var f=["max","min","atan2","pow"];!function(){for(var e=0;e<f.length;++e){var t=f[e];n[t]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t}),n[t+"s"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t+"s"}),n[t+"eq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"}),n[t+"seq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"seq"})}}();var d=["atan2","pow"];!function(){for(var e=0;e<d.length;++e){var t=d[e];n[t+"op"]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"op"}),n[t+"ops"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"ops"}),n[t+"opeq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opeq"}),n[t+"opseq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opseq"})}}(),n.any=r({args:["array"],pre:i,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),n.all=r({args:["array"],pre:i,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),n.sum=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),n.prod=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),n.norm2squared=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),n.norm2=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),n.norminf=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),n.norm1=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),n.sup=r({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),n.inf=r({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),n.argmin=r({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),n.argmax=r({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),n.random=o({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),n.assign=o({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),n.assigns=o({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),n.equals=r({args:["array","array"],pre:i,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":4}],48:[function(e,t,n){"use strict";var r=e("ndarray"),i=e("./doConvert.js");t.exports=function(e,t){for(var n=[],a=e,o=1;Array.isArray(a);)n.push(a.length),o*=a.length,a=a[0];return 0===n.length?r():(t||(t=r(new Float64Array(o),n)),i(t,e),t)}},{"./doConvert.js":49,ndarray:52}],49:[function(e,t,n){t.exports=e("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":4}],50:[function(e,t,n){"use strict";var r=e("ndarray"),i=e("ndarray-ops"),a=e("typedarray-pool");n.clone=function(e){var t=e.dtype;"generic"!==t&&"array"!==t||(t="double");var n=a.malloc(e.size,t),o=r(n,e.shape);return i.assign(o,e),o},n.malloc=function(e,t){t||(t="double");for(var n=1,i=new Array(e.length),o=e.length-1;o>=0;--o)i[o]=n,n*=e[o];return r(a.malloc(n,t),e,i,0)},n.free=function(e){"generic"!==e.dtype&&"array"!==e.dtype&&a.free(e.data)},n.zeros=function(e,t){t||(t="double");for(var n=1,i=new Array(e.length),o=e.length-1;o>=0;--o)i[o]=n,n*=e[o];var s=a.malloc(n,t);for(o=0;o<n;++o)s[o]=0;return r(s,e,i,0)},n.ones=function(e,t){t||(t="double");for(var n=1,i=new Array(e.length),o=e.length-1;o>=0;--o)i[o]=n,n*=e[o];var s=a.malloc(n,t);for(o=0;o<n;++o)s[o]=1;return r(s,e,i,0)},n.eye=function(e,t){var n,i;t||(t="double");var o=1,s=new Array(e.length);for(n=e.length-1;n>=0;--n)s[n]=o,o*=e[n];var l=a.malloc(o,t);for(n=0;n<o;++n)l[n]=0;var u=1/0,c=0;for(n=e.length-1;n>=0;n--)c+=s[n],u=Math.min(u,e[n]);for(n=0,i=0;n<u;n++,i+=c)l[i]=1;return r(l,e,s,0)}},{ndarray:52,"ndarray-ops":47,"typedarray-pool":61}],51:[function(e,t,n){"use strict";t.exports=function(e,t,n){if(t|=0,0===e.dimension||e.shape[0]<=t||t<0)return null;var r=!!n,i=_(e.order,r,e.dtype);return r?i(e,t,n):i(e,t)},t.exports.compile=_;var r="a",i="K",a="C",o="d",s="o",l="R",u="T",c="L",f="H",d="X";function h(e){return"s"+e}function p(e){return"t"+e}function v(e){return"u"+e}function g(e){return"v"+e}function m(e){return"i"+e}function y(e){return"p"+e}function b(e){return"x"+e}var x={};function _(e,t,n){var _=e.join()+t+n,w=x[_];return w||(x[_]=function(e,t,n){var x=(e=function(e){var t=e.slice();return t.splice(e.indexOf(0),1),t.unshift(0),t}(e)).length,_="generic"===n,w="ndSelect"+n+e.join("_")+"_"+(t?"cmp":"lex"),j=[],k=[r,i];t&&k.push(a);for(var z=[o+"="+r+".data",s+"="+r+".offset|0",l+"=Math.random",u],M=0;M<2;++M)z.push(b(M)+"=0");for(M=0;M<x;++M)z.push(h(M)+"="+r+".shape["+M+"]|0",p(M)+"="+r+".stride["+M+"]|0",m(M)+"=0");for(M=1;M<x;++M)M>1?z.push(g(M)+"=("+p(M)+"-"+h(M-1)+"*"+p(M-1)+")|0",v(e[M])+"=("+p(e[M])+"-"+h(e[M-1])+"*"+p(e[M-1])+")|0"):z.push(g(M)+"="+p(M),v(e[M])+"="+p(e[M]));if(t)for(M=0;M<2;++M)z.push(y(M)+"="+r+".pick(0)");function A(t,n){j.push(b(0),"=",s,"+",p(e[0]),"*(",t,");",b(1),"=",s,"+",p(e[0]),"*(",n,");");for(var r=x-1;r>0;--r)j.push("for(",m(e[r]),"=0;",m(e[r]),"<",h(e[r]),";",m(e[r]),"++){");for(_?j.push(u,"=",o,".get(",b(0),");",o,".set(",b(0),",",o,".get(",b(1),"));",o,".set(",b(1),",",u,");"):j.push(u,"=",o,"[",b(0),"];",o,"[",b(0),"]=",o,"[",b(1),"];",o,"[",b(1),"]=",u,";"),r=1;r<x;++r)j.push(b(0),"+=",v(e[r]),";",b(1),"+=",v(e[r]),"}")}z.push(d+"=0",c+"=0",f+"="+h(e[0])+"-1"),j.push("while(",c,"<",f,"){",d,"=(",l,"()*(",f,"-",c,"+1)+",c,")|0;"),A(d,f),j.push(d,"=",c,";","for(",m(0),"=",c,";",m(0),"<",f,";",m(0),"++){"),function(n,r,i){if(t)j.push(y(0),".offset=",s,"+",p(e[0]),"*(",r,");",y(1),".offset=",s,"+",p(e[0]),"*(",i,");",n,"=",a,"(",y(0),",",y(1),");");else{j.push(b(0),"=",s,"+",p(0),"*(",r,");",b(1),"=",s,"+",p(0),"*(",i,");"),x>1&&j.push("_cmp:");for(var l=x-1;l>0;--l)j.push("for(",m(l),"=0;",m(l),"<",h(l),";",m(l),"++){");for(_?j.push(n,"=",o,".get(",b(0),")-",o,".get(",b(1),");"):j.push(n,"=",o,"[",b(0),"]-",o,"[",b(1),"];"),x>1&&j.push("if(",n,")break _cmp;"),l=1;l<x;++l)j.push(b(0),"+=",g(l),";",b(1),"+=",g(l),"}")}}(u,m(0),f),j.push("if(",u,"<0){"),A(d,m(0)),j.push(d,"++;"),j.push("}}"),A(d,f),j.push("if(",d,"===",i,"){",c,"=",d,";","break;","}else if(",i,"<",d,"){",f,"=",d,"-1;","}else{",c,"=",d,"+1;","}","}"),t?j.push(y(0),".offset=",s,"+",c,"*",p(0),";","return ",y(0),";"):j.push("return ",r,".pick(",c,");");var E=["'use strict';function ",w,"(",k,"){","var ",z.join(),";",j.join(""),"};return ",w].join("");return new Function(E)()}(e,t,n))}},{}],52:[function(e,t,n){var r=e("iota-array"),i=e("is-buffer"),a="undefined"!=typeof Float64Array;function o(e,t){return e[0]-t[0]}function s(){var e,t=this.stride,n=new Array(t.length);for(e=0;e<n.length;++e)n[e]=[Math.abs(t[e]),e];n.sort(o);var r=new Array(n.length);for(e=0;e<r.length;++e)r[e]=n[e][1];return r}function l(e,t){var n=["View",t,"d",e].join("");t<0&&(n="View_Nil"+e);var i="generic"===e;if(-1===t){var a="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}";return new Function(a)()}if(0===t){a="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(i?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(i?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}";return new Function("TrivialArray",a)(u[e][0])}a=["'use strict'"];var o=r(t),l=o.map(function(e){return"i"+e}),c="this.offset+"+o.map(function(e){return"this.stride["+e+"]*i"+e}).join("+"),f=o.map(function(e){return"b"+e}).join(","),d=o.map(function(e){return"c"+e}).join(",");a.push("function "+n+"(a,"+f+","+d+",d){this.data=a","this.shape=["+f+"]","this.stride=["+d+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),a.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+o.map(function(e){return"this.shape["+e+"]"}).join("*"),"}})"),1===t?a.push("proto.order=[0]"):(a.push("Object.defineProperty(proto,'order',{get:"),t<4?(a.push("function "+n+"_order(){"),2===t?a.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&a.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):a.push("ORDER})")),a.push("proto.set=function "+n+"_set("+l.join(",")+",v){"),i?a.push("return this.data.set("+c+",v)}"):a.push("return this.data["+c+"]=v}"),a.push("proto.get=function "+n+"_get("+l.join(",")+"){"),i?a.push("return this.data.get("+c+")}"):a.push("return this.data["+c+"]}"),a.push("proto.index=function "+n+"_index(",l.join(),"){return "+c+"}"),a.push("proto.hi=function "+n+"_hi("+l.join(",")+"){return new "+n+"(this.data,"+o.map(function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")}).join(",")+","+o.map(function(e){return"this.stride["+e+"]"}).join(",")+",this.offset)}");var h=o.map(function(e){return"a"+e+"=this.shape["+e+"]"}),p=o.map(function(e){return"c"+e+"=this.stride["+e+"]"});a.push("proto.lo=function "+n+"_lo("+l.join(",")+"){var b=this.offset,d=0,"+h.join(",")+","+p.join(","));for(var v=0;v<t;++v)a.push("if(typeof i"+v+"==='number'&&i"+v+">=0){d=i"+v+"|0;b+=c"+v+"*d;a"+v+"-=d}");a.push("return new "+n+"(this.data,"+o.map(function(e){return"a"+e}).join(",")+","+o.map(function(e){return"c"+e}).join(",")+",b)}"),a.push("proto.step=function "+n+"_step("+l.join(",")+"){var "+o.map(function(e){return"a"+e+"=this.shape["+e+"]"}).join(",")+","+o.map(function(e){return"b"+e+"=this.stride["+e+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(v=0;v<t;++v)a.push("if(typeof i"+v+"==='number'){d=i"+v+"|0;if(d<0){c+=b"+v+"*(a"+v+"-1);a"+v+"=ceil(-a"+v+"/d)}else{a"+v+"=ceil(a"+v+"/d)}b"+v+"*=d}");a.push("return new "+n+"(this.data,"+o.map(function(e){return"a"+e}).join(",")+","+o.map(function(e){return"b"+e}).join(",")+",c)}");var g=new Array(t),m=new Array(t);for(v=0;v<t;++v)g[v]="a[i"+v+"]",m[v]="b[i"+v+"]";a.push("proto.transpose=function "+n+"_transpose("+l+"){"+l.map(function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+g.join(",")+","+m.join(",")+",this.offset)}"),a.push("proto.pick=function "+n+"_pick("+l+"){var a=[],b=[],c=this.offset");for(v=0;v<t;++v)a.push("if(typeof i"+v+"==='number'&&i"+v+">=0){c=(c+this.stride["+v+"]*i"+v+")|0}else{a.push(this.shape["+v+"]);b.push(this.stride["+v+"])}");return a.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),a.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+o.map(function(e){return"shape["+e+"]"}).join(",")+","+o.map(function(e){return"stride["+e+"]"}).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",a.join("\n"))(u[e],s)}var u={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};t.exports=function(e,t,n,r){if(void 0===e)return(0,u.array[0])([]);"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var o=t.length;if(void 0===n){n=new Array(o);for(var s=o-1,c=1;s>=0;--s)n[s]=c,c*=t[s]}if(void 0===r)for(r=0,s=0;s<o;++s)n[s]<0&&(r-=(t[s]-1)*n[s]);for(var f=function(e){if(i(e))return"buffer";if(a)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(e)?"array":"generic"}(e),d=u[f];d.length<=o+1;)d.push(l(f,d.length-1));return(0,d[o+1])(e,t,n,r)}},{"iota-array":45,"is-buffer":46}],53:[function(require,module,exports){(function(global){"use strict";var numeric=void 0===exports?function(){}:exports;void 0!==global&&(global.numeric=numeric),numeric.version="1.2.6",numeric.bench=function(e,t){var n,r,i;for(void 0===t&&(t=15),r=.5,n=new Date;;){for(i=r*=2;i>3;i-=4)e(),e(),e(),e();for(;i>0;)e(),i--;if(new Date-n>t)break}for(i=r;i>3;i-=4)e(),e(),e(),e();for(;i>0;)e(),i--;return 1e3*(3*r-1)/(new Date-n)},numeric._myIndexOf=function(e){var t,n=this.length;for(t=0;t<n;++t)if(this[t]===e)return t;return-1},numeric.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:numeric._myIndexOf,numeric.Function=Function,numeric.precision=4,numeric.largeArray=50,numeric.prettyPrint=function(e){var t=[];return function e(n){var r;if(void 0===n)return t.push(Array(numeric.precision+8).join(" ")),!1;if("string"==typeof n)return t.push('"'+n+'"'),!1;if("boolean"==typeof n)return t.push(n.toString()),!1;if("number"==typeof n){var i=function e(t){if(0===t)return"0";if(isNaN(t))return"NaN";if(t<0)return"-"+e(-t);if(isFinite(t)){var n=Math.floor(Math.log(t)/Math.log(10)),r=t/Math.pow(10,n),i=r.toPrecision(numeric.precision);return 10===parseFloat(i)&&(n++,i=(r=1).toPrecision(numeric.precision)),parseFloat(i).toString()+"e"+n.toString()}return"Infinity"}(n),a=n.toPrecision(numeric.precision),o=parseFloat(n.toString()).toString(),s=[i,a,o,parseFloat(a).toString(),parseFloat(o).toString()];for(r=1;r<s.length;r++)s[r].length<i.length&&(i=s[r]);return t.push(Array(numeric.precision+8-i.length).join(" ")+i),!1}if(null===n)return t.push("null"),!1;if("function"==typeof n){t.push(n.toString());var l=!1;for(r in n)n.hasOwnProperty(r)&&(l?t.push(",\n"):t.push("\n{"),l=!0,t.push(r),t.push(": \n"),e(n[r]));return l&&t.push("}\n"),!0}if(n instanceof Array){if(n.length>numeric.largeArray)return t.push("...Large Array..."),!0;for(l=!1,t.push("["),r=0;r<n.length;r++)r>0&&(t.push(","),l&&t.push("\n ")),l=e(n[r]);return t.push("]"),!0}t.push("{");l=!1;for(r in n)n.hasOwnProperty(r)&&(l&&t.push(",\n"),l=!0,t.push(r),t.push(": \n"),e(n[r]));return t.push("}"),!0}(e),t.join("")},numeric.parseDate=function(e){return function e(t){if("string"==typeof t)return Date.parse(t.replace(/-/g,"/"));if(!(t instanceof Array))throw new Error("parseDate: parameter must be arrays of strings");var n,r=[];for(n=0;n<t.length;n++)r[n]=e(t[n]);return r}(e)},numeric.parseFloat=function(e){return function e(t){if("string"==typeof t)return parseFloat(t);if(!(t instanceof Array))throw new Error("parseFloat: parameter must be arrays of strings");var n,r=[];for(n=0;n<t.length;n++)r[n]=e(t[n]);return r}(e)},numeric.parseCSV=function(e){var t,n,r,i=e.split("\n"),a=[],o=/(([^'",]*)|('[^']*')|("[^"]*")),/g,s=/^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/,l=0;for(n=0;n<i.length;n++){var u,c=(i[n]+",").match(o);if(c.length>0){for(a[l]=[],t=0;t<c.length;t++)u=(r=c[t]).substr(0,r.length-1),s.test(u)?a[l][t]=parseFloat(u):a[l][t]=u;l++}}return a},numeric.toCSV=function(e){var t,n,r,i,a,o=numeric.dim(e);for(r=o[0],o[1],a=[],t=0;t<r;t++){for(i=[],n=0;n<r;n++)i[n]=e[t][n].toString();a[t]=i.join(", ")}return a.join("\n")+"\n"},numeric.getURL=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(),t},numeric.imageURL=function(e){function t(e,t,n){void 0===t&&(t=0),void 0===n&&(n=e.length);var r,i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],a=-1;e.length;for(r=t;r<n;r++)a=a>>>8^i[255&(a^e[r])];return-1^a}var n,r,i,a,o,s,l,u,c,f,d=e[0].length,h=e[0][0].length,p=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,h>>24&255,h>>16&255,h>>8&255,255&h,d>>24&255,d>>16&255,d>>8&255,255&d,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];for(f=t(p,12,29),p[29]=f>>24&255,p[30]=f>>16&255,p[31]=f>>8&255,p[32]=255&f,n=1,r=0,l=0;l<d;l++){for(l<d-1?p.push(0):p.push(1),o=3*h+1+(0===l)&255,s=3*h+1+(0===l)>>8&255,p.push(o),p.push(s),p.push(255&~o),p.push(255&~s),0===l&&p.push(0),u=0;u<h;u++)for(i=0;i<3;i++)r=(r+(n=(n+(o=(o=e[i][l][u])>255?255:o<0?0:Math.round(o)))%65521))%65521,p.push(o);p.push(0)}return c=(r<<16)+n,p.push(c>>24&255),p.push(c>>16&255),p.push(c>>8&255),p.push(255&c),a=p.length-41,p[33]=a>>24&255,p[34]=a>>16&255,p[35]=a>>8&255,p[36]=255&a,f=t(p,37),p.push(f>>24&255),p.push(f>>16&255),p.push(f>>8&255),p.push(255&f),p.push(0),p.push(0),p.push(0),p.push(0),p.push(73),p.push(69),p.push(78),p.push(68),p.push(174),p.push(66),p.push(96),p.push(130),"data:image/png;base64,"+function(e){var t,n,r,i,a,o,s,l=e.length,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="";for(t=0;t<l;t+=3)a=((3&(n=e[t]))<<4)+((r=e[t+1])>>4),o=((15&r)<<2)+((i=e[t+2])>>6),s=63&i,t+1>=l?o=s=64:t+2>=l&&(s=64),c+=u.charAt(n>>2)+u.charAt(a)+u.charAt(o)+u.charAt(s);return c}(p)},numeric._dim=function(e){for(var t=[];"object"==typeof e;)t.push(e.length),e=e[0];return t},numeric.dim=function(e){var t;return"object"==typeof e?"object"==typeof(t=e[0])?"object"==typeof t[0]?numeric._dim(e):[e.length,t.length]:[e.length]:[]},numeric.mapreduce=function(e,t){return Function("x","accum","_s","_k",'if(typeof accum === "undefined") accum = '+t+';\nif(typeof x === "number") { var xi = x; '+e+'; return accum; }\nif(typeof _s === "undefined") _s = numeric.dim(x);\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    '+e+";\n    xi = x[i-1];\n    "+e+";\n}\nif(i === 0) {\n    xi = x[i];\n    "+e+"\n}\nreturn accum;")},numeric.mapreduce2=function(e,t){return Function("x","var n = x.length;\nvar i,xi;\n"+t+";\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    "+e+";\n}\nreturn accum;")},numeric.same=function e(t,n){var r,i;if(!(t instanceof Array&&n instanceof Array))return!1;if((i=t.length)!==n.length)return!1;for(r=0;r<i;r++)if(t[r]!==n[r]){if("object"!=typeof t[r])return!1;if(!e(t[r],n[r]))return!1}return!0},numeric.rep=function(e,t,n){void 0===n&&(n=0);var r,i=e[n],a=Array(i);if(n===e.length-1){for(r=i-2;r>=0;r-=2)a[r+1]=t,a[r]=t;return-1===r&&(a[0]=t),a}for(r=i-1;r>=0;r--)a[r]=numeric.rep(e,t,n+1);return a},numeric.dotMMsmall=function(e,t){var n,r,i,a,o,s,l,u,c,f,d;for(a=e.length,o=t.length,s=t[0].length,l=Array(a),n=a-1;n>=0;n--){for(u=Array(s),c=e[n],i=s-1;i>=0;i--){for(f=c[o-1]*t[o-1][i],r=o-2;r>=1;r-=2)d=r-1,f+=c[r]*t[r][i]+c[d]*t[d][i];0===r&&(f+=c[0]*t[0][i]),u[i]=f}l[n]=u}return l},numeric._getCol=function(e,t,n){var r;for(r=e.length-1;r>0;--r)n[r]=e[r][t],n[--r]=e[r][t];0===r&&(n[0]=e[0][t])},numeric.dotMMbig=function(e,t){var n,r,i,a=numeric._getCol,o=t.length,s=Array(o),l=e.length,u=t[0].length,c=new Array(l),f=numeric.dotVV;for(--o,r=--l;-1!==r;--r)c[r]=Array(u);for(r=--u;-1!==r;--r)for(a(t,r,s),i=l;-1!==i;--i)0,n=e[i],c[i][r]=f(n,s);return c},numeric.dotMV=function(e,t){var n,r=e.length,i=(t.length,Array(r)),a=numeric.dotVV;for(n=r-1;n>=0;n--)i[n]=a(e[n],t);return i},numeric.dotVM=function(e,t){var n,r,i,a,o,s,l;for(i=e.length,a=t[0].length,o=Array(a),r=a-1;r>=0;r--){for(s=e[i-1]*t[i-1][r],n=i-2;n>=1;n-=2)l=n-1,s+=e[n]*t[n][r]+e[l]*t[l][r];0===n&&(s+=e[0]*t[0][r]),o[r]=s}return o},numeric.dotVV=function(e,t){var n,r,i=e.length,a=e[i-1]*t[i-1];for(n=i-2;n>=1;n-=2)r=n-1,a+=e[n]*t[n]+e[r]*t[r];return 0===n&&(a+=e[0]*t[0]),a},numeric.dot=function(e,t){var n=numeric.dim;switch(1e3*n(e).length+n(t).length){case 2002:return t.length<10?numeric.dotMMsmall(e,t):numeric.dotMMbig(e,t);case 2001:return numeric.dotMV(e,t);case 1002:return numeric.dotVM(e,t);case 1001:return numeric.dotVV(e,t);case 1e3:return numeric.mulVS(e,t);case 1:return numeric.mulSV(e,t);case 0:return e*t;default:throw new Error("numeric.dot only works on vectors and matrices")}},numeric.diag=function(e){var t,n,r,i,a=e.length,o=Array(a);for(t=a-1;t>=0;t--){for(i=Array(a),n=t+2,r=a-1;r>=n;r-=2)i[r]=0,i[r-1]=0;for(r>t&&(i[r]=0),i[t]=e[t],r=t-1;r>=1;r-=2)i[r]=0,i[r-1]=0;0===r&&(i[0]=0),o[t]=i}return o},numeric.getDiag=function(e){var t,n=Math.min(e.length,e[0].length),r=Array(n);for(t=n-1;t>=1;--t)r[t]=e[t][t],r[--t]=e[t][t];return 0===t&&(r[0]=e[0][0]),r},numeric.identity=function(e){return numeric.diag(numeric.rep([e],1))},numeric.pointwise=function(e,t,n){void 0===n&&(n="");var r,i,a=[],o=/\[i\]$/,s="",l=!1;for(r=0;r<e.length;r++)o.test(e[r])?s=i=e[r].substring(0,e[r].length-3):i=e[r],"ret"===i&&(l=!0),a.push(i);return a[e.length]="_s",a[e.length+1]="_k",a[e.length+2]='if(typeof _s === "undefined") _s = numeric.dim('+s+');\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i'+(l?"":", ret = Array(_n)")+";\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+e.join(",")+",_s,_k+1);\n    return ret;\n}\n"+n+"\nfor(i=_n-1;i!==-1;--i) {\n    "+t+"\n}\nreturn ret;",Function.apply(null,a)},numeric.pointwise2=function(e,t,n){void 0===n&&(n="");var r,i,a=[],o=/\[i\]$/,s="",l=!1;for(r=0;r<e.length;r++)o.test(e[r])?s=i=e[r].substring(0,e[r].length-3):i=e[r],"ret"===i&&(l=!0),a.push(i);return a[e.length]="var _n = "+s+".length;\nvar i"+(l?"":", ret = Array(_n)")+";\n"+n+"\nfor(i=_n-1;i!==-1;--i) {\n"+t+"\n}\nreturn ret;",Function.apply(null,a)},numeric._biforeach=function e(t,n,r,i,a){var o;if(i!==r.length-1)for(o=r[i]-1;o>=0;o--)e("object"==typeof t?t[o]:t,"object"==typeof n?n[o]:n,r,i+1,a);else a(t,n)},numeric._biforeach2=function e(t,n,r,i,a){if(i===r.length-1)return a(t,n);var o,s=r[i],l=Array(s);for(o=s-1;o>=0;--o)l[o]=e("object"==typeof t?t[o]:t,"object"==typeof n?n[o]:n,r,i+1,a);return l},numeric._foreach=function e(t,n,r,i){var a;if(r!==n.length-1)for(a=n[r]-1;a>=0;a--)e(t[a],n,r+1,i);else i(t)},numeric._foreach2=function e(t,n,r,i){if(r===n.length-1)return i(t);var a,o=n[r],s=Array(o);for(a=o-1;a>=0;a--)s[a]=e(t[a],n,r+1,i);return s},numeric.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"},numeric.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="},numeric.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"],numeric.mathfuns2=["atan2","pow","max","min"],numeric.ops1={neg:"-",not:"!",bnot:"~",clone:""},numeric.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi)","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]},function(){var e,t;for(e=0;e<numeric.mathfuns2.length;++e)t=numeric.mathfuns2[e],numeric.ops2[t]=t;for(e in numeric.ops2)if(numeric.ops2.hasOwnProperty(e)){t=numeric.ops2[e];var n,r,i="";-1!==numeric.myIndexOf.call(numeric.mathfuns2,e)?(i="var "+t+" = Math."+t+";\n",n=function(e,n,r){return e+" = "+t+"("+n+","+r+")"},r=function(e,n){return e+" = "+t+"("+e+","+n+")"}):(n=function(e,n,r){return e+" = "+n+" "+t+" "+r},r=numeric.opseq.hasOwnProperty(e+"eq")?function(e,n){return e+" "+t+"= "+n}:function(e,n){return e+" = "+e+" "+t+" "+n}),numeric[e+"VV"]=numeric.pointwise2(["x[i]","y[i]"],n("ret[i]","x[i]","y[i]"),i),numeric[e+"SV"]=numeric.pointwise2(["x","y[i]"],n("ret[i]","x","y[i]"),i),numeric[e+"VS"]=numeric.pointwise2(["x[i]","y"],n("ret[i]","x[i]","y"),i),numeric[e]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric."+e+"VV, VS = numeric."+e+"VS, SV = numeric."+e+'SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === "object") {\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else '+r("x","y")+"\n}\nreturn x;\n"),numeric[t]=numeric[e],numeric[e+"eqV"]=numeric.pointwise2(["ret[i]","x[i]"],r("ret[i]","x[i]"),i),numeric[e+"eqS"]=numeric.pointwise2(["ret[i]","x"],r("ret[i]","x"),i),numeric[e+"eq"]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric."+e+"eqV, S = numeric."+e+'eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n')}for(e=0;e<numeric.mathfuns2.length;++e)t=numeric.mathfuns2[e],delete numeric.ops2[t];for(e=0;e<numeric.mathfuns.length;++e)t=numeric.mathfuns[e],numeric.ops1[t]=t;for(e in numeric.ops1)numeric.ops1.hasOwnProperty(e)&&(i="",t=numeric.ops1[e],-1!==numeric.myIndexOf.call(numeric.mathfuns,e)&&Math.hasOwnProperty(t)&&(i="var "+t+" = Math."+t+";\n"),numeric[e+"eqV"]=numeric.pointwise2(["ret[i]"],"ret[i] = "+t+"(ret[i]);",i),numeric[e+"eq"]=Function("x",'if(typeof x !== "object") return '+t+"x\nvar i;\nvar V = numeric."+e+"eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n"),numeric[e+"V"]=numeric.pointwise2(["x[i]"],"ret[i] = "+t+"(x[i]);",i),numeric[e]=Function("x",'if(typeof x !== "object") return '+t+"(x)\nvar i;\nvar V = numeric."+e+"V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n"));for(e=0;e<numeric.mathfuns.length;++e)t=numeric.mathfuns[e],delete numeric.ops1[t];for(e in numeric.mapreducers)numeric.mapreducers.hasOwnProperty(e)&&(t=numeric.mapreducers[e],numeric[e+"V"]=numeric.mapreduce2(t[0],t[1]),numeric[e]=Function("x","s","k",t[1]+'if(typeof x !== "object") {    xi = x;\n'+t[0]+';\n    return accum;\n}if(typeof s === "undefined") s = numeric.dim(x);\nif(typeof k === "undefined") k = 0;\nif(k === s.length-1) return numeric.'+e+"V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n"+t[0]+";\n}\nreturn accum;\n"))}(),numeric.truncVV=numeric.pointwise(["x[i]","y[i]"],"ret[i] = round(x[i]/y[i])*y[i];","var round = Math.round;"),numeric.truncVS=numeric.pointwise(["x[i]","y"],"ret[i] = round(x[i]/y)*y;","var round = Math.round;"),numeric.truncSV=numeric.pointwise(["x","y[i]"],"ret[i] = round(x/y[i])*y[i];","var round = Math.round;"),numeric.trunc=function(e,t){return"object"==typeof e?"object"==typeof t?numeric.truncVV(e,t):numeric.truncVS(e,t):"object"==typeof t?numeric.truncSV(e,t):Math.round(e/t)*t},numeric.inv=function(e){var t,n,r,i,a,o,s,l=numeric.dim(e),u=Math.abs,c=l[0],f=l[1],d=numeric.clone(e),h=numeric.identity(c);for(o=0;o<f;++o){var p=-1,v=-1;for(a=o;a!==c;++a)(s=u(d[a][o]))>v&&(p=a,v=s);for(n=d[p],d[p]=d[o],d[o]=n,i=h[p],h[p]=h[o],h[o]=i,e=n[o],s=o;s!==f;++s)n[s]/=e;for(s=f-1;-1!==s;--s)i[s]/=e;for(a=c-1;-1!==a;--a)if(a!==o){for(t=d[a],r=h[a],e=t[o],s=o+1;s!==f;++s)t[s]-=n[s]*e;for(s=f-1;s>0;--s)r[s]-=i[s]*e,r[--s]-=i[s]*e;0===s&&(r[0]-=i[0]*e)}}return h},numeric.det=function(e){var t=numeric.dim(e);if(2!==t.length||t[0]!==t[1])throw new Error("numeric: det() only works on square matrices");var n,r,i,a,o,s,l,u,c=t[0],f=1,d=numeric.clone(e);for(r=0;r<c-1;r++){for(i=r,n=r+1;n<c;n++)Math.abs(d[n][r])>Math.abs(d[i][r])&&(i=n);for(i!==r&&(l=d[i],d[i]=d[r],d[r]=l,f*=-1),a=d[r],n=r+1;n<c;n++){for(s=(o=d[n])[r]/a[r],i=r+1;i<c-1;i+=2)u=i+1,o[i]-=a[i]*s,o[u]-=a[u]*s;i!==c&&(o[i]-=a[i]*s)}if(0===a[r])return 0;f*=a[r]}return f*d[r][r]},numeric.transpose=function(e){var t,n,r,i,a,o=e.length,s=e[0].length,l=Array(s);for(n=0;n<s;n++)l[n]=Array(o);for(t=o-1;t>=1;t-=2){for(i=e[t],r=e[t-1],n=s-1;n>=1;--n)(a=l[n])[t]=i[n],a[t-1]=r[n],(a=l[--n])[t]=i[n],a[t-1]=r[n];0===n&&((a=l[0])[t]=i[0],a[t-1]=r[0])}if(0===t){for(r=e[0],n=s-1;n>=1;--n)l[n][0]=r[n],l[--n][0]=r[n];0===n&&(l[0][0]=r[0])}return l},numeric.negtranspose=function(e){var t,n,r,i,a,o=e.length,s=e[0].length,l=Array(s);for(n=0;n<s;n++)l[n]=Array(o);for(t=o-1;t>=1;t-=2){for(i=e[t],r=e[t-1],n=s-1;n>=1;--n)(a=l[n])[t]=-i[n],a[t-1]=-r[n],(a=l[--n])[t]=-i[n],a[t-1]=-r[n];0===n&&((a=l[0])[t]=-i[0],a[t-1]=-r[0])}if(0===t){for(r=e[0],n=s-1;n>=1;--n)l[n][0]=-r[n],l[--n][0]=-r[n];0===n&&(l[0][0]=-r[0])}return l},numeric._random=function e(t,n){var r,i,a=t[n],o=Array(a);if(n===t.length-1){for(i=Math.random,r=a-1;r>=1;r-=2)o[r]=i(),o[r-1]=i();return 0===r&&(o[0]=i()),o}for(r=a-1;r>=0;r--)o[r]=e(t,n+1);return o},numeric.random=function(e){return numeric._random(e,0)},numeric.norm2=function(e){return Math.sqrt(numeric.norm2Squared(e))},numeric.linspace=function(e,t,n){if(void 0===n&&(n=Math.max(Math.round(t-e)+1,1)),n<2)return 1===n?[e]:[];var r,i=Array(n);for(r=--n;r>=0;r--)i[r]=(r*t+(n-r)*e)/n;return i},numeric.getBlock=function(e,t,n){var r=numeric.dim(e);return function e(i,a){var o,s=t[a],l=n[a]-s,u=Array(l);if(a===r.length-1){for(o=l;o>=0;o--)u[o]=i[o+s];return u}for(o=l;o>=0;o--)u[o]=e(i[o+s],a+1);return u}(e,0)},numeric.setBlock=function(e,t,n,r){var i=numeric.dim(e);return function e(r,a,o){var s,l=t[o],u=n[o]-l;if(o===i.length-1)for(s=u;s>=0;s--)r[s+l]=a[s];for(s=u;s>=0;s--)e(r[s+l],a[s],o+1)}(e,r,0),e},numeric.getRange=function(e,t,n){var r,i,a,o,s=t.length,l=n.length,u=Array(s);for(r=s-1;-1!==r;--r)for(u[r]=Array(l),a=u[r],o=e[t[r]],i=l-1;-1!==i;--i)a[i]=o[n[i]];return u},numeric.blockMatrix=function(e){var t=numeric.dim(e);if(t.length<4)return numeric.blockMatrix([e]);var n,r,i,a,o,s=t[0],l=t[1];for(n=0,r=0,i=0;i<s;++i)n+=e[i][0].length;for(a=0;a<l;++a)r+=e[0][a][0].length;var u=Array(n);for(i=0;i<n;++i)u[i]=Array(r);var c,f,d,h,p,v=0;for(i=0;i<s;++i){for(c=r,a=l-1;-1!==a;--a)for(c-=(o=e[i][a])[0].length,d=o.length-1;-1!==d;--d)for(p=o[d],f=u[v+d],h=p.length-1;-1!==h;--h)f[c+h]=p[h];v+=e[i][0].length}return u},numeric.tensor=function(e,t){if("number"==typeof e||"number"==typeof t)return numeric.mul(e,t);var n=numeric.dim(e),r=numeric.dim(t);if(1!==n.length||1!==r.length)throw new Error("numeric: tensor product is only defined for vectors");var i,a,o,s,l=n[0],u=r[0],c=Array(l);for(a=l-1;a>=0;a--){for(i=Array(u),s=e[a],o=u-1;o>=3;--o)i[o]=s*t[o],i[--o]=s*t[o],i[--o]=s*t[o],i[--o]=s*t[o];for(;o>=0;)i[o]=s*t[o],--o;c[a]=i}return c},numeric.T=function(e,t){this.x=e,this.y=t},numeric.t=function(e,t){return new numeric.T(e,t)},numeric.Tbinop=function(e,t,n,r,i){var a;numeric.indexOf;if("string"!=typeof i)for(a in i="",numeric)numeric.hasOwnProperty(a)&&(e.indexOf(a)>=0||t.indexOf(a)>=0||n.indexOf(a)>=0||r.indexOf(a)>=0)&&a.length>1&&(i+="var "+a+" = numeric."+a+";\n");return Function(["y"],"var x = this;\nif(!(y instanceof numeric.T)) { y = new numeric.T(y); }\n"+i+"\nif(x.y) {  if(y.y) {    return new numeric.T("+r+");\n  }\n  return new numeric.T("+n+");\n}\nif(y.y) {\n  return new numeric.T("+t+");\n}\nreturn new numeric.T("+e+");\n")},numeric.T.prototype.add=numeric.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)"),numeric.T.prototype.sub=numeric.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)"),numeric.T.prototype.mul=numeric.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))"),numeric.T.prototype.reciprocal=function(){var e=numeric.mul,t=numeric.div;if(this.y){var n=numeric.add(e(this.x,this.x),e(this.y,this.y));return new numeric.T(t(this.x,n),t(numeric.neg(this.y),n))}return new T(t(1,this.x))},numeric.T.prototype.div=function(e){if(e instanceof numeric.T||(e=new numeric.T(e)),e.y)return this.mul(e.reciprocal());var t=numeric.div;return this.y?new numeric.T(t(this.x,e.x),t(this.y,e.x)):new numeric.T(t(this.x,e.x))},numeric.T.prototype.dot=numeric.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))"),numeric.T.prototype.transpose=function(){var e=numeric.transpose,t=this.x,n=this.y;return n?new numeric.T(e(t),e(n)):new numeric.T(e(t))},numeric.T.prototype.transjugate=function(){var e=numeric.transpose,t=this.x,n=this.y;return n?new numeric.T(e(t),numeric.negtranspose(n)):new numeric.T(e(t))},numeric.Tunop=function(e,t,n){return"string"!=typeof n&&(n=""),Function("var x = this;\n"+n+"\nif(x.y) {  "+t+";\n}\n"+e+";\n")},numeric.T.prototype.exp=numeric.Tunop("return new numeric.T(ex)","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))","var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;"),numeric.T.prototype.conj=numeric.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));"),numeric.T.prototype.neg=numeric.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg = numeric.neg;"),numeric.T.prototype.sin=numeric.Tunop("return new numeric.T(numeric.sin(x.x))","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));"),numeric.T.prototype.cos=numeric.Tunop("return new numeric.T(numeric.cos(x.x))","return x.exp().add(x.neg().exp()).div(2);"),numeric.T.prototype.abs=numeric.Tunop("return new numeric.T(numeric.abs(x.x));","return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul = numeric.mul;"),numeric.T.prototype.log=numeric.Tunop("return new numeric.T(numeric.log(x.x));","var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\nreturn new numeric.T(numeric.log(r.x),theta.x);"),numeric.T.prototype.norm2=numeric.Tunop("return numeric.norm2(x.x);","var f = numeric.norm2Squared;\nreturn Math.sqrt(f(x.x)+f(x.y));"),numeric.T.prototype.inv=function(){var e=this;if(void 0===e.y)return new numeric.T(numeric.inv(e.x));var t,n,r,i,a,o,s,l,u,c,f,d,h,p,v,g,m,y,b=e.x.length,x=numeric.identity(b),_=numeric.rep([b,b],0),w=numeric.clone(e.x),j=numeric.clone(e.y);for(u=0;u<b;u++){for(d=(p=w[u][u])*p+(v=j[u][u])*v,f=u,c=u+1;c<b;c++)(h=(p=w[c][u])*p+(v=j[c][u])*v)>d&&(f=c,d=h);for(f!==u&&(y=w[u],w[u]=w[f],w[f]=y,y=j[u],j[u]=j[f],j[f]=y,y=x[u],x[u]=x[f],x[f]=y,y=_[u],_[u]=_[f],_[f]=y),t=w[u],n=j[u],a=x[u],o=_[u],p=t[u],v=n[u],c=u+1;c<b;c++)g=t[c],m=n[c],t[c]=(g*p+m*v)/d,n[c]=(m*p-g*v)/d;for(c=0;c<b;c++)g=a[c],m=o[c],a[c]=(g*p+m*v)/d,o[c]=(m*p-g*v)/d;for(c=u+1;c<b;c++){for(r=w[c],i=j[c],s=x[c],l=_[c],p=r[u],v=i[u],f=u+1;f<b;f++)g=t[f],m=n[f],r[f]-=g*p-m*v,i[f]-=m*p+g*v;for(f=0;f<b;f++)g=a[f],m=o[f],s[f]-=g*p-m*v,l[f]-=m*p+g*v}}for(u=b-1;u>0;u--)for(a=x[u],o=_[u],c=u-1;c>=0;c--)for(s=x[c],l=_[c],p=w[c][u],v=j[c][u],f=b-1;f>=0;f--)g=a[f],m=o[f],s[f]-=p*g-v*m,l[f]-=p*m+v*g;return new numeric.T(x,_)},numeric.T.prototype.get=function(e){var t,n=this.x,r=this.y,i=0,a=e.length;if(r){for(;i<a;)n=n[t=e[i]],r=r[t],i++;return new numeric.T(n,r)}for(;i<a;)n=n[t=e[i]],i++;return new numeric.T(n)},numeric.T.prototype.set=function(e,t){var n,r=this.x,i=this.y,a=0,o=e.length,s=t.x,l=t.y;if(0===o)return l?this.y=l:i&&(this.y=void 0),this.x=r,this;if(l){for(i||(i=numeric.rep(numeric.dim(r),0),this.y=i);a<o-1;)r=r[n=e[a]],i=i[n],a++;return r[n=e[a]]=s,i[n]=l,this}if(i){for(;a<o-1;)r=r[n=e[a]],i=i[n],a++;return r[n=e[a]]=s,s instanceof Array?i[n]=numeric.rep(numeric.dim(s),0):i[n]=0,this}for(;a<o-1;)r=r[n=e[a]],a++;return r[n=e[a]]=s,this},numeric.T.prototype.getRows=function(e,t){var n,r,i=t-e+1,a=Array(i),o=this.x,s=this.y;for(n=e;n<=t;n++)a[n-e]=o[n];if(s){for(r=Array(i),n=e;n<=t;n++)r[n-e]=s[n];return new numeric.T(a,r)}return new numeric.T(a)},numeric.T.prototype.setRows=function(e,t,n){var r,i=this.x,a=this.y,o=n.x,s=n.y;for(r=e;r<=t;r++)i[r]=o[r-e];if(s)for(a||(a=numeric.rep(numeric.dim(i),0),this.y=a),r=e;r<=t;r++)a[r]=s[r-e];else if(a)for(r=e;r<=t;r++)a[r]=numeric.rep([o[r-e].length],0);return this},numeric.T.prototype.getRow=function(e){var t=this.x,n=this.y;return n?new numeric.T(t[e],n[e]):new numeric.T(t[e])},numeric.T.prototype.setRow=function(e,t){var n=this.x,r=this.y,i=t.x,a=t.y;return n[e]=i,a?(r||(r=numeric.rep(numeric.dim(n),0),this.y=r),r[e]=a):r&&(r=numeric.rep([i.length],0)),this},numeric.T.prototype.getBlock=function(e,t){var n=this.x,r=this.y,i=numeric.getBlock;return r?new numeric.T(i(n,e,t),i(r,e,t)):new numeric.T(i(n,e,t))},numeric.T.prototype.setBlock=function(e,t,n){n instanceof numeric.T||(n=new numeric.T(n));var r=this.x,i=this.y,a=numeric.setBlock,o=n.x,s=n.y;if(s)return i||(this.y=numeric.rep(numeric.dim(this),0),i=this.y),a(r,e,t,o),a(i,e,t,s),this;a(r,e,t,o),i&&a(i,e,t,numeric.rep(numeric.dim(o),0))},numeric.T.rep=function(e,t){var n=numeric.T;t instanceof n||(t=new n(t));var r=t.x,i=t.y,a=numeric.rep;return i?new n(a(e,r),a(e,i)):new n(a(e,r))},numeric.T.diag=function(e){e instanceof numeric.T||(e=new numeric.T(e));var t=e.x,n=e.y,r=numeric.diag;return n?new numeric.T(r(t),r(n)):new numeric.T(r(t))},numeric.T.eig=function(){if(this.y)throw new Error("eig: not implemented for complex matrices.");return numeric.eig(this.x)},numeric.T.identity=function(e){return new numeric.T(numeric.identity(e))},numeric.T.prototype.getDiag=function(){var e=numeric,t=this.x,n=this.y;return n?new e.T(e.getDiag(t),e.getDiag(n)):new e.T(e.getDiag(t))},numeric.house=function(e){var t=numeric.clone(e),n=(e[0]>=0?1:-1)*numeric.norm2(e);t[0]+=n;var r=numeric.norm2(t);if(0===r)throw new Error("eig: internal error");return numeric.div(t,r)},numeric.toUpperHessenberg=function(e){var t=numeric.dim(e);if(2!==t.length||t[0]!==t[1])throw new Error("numeric: toUpperHessenberg() only works on square matrices");var n,r,i,a,o,s,l,u,c,f,d=t[0],h=numeric.clone(e),p=numeric.identity(d);for(r=0;r<d-2;r++){for(a=Array(d-r-1),n=r+1;n<d;n++)a[n-r-1]=h[n][r];if(numeric.norm2(a)>0){for(o=numeric.house(a),s=numeric.getBlock(h,[r+1,r],[d-1,d-1]),l=numeric.tensor(o,numeric.dot(o,s)),n=r+1;n<d;n++)for(u=h[n],c=l[n-r-1],i=r;i<d;i++)u[i]-=2*c[i-r];for(s=numeric.getBlock(h,[0,r+1],[d-1,d-1]),l=numeric.tensor(numeric.dot(s,o),o),n=0;n<d;n++)for(u=h[n],c=l[n],i=r+1;i<d;i++)u[i]-=2*c[i-r-1];for(s=Array(d-r-1),n=r+1;n<d;n++)s[n-r-1]=p[n];for(l=numeric.tensor(o,numeric.dot(o,s)),n=r+1;n<d;n++)for(f=p[n],c=l[n-r-1],i=0;i<d;i++)f[i]-=2*c[i]}}return{H:h,Q:p}},numeric.epsilon=2.220446049250313e-16,numeric.QRFrancis=function(e,t){void 0===t&&(t=1e4),e=numeric.clone(e);numeric.clone(e);var n,r,i,a,o,s,l,u,c,f,d,h,p,v,g,m,y,b,x=numeric.dim(e)[0],_=numeric.identity(x);if(x<3)return{Q:_,B:[[0,x-1]]};var w=numeric.epsilon;for(b=0;b<t;b++){for(m=0;m<x-1;m++)if(Math.abs(e[m+1][m])<w*(Math.abs(e[m][m])+Math.abs(e[m+1][m+1]))){var j=numeric.QRFrancis(numeric.getBlock(e,[0,0],[m,m]),t),k=numeric.QRFrancis(numeric.getBlock(e,[m+1,m+1],[x-1,x-1]),t);for(h=Array(m+1),g=0;g<=m;g++)h[g]=_[g];for(p=numeric.dot(j.Q,h),g=0;g<=m;g++)_[g]=p[g];for(h=Array(x-m-1),g=m+1;g<x;g++)h[g-m-1]=_[g];for(p=numeric.dot(k.Q,h),g=m+1;g<x;g++)_[g]=p[g-m-1];return{Q:_,B:j.B.concat(numeric.add(k.B,m+1))}}var z,M,A;if(i=e[x-2][x-2],a=e[x-2][x-1],o=e[x-1][x-2],u=i+(s=e[x-1][x-1]),l=i*s-a*o,c=numeric.getBlock(e,[0,0],[2,2]),u*u>=4*l)z=.5*(u+Math.sqrt(u*u-4*l)),M=.5*(u-Math.sqrt(u*u-4*l)),c=numeric.add(numeric.sub(numeric.dot(c,c),numeric.mul(c,z+M)),numeric.diag(numeric.rep([3],z*M)));else c=numeric.add(numeric.sub(numeric.dot(c,c),numeric.mul(c,u)),numeric.diag(numeric.rep([3],l)));for(n=[c[0][0],c[1][0],c[2][0]],r=numeric.house(n),h=[e[0],e[1],e[2]],p=numeric.tensor(r,numeric.dot(r,h)),g=0;g<3;g++)for(d=e[g],v=p[g],y=0;y<x;y++)d[y]-=2*v[y];for(h=numeric.getBlock(e,[0,0],[x-1,2]),p=numeric.tensor(numeric.dot(h,r),r),g=0;g<x;g++)for(d=e[g],v=p[g],y=0;y<3;y++)d[y]-=2*v[y];for(h=[_[0],_[1],_[2]],p=numeric.tensor(r,numeric.dot(r,h)),g=0;g<3;g++)for(f=_[g],v=p[g],y=0;y<x;y++)f[y]-=2*v[y];for(m=0;m<x-2;m++){for(y=m;y<=m+1;y++)if(Math.abs(e[y+1][y])<w*(Math.abs(e[y][y])+Math.abs(e[y+1][y+1]))){j=numeric.QRFrancis(numeric.getBlock(e,[0,0],[y,y]),t),k=numeric.QRFrancis(numeric.getBlock(e,[y+1,y+1],[x-1,x-1]),t);for(h=Array(y+1),g=0;g<=y;g++)h[g]=_[g];for(p=numeric.dot(j.Q,h),g=0;g<=y;g++)_[g]=p[g];for(h=Array(x-y-1),g=y+1;g<x;g++)h[g-y-1]=_[g];for(p=numeric.dot(k.Q,h),g=y+1;g<x;g++)_[g]=p[g-y-1];return{Q:_,B:j.B.concat(numeric.add(k.B,y+1))}}for(A=Math.min(x-1,m+3),n=Array(A-m),g=m+1;g<=A;g++)n[g-m-1]=e[g][m];for(r=numeric.house(n),h=numeric.getBlock(e,[m+1,m],[A,x-1]),p=numeric.tensor(r,numeric.dot(r,h)),g=m+1;g<=A;g++)for(d=e[g],v=p[g-m-1],y=m;y<x;y++)d[y]-=2*v[y-m];for(h=numeric.getBlock(e,[0,m+1],[x-1,A]),p=numeric.tensor(numeric.dot(h,r),r),g=0;g<x;g++)for(d=e[g],v=p[g],y=m+1;y<=A;y++)d[y]-=2*v[y-m-1];for(h=Array(A-m),g=m+1;g<=A;g++)h[g-m-1]=_[g];for(p=numeric.tensor(r,numeric.dot(r,h)),g=m+1;g<=A;g++)for(f=_[g],v=p[g-m-1],y=0;y<x;y++)f[y]-=2*v[y]}}throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?")},numeric.eig=function(e,t){var n,r,i,a,o,s,l,u,c,f,d,h,p,v,g,m,y=numeric.toUpperHessenberg(e),b=numeric.QRFrancis(y.H,t),x=numeric.T,_=e.length,w=b.B,j=numeric.dot(b.Q,numeric.dot(y.H,numeric.transpose(b.Q))),k=new x(numeric.dot(b.Q,y.Q)),z=w.length,M=Math.sqrt;for(r=0;r<z;r++)if((n=w[r][0])===w[r][1]);else{if(a=n+1,o=j[n][n],s=j[n][a],l=j[a][n],u=j[a][a],0===s&&0===l)continue;(f=(c=-o-u)*c-4*(o*u-s*l))>=0?((g=(o-(d=c<0?-.5*(c-M(f)):-.5*(c+M(f))))*(o-d)+s*s)>(m=l*l+(u-d)*(u-d))?(p=(o-d)/(g=M(g)),v=s/g):(p=l/(m=M(m)),v=(u-d)/m),i=new x([[v,-p],[p,v]]),k.setRows(n,a,i.dot(k.getRows(n,a)))):(d=-.5*c,h=.5*M(-f),(g=(o-d)*(o-d)+s*s)>(m=l*l+(u-d)*(u-d))?(p=(o-d)/(g=M(g+h*h)),v=s/g,d=0,h/=g):(p=l/(m=M(m+h*h)),v=(u-d)/m,d=h/m,h=0),i=new x([[v,-p],[p,v]],[[d,h],[h,-d]]),k.setRows(n,a,i.dot(k.getRows(n,a))))}var A=k.dot(e).dot(k.transjugate()),E=(_=e.length,numeric.T.identity(_));for(a=0;a<_;a++)if(a>0)for(r=a-1;r>=0;r--){var S=A.get([r,r]),O=A.get([a,a]);numeric.neq(S.x,O.x)||numeric.neq(S.y,O.y)?(d=A.getRow(r).getBlock([r],[a-1]),h=E.getRow(a).getBlock([r],[a-1]),E.set([a,r],A.get([r,a]).neg().sub(d.dot(h)).div(S.sub(O)))):E.setRow(a,E.getRow(r))}for(a=0;a<_;a++)d=E.getRow(a),E.setRow(a,d.div(d.norm2()));return E=E.transpose(),E=k.transjugate().dot(E),{lambda:A.getDiag(),E:E}},numeric.ccsSparse=function(e){var t,n,r,i=e.length,a=[];for(n=i-1;-1!==n;--n)for(r in t=e[n]){for(r=parseInt(r);r>=a.length;)a[a.length]=0;0!==t[r]&&a[r]++}var o=a.length,s=Array(o+1);for(s[0]=0,n=0;n<o;++n)s[n+1]=s[n]+a[n];var l=Array(s[o]),u=Array(s[o]);for(n=i-1;-1!==n;--n)for(r in t=e[n])0!==t[r]&&(a[r]--,l[s[r]+a[r]]=n,u[s[r]+a[r]]=t[r]);return[s,l,u]},numeric.ccsFull=function(e){var t,n,r,i,a=e[0],o=e[1],s=e[2],l=numeric.ccsDim(e),u=l[0],c=l[1],f=numeric.rep([u,c],0);for(t=0;t<c;t++)for(r=a[t],i=a[t+1],n=r;n<i;++n)f[o[n]][t]=s[n];return f},numeric.ccsTSolve=function(e,t,n,r,i){var a,o,s,l,u,c,f,d=e[0],h=e[1],p=e[2],v=d.length-1,g=Math.max,m=0;function y(e){var t;if(0===n[e]){for(n[e]=1,t=d[e];t<d[e+1];++t)y(h[t]);i[m]=e,++m}}for(void 0===r&&(n=numeric.rep([v],0)),void 0===r&&(r=numeric.linspace(0,n.length-1)),void 0===i&&(i=[]),a=r.length-1;-1!==a;--a)y(r[a]);for(i.length=m,a=i.length-1;-1!==a;--a)n[i[a]]=0;for(a=r.length-1;-1!==a;--a)o=r[a],n[o]=t[o];for(a=i.length-1;-1!==a;--a){for(o=i[a],s=d[o],l=g(d[o+1],s),u=s;u!==l;++u)if(h[u]===o){n[o]/=p[u];break}for(f=n[o],u=s;u!==l;++u)(c=h[u])!==o&&(n[c]-=f*p[u])}return n},numeric.ccsDFS=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS.prototype.dfs=function(e,t,n,r,i,a){var o,s,l,u=0,c=i.length,f=this.k,d=this.k1,h=this.j;if(0===r[e])for(r[e]=1,h[0]=e,f[0]=s=t[e],d[0]=l=t[e+1];;)if(s>=l){if(i[c]=h[u],0===u)return;++c,s=f[--u],l=d[u]}else 0===r[o=a[n[s]]]?(r[o]=1,f[u]=s,h[++u]=o,s=t[o],d[u]=l=t[o+1]):++s},numeric.ccsLPSolve=function(e,t,n,r,i,a,o){var s,l,u,c,f,d,h,p,v,g=e[0],m=e[1],y=e[2],b=(g.length,t[0]),x=t[1],_=t[2];for(l=b[i],u=b[i+1],r.length=0,s=l;s<u;++s)o.dfs(a[x[s]],g,m,n,r,a);for(s=r.length-1;-1!==s;--s)n[r[s]]=0;for(s=l;s!==u;++s)n[c=a[x[s]]]=_[s];for(s=r.length-1;-1!==s;--s){for(f=g[c=r[s]],d=g[c+1],h=f;h<d;++h)if(a[m[h]]===c){n[c]/=y[h];break}for(v=n[c],h=f;h<d;++h)(p=a[m[h]])!==c&&(n[p]-=v*y[h])}return n},numeric.ccsLUP1=function(e,t){var n,r,i,a,o,s,l,u=e[0].length-1,c=[numeric.rep([u+1],0),[],[]],f=[numeric.rep([u+1],0),[],[]],d=c[0],h=c[1],p=c[2],v=f[0],g=f[1],m=f[2],y=numeric.rep([u],0),b=numeric.rep([u],0),x=numeric.ccsLPSolve,_=(Math.max,Math.abs),w=numeric.linspace(0,u-1),j=numeric.linspace(0,u-1),k=new numeric.ccsDFS(u);for(void 0===t&&(t=1),n=0;n<u;++n){for(x(c,e,y,b,n,j,k),a=-1,o=-1,r=b.length-1;-1!==r;--r)(i=b[r])<=n||(s=_(y[i]))>a&&(o=i,a=s);for(_(y[n])<t*a&&(r=w[n],a=w[o],w[n]=a,j[a]=n,w[o]=r,j[r]=o,a=y[n],y[n]=y[o],y[o]=a),a=d[n],o=v[n],l=y[n],h[a]=w[n],p[a]=1,++a,r=b.length-1;-1!==r;--r)s=y[i=b[r]],b[r]=0,y[i]=0,i<=n?(g[o]=i,m[o]=s,++o):(h[a]=w[i],p[a]=s/l,++a);d[n+1]=a,v[n+1]=o}for(r=h.length-1;-1!==r;--r)h[r]=j[h[r]];return{L:c,U:f,P:w,Pinv:j}},numeric.ccsDFS0=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS0.prototype.dfs=function(e,t,n,r,i,a,o){var s,l,u,c=0,f=i.length,d=this.k,h=this.k1,p=this.j;if(0===r[e])for(r[e]=1,p[0]=e,d[0]=l=t[a[e]],h[0]=u=t[a[e]+1];;){if(isNaN(l))throw new Error("Ow!");if(l>=u){if(i[f]=a[p[c]],0===c)return;++f,l=d[--c],u=h[c]}else 0===r[s=n[l]]?(r[s]=1,d[c]=l,p[++c]=s,l=t[s=a[s]],h[c]=u=t[s+1]):++l}},numeric.ccsLPSolve0=function(e,t,n,r,i,a,o,s){var l,u,c,f,d,h,p,v,g,m=e[0],y=e[1],b=e[2],x=(m.length,t[0]),_=t[1],w=t[2];for(u=x[i],c=x[i+1],r.length=0,l=u;l<c;++l)s.dfs(_[l],m,y,n,r,a,o);for(l=r.length-1;-1!==l;--l)n[o[f=r[l]]]=0;for(l=u;l!==c;++l)n[f=_[l]]=w[l];for(l=r.length-1;-1!==l;--l){for(v=o[f=r[l]],d=m[f],h=m[f+1],p=d;p<h;++p)if(y[p]===v){n[v]/=b[p];break}for(g=n[v],p=d;p<h;++p)n[y[p]]-=g*b[p];n[v]=g}},numeric.ccsLUP0=function(e,t){var n,r,i,a,o,s,l,u=e[0].length-1,c=[numeric.rep([u+1],0),[],[]],f=[numeric.rep([u+1],0),[],[]],d=c[0],h=c[1],p=c[2],v=f[0],g=f[1],m=f[2],y=numeric.rep([u],0),b=numeric.rep([u],0),x=numeric.ccsLPSolve0,_=(Math.max,Math.abs),w=numeric.linspace(0,u-1),j=numeric.linspace(0,u-1),k=new numeric.ccsDFS0(u);for(void 0===t&&(t=1),n=0;n<u;++n){for(x(c,e,y,b,n,j,w,k),a=-1,o=-1,r=b.length-1;-1!==r;--r)(i=b[r])<=n||(s=_(y[w[i]]))>a&&(o=i,a=s);for(_(y[w[n]])<t*a&&(r=w[n],a=w[o],w[n]=a,j[a]=n,w[o]=r,j[r]=o),a=d[n],o=v[n],l=y[w[n]],h[a]=w[n],p[a]=1,++a,r=b.length-1;-1!==r;--r)s=y[w[i=b[r]]],b[r]=0,y[w[i]]=0,i<=n?(g[o]=i,m[o]=s,++o):(h[a]=w[i],p[a]=s/l,++a);d[n+1]=a,v[n+1]=o}for(r=h.length-1;-1!==r;--r)h[r]=j[h[r]];return{L:c,U:f,P:w,Pinv:j}},numeric.ccsLUP=numeric.ccsLUP0,numeric.ccsDim=function(e){return[numeric.sup(e[1])+1,e[0].length-1]},numeric.ccsGetBlock=function(e,t,n){var r=numeric.ccsDim(e),i=r[0],a=r[1];void 0===t?t=numeric.linspace(0,i-1):"number"==typeof t&&(t=[t]),void 0===n?n=numeric.linspace(0,a-1):"number"==typeof n&&(n=[n]);var o,s,l,u,c=t.length,f=n.length,d=numeric.rep([a],0),h=[],p=[],v=[d,h,p],g=e[0],m=e[1],y=e[2],b=numeric.rep([i],0),x=0,_=numeric.rep([i],0);for(s=0;s<f;++s){var w=g[u=n[s]],j=g[u+1];for(o=w;o<j;++o)_[l=m[o]]=1,b[l]=y[o];for(o=0;o<c;++o)_[t[o]]&&(h[x]=o,p[x]=b[t[o]],++x);for(o=w;o<j;++o)_[l=m[o]]=0;d[s+1]=x}return v},numeric.ccsDot=function(e,t){var n,r,i,a,o,s,l,u,c,f,d,h=e[0],p=e[1],v=e[2],g=t[0],m=t[1],y=t[2],b=numeric.ccsDim(e),x=numeric.ccsDim(t),_=b[0],w=(b[1],x[1]),j=numeric.rep([_],0),k=numeric.rep([_],0),z=Array(_),M=numeric.rep([w],0),A=[],E=[],S=[M,A,E];for(i=0;i!==w;++i){for(a=g[i],o=g[i+1],c=0,r=a;r<o;++r)for(f=m[r],d=y[r],s=h[f],l=h[f+1],n=s;n<l;++n)0===k[u=p[n]]&&(z[c]=u,k[u]=1,c+=1),j[u]=j[u]+v[n]*d;for(o=(a=M[i])+c,M[i+1]=o,r=c-1;-1!==r;--r)d=a+r,n=z[r],A[d]=n,E[d]=j[n],k[n]=0,j[n]=0;M[i+1]=M[i]+c}return S},numeric.ccsLUPSolve=function(e,t){var n=e.L,r=e.U,i=(e.P,t[0]),a=!1;"object"!=typeof i&&(i=(t=[[0,t.length],numeric.linspace(0,t.length-1),t])[0],a=!0);var o,s,l,u,c,f,d=t[1],h=t[2],p=n[0].length-1,v=i.length-1,g=numeric.rep([p],0),m=Array(p),y=numeric.rep([p],0),b=Array(p),x=numeric.rep([v+1],0),_=[],w=[],j=numeric.ccsTSolve,k=0;for(o=0;o<v;++o){for(c=0,l=i[o],u=i[o+1],s=l;s<u;++s)f=e.Pinv[d[s]],b[c]=f,y[f]=h[s],++c;for(b.length=c,j(n,y,g,b,m),s=b.length-1;-1!==s;--s)y[b[s]]=0;if(j(r,g,y,m,b),a)return y;for(s=m.length-1;-1!==s;--s)g[m[s]]=0;for(s=b.length-1;-1!==s;--s)f=b[s],_[k]=f,w[k]=y[f],y[f]=0,++k;x[o+1]=k}return[x,_,w]},numeric.ccsbinop=function(e,t){return void 0===t&&(t=""),Function("X","Y","var Xi = X[0], Xj = X[1], Xv = X[2];\nvar Yi = Y[0], Yj = Y[1], Yv = Y[2];\nvar n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\nvar Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\nvar x = numeric.rep([m],0),y = numeric.rep([m],0);\nvar xk,yk,zk;\nvar i,j,j0,j1,k,p=0;\n"+t+"for(i=0;i<n;++i) {\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Xj[j];\n    x[k] = 1;\n    Zj[p] = k;\n    ++p;\n  }\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Yj[j];\n    y[k] = Yv[j];\n    if(x[k] === 0) {\n      Zj[p] = k;\n      ++p;\n    }\n  }\n  Zi[i+1] = p;\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\n  j0 = Zi[i]; j1 = Zi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Zj[j];\n    xk = x[k];\n    yk = y[k];\n"+e+"\n    Zv[j] = zk;\n  }\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\n}\nreturn [Zi,Zj,Zv];")},function(){var k,A,B,C;for(k in numeric.ops2)A=isFinite(eval("1"+numeric.ops2[k]+"0"))?"[Y[0],Y[1],numeric."+k+"(X,Y[2])]":"NaN",B=isFinite(eval("0"+numeric.ops2[k]+"1"))?"[X[0],X[1],numeric."+k+"(X[2],Y)]":"NaN",C=isFinite(eval("1"+numeric.ops2[k]+"0"))&&isFinite(eval("0"+numeric.ops2[k]+"1"))?"numeric.ccs"+k+"MM(X,Y)":"NaN",numeric["ccs"+k+"MM"]=numeric.ccsbinop("zk = xk "+numeric.ops2[k]+"yk;"),numeric["ccs"+k]=Function("X","Y",'if(typeof X === "number") return '+A+';\nif(typeof Y === "number") return '+B+";\nreturn "+C+";\n")}(),numeric.ccsScatter=function(e){var t,n=e[0],r=e[1],i=e[2],a=numeric.sup(r)+1,o=n.length,s=numeric.rep([a],0),l=Array(o),u=Array(o),c=numeric.rep([a],0);for(t=0;t<o;++t)c[r[t]]++;for(t=0;t<a;++t)s[t+1]=s[t]+c[t];var f,d,h=s.slice(0);for(t=0;t<o;++t)l[f=h[d=r[t]]]=n[t],u[f]=i[t],h[d]=h[d]+1;return[s,l,u]},numeric.ccsGather=function(e){var t,n,r,i,a,o=e[0],s=e[1],l=e[2],u=o.length-1,c=s.length,f=Array(c),d=Array(c),h=Array(c);for(a=0,t=0;t<u;++t)for(r=o[t],i=o[t+1],n=r;n!==i;++n)d[a]=t,f[a]=s[n],h[a]=l[n],++a;return[f,d,h]},numeric.sdim=function e(t,n,r){if(void 0===n&&(n=[]),"object"!=typeof t)return n;var i;for(i in void 0===r&&(r=0),r in n||(n[r]=0),t.length>n[r]&&(n[r]=t.length),t)t.hasOwnProperty(i)&&e(t[i],n,r+1);return n},numeric.sclone=function e(t,n,r){void 0===n&&(n=0),void 0===r&&(r=numeric.sdim(t).length);var i,a=Array(t.length);if(n===r-1){for(i in t)t.hasOwnProperty(i)&&(a[i]=t[i]);return a}for(i in t)t.hasOwnProperty(i)&&(a[i]=e(t[i],n+1,r));return a},numeric.sdiag=function(e){var t,n,r=e.length,i=Array(r);for(t=r-1;t>=1;t-=2)n=t-1,i[t]=[],i[t][t]=e[t],i[n]=[],i[n][n]=e[n];return 0===t&&(i[0]=[],i[0][0]=e[t]),i},numeric.sidentity=function(e){return numeric.sdiag(numeric.rep([e],1))},numeric.stranspose=function(e){var t,n,r,i=[];e.length;for(t in e)if(e.hasOwnProperty(t))for(n in r=e[t])r.hasOwnProperty(n)&&("object"!=typeof i[n]&&(i[n]=[]),i[n][t]=r[n]);return i},numeric.sLUP=function(e,t){throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.")},numeric.sdotMM=function(e,t){var n,r,i,a,o,s,l,u=e.length,c=(t.length,numeric.stranspose(t)),f=c.length,d=Array(u);for(i=u-1;i>=0;i--){for(l=[],n=e[i],o=f-1;o>=0;o--){for(a in s=0,r=c[o],n)n.hasOwnProperty(a)&&a in r&&(s+=n[a]*r[a]);s&&(l[o]=s)}d[i]=l}return d},numeric.sdotMV=function(e,t){var n,r,i,a,o=e.length,s=Array(o);for(r=o-1;r>=0;r--){for(i in a=0,n=e[r])n.hasOwnProperty(i)&&t[i]&&(a+=n[i]*t[i]);a&&(s[r]=a)}return s},numeric.sdotVM=function(e,t){var n,r,i,a,o=[];for(n in e)if(e.hasOwnProperty(n))for(r in i=t[n],a=e[n],i)i.hasOwnProperty(r)&&(o[r]||(o[r]=0),o[r]+=a*i[r]);return o},numeric.sdotVV=function(e,t){var n,r=0;for(n in e)e[n]&&t[n]&&(r+=e[n]*t[n]);return r},numeric.sdot=function(e,t){var n=numeric.sdim(e).length,r=numeric.sdim(t).length;switch(1e3*n+r){case 0:return e*t;case 1001:return numeric.sdotVV(e,t);case 2001:return numeric.sdotMV(e,t);case 1002:return numeric.sdotVM(e,t);case 2002:return numeric.sdotMM(e,t);default:throw new Error("numeric.sdot not implemented for tensors of order "+n+" and "+r)}},numeric.sscatter=function(e){var t,n,r,i,a=e[0].length,o=e.length,s=[];for(n=a-1;n>=0;--n)if(e[o-1][n]){for(i=s,r=0;r<o-2;r++)i[t=e[r][n]]||(i[t]=[]),i=i[t];i[e[r][n]]=e[r+1][n]}return s},numeric.sgather=function e(t,n,r){var i,a,o;for(a in void 0===n&&(n=[]),void 0===r&&(r=[]),i=r.length,t)if(t.hasOwnProperty(a))if(r[i]=parseInt(a),"number"==typeof(o=t[a])){if(o){if(0===n.length)for(a=i+1;a>=0;--a)n[a]=[];for(a=i;a>=0;--a)n[a].push(r[a]);n[i+1].push(o)}}else e(o,n,r);return r.length>i&&r.pop(),n},numeric.cLU=function(e){var t,n,r,i,a,o,s=e[0],l=e[1],u=e[2],c=s.length,f=0;for(t=0;t<c;t++)s[t]>f&&(f=s[t]);f++;var d,h=Array(f),p=Array(f),v=numeric.rep([f],1/0),g=numeric.rep([f],-1/0);for(r=0;r<c;r++)t=s[r],(n=l[r])<v[t]&&(v[t]=n),n>g[t]&&(g[t]=n);for(t=0;t<f-1;t++)g[t]>g[t+1]&&(g[t+1]=g[t]);for(t=f-1;t>=1;t--)v[t]<v[t-1]&&(v[t-1]=v[t]);for(t=0;t<f;t++)p[t]=numeric.rep([g[t]-v[t]+1],0),h[t]=numeric.rep([t-v[t]],0),t-v[t]+1,g[t]-t+1;for(r=0;r<c;r++)p[t=s[r]][l[r]-v[t]]=u[r];for(t=0;t<f-1;t++)for(i=t-v[t],b=p[t],n=t+1;v[n]<=t&&n<f;n++)if(a=t-v[n],o=g[t]-t,d=(x=p[n])[a]/b[i]){for(r=1;r<=o;r++)x[r+a]-=d*b[r+i];h[n][t-v[n]]=d}var m,y,b=[],x=[],_=[],w=[],j=[],k=[];for(c=0,m=0,t=0;t<f;t++){for(i=v[t],a=g[t],y=p[t],n=t;n<=a;n++)y[n-i]&&(b[c]=t,x[c]=n,_[c]=y[n-i],c++);for(y=h[t],n=i;n<t;n++)y[n-i]&&(w[m]=t,j[m]=n,k[m]=y[n-i],m++);w[m]=t,j[m]=t,k[m]=1,m++}return{U:[b,x,_],L:[w,j,k]}},numeric.cLUsolve=function(e,t){var n,r,i=e.L,a=e.U,o=numeric.clone(t),s=i[0],l=i[1],u=i[2],c=a[0],f=a[1],d=a[2],h=c.length,p=(s.length,o.length);for(r=0,n=0;n<p;n++){for(;l[r]<n;)o[n]-=u[r]*o[l[r]],r++;r++}for(r=h-1,n=p-1;n>=0;n--){for(;f[r]>n;)o[n]-=d[r]*o[f[r]],r--;o[n]/=d[r],r--}return o},numeric.cgrid=function(e,t){"number"==typeof e&&(e=[e,e]);var n,r,i,a=numeric.rep(e,-1);if("function"!=typeof t)switch(t){case"L":t=function(t,n){return t>=e[0]/2||n<e[1]/2};break;default:t=function(e,t){return!0}}for(i=0,n=1;n<e[0]-1;n++)for(r=1;r<e[1]-1;r++)t(n,r)&&(a[n][r]=i,i++);return a},numeric.cdelsq=function(e){var t,n,r,i,a,o=[[-1,0],[0,-1],[0,1],[1,0]],s=numeric.dim(e),l=s[0],u=s[1],c=[],f=[],d=[];for(t=1;t<l-1;t++)for(n=1;n<u-1;n++)if(!(e[t][n]<0)){for(r=0;r<4;r++)i=t+o[r][0],a=n+o[r][1],e[i][a]<0||(c.push(e[t][n]),f.push(e[i][a]),d.push(-1));c.push(e[t][n]),f.push(e[t][n]),d.push(4)}return[c,f,d]},numeric.cdotMV=function(e,t){var n,r,i,a=e[0],o=e[1],s=e[2],l=a.length;for(i=0,r=0;r<l;r++)a[r]>i&&(i=a[r]);for(i++,n=numeric.rep([i],0),r=0;r<l;r++)n[a[r]]+=s[r]*t[o[r]];return n},numeric.Spline=function(e,t,n,r,i){this.x=e,this.yl=t,this.yr=n,this.kl=r,this.kr=i},numeric.Spline.prototype._at=function(e,t){var n,r,i,a=this.x,o=this.yl,s=this.yr,l=this.kl,u=this.kr,c=numeric.add,f=numeric.sub,d=numeric.mul;n=f(d(l[t],a[t+1]-a[t]),f(s[t+1],o[t])),r=c(d(u[t+1],a[t]-a[t+1]),f(s[t+1],o[t]));var h=(i=(e-a[t])/(a[t+1]-a[t]))*(1-i);return c(c(c(d(1-i,o[t]),d(i,s[t+1])),d(n,h*(1-i))),d(r,h*i))},numeric.Spline.prototype.at=function(e){if("number"==typeof e){var t,n,r,i=this.x,a=i.length,o=Math.floor;for(t=0,n=a-1;n-t>1;)i[r=o((t+n)/2)]<=e?t=r:n=r;return this._at(e,t)}a=e.length;var s,l=Array(a);for(s=a-1;-1!==s;--s)l[s]=this.at(e[s]);return l},numeric.Spline.prototype.diff=function(){var e,t,n,r=this.x,i=this.yl,a=this.yr,o=this.kl,s=this.kr,l=i.length,u=o,c=s,f=Array(l),d=Array(l),h=numeric.add,p=numeric.mul,v=numeric.div,g=numeric.sub;for(e=l-1;-1!==e;--e)t=r[e+1]-r[e],n=g(a[e+1],i[e]),f[e]=v(h(p(n,6),p(o[e],-4*t),p(s[e+1],-2*t)),t*t),d[e+1]=v(h(p(n,-6),p(o[e],2*t),p(s[e+1],4*t)),t*t);return new numeric.Spline(r,u,c,f,d)},numeric.Spline.prototype.roots=function(){function e(e){return e*e}var t=[],n=this.x,r=this.yl,i=this.yr,a=this.kl,o=this.kr;"number"==typeof r[0]&&(r=[r],i=[i],a=[a],o=[o]);var s,l,u,c,f,d,h,p,v,g,m,y,b,x,_,w,j,k,z,M,A,E,S,O=r.length,T=n.length-1,C=(t=Array(O),Math.sqrt);for(s=0;s!==O;++s){for(c=r[s],f=i[s],d=a[s],h=o[s],p=[],l=0;l!==T;l++){for(l>0&&f[l]*c[l]<0&&p.push(n[l]),w=n[l+1]-n[l],n[l],m=c[l],y=f[l+1],v=d[l]/w,b=(g=h[l+1]/w)+3*m+2*v-3*y,x=3*(g+v+2*(m-y)),(_=e(v-g+3*(m-y))+12*g*m)<=0?j=(k=b/x)>n[l]&&k<n[l+1]?[n[l],k,n[l+1]]:[n[l],n[l+1]]:(k=(b-C(_))/x,z=(b+C(_))/x,j=[n[l]],k>n[l]&&k<n[l+1]&&j.push(k),z>n[l]&&z<n[l+1]&&j.push(z),j.push(n[l+1])),A=j[0],k=this._at(A,l),u=0;u<j.length-1;u++)if(E=j[u+1],z=this._at(E,l),0!==k)if(0===z||k*z>0)A=E,k=z;else{for(var N=0;!((S=(k*E-z*A)/(k-z))<=A||S>=E);)if((M=this._at(S,l))*z>0)E=S,z=M,-1===N&&(k*=.5),N=-1;else{if(!(M*k>0))break;A=S,k=M,1===N&&(z*=.5),N=1}p.push(S),A=j[u+1],k=this._at(A,l)}else p.push(A),A=E,k=z;0===z&&p.push(E)}t[s]=p}return"number"==typeof this.yl[0]?t[0]:t},numeric.spline=function(e,t,n,r){var i,a=e.length,o=[],s=[],l=[],u=numeric.sub,c=numeric.mul,f=numeric.add;for(i=a-2;i>=0;i--)s[i]=e[i+1]-e[i],l[i]=u(t[i+1],t[i]);"string"!=typeof n&&"string"!=typeof r||(n=r="periodic");var d=[[],[],[]];switch(typeof n){case"undefined":o[0]=c(3/(s[0]*s[0]),l[0]),d[0].push(0,0),d[1].push(0,1),d[2].push(2/s[0],1/s[0]);break;case"string":o[0]=f(c(3/(s[a-2]*s[a-2]),l[a-2]),c(3/(s[0]*s[0]),l[0])),d[0].push(0,0,0),d[1].push(a-2,0,1),d[2].push(1/s[a-2],2/s[a-2]+2/s[0],1/s[0]);break;default:o[0]=n,d[0].push(0),d[1].push(0),d[2].push(1)}for(i=1;i<a-1;i++)o[i]=f(c(3/(s[i-1]*s[i-1]),l[i-1]),c(3/(s[i]*s[i]),l[i])),d[0].push(i,i,i),d[1].push(i-1,i,i+1),d[2].push(1/s[i-1],2/s[i-1]+2/s[i],1/s[i]);switch(typeof r){case"undefined":o[a-1]=c(3/(s[a-2]*s[a-2]),l[a-2]),d[0].push(a-1,a-1),d[1].push(a-2,a-1),d[2].push(1/s[a-2],2/s[a-2]);break;case"string":d[1][d[1].length-1]=0;break;default:o[a-1]=r,d[0].push(a-1),d[1].push(a-1),d[2].push(1)}o="number"!=typeof o[0]?numeric.transpose(o):[o];var h=Array(o.length);if("string"==typeof n)for(i=h.length-1;-1!==i;--i)h[i]=numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(d)),o[i]),h[i][a-1]=h[i][0];else for(i=h.length-1;-1!==i;--i)h[i]=numeric.cLUsolve(numeric.cLU(d),o[i]);return h="number"==typeof t[0]?h[0]:numeric.transpose(h),new numeric.Spline(e,t,t,h,h)},numeric.fftpow2=function e(t,n){var r=t.length;if(1!==r){var i,a,o=Math.cos,s=Math.sin,l=Array(r/2),u=Array(r/2),c=Array(r/2),f=Array(r/2);for(a=r/2,i=r-1;-1!==i;--i)c[--a]=t[i],f[a]=n[i],--i,l[a]=t[i],u[a]=n[i];e(l,u),e(c,f),a=r/2;var d,h,p,v=-6.283185307179586/r;for(i=r-1;-1!==i;--i)-1===--a&&(a=r/2-1),h=o(d=v*i),p=s(d),t[i]=l[a]+h*c[a]-p*f[a],n[i]=u[a]+h*f[a]+p*c[a]}},numeric._ifftpow2=function e(t,n){var r=t.length;if(1!==r){var i,a,o=Math.cos,s=Math.sin,l=Array(r/2),u=Array(r/2),c=Array(r/2),f=Array(r/2);for(a=r/2,i=r-1;-1!==i;--i)c[--a]=t[i],f[a]=n[i],--i,l[a]=t[i],u[a]=n[i];e(l,u),e(c,f),a=r/2;var d,h,p,v=6.283185307179586/r;for(i=r-1;-1!==i;--i)-1===--a&&(a=r/2-1),h=o(d=v*i),p=s(d),t[i]=l[a]+h*c[a]-p*f[a],n[i]=u[a]+h*f[a]+p*c[a]}},numeric.ifftpow2=function(e,t){numeric._ifftpow2(e,t),numeric.diveq(e,e.length),numeric.diveq(t,t.length)},numeric.convpow2=function(e,t,n,r){var i,a,o,s,l;for(numeric.fftpow2(e,t),numeric.fftpow2(n,r),i=e.length-1;-1!==i;--i)a=e[i],s=t[i],o=n[i],l=r[i],e[i]=a*o-s*l,t[i]=a*l+s*o;numeric.ifftpow2(e,t)},numeric.T.prototype.fft=function(){var e,t,n=this.x,r=this.y,i=n.length,a=Math.log,o=a(2),s=Math.ceil(a(2*i-1)/o),l=Math.pow(2,s),u=numeric.rep([l],0),c=numeric.rep([l],0),f=Math.cos,d=Math.sin,h=-3.141592653589793/i,p=numeric.rep([l],0),v=numeric.rep([l],0);Math.floor(i/2);for(e=0;e<i;e++)p[e]=n[e];if(void 0!==r)for(e=0;e<i;e++)v[e]=r[e];for(u[0]=1,e=1;e<=l/2;e++)t=h*e*e,u[e]=f(t),c[e]=d(t),u[l-e]=f(t),c[l-e]=d(t);var g=new numeric.T(p,v),m=new numeric.T(u,c);return g=g.mul(m),numeric.convpow2(g.x,g.y,numeric.clone(m.x),numeric.neg(m.y)),(g=g.mul(m)).x.length=i,g.y.length=i,g},numeric.T.prototype.ifft=function(){var e,t,n=this.x,r=this.y,i=n.length,a=Math.log,o=a(2),s=Math.ceil(a(2*i-1)/o),l=Math.pow(2,s),u=numeric.rep([l],0),c=numeric.rep([l],0),f=Math.cos,d=Math.sin,h=3.141592653589793/i,p=numeric.rep([l],0),v=numeric.rep([l],0);Math.floor(i/2);for(e=0;e<i;e++)p[e]=n[e];if(void 0!==r)for(e=0;e<i;e++)v[e]=r[e];for(u[0]=1,e=1;e<=l/2;e++)t=h*e*e,u[e]=f(t),c[e]=d(t),u[l-e]=f(t),c[l-e]=d(t);var g=new numeric.T(p,v),m=new numeric.T(u,c);return g=g.mul(m),numeric.convpow2(g.x,g.y,numeric.clone(m.x),numeric.neg(m.y)),(g=g.mul(m)).x.length=i,g.y.length=i,g.div(i)},numeric.gradient=function(e,t){var n=t.length,r=e(t);if(isNaN(r))throw new Error("gradient: f(x) is a NaN!");var i,a,o,s,l,u,c,f,d,h=Math.max,p=numeric.clone(t),v=Array(n),g=(numeric.div,numeric.sub,h=Math.max,Math.abs),m=Math.min,y=0;for(i=0;i<n;i++)for(var b=h(1e-6*r,1e-8);;){if(++y>20)throw new Error("Numerical gradient fails");if(p[i]=t[i]+b,a=e(p),p[i]=t[i]-b,o=e(p),p[i]=t[i],isNaN(a)||isNaN(o))b/=16;else{if(v[i]=(a-o)/(2*b),s=t[i]-b,l=t[i],u=t[i]+b,c=(a-r)/b,f=(r-o)/b,d=h(g(v[i]),g(r),g(a),g(o),g(s),g(l),g(u),1e-8),!(m(h(g(c-v[i]),g(f-v[i]),g(c-f))/d,b/d)>.001))break;b/=16}}return v},numeric.uncmin=function(e,t,n,r,i,a,o){var s=numeric.gradient;void 0===o&&(o={}),void 0===n&&(n=1e-8),void 0===r&&(r=function(t){return s(e,t)}),void 0===i&&(i=1e3);var l,u,c=(t=numeric.clone(t)).length,f=e(t);if(isNaN(f))throw new Error("uncmin: f(x0) is a NaN!");var d=Math.max,h=numeric.norm2;n=d(n,numeric.epsilon);var p,v,g,m,y,b,x,_,w,j,k=o.Hinv||numeric.identity(c),z=numeric.dot,M=(numeric.inv,numeric.sub),A=numeric.add,E=numeric.tensor,S=numeric.div,O=numeric.mul,T=numeric.all,C=numeric.isFinite,N=numeric.neg,P=0,F="";for(v=r(t);P<i;){if("function"==typeof a&&a(P,t,f,v,k)){F="Callback returned true";break}if(!T(C(v))){F="Gradient has Infinity or NaN";break}if(!T(C(p=N(z(k,v))))){F="Search direction has Infinity or NaN";break}if((j=h(p))<n){F="Newton step smaller than tol";break}for(w=1,u=z(v,p),y=t;P<i&&!(w*j<n)&&(y=A(t,m=O(p,w)),(l=e(y))-f>=.1*w*u||isNaN(l));)w*=.5,++P;if(w*j<n){F="Line search step size smaller than tol";break}if(P===i){F="maxit reached during line search";break}_=z(b=M(g=r(y),v),m),x=z(k,b),k=M(A(k,O((_+z(b,x))/(_*_),E(m,m))),S(A(E(x,m),E(m,x)),_)),t=y,f=l,v=g,++P}return{solution:t,f:f,gradient:v,invHessian:k,iterations:P,message:F}},numeric.Dopri=function(e,t,n,r,i,a,o){this.x=e,this.y=t,this.f=n,this.ymid=r,this.iterations=i,this.events=o,this.message=a},numeric.Dopri.prototype._at=function(e,t){function n(e){return e*e}var r,i,a,o,s,l,u,c,f,d=this.x,h=this.y,p=this.f,v=this.ymid,g=(d.length,Math.floor,numeric.add),m=numeric.mul,y=numeric.sub;return r=d[t],i=d[t+1],o=h[t],s=h[t+1],a=r+.5*(i-r),l=v[t],u=y(p[t],m(o,1/(r-a)+2/(r-i))),c=y(p[t+1],m(s,1/(i-a)+2/(i-r))),g(g(g(g(m(o,(f=[n(e-i)*(e-a)/n(r-i)/(r-a),n(e-r)*n(e-i)/n(r-a)/n(i-a),n(e-r)*(e-a)/n(i-r)/(i-a),(e-r)*n(e-i)*(e-a)/n(r-i)/(r-a),(e-i)*n(e-r)*(e-a)/n(r-i)/(i-a)])[0]),m(l,f[1])),m(s,f[2])),m(u,f[3])),m(c,f[4]))},numeric.Dopri.prototype.at=function(e){var t,n,r,i=Math.floor;if("number"!=typeof e){var a=e.length,o=Array(a);for(t=a-1;-1!==t;--t)o[t]=this.at(e[t]);return o}var s=this.x;for(t=0,n=s.length-1;n-t>1;)s[r=i(.5*(t+n))]<=e?t=r:n=r;return this._at(e,t)},numeric.dopri=function(e,t,n,r,i,a,o){void 0===i&&(i=1e-6),void 0===a&&(a=1e3);var s,l,u,c,f,d,h,p,v,g,m,y,b,x=[e],_=[n],w=[r(e,n)],j=[],k=[.075,.225],z=[44/45,-56/15,32/9],M=[19372/6561,-25360/2187,64448/6561,-212/729],A=[9017/3168,-355/33,46732/5247,49/176,-5103/18656],E=[35/384,0,500/1113,125/192,-2187/6784,11/84],S=[.10013431883002395,0,.3918321794184259,-.02982460176594817,.05893268337240795,-.04497888809104361,.023904308236133973],O=[.2,.3,.8,8/9,1,1],T=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,.025],C=0,N=(t-e)/10,P=0,F=numeric.add,q=numeric.mul,B=(Math.max,Math.min),D=Math.abs,I=numeric.norminf,R=Math.pow,L=numeric.any,U=numeric.lt,V=numeric.and,Y=(numeric.sub,new numeric.Dopri(x,_,w,j,-1,""));for("function"==typeof o&&(m=o(e,n));e<t&&P<a;)if(++P,e+N>t&&(N=t-e),s=r(e+O[0]*N,F(n,q(.2*N,w[C]))),l=r(e+O[1]*N,F(F(n,q(k[0]*N,w[C])),q(k[1]*N,s))),u=r(e+O[2]*N,F(F(F(n,q(z[0]*N,w[C])),q(z[1]*N,s)),q(z[2]*N,l))),c=r(e+O[3]*N,F(F(F(F(n,q(M[0]*N,w[C])),q(M[1]*N,s)),q(M[2]*N,l)),q(M[3]*N,u))),f=r(e+O[4]*N,F(F(F(F(F(n,q(A[0]*N,w[C])),q(A[1]*N,s)),q(A[2]*N,l)),q(A[3]*N,u)),q(A[4]*N,c))),d=r(e+N,v=F(F(F(F(F(n,q(w[C],N*E[0])),q(l,N*E[2])),q(u,N*E[3])),q(c,N*E[4])),q(f,N*E[5]))),(g="number"==typeof(h=F(F(F(F(F(q(w[C],N*T[0]),q(l,N*T[2])),q(u,N*T[3])),q(c,N*T[4])),q(f,N*T[5])),q(d,N*T[6])))?D(h):I(h))>i){if(e+(N=.2*N*R(i/g,.25))===e){Y.msg="Step size became too small";break}}else{if(j[C]=F(F(F(F(F(F(n,q(w[C],N*S[0])),q(l,N*S[2])),q(u,N*S[3])),q(c,N*S[4])),q(f,N*S[5])),q(d,N*S[6])),x[++C]=e+N,_[C]=v,w[C]=d,"function"==typeof o){var H,G,X=e,W=e+.5*N;if(y=o(W,j[C-1]),L(b=V(U(m,0),U(0,y)))||(X=W,m=y,y=o(W=e+N,v),b=V(U(m,0),U(0,y))),L(b)){for(var Q,Z,$=0,J=1,K=1;;){if("number"==typeof m)G=(K*y*X-J*m*W)/(K*y-J*m);else for(G=W,p=m.length-1;-1!==p;--p)m[p]<0&&y[p]>0&&(G=B(G,(K*y[p]*X-J*m[p]*W)/(K*y[p]-J*m[p])));if(G<=X||G>=W)break;Z=o(G,H=Y._at(G,C-1)),L(Q=V(U(m,0),U(0,Z)))?(W=G,y=Z,b=Q,K=1,-1===$?J*=.5:J=1,$=-1):(X=G,m=Z,J=1,1===$?K*=.5:K=1,$=1)}return v=Y._at(.5*(e+G),C-1),Y.f[C]=r(G,H),Y.x[C]=G,Y.y[C]=H,Y.ymid[C-1]=v,Y.events=b,Y.iterations=P,Y}}e+=N,n=v,m=y,N=B(.8*N*R(i/g,.25),4*N)}return Y.iterations=P,Y},numeric.LU=function(e,t){t=t||!1;var n,r,i,a,o,s,l,u,c,f=Math.abs,d=e.length,h=d-1,p=new Array(d);for(t||(e=numeric.clone(e)),i=0;i<d;++i){for(l=i,c=f((s=e[i])[i]),r=i+1;r<d;++r)c<(a=f(e[r][i]))&&(c=a,l=r);for(p[i]=l,l!=i&&(e[i]=e[l],e[l]=s,s=e[i]),o=s[i],n=i+1;n<d;++n)e[n][i]/=o;for(n=i+1;n<d;++n){for(u=e[n],r=i+1;r<h;++r)u[r]-=u[i]*s[r],u[++r]-=u[i]*s[r];r===h&&(u[r]-=u[i]*s[r])}}return{LU:e,P:p}},numeric.LUsolve=function(e,t){var n,r,i,a,o,s=e.LU,l=s.length,u=numeric.clone(t),c=e.P;for(n=l-1;-1!==n;--n)u[n]=t[n];for(n=0;n<l;++n)for(i=c[n],c[n]!==n&&(o=u[n],u[n]=u[i],u[i]=o),a=s[n],r=0;r<n;++r)u[n]-=u[r]*a[r];for(n=l-1;n>=0;--n){for(a=s[n],r=n+1;r<l;++r)u[n]-=u[r]*a[r];u[n]/=a[n]}return u},numeric.solve=function(e,t,n){return numeric.LUsolve(numeric.LU(e,n),t)},numeric.echelonize=function(e){var t,n,r,i,a,o,s,l,u=numeric.dim(e),c=u[0],f=u[1],d=numeric.identity(c),h=Array(c),p=Math.abs,v=numeric.diveq;for(e=numeric.clone(e),t=0;t<c;++t){for(r=0,a=e[t],o=d[t],n=1;n<f;++n)p(a[r])<p(a[n])&&(r=n);for(h[t]=r,v(o,a[r]),v(a,a[r]),n=0;n<c;++n)if(n!==t){for(l=(s=e[n])[r],i=f-1;-1!==i;--i)s[i]-=a[i]*l;for(s=d[n],i=c-1;-1!==i;--i)s[i]-=o[i]*l}}return{I:d,A:e,P:h}},numeric.__solveLP=function(e,t,n,r,i,a,o){var s,l,u,c,f=numeric.sum,d=(numeric.log,numeric.mul),h=numeric.sub,p=numeric.dot,v=numeric.div,g=numeric.add,m=e.length,y=n.length,b=!1,x=1,_=(numeric.transpose(t),numeric.svd,numeric.transpose),w=(numeric.leq,Math.sqrt),j=Math.abs,k=(numeric.muleq,numeric.norminf,numeric.any,Math.min),z=numeric.all,M=numeric.gt,A=Array(m),E=Array(y),S=(numeric.rep([y],1),numeric.solve),O=h(n,p(t,a)),T=p(e,e);for(u=0;u<i;++u){var C,N;for(C=y-1;-1!==C;--C)E[C]=v(t[C],O[C]);var P=_(E);for(C=m-1;-1!==C;--C)A[C]=f(P[C]);x=.25*j(T/p(e,A));var F=100*w(T/p(A,A));for((!isFinite(x)||x>F)&&(x=F),c=g(e,d(x,A)),l=p(P,E),C=m-1;-1!==C;--C)l[C][C]+=1;N=S(l,v(c,x),!0);var q=v(O,p(t,N)),B=1;for(C=y-1;-1!==C;--C)q[C]<0&&(B=k(B,-.999*q[C]));if(s=h(a,d(N,B)),!z(M(O=h(n,p(t,s)),0)))return{solution:a,message:"",iterations:u};if(a=s,x<r)return{solution:s,message:"",iterations:u};if(o){var D=p(e,c),I=p(t,c);for(b=!0,C=y-1;-1!==C;--C)if(D*I[C]<0){b=!1;break}}else b=!(a[m-1]>=0);if(b)return{solution:s,message:"Unbounded",iterations:u}}return{solution:a,message:"maximum iteration count exceeded",iterations:u}},numeric._solveLP=function(e,t,n,r,i){var a=e.length,o=n.length,s=(numeric.sum,numeric.log,numeric.mul,numeric.sub),l=numeric.dot,u=(numeric.div,numeric.add,numeric.rep([a],0).concat([1])),c=numeric.rep([o,1],-1),f=numeric.blockMatrix([[t,c]]),d=n,h=numeric.rep([a],0).concat(Math.max(0,numeric.sup(numeric.neg(n)))+1),p=numeric.__solveLP(u,f,d,r,i,h,!1),v=numeric.clone(p.solution);if(v.length=a,numeric.inf(s(n,l(t,v)))<0)return{solution:NaN,message:"Infeasible",iterations:p.iterations};var g=numeric.__solveLP(e,t,n,r,i-p.iterations,v,!0);return g.iterations+=p.iterations,g},numeric.solveLP=function(e,t,n,r,i,a,o){if(void 0===o&&(o=1e3),void 0===a&&(a=numeric.epsilon),void 0===r)return numeric._solveLP(e,t,n,a,o);var s,l=r.length,u=r[0].length,c=t.length,f=numeric.echelonize(r),d=numeric.rep([u],0),h=f.P,p=[];for(s=h.length-1;-1!==s;--s)d[h[s]]=1;for(s=u-1;-1!==s;--s)0===d[s]&&p.push(s);var v=numeric.getRange,g=numeric.linspace(0,l-1),m=numeric.linspace(0,c-1),y=v(r,g,p),b=v(t,m,h),x=v(t,m,p),_=numeric.dot,w=numeric.sub,j=_(b,f.I),k=w(x,_(j,y)),z=w(n,_(j,i)),M=Array(h.length),A=Array(p.length);for(s=h.length-1;-1!==s;--s)M[s]=e[h[s]];for(s=p.length-1;-1!==s;--s)A[s]=e[p[s]];var E=w(A,_(M,_(f.I,y))),S=numeric._solveLP(E,k,z,a,o),O=S.solution;if(O!=O)return S;var T=_(f.I,w(i,_(y,O))),C=Array(e.length);for(s=h.length-1;-1!==s;--s)C[h[s]]=T[s];for(s=p.length-1;-1!==s;--s)C[p[s]]=O[s];return{solution:C,message:S.message,iterations:S.iterations}},numeric.MPStoLP=function(e){e instanceof String&&e.split("\n");var t,n,r,i,a=0,o=["Initial state","NAME","ROWS","COLUMNS","RHS","BOUNDS","ENDATA"],s=e.length,l=0,u={},c=[],f=0,d={},h=0,p=[],v=[],g=[];function m(n){throw new Error("MPStoLP: "+n+"\nLine "+t+": "+e[t]+"\nCurrent state: "+o[a]+"\n")}for(t=0;t<s;++t){var y=(r=e[t]).match(/\S*/g),b=[];for(n=0;n<y.length;++n)""!==y[n]&&b.push(y[n]);if(0!==b.length){for(n=0;n<o.length&&r.substr(0,o[n].length)!==o[n];++n);if(n<o.length){if(a=n,1===n&&(i=b[1]),6===n)return{name:i,c:p,A:numeric.transpose(v),b:g,rows:u,vars:d}}else switch(a){case 0:case 1:m("Unexpected line");case 2:switch(b[0]){case"N":0===l?l=b[1]:m("Two or more N rows");break;case"L":u[b[1]]=f,c[f]=1,g[f]=0,++f;break;case"G":u[b[1]]=f,c[f]=-1,g[f]=0,++f;break;case"E":u[b[1]]=f,c[f]=0,g[f]=0,++f;break;default:m("Parse error "+numeric.prettyPrint(b))}break;case 3:d.hasOwnProperty(b[0])||(d[b[0]]=h,p[h]=0,v[h]=numeric.rep([f],0),++h);var x=d[b[0]];for(n=1;n<b.length;n+=2)if(b[n]!==l){var _=u[b[n]];v[x][_]=(c[_]<0?-1:1)*parseFloat(b[n+1])}else p[x]=parseFloat(b[n+1]);break;case 4:for(n=1;n<b.length;n+=2)g[u[b[n]]]=(c[u[b[n]]]<0?-1:1)*parseFloat(b[n+1]);break;case 5:break;case 6:m("Internal error")}}}m("Reached end of file without ENDATA")},numeric.seedrandom={pow:Math.pow,random:Math.random},function(e,t,n,r,i,a,o){function s(e){var t,r,i=this,a=e.length,o=0,s=i.i=i.j=i.m=0;for(i.S=[],i.c=[],a||(e=[a++]);o<n;)i.S[o]=o++;for(o=0;o<n;o++)s=u(s+(t=i.S[o])+e[o%a]),r=i.S[s],i.S[o]=r,i.S[s]=t;i.g=function(e){var t=i.S,r=u(i.i+1),a=t[r],o=u(i.j+a),s=t[o];t[r]=s,t[o]=a;for(var l=t[u(a+s)];--e;)r=u(r+1),s=t[o=u(o+(a=t[r]))],t[r]=s,t[o]=a,l=l*n+t[u(a+s)];return i.i=r,i.j=o,l},i.g(n)}function l(e,t,n,r){for(e+="",n=0,r=0;r<e.length;r++)t[u(r)]=u((n^=19*t[u(r)])+e.charCodeAt(r));for(r in e="",t)e+=String.fromCharCode(t[r]);return e}function u(e){return e&n-1}t.seedrandom=function(r,u){var c,f=[];return r=l(function e(t,n,r,i,a){r=[];a=typeof t;if(n&&"object"==a)for(i in t)if(i.indexOf("S")<5)try{r.push(e(t[i],n-1))}catch(e){}return r.length?r:t+("string"!=a?"\0":"")}(u?[r,e]:arguments.length?r:[(new Date).getTime(),e,window],3),f),l((c=new s(f)).S,e),t.random=function(){for(var e=c.g(6),t=o,r=0;e<i;)e=(e+r)*n,t*=n,r=c.g(1);for(;e>=a;)e/=2,t/=2,r>>>=1;return(e+r)/t},r},o=t.pow(n,6),i=t.pow(2,i),a=2*i,l(t.random(),e)}([],numeric.seedrandom,256,0,52),function(e){function t(e){if("object"!=typeof e)return e;var n,r=[],i=e.length;for(n=0;n<i;n++)r[n+1]=t(e[n]);return r}function n(e){if("object"!=typeof e)return e;var t,r=[],i=e.length;for(t=1;t<i;t++)r[t-1]=n(e[t]);return r}function r(e,t,n,r,i,a,o,s,l,u,c,f,d,h,p,v){var g,m,y,b,x,_,w,j,k,z,M,A,E,S,O,T,C,N,P,F,q,B,D,I,R,L,U;E=Math.min(r,u),y=2*r+E*(E+5)/2+2*u+1,I=1e-60;do{R=1+.1*(I+=I),L=1+.2*I}while(R<=1||L<=1);for(g=1;g<=r;g+=1)p[g]=t[g];for(g=r+1;g<=y;g+=1)p[g]=0;for(g=1;g<=u;g+=1)f[g]=0;if(x=[],0===v[1]){if(function(e,t,n,r){var i,a,o,s,l,u;for(a=1;a<=n;a+=1){if(r[1]=a,u=0,(o=a-1)<1){if((u=e[a][a]-u)<=0)break;e[a][a]=Math.sqrt(u)}else{for(s=1;s<=o;s+=1){for(l=e[s][a],i=1;i<s;i+=1)l-=e[i][a]*e[i][s];l/=e[s][s],e[s][a]=l,u+=l*l}if((u=e[a][a]-u)<=0)break;e[a][a]=Math.sqrt(u)}r[1]=0}}(e,0,r,x),0!==x[1])return void(v[1]=2);!function(e,t,n,r){var i,a,o,s;for(a=1;a<=n;a+=1){for(s=0,i=1;i<a;i+=1)s+=e[i][a]*r[i];r[a]=(r[a]-s)/e[a][a]}for(o=1;o<=n;o+=1)for(r[a=n+1-o]=r[a]/e[a][a],s=-r[a],i=1;i<a;i+=1)r[i]=r[i]+s*e[i][a]}(e,0,r,t),function(e,t,n){var r,i,a,o,s;for(a=1;a<=n;a+=1){for(e[a][a]=1/e[a][a],s=-e[a][a],r=1;r<a;r+=1)e[r][a]=s*e[r][a];if(n<(o=a+1))break;for(i=o;i<=n;i+=1)for(s=e[a][i],e[a][i]=0,r=1;r<=a;r+=1)e[r][i]=e[r][i]+s*e[r][a]}}(e,0,r)}else{for(m=1;m<=r;m+=1)for(i[m]=0,g=1;g<=m;g+=1)i[m]=i[m]+e[g][m]*t[g];for(m=1;m<=r;m+=1)for(t[m]=0,g=m;g<=r;g+=1)t[m]=t[m]+e[m][g]*i[g]}for(a[1]=0,m=1;m<=r;m+=1)for(i[m]=t[m],a[1]=a[1]+p[m]*i[m],p[m]=0,g=m+1;g<=r;g+=1)e[g][m]=0;for(a[1]=-a[1]/2,v[1]=0,S=(z=(k=(M=(j=(w=r)+r)+E)+E+1)+E*(E+1)/2)+u,g=1;g<=u;g+=1){for(T=0,m=1;m<=r;m+=1)T+=o[m][g]*o[m][g];p[S+g]=Math.sqrt(T)}function V(){for(h[1]=h[1]+1,y=z,g=1;g<=u;g+=1){for(y+=1,T=-s[g],m=1;m<=r;m+=1)T+=o[m][g]*i[m];if(Math.abs(T)<I&&(T=0),g>c)p[y]=T;else if(p[y]=-Math.abs(T),T>0){for(m=1;m<=r;m+=1)o[m][g]=-o[m][g];s[g]=-s[g]}}for(g=1;g<=d;g+=1)p[z+f[g]]=0;for(A=0,O=0,g=1;g<=u;g+=1)p[z+g]<O*p[S+g]&&(A=g,O=p[z+g]/p[S+g]);return 0===A?999:0}function Y(){for(g=1;g<=r;g+=1){for(T=0,m=1;m<=r;m+=1)T+=e[m][g]*o[m][A];p[g]=T}for(b=w,g=1;g<=r;g+=1)p[b+g]=0;for(m=d+1;m<=r;m+=1)for(g=1;g<=r;g+=1)p[b+g]=p[b+g]+e[g][m]*p[m];for(B=!0,g=d;g>=1;g-=1){for(T=p[g],b=(y=k+g*(g+3)/2)-g,m=g+1;m<=d;m+=1)T-=p[y]*p[j+m],y+=m;if(T/=p[b],p[j+g]=T,f[g]<c)break;if(T<0)break;B=!1,_=g}if(!B)for(C=p[M+_]/p[j+_],g=1;g<=d&&!(f[g]<c)&&!(p[j+g]<0);g+=1)(O=p[M+g]/p[j+g])<C&&(C=O,_=g);for(T=0,g=w+1;g<=w+r;g+=1)T+=p[g]*p[g];if(Math.abs(T)<=I){if(B)return v[1]=1,999;for(g=1;g<=d;g+=1)p[M+g]=p[M+g]-C*p[j+g];return p[M+d+1]=p[M+d+1]+C,700}for(T=0,g=1;g<=r;g+=1)T+=p[w+g]*o[g][A];for(N=-p[z+A]/T,D=!0,B||C<N&&(N=C,D=!1),g=1;g<=r;g+=1)i[g]=i[g]+N*p[w+g],Math.abs(i[g])<I&&(i[g]=0);for(a[1]=a[1]+N*T*(N/2+p[M+d+1]),g=1;g<=d;g+=1)p[M+g]=p[M+g]-N*p[j+g];if(p[M+d+1]=p[M+d+1]+N,!D){for(T=-s[A],m=1;m<=r;m+=1)T+=i[m]*o[m][A];if(A>c)p[z+A]=T;else if(p[z+A]=-Math.abs(T),T>0){for(m=1;m<=r;m+=1)o[m][A]=-o[m][A];s[A]=-s[A]}return 700}for(f[d+=1]=A,y=k+(d-1)*d/2+1,g=1;g<=d-1;g+=1)p[y]=p[g],y+=1;if(d===r)p[y]=p[r];else{for(g=r;g>=d+1&&0!==p[g]&&(P=Math.max(Math.abs(p[g-1]),Math.abs(p[g])),F=Math.min(Math.abs(p[g-1]),Math.abs(p[g])),O=p[g-1]>=0?Math.abs(P*Math.sqrt(1+F*F/(P*P))):-Math.abs(P*Math.sqrt(1+F*F/(P*P))),P=p[g-1]/O,F=p[g]/O,1!==P);g-=1)if(0===P)for(p[g-1]=F*O,m=1;m<=r;m+=1)O=e[m][g-1],e[m][g-1]=e[m][g],e[m][g]=O;else for(p[g-1]=O,q=F/(1+P),m=1;m<=r;m+=1)O=P*e[m][g-1]+F*e[m][g],e[m][g]=q*(e[m][g-1]+O)-e[m][g],e[m][g-1]=O;p[y]=p[d]}return 0}function H(){if(0===p[b=(y=k+_*(_+1)/2+1)+_])return 798;if(P=Math.max(Math.abs(p[b-1]),Math.abs(p[b])),F=Math.min(Math.abs(p[b-1]),Math.abs(p[b])),O=p[b-1]>=0?Math.abs(P*Math.sqrt(1+F*F/(P*P))):-Math.abs(P*Math.sqrt(1+F*F/(P*P))),P=p[b-1]/O,F=p[b]/O,1===P)return 798;if(0===P){for(g=_+1;g<=d;g+=1)O=p[b-1],p[b-1]=p[b],p[b]=O,b+=g;for(g=1;g<=r;g+=1)O=e[g][_],e[g][_]=e[g][_+1],e[g][_+1]=O}else{for(q=F/(1+P),g=_+1;g<=d;g+=1)O=P*p[b-1]+F*p[b],p[b]=q*(p[b-1]+O)-p[b],p[b-1]=O,b+=g;for(g=1;g<=r;g+=1)O=P*e[g][_]+F*e[g][_+1],e[g][_+1]=q*(e[g][_]+O)-e[g][_+1],e[g][_]=O}return 0}function G(){for(b=y-_,g=1;g<=_;g+=1)p[b]=p[y],y+=1,b+=1;return p[M+_]=p[M+_+1],f[_]=f[_+1],(_+=1)<d?797:0}function X(){return p[M+d]=p[M+d+1],p[M+d+1]=0,f[d]=0,d-=1,h[2]=h[2]+1,0}for(d=0,h[1]=0,h[2]=0,U=0;;){if(999===(U=V()))return;for(;0!==(U=Y());){if(999===U)return;if(700===U)if(_===d)X();else{for(;H(),797===(U=G()););X()}}}}numeric.solveQP=function(e,i,a,o,s,l){e=t(e),i=t(i),a=t(a);var u,c,f,d,h,p=[],v=[],g=[],m=[],y=[];if(s=s||0,l=l?t(l):[void 0,0],o=o?t(o):[],c=e.length-1,f=a[1].length-1,!o)for(u=1;u<=f;u+=1)o[u]=0;for(u=1;u<=f;u+=1)v[u]=0;for(d=Math.min(c,f),u=1;u<=c;u+=1)g[u]=0;for(p[1]=0,u=1;u<=2*c+d*(d+5)/2+2*f+1;u+=1)m[u]=0;for(u=1;u<=2;u+=1)y[u]=0;return r(e,i,0,c,g,p,a,o,0,f,s,v,0,y,m,l),h="",1===l[1]&&(h="constraints are inconsistent, no solution!"),2===l[1]&&(h="matrix D in quadratic function is not positive definite!"),{solution:n(g),value:n(p),unconstrained_solution:n(i),iterations:n(y),iact:n(v),message:h}}}(),numeric.svd=function(e){var t,n=numeric.epsilon,r=1e-64/n,i=0,a=0,o=0,s=0,l=0,u=numeric.clone(e),c=u.length,f=u[0].length;if(c<f)throw"Need more rows than columns";var d=new Array(f),h=new Array(f);for(a=0;a<f;a++)d[a]=h[a]=0;var p=numeric.rep([f,f],0);function v(e,t){return(e=Math.abs(e))>(t=Math.abs(t))?e*Math.sqrt(1+t*t/e/e):0==t?e:t*Math.sqrt(1+e*e/t/t)}var g=0,m=0,y=0,b=0,x=0,_=0,w=0;for(a=0;a<f;a++){for(d[a]=m,w=0,l=a+1,o=a;o<c;o++)w+=u[o][a]*u[o][a];if(w<=r)m=0;else for(g=u[a][a],m=Math.sqrt(w),g>=0&&(m=-m),y=g*m-w,u[a][a]=g-m,o=l;o<f;o++){for(w=0,s=a;s<c;s++)w+=u[s][a]*u[s][o];for(g=w/y,s=a;s<c;s++)u[s][o]+=g*u[s][a]}for(h[a]=m,w=0,o=l;o<f;o++)w+=u[a][o]*u[a][o];if(w<=r)m=0;else{for(g=u[a][a+1],m=Math.sqrt(w),g>=0&&(m=-m),y=g*m-w,u[a][a+1]=g-m,o=l;o<f;o++)d[o]=u[a][o]/y;for(o=l;o<c;o++){for(w=0,s=l;s<f;s++)w+=u[o][s]*u[a][s];for(s=l;s<f;s++)u[o][s]+=w*d[s]}}(x=Math.abs(h[a])+Math.abs(d[a]))>b&&(b=x)}for(a=f-1;-1!=a;a+=-1){if(0!=m){for(y=m*u[a][a+1],o=l;o<f;o++)p[o][a]=u[a][o]/y;for(o=l;o<f;o++){for(w=0,s=l;s<f;s++)w+=u[a][s]*p[s][o];for(s=l;s<f;s++)p[s][o]+=w*p[s][a]}}for(o=l;o<f;o++)p[a][o]=0,p[o][a]=0;p[a][a]=1,m=d[a],l=a}for(a=f-1;-1!=a;a+=-1){for(l=a+1,m=h[a],o=l;o<f;o++)u[a][o]=0;if(0!=m){for(y=u[a][a]*m,o=l;o<f;o++){for(w=0,s=l;s<c;s++)w+=u[s][a]*u[s][o];for(g=w/y,s=a;s<c;s++)u[s][o]+=g*u[s][a]}for(o=a;o<c;o++)u[o][a]=u[o][a]/m}else for(o=a;o<c;o++)u[o][a]=0;u[a][a]+=1}for(n*=b,s=f-1;-1!=s;s+=-1)for(var j=0;j<50;j++){var k=!1;for(l=s;-1!=l;l+=-1){if(Math.abs(d[l])<=n){k=!0;break}if(Math.abs(h[l-1])<=n)break}if(!k){i=0,w=1;var z=l-1;for(a=l;a<s+1&&(g=w*d[a],d[a]=i*d[a],!(Math.abs(g)<=n));a++)for(y=v(g,m=h[a]),h[a]=y,i=m/y,w=-g/y,o=0;o<c;o++)x=u[o][z],_=u[o][a],u[o][z]=x*i+_*w,u[o][a]=-x*w+_*i}if(_=h[s],l==s){if(_<0)for(h[s]=-_,o=0;o<f;o++)p[o][s]=-p[o][s];break}if(j>=49)throw"Error: no convergence.";for(b=h[l],m=v(g=(((x=h[s-1])-_)*(x+_)+((m=d[s-1])-(y=d[s]))*(m+y))/(2*y*x),1),g=g<0?((b-_)*(b+_)+y*(x/(g-m)-y))/b:((b-_)*(b+_)+y*(x/(g+m)-y))/b,i=1,w=1,a=l+1;a<s+1;a++){for(m=d[a],x=h[a],y=w*m,m*=i,_=v(g,y),d[a-1]=_,g=b*(i=g/_)+m*(w=y/_),m=-b*w+m*i,y=x*w,x*=i,o=0;o<f;o++)b=p[o][a-1],_=p[o][a],p[o][a-1]=b*i+_*w,p[o][a]=-b*w+_*i;for(_=v(g,y),h[a-1]=_,g=(i=g/_)*m+(w=y/_)*x,b=-w*m+i*x,o=0;o<c;o++)x=u[o][a-1],_=u[o][a],u[o][a-1]=x*i+_*w,u[o][a]=-x*w+_*i}d[l]=0,d[s]=g,h[s]=b}for(a=0;a<h.length;a++)h[a]<n&&(h[a]=0);for(a=0;a<f;a++)for(o=a-1;o>=0;o--)if(h[o]<h[a]){for(i=h[o],h[o]=h[a],h[a]=i,s=0;s<u.length;s++)t=u[s][a],u[s][a]=u[s][o],u[s][o]=t;for(s=0;s<p.length;s++)t=p[s][a],p[s][a]=p[s][o],p[s][o]=t;a=o}return{U:u,S:h,V:p}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],54:[function(e,t,n){!function(){"use strict";function e(e,t,n){var r=t.x,i=t.y,a=n.x-r,o=n.y-i;if(0!==a||0!==o){var s=((e.x-r)*a+(e.y-i)*o)/(a*a+o*o);s>1?(r=n.x,i=n.y):s>0&&(r+=a*s,i+=o*s)}return(a=e.x-r)*a+(o=e.y-i)*o}function n(t,n){var r=t.length-1,i=[t[0]];return function t(n,r,i,a,o){for(var s,l=a,u=r+1;u<i;u++){var c=e(n[u],n[r],n[i]);c>l&&(s=u,l=c)}l>a&&(s-r>1&&t(n,r,s,a,o),o.push(n[s]),i-s>1&&t(n,s,i,a,o))}(t,0,r,n,i),i.push(t[r]),i}function r(e,t,r){if(e.length<=2)return e;var i=void 0!==t?t*t:1;return e=n(e=r?e:function(e,t){for(var n,r,i,a,o,s=e[0],l=[s],u=1,c=e.length;u<c;u++)n=e[u],i=s,a=void 0,o=void 0,a=(r=n).x-i.x,o=r.y-i.y,a*a+o*o>t&&(l.push(n),s=n);return s!==n&&l.push(n),l}(e,i),i)}"function"==typeof define&&define.amd?define(function(){return r}):void 0!==t?(t.exports=r,t.exports.default=r):"undefined"!=typeof self?self.simplify=r:window.simplify=r}()},{}],55:[function(e,t,n){"use strict";t.exports=function(e){var t,n,f;if(Array.isArray(e)){if(0===(t=e.length))return new d(null,null,0,0);n=e[0].length,f=r(l.mallocDouble(t*(n+1)),[t,n+1]),a(e,f.hi(t,n))}else{t=e.shape[0],n=e.shape[1];var h=e.dtype;h="int8"===h||"int16"===h||"int32"===h?"int32":"uint8"===h||"uint8_clamped"===h||"buffer"===h||"uint16"===h||"uint32"===h?"uint32":"float32"===h?"float32":"float64",f=r(l.malloc(t*(n+1),h),[t,n+1]),o.assign(f.hi(t,n),e)}for(var v=0;v<t;++v)f.set(v,n,v);var g=s.malloc([t,n],e.dtype),m=l.mallocInt32(t),y=0,b=g.data,x=f.data,_=(c.log2(c.nextPow2(t)),i.compile(f.order,!0,f.dtype)),w=new p;w.push(f);for(;y<t;){var j=w.pop(),k=j,z=0|k.shape[0];if(z>1){var M,A=c.log2(y+1)%n,E=u.root(z);M=_(k,E,function(e,t){return e.get(A)-t.get(A)});for(var S=g.index(y,0),O=M.offset,v=0;v<n;++v)b[S++]=x[O++];m[y]=x[O],y+=1,w.push(k.hi(E)),z>2&&w.push(k.lo(E+1))}else{for(var O=k.offset,S=g.index(y,0),v=0;v<n;++v)b[S+v]=x[O++];m[y]=x[O],y+=1}}return l.free(f.data),new d(g,m,t,n)},t.exports.deserialize=function(e){var t=e.p,n=e.i;if(t){for(var i=t.length,a=l.mallocFloat64(i),o=0;o<i;++o)a[o]=t[o];for(var s=n.length,u=l.mallocInt32(s),o=0;o<s;++o)u[o]=n[o];var c=i/s|0;return new d(r(a,[s,c]),u,s,c)}return new d(null,null,0,e.d)};var r=e("ndarray"),i=e("ndarray-select"),a=e("ndarray-pack"),o=e("ndarray-ops"),s=e("ndarray-scratch"),l=e("typedarray-pool"),u=e("inorder-tree-layout"),c=e("bit-twiddle"),f=e("./lib/heap.js");function d(e,t,n,r){this.points=e,this.ids=t,this.dimension=r,this.length=n}var h=d.prototype;function p(){this.data=[],this.offset=0}h.serialize=function(){return this.length>0?{p:Array.prototype.slice.call(this.points.data,0,this.length*this.dimension),i:Array.prototype.slice.call(this.ids,0,this.length)}:{d:this.dimension}},h.range=function(e,t,n){var r=this.length;if(!(r<1)){for(var i=this.dimension,o=0;o<i;++o)if(t[o]<e[o])return;var u,f=this.points,d=this.ids,h=s.malloc([r,2,i]),p=l.mallocInt32(r),v=h.data,g=f.data,m=1,y=0;for(p[0]=0,a(e,h.pick(0,0)),a(t,h.pick(0,1));y<m;){var b=p[y],x=c.log2(b+1)%i,_=h.index(y,0,0),w=h.index(y,1,0),j=f.index(b,0),k=!0;for(o=0;o<i;++o){var z=g[j+o];if(z<v[_+o]||v[w+o]<z){k=!1;break}}if(k&&void 0!==(u=n(d[b])))break;var M=g[j+x],A=v[w+x],E=v[_+x];if(E<=M){var S=2*b+1;if(S<r){p[m]=S;var O=h.index(m,0,0);for(o=0;o<i;++o)v[O+o]=v[_+o];var T=h.index(m,1,0);for(o=0;o<i;++o)v[T+o]=v[w+o];v[T+x]=Math.min(A,M),m+=1}}if(M<=A){var C=2*(b+1);if(C<r){p[m]=C;for(O=h.index(m,0,0),o=0;o<i;++o)v[O+o]=v[_+o];for(T=h.index(m,1,0),o=0;o<i;++o)v[T+o]=v[w+o];v[O+x]=Math.max(E,M),m+=1}}y+=1}return s.free(h),l.free(p),u}},h.rnn=function(e,t,n){if(!(t<0)){var r=this.length;if(!(r<1)){var i,a=this.dimension,o=this.points,u=this.ids,f=s.malloc([r,a]),d=l.mallocInt32(r),h=f.data,p=o.data,v=1,g=0,m=t*t;d[0]=0;for(var y=0;y<a;++y)f.set(0,y,0);for(;g<v;){var b=d[g],x=o.index(b,0),_=0;for(y=0;y<a;++y)_+=Math.pow(e[y]-p[x+y],2);if(_<=m&&void 0!==(i=n(u[b])))break;var w=c.log2(b+1)%a,j=0,k=f.index(g,0);for(y=0;y<a;++y)y!==w&&(j+=h[k+y]);var z=e[w],M=p[x+w],A=h[k+w],E=A,S=A;z<M?S=Math.max(A,Math.pow(M-z,2)):E=Math.max(A,Math.pow(M-z,2));var O=S+j;if(E+j<=m){var T=2*b+1;if(T<r){d[v]=T;var C=f.index(v,0);for(y=0;y<a;++y)h[C+y]=h[k+y];h[C+w]=E,v+=1}}if(O<=m){var N=2*(b+1);if(N<r){d[v]=N;for(C=f.index(v,0),y=0;y<a;++y)h[C+y]=h[k+y];h[C+w]=S,v+=1}}g+=1}return s.free(f),l.free(d),i}}},h.nn=function(e,t){var n=this.length;if(n<1)return-1;if("number"==typeof t){if(t<0)return-1}else t=1/0;var r=this.dimension,i=this.points,a=i.data,o=l.mallocFloat64(r),s=new f(n,r+1),u=s.index,d=s.data;u[0]=0;for(var h=0;h<=r;++h)d[h]=0;s.count+=1;for(var p=-1,v=t;s.count>0&&!(d[0]>=v);){var g=u[0],m=i.index(g,0),y=0;for(h=0;h<r;++h)y+=Math.pow(e[h]-a[m+h],2);y<v&&(v=y,p=g);var b=c.log2(g+1)%r,x=0;for(h=0;h<r;++h){var _=d[h+1];h!==b&&(x+=_),o[h]=_}var w=e[b],j=a[m+b],k=o[b],z=k,M=k;w<j?M=Math.max(k,Math.pow(j-w,2)):z=Math.max(k,Math.pow(j-w,2));var A=z+x,E=M+x;if(s.pop(),A<v){var S=2*g+1;if(S<n){u[T=s.count]=S,d[C=T*(r+1)]=A;for(h=1;h<=r;++h)d[C+h]=o[h-1];d[C+b+1]=z,s.push()}}if(E<v){var O=2*(g+1);if(O<n){var T,C;u[T=s.count]=O,d[C=T*(r+1)]=E;for(h=1;h<=r;++h)d[C+h]=o[h-1];d[C+b+1]=M,s.push()}}}return l.freeFloat64(o),s.dispose(),p<0?-1:this.ids[p]},h.knn=function(e,t,n){if("number"==typeof n){if(n<0)return[]}else n=1/0;var r=this.length;if(r<1)return[];if("number"==typeof t){if(t<=0)return[];t=0|Math.min(t,r)}else t=r;var i=this.ids,a=this.dimension,o=this.points,s=o.data,u=l.mallocFloat64(a),d=new f(t,1),h=d.index,p=d.data,v=new f(r,a+1),g=v.index,m=v.data;g[0]=0;for(var y=0;y<=a;++y)m[y]=0;v.count+=1;for(var b=n;v.count>0&&!(m[0]>=b);){var x=g[0],_=o.index(x,0),w=0;for(y=0;y<a;++y)w+=Math.pow(e[y]-s[_+y],2);if(w<b){d.count>=t&&d.pop();var j=d.count;h[j]=x,p[j]=-w,d.push(),d.count>=t&&(b=-p[0])}var k=c.log2(x+1)%a,z=0;for(y=0;y<a;++y){var M=m[y+1];y!==k&&(z+=M),u[y]=M}var A=e[k],E=s[_+k],S=u[k],O=S,T=S;A<E?T=Math.max(S,Math.pow(E-A,2)):O=Math.max(S,Math.pow(E-A,2));var C=O+z,N=T+z;if(v.pop(),C<b){var P=2*x+1;if(P<r){g[q=v.count]=P,m[B=q*(a+1)]=C;for(y=1;y<=a;++y)m[B+y]=u[y-1];m[B+k+1]=O,v.push()}}if(N<b){var F=2*(x+1);if(F<r){var q,B;g[q=v.count]=F,m[B=q*(a+1)]=N;for(y=1;y<=a;++y)m[B+y]=u[y-1];m[B+k+1]=T,v.push()}}}l.freeFloat64(u),v.dispose();var D=new Array(d.count);for(i=this.ids,y=d.count-1;y>=0;--y)D[y]=i[h[0]],d.pop();return d.dispose(),D},h.dispose=function(){l.free(this.points.data),l.freeInt32(this.ids),this.points=null,this.ids=null,this.length=0},p.prototype.size=function(){return this.data.length-this.offset},p.prototype.push=function(e){return this.data.push(e)},p.prototype.pop=function(){if(0!==this.size()){var e=this.data[this.offset];return this.offset++,this.data.length>1024&&2*this.offset>this.data.length&&(this.data=this.data.slice(this.offset),this.offset=0),e}}},{"./lib/heap.js":56,"bit-twiddle":2,"inorder-tree-layout":43,ndarray:52,"ndarray-ops":47,"ndarray-pack":48,"ndarray-scratch":50,"ndarray-select":51,"typedarray-pool":61}],56:[function(e,t,n){"use strict";t.exports=a;var r=e("typedarray-pool");function i(e){return 1&e?e-1>>1:(e>>1)-1}function a(e,t){this.count=0,this.dataSize=t,this.index=r.mallocInt32(e),this.data=r.mallocFloat64(e*t)}var o=a.prototype;o.heapSwap=function(e,t){var n=this.data,r=this.index,i=this.dataSize,a=r[e];r[e]=r[t],r[t]=a;for(var o=i*e,s=i*t,l=0;l<i;++l){var u=n[o];n[o]=n[s],n[s]=u,o+=1,s+=1}},o.heapUp=function(e){for(var t=this.dataSize,n=(this.index,this.data),r=n[t*e];e>0;){var a=i(e);if(a>=0)if(r<n[t*a]){this.heapSwap(e,a),e=a;continue}break}},o.heapDown=function(e){for(var t=this.dataSize,n=(this.index,this.data),r=this.count,i=n[t*e];;){var a=i,o=2*e+1,s=2*(e+1),l=e;if(o<r){var u=n[t*o];u<a&&(l=o,a=u)}if(s<r)n[t*s]<a&&(l=s);if(l===e)break;this.heapSwap(e,l),e=l}},o.pop=function(){this.count-=1,this.heapSwap(0,this.count),this.heapDown(0)},o.push=function(){this.heapUp(this.count),this.count+=1},o.dispose=function(){r.freeInt32(this.index),r.freeFloat64(this.data)}},{"typedarray-pool":61}],57:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=e("topojson-client"),i=e("topojson-server"),a=e("topojson-simplify");Object.keys(r).forEach(function(e){n[e]=r[e]}),Object.keys(i).forEach(function(e){n[e]=i[e]}),Object.keys(a).forEach(function(e){n[e]=a[e]})},{"topojson-client":58,"topojson-server":59,"topojson-simplify":60}],58:[function(e,t,n){var r,i;r=this,i=function(e){"use strict";var t=function(e){return e},n=function(e){if(null==e)return t;var n,r,i=e.scale[0],a=e.scale[1],o=e.translate[0],s=e.translate[1];return function(e,t){t||(n=r=0);var l=2,u=e.length,c=new Array(u);for(c[0]=(n+=e[0])*i+o,c[1]=(r+=e[1])*a+s;l<u;)c[l]=e[l],++l;return c}},r=function(e){var t,r=n(e.transform),i=1/0,a=i,o=-i,s=-i;function l(e){(e=r(e))[0]<i&&(i=e[0]),e[0]>o&&(o=e[0]),e[1]<a&&(a=e[1]),e[1]>s&&(s=e[1])}function u(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(u);break;case"Point":l(e.coordinates);break;case"MultiPoint":e.coordinates.forEach(l)}}for(t in e.arcs.forEach(function(e){for(var t,n=-1,l=e.length;++n<l;)(t=r(e[n],n))[0]<i&&(i=t[0]),t[0]>o&&(o=t[0]),t[1]<a&&(a=t[1]),t[1]>s&&(s=t[1])}),e.objects)u(e.objects[t]);return[i,a,o,s]},i=function(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n};function a(e,t){var n=t.id,r=t.bbox,i=null==t.properties?{}:t.properties,a=o(e,t);return null==n&&null==r?{type:"Feature",properties:i,geometry:a}:null==r?{type:"Feature",id:n,properties:i,geometry:a}:{type:"Feature",id:n,bbox:r,properties:i,geometry:a}}function o(e,t){var r=n(e.transform),a=e.arcs;function o(e,t){t.length&&t.pop();for(var n=a[e<0?~e:e],o=0,s=n.length;o<s;++o)t.push(r(n[o],o));e<0&&i(t,s)}function s(e){return r(e)}function l(e){for(var t=[],n=0,r=e.length;n<r;++n)o(e[n],t);return t.length<2&&t.push(t[0]),t}function u(e){for(var t=l(e);t.length<4;)t.push(t[0]);return t}function c(e){return e.map(u)}return function e(t){var n,r=t.type;switch(r){case"GeometryCollection":return{type:r,geometries:t.geometries.map(e)};case"Point":n=s(t.coordinates);break;case"MultiPoint":n=t.coordinates.map(s);break;case"LineString":n=l(t.arcs);break;case"MultiLineString":n=t.arcs.map(l);break;case"Polygon":n=c(t.arcs);break;case"MultiPolygon":n=t.arcs.map(c);break;default:return null}return{type:r,coordinates:n}}(t)}var s=function(e,t){var n={},r={},i={},a=[],o=-1;function s(e,t){for(var r in e){var i=e[r];delete t[i.start],delete i.start,delete i.end,i.forEach(function(e){n[e<0?~e:e]=1}),a.push(i)}}return t.forEach(function(n,r){var i,a=e.arcs[n<0?~n:n];a.length<3&&!a[1][0]&&!a[1][1]&&(i=t[++o],t[o]=n,t[r]=i)}),t.forEach(function(t){var n,a,o=function(t){var n,r=e.arcs[t<0?~t:t],i=r[0];e.transform?(n=[0,0],r.forEach(function(e){n[0]+=e[0],n[1]+=e[1]})):n=r[r.length-1];return t<0?[n,i]:[i,n]}(t),s=o[0],l=o[1];if(n=i[s])if(delete i[n.end],n.push(t),n.end=l,a=r[l]){delete r[a.start];var u=a===n?n:n.concat(a);r[u.start=n.start]=i[u.end=a.end]=u}else r[n.start]=i[n.end]=n;else if(n=r[l])if(delete r[n.start],n.unshift(t),n.start=s,a=i[s]){delete i[a.end];var c=a===n?n:a.concat(n);r[c.start=a.start]=i[c.end=n.end]=c}else r[n.start]=i[n.end]=n;else r[(n=[t]).start=s]=i[n.end=l]=n}),s(i,r),s(r,i),t.forEach(function(e){n[e<0?~e:e]||a.push([e])}),a};function l(e,t,n){var r,i,a;if(arguments.length>1)r=function(e,t,n){var r,i=[],a=[];function o(e){var t=e<0?~e:e;(a[t]||(a[t]=[])).push({i:e,g:r})}function s(e){e.forEach(o)}function l(e){e.forEach(s)}return function e(t){switch(r=t,t.type){case"GeometryCollection":t.geometries.forEach(e);break;case"LineString":s(t.arcs);break;case"MultiLineString":case"Polygon":l(t.arcs);break;case"MultiPolygon":t.arcs.forEach(l)}}(t),a.forEach(null==n?function(e){i.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&i.push(e[0].i)}),i}(0,t,n);else for(i=0,r=new Array(a=e.arcs.length);i<a;++i)r[i]=i;return{type:"MultiLineString",arcs:s(e,r)}}function u(e,t){var n={},r=[],i=[];function a(e){e.forEach(function(t){t.forEach(function(t){(n[t=t<0?~t:t]||(n[t]=[])).push(e)})}),r.push(e)}function l(t){return function(e){for(var t,n=-1,r=e.length,i=e[r-1],a=0;++n<r;)t=i,i=e[n],a+=t[0]*i[1]-t[1]*i[0];return Math.abs(a)}(o(e,{type:"Polygon",arcs:[t]}).coordinates[0])}return t.forEach(function e(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(e);break;case"Polygon":a(t.arcs);break;case"MultiPolygon":t.arcs.forEach(a)}}),r.forEach(function(e){if(!e._){var t=[],r=[e];for(e._=1,i.push(t);e=r.pop();)t.push(e),e.forEach(function(e){e.forEach(function(e){n[e<0?~e:e].forEach(function(e){e._||(e._=1,r.push(e))})})})}}),r.forEach(function(e){delete e._}),{type:"MultiPolygon",arcs:i.map(function(t){var r,i=[];if(t.forEach(function(e){e.forEach(function(e){e.forEach(function(e){n[e<0?~e:e].length<2&&i.push(e)})})}),(r=(i=s(e,i)).length)>1)for(var a,o,u=1,c=l(i[0]);u<r;++u)(a=l(i[u]))>c&&(o=i[0],i[0]=i[u],i[u]=o,c=a);return i})}}var c=function(e,t){for(var n=0,r=e.length;n<r;){var i=n+r>>>1;e[i]<t?n=i+1:r=i}return n},f=function(e){if(null==e)return t;var n,r,i=e.scale[0],a=e.scale[1],o=e.translate[0],s=e.translate[1];return function(e,t){t||(n=r=0);var l=2,u=e.length,c=new Array(u),f=Math.round((e[0]-o)/i),d=Math.round((e[1]-s)/a);for(c[0]=f-n,n=f,c[1]=d-r,r=d;l<u;)c[l]=e[l],++l;return c}};e.bbox=r,e.feature=function(e,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return a(e,t)})}:a(e,t)},e.mesh=function(e){return o(e,l.apply(this,arguments))},e.meshArcs=l,e.merge=function(e){return o(e,u.apply(this,arguments))},e.mergeArcs=u,e.neighbors=function(e){var t={},n=e.map(function(){return[]});function r(e,n){e.forEach(function(e){e<0&&(e=~e);var r=t[e];r?r.push(n):t[e]=[n]})}function i(e,t){e.forEach(function(e){r(e,t)})}var a={LineString:r,MultiLineString:i,Polygon:i,MultiPolygon:function(e,t){e.forEach(function(e){i(e,t)})}};for(var o in e.forEach(function e(t,n){"GeometryCollection"===t.type?t.geometries.forEach(function(t){e(t,n)}):t.type in a&&a[t.type](t.arcs,n)}),t)for(var s=t[o],l=s.length,u=0;u<l;++u)for(var f=u+1;f<l;++f){var d,h=s[u],p=s[f];(d=n[h])[o=c(d,p)]!==p&&d.splice(o,0,p),(d=n[p])[o=c(d,h)]!==h&&d.splice(o,0,h)}return n},e.quantize=function(e,t){if(e.transform)throw new Error("already quantized");if(t&&t.scale)l=e.bbox;else{if(!((n=Math.floor(t))>=2))throw new Error("n must be ≥2");var n,i=(l=e.bbox||r(e))[0],a=l[1],o=l[2],s=l[3];t={scale:[o-i?(o-i)/(n-1):1,s-a?(s-a)/(n-1):1],translate:[i,a]}}var l,u,c=f(t),d=e.objects,h={};function p(e){return c(e)}function v(e){var t;switch(e.type){case"GeometryCollection":t={type:"GeometryCollection",geometries:e.geometries.map(v)};break;case"Point":t={type:"Point",coordinates:p(e.coordinates)};break;case"MultiPoint":t={type:"MultiPoint",coordinates:e.coordinates.map(p)};break;default:return e}return null!=e.id&&(t.id=e.id),null!=e.bbox&&(t.bbox=e.bbox),null!=e.properties&&(t.properties=e.properties),t}for(u in d)h[u]=v(d[u]);return{type:"Topology",bbox:l,transform:t,objects:h,arcs:e.arcs.map(function(e){var t,n=0,r=1,i=e.length,a=new Array(i);for(a[0]=c(e[0],0);++n<i;)((t=c(e[n],n))[0]||t[1])&&(a[r++]=t);return 1===r&&(a[r++]=[0,0]),a.length=r,a})}},e.transform=n,e.untransform=f,Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.topojson=r.topojson||{})},{}],59:[function(e,t,n){var r,i;r=this,i=function(e){"use strict";var t=function(e,t,n,r,i,a){3===arguments.length&&(r=a=Array,i=null);for(var o=new r(e=1<<Math.max(4,Math.ceil(Math.log(e)/Math.LN2))),s=new a(e),l=e-1,u=0;u<e;++u)o[u]=i;return{set:function(r,a){for(var u=t(r)&l,c=o[u],f=0;c!=i;){if(n(c,r))return s[u]=a;if(++f>=e)throw new Error("full hashmap");c=o[u=u+1&l]}return o[u]=r,s[u]=a,a},maybeSet:function(r,a){for(var u=t(r)&l,c=o[u],f=0;c!=i;){if(n(c,r))return s[u];if(++f>=e)throw new Error("full hashmap");c=o[u=u+1&l]}return o[u]=r,s[u]=a,a},get:function(r,a){for(var u=t(r)&l,c=o[u],f=0;c!=i;){if(n(c,r))return s[u];if(++f>=e)break;c=o[u=u+1&l]}return a},keys:function(){for(var e=[],t=0,n=o.length;t<n;++t){var r=o[t];r!=i&&e.push(r)}return e}}},n=function(e,t){return e[0]===t[0]&&e[1]===t[1]},r=new ArrayBuffer(16),i=new Float64Array(r),a=new Uint32Array(r),o=function(e){i[0]=e[0],i[1]=e[1];var t=a[0]^a[1];return 2147483647&(t=t<<5^t>>7^a[2]^a[3])},s=function(e){var r,i,a,s,l=e.coordinates,u=e.lines,c=e.rings,f=function(){for(var e=t(1.4*l.length,k,z,Int32Array,-1,Int32Array),n=new Int32Array(l.length),r=0,i=l.length;r<i;++r)n[r]=e.maybeSet(r,r);return n}(),d=new Int32Array(l.length),h=new Int32Array(l.length),p=new Int32Array(l.length),v=new Int8Array(l.length),g=0;for(r=0,i=l.length;r<i;++r)d[r]=h[r]=p[r]=-1;for(r=0,i=u.length;r<i;++r){var m=u[r],y=m[0],b=m[1];for(a=f[y],s=f[++y],++g,v[a]=1;++y<=b;)j(r,a,a=s,s=f[y]);++g,v[s]=1}for(r=0,i=l.length;r<i;++r)d[r]=-1;for(r=0,i=c.length;r<i;++r){var x=c[r],_=x[0]+1,w=x[1];for(j(r,f[w-1],a=f[_-1],s=f[_]);++_<=w;)j(r,a,a=s,s=f[_])}function j(e,t,n,r){if(d[n]!==e){d[n]=e;var i=h[n];if(i>=0){var a=p[n];i===t&&a===r||i===r&&a===t||(++g,v[n]=1)}else h[n]=t,p[n]=r}}function k(e){return o(l[e])}function z(e,t){return n(l[e],l[t])}d=h=p=null;var M,A=function(e,t,n,r,i){3===arguments.length&&(r=Array,i=null);for(var a=new r(e=1<<Math.max(4,Math.ceil(Math.log(e)/Math.LN2))),o=e-1,s=0;s<e;++s)a[s]=i;return{add:function(r){for(var s=t(r)&o,l=a[s],u=0;l!=i;){if(n(l,r))return!0;if(++u>=e)throw new Error("full hashset");l=a[s=s+1&o]}return a[s]=r,!0},has:function(r){for(var s=t(r)&o,l=a[s],u=0;l!=i;){if(n(l,r))return!0;if(++u>=e)break;l=a[s=s+1&o]}return!1},values:function(){for(var e=[],t=0,n=a.length;t<n;++t){var r=a[t];r!=i&&e.push(r)}return e}}}(1.4*g,o,n);for(r=0,i=l.length;r<i;++r)v[M=f[r]]&&A.add(l[M]);return A};function l(e,t,n){for(var r,i=t+(n---t>>1);t<i;++t,--n)r=e[t],e[t]=e[n],e[n]=r}function u(e){var t,n=c(e.geometry);for(t in null!=e.id&&(n.id=e.id),null!=e.bbox&&(n.bbox=e.bbox),e.properties){n.properties=e.properties;break}return n}function c(e){if(null==e)return{type:null};var t="GeometryCollection"===e.type?{type:"GeometryCollection",geometries:e.geometries.map(c)}:"Point"===e.type||"MultiPoint"===e.type?{type:e.type,coordinates:e.coordinates}:{type:e.type,arcs:e.coordinates};return null!=e.bbox&&(t.bbox=e.bbox),t}function f(e){var t,n=e[0],r=e[1];return r<n&&(t=n,n=r,r=t),n+31*r}function d(e,t){var n,r=e[0],i=e[1],a=t[0],o=t[1];return i<r&&(n=r,r=i,i=n),o<a&&(n=a,a=o,o=n),r===a&&i===o}e.topology=function(e,r){var i=function(e){var t=1/0,n=1/0,r=-1/0,i=-1/0;function a(e){null!=e&&o.hasOwnProperty(e.type)&&o[e.type](e)}var o={GeometryCollection:function(e){e.geometries.forEach(a)},Point:function(e){s(e.coordinates)},MultiPoint:function(e){e.coordinates.forEach(s)},LineString:function(e){l(e.arcs)},MultiLineString:function(e){e.arcs.forEach(l)},Polygon:function(e){e.arcs.forEach(l)},MultiPolygon:function(e){e.arcs.forEach(u)}};function s(e){var a=e[0],o=e[1];a<t&&(t=a),a>r&&(r=a),o<n&&(n=o),o>i&&(i=o)}function l(e){e.forEach(s)}function u(e){e.forEach(l)}for(var c in e)a(e[c]);return r>=t&&i>=n?[t,n,r,i]:void 0}(e=function(e){var t,n,r={};for(t in e)r[t]=null==(n=e[t])?{type:null}:("FeatureCollection"===n.type?function(e){var t={type:"GeometryCollection",geometries:e.features.map(u)};return null!=e.bbox&&(t.bbox=e.bbox),t}:"Feature"===n.type?u:c)(n);return r}(e)),a=r>0&&i&&function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=a-r?(n-1)/(a-r):1,l=o-i?(n-1)/(o-i):1;function u(e){return[Math.round((e[0]-r)*s),Math.round((e[1]-i)*l)]}function c(e,t){for(var n,a,o,u,c,f=-1,d=0,h=e.length,p=new Array(h);++f<h;)n=e[f],u=Math.round((n[0]-r)*s),c=Math.round((n[1]-i)*l),u===a&&c===o||(p[d++]=[a=u,o=c]);for(p.length=d;d<t;)d=p.push([p[0][0],p[0][1]]);return p}function f(e){return c(e,2)}function d(e){return c(e,4)}function h(e){return e.map(d)}function p(e){null!=e&&v.hasOwnProperty(e.type)&&v[e.type](e)}var v={GeometryCollection:function(e){e.geometries.forEach(p)},Point:function(e){e.coordinates=u(e.coordinates)},MultiPoint:function(e){e.coordinates=e.coordinates.map(u)},LineString:function(e){e.arcs=f(e.arcs)},MultiLineString:function(e){e.arcs=e.arcs.map(f)},Polygon:function(e){e.arcs=h(e.arcs)},MultiPolygon:function(e){e.arcs=e.arcs.map(h)}};for(var g in e)p(e[g]);return{scale:[1/s,1/l],translate:[r,i]}}(e,i,r),h=function(e){var r,i,a,s,l=e.coordinates,u=e.lines,c=e.rings,f=u.length+c.length;for(delete e.lines,delete e.rings,a=0,s=u.length;a<s;++a)for(r=u[a];r=r.next;)++f;for(a=0,s=c.length;a<s;++a)for(i=c[a];i=i.next;)++f;var d=t(2*f*1.4,o,n),h=e.arcs=[];for(a=0,s=u.length;a<s;++a){r=u[a];do{p(r)}while(r=r.next)}for(a=0,s=c.length;a<s;++a)if((i=c[a]).next)do{p(i)}while(i=i.next);else v(i);function p(e){var t,n,r,i,a,o,s,u;if(r=d.get(t=l[e[0]]))for(s=0,u=r.length;s<u;++s)if(g(i=r[s],e))return e[0]=i[0],void(e[1]=i[1]);if(a=d.get(n=l[e[1]]))for(s=0,u=a.length;s<u;++s)if(m(o=a[s],e))return e[1]=o[0],void(e[0]=o[1]);r?r.push(e):d.set(t,[e]),a?a.push(e):d.set(n,[e]),h.push(e)}function v(e){var t,n,r,i,a;if(n=d.get(l[e[0]]))for(i=0,a=n.length;i<a;++i){if(y(r=n[i],e))return e[0]=r[0],void(e[1]=r[1]);if(b(r,e))return e[0]=r[1],void(e[1]=r[0])}if(n=d.get(t=l[e[0]+x(e)]))for(i=0,a=n.length;i<a;++i){if(y(r=n[i],e))return e[0]=r[0],void(e[1]=r[1]);if(b(r,e))return e[0]=r[1],void(e[1]=r[0])}n?n.push(e):d.set(t,[e]),h.push(e)}function g(e,t){var r=e[0],i=t[0],a=e[1];if(r-a!=i-t[1])return!1;for(;r<=a;++r,++i)if(!n(l[r],l[i]))return!1;return!0}function m(e,t){var r=e[0],i=t[0],a=e[1],o=t[1];if(r-a!=i-o)return!1;for(;r<=a;++r,--o)if(!n(l[r],l[o]))return!1;return!0}function y(e,t){var r=e[0],i=t[0],a=e[1]-r;if(a!==t[1]-i)return!1;for(var o=x(e),s=x(t),u=0;u<a;++u)if(!n(l[r+(u+o)%a],l[i+(u+s)%a]))return!1;return!0}function b(e,t){var r=e[0],i=t[0],a=e[1],o=t[1],s=a-r;if(s!==o-i)return!1;for(var u=x(e),c=s-x(t),f=0;f<s;++f)if(!n(l[r+(f+u)%s],l[o-(f+c)%s]))return!1;return!0}function x(e){for(var t=e[0],n=e[1],r=t,i=r,a=l[r];++r<n;){var o=l[r];(o[0]<a[0]||o[0]===a[0]&&o[1]<a[1])&&(i=r,a=o)}return i-t}return e}(function(e){var t,n,r,i,a,o,u,c=s(e),f=e.coordinates,d=e.lines,h=e.rings;for(n=0,r=d.length;n<r;++n)for(var p=d[n],v=p[0],g=p[1];++v<g;)c.has(f[v])&&(t={0:v,1:p[1]},p[1]=v,p=p.next=t);for(n=0,r=h.length;n<r;++n)for(var m=h[n],y=m[0],b=y,x=m[1],_=c.has(f[y]);++b<x;)c.has(f[b])&&(_?(t={0:b,1:m[1]},m[1]=b,m=m.next=t):(u=x-b,l(i=f,a=y,o=x),l(i,a,a+u),l(i,a+u,o),f[x]=f[y],_=!0,b=y));return e}(function(e){var t=-1,n=[],r=[],i=[];function a(e){e&&o.hasOwnProperty(e.type)&&o[e.type](e)}var o={GeometryCollection:function(e){e.geometries.forEach(a)},LineString:function(e){e.arcs=s(e.arcs)},MultiLineString:function(e){e.arcs=e.arcs.map(s)},Polygon:function(e){e.arcs=e.arcs.map(l)},MultiPolygon:function(e){e.arcs=e.arcs.map(u)}};function s(e){for(var r=0,a=e.length;r<a;++r)i[++t]=e[r];var o={0:t-a+1,1:t};return n.push(o),o}function l(e){for(var n=0,a=e.length;n<a;++n)i[++t]=e[n];var o={0:t-a+1,1:t};return r.push(o),o}function u(e){return e.map(l)}for(var c in e)a(e[c]);return{type:"Topology",coordinates:i,lines:n,rings:r,objects:e}}(e))),p=h.coordinates,v=t(1.4*h.arcs.length,f,d);function g(e){e&&m.hasOwnProperty(e.type)&&m[e.type](e)}e=h.objects,h.bbox=i,h.arcs=h.arcs.map(function(e,t){return v.set(e,t),p.slice(e[0],e[1]+1)}),delete h.coordinates,p=null;var m={GeometryCollection:function(e){e.geometries.forEach(g)},LineString:function(e){e.arcs=y(e.arcs)},MultiLineString:function(e){e.arcs=e.arcs.map(y)},Polygon:function(e){e.arcs=e.arcs.map(y)},MultiPolygon:function(e){e.arcs=e.arcs.map(b)}};function y(e){var t=[];do{var n=v.get(e);t.push(e[0]<e[1]?n:~n)}while(e=e.next);return t}function b(e){return e.map(y)}for(var x in e)g(e[x]);return a&&(h.transform=a,h.arcs=function(e){for(var t=-1,n=e.length;++t<n;){for(var r,i,a=e[t],o=0,s=1,l=a.length,u=a[0],c=u[0],f=u[1];++o<l;)r=(u=a[o])[0],i=u[1],r===c&&i===f||(a[s++]=[r-c,i-f],c=r,f=i);1===s&&(a[s++]=[0,0]),a.length=s}return e}(h.arcs)),h},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i(r.topojson=r.topojson||{})},{}],60:[function(e,t,n){var r,i;r=this,i=function(e,t){"use strict";function n(){return!0}function r(e){return e}function i(e){return null!=e.type}var a=function(e){var t,n=new Array(e.arcs.length),r=0;function i(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(i);break;case"Polygon":a(e.arcs);break;case"MultiPolygon":e.arcs.forEach(a)}}function a(e){for(var t=0,i=e.length;t<i;++t,++r)for(var a=e[t],o=0,s=a.length;o<s;++o){var l=a[o];l<0&&(l=~l);var u=n[l];null==u?n[l]=r:u!==r&&(n[l]=-1)}}for(t in e.objects)i(e.objects[t]);return function(e){for(var t,r=0,i=e.length;r<i;++r)if(-1===n[(t=e[r])<0?~t:t])return!0;return!1}};function o(e){var t=e[0],n=e[1],r=e[2];return Math.abs((t[0]-r[0])*(n[1]-t[1])-(t[0]-n[0])*(r[1]-t[1]))/2}function s(e){for(var t,n=-1,r=e.length,i=e[r-1],a=0;++n<r;)t=i,i=e[n],a+=t[0]*i[1]-t[1]*i[0];return Math.abs(a)/2}var l=function(e,n,r){return n=null==n?Number.MIN_VALUE:+n,null==r&&(r=s),function(i,a){return r(t.feature(e,{type:"Polygon",arcs:[i]}).geometry.coordinates[0],a)>=n}};function u(e,t){return e[1][2]-t[1][2]}function c(e){return[e[0],e[1],0]}function f(e,t){return t-e}var d=Math.PI,h=2*d,p=d/4,v=d/180,g=Math.abs,m=Math.atan2,y=Math.cos,b=Math.sin;function x(e,t){for(var n,r,i=0,a=e.length,o=0,s=e[t?i++:a-1],l=s[0]*v,u=s[1]*v/2+p,c=y(u),f=b(u);i<a;++i){n=l,l=(s=e[i])[0]*v,u=s[1]*v/2+p,r=c,c=y(u);var d=l-n,h=d>=0?1:-1,g=h*d,x=f*(f=b(u)),_=r*c+x*y(g),w=x*h*b(g);o+=m(w,_)}return o}e.filter=function(e,t){var a,o=e.objects,s={};function l(e){var t,n;switch(e.type){case"Polygon":t=(n=u(e.arcs))?{type:"Polygon",arcs:n}:{type:null};break;case"MultiPolygon":t=(n=e.arcs.map(u).filter(r)).length?{type:"MultiPolygon",arcs:n}:{type:null};break;case"GeometryCollection":t=(n=e.geometries.map(l).filter(i)).length?{type:"GeometryCollection",geometries:n}:{type:null};break;default:return e}return null!=e.id&&(t.id=e.id),null!=e.bbox&&(t.bbox=e.bbox),null!=e.properties&&(t.properties=e.properties),t}function u(e){return e.length&&(n=e[0],t(n,!1))?[e[0]].concat(e.slice(1).filter(c)):null;var n}function c(e){return t(e,!0)}for(a in null==t&&(t=n),o)s[a]=l(o[a]);return function(e){var t,n,r=e.objects,i={},a=e.arcs,o=a.length,s=-1,l=new Array(o),u=0,c=-1;function f(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(f);break;case"LineString":h(e.arcs);break;case"MultiLineString":case"Polygon":e.arcs.forEach(h);break;case"MultiPolygon":e.arcs.forEach(p)}}function d(e){e<0&&(e=~e),l[e]||(l[e]=1,++u)}function h(e){e.forEach(d)}function p(e){e.forEach(h)}function v(e){var t;switch(e.type){case"GeometryCollection":t={type:"GeometryCollection",geometries:e.geometries.map(v)};break;case"LineString":t={type:"LineString",arcs:m(e.arcs)};break;case"MultiLineString":t={type:"MultiLineString",arcs:e.arcs.map(m)};break;case"Polygon":t={type:"Polygon",arcs:e.arcs.map(m)};break;case"MultiPolygon":t={type:"MultiPolygon",arcs:e.arcs.map(y)};break;default:return e}return null!=e.id&&(t.id=e.id),null!=e.bbox&&(t.bbox=e.bbox),null!=e.properties&&(t.properties=e.properties),t}function g(e){return e<0?~l[~e]:l[e]}function m(e){return e.map(g)}function y(e){return e.map(m)}for(n in r)f(r[n]);for(t=new Array(u);++s<o;)l[s]&&(l[s]=++c,t[c]=a[s]);for(n in r)i[n]=v(r[n]);return{type:"Topology",bbox:e.bbox,transform:e.transform,objects:i,arcs:t}}({type:"Topology",bbox:e.bbox,transform:e.transform,objects:s,arcs:e.arcs})},e.filterAttached=a,e.filterAttachedWeight=function(e,t,n){var r=a(e),i=l(e,t,n);return function(e,t){return r(e,t)||i(e,t)}},e.filterWeight=l,e.planarRingArea=s,e.planarTriangleArea=o,e.presimplify=function(e,n){var r=e.transform?t.transform(e.transform):c,i=function(){var e={},t=[],n=0;function r(e,n){for(;n>0;){var r=(n+1>>1)-1,i=t[r];if(u(e,i)>=0)break;t[i._=n]=i,t[e._=n=r]=e}}function i(e,r){for(;;){var i=r+1<<1,a=i-1,o=r,s=t[o];if(a<n&&u(t[a],s)<0&&(s=t[o=a]),i<n&&u(t[i],s)<0&&(s=t[o=i]),o===r)break;t[s._=r]=s,t[e._=r=o]=e}}return e.push=function(e){return r(t[e._=n]=e,n++),n},e.pop=function(){if(!(n<=0)){var e,r=t[0];return--n>0&&(e=t[n],i(t[e._=0]=e,0)),r}},e.remove=function(e){var a,o=e._;if(t[o]===e)return o!==--n&&(u(a=t[n],e)<0?r:i)(t[a._=o]=a,o),o},e}();null==n&&(n=o);var a=e.arcs.map(function(e){var t,a,o,l=[],u=0;for(a=1,o=(e=e.map(r)).length-1;a<o;++a)(t=[e[a-1],e[a],e[a+1]])[1][2]=n(t),l.push(t),i.push(t);for(e[0][2]=e[o][2]=1/0,a=0,o=l.length;a<o;++a)(t=l[a]).previous=l[a-1],t.next=l[a+1];for(;t=i.pop();){var c=t.previous,f=t.next;t[1][2]<u?t[1][2]=u:u=t[1][2],c&&(c.next=f,c[2]=t[2],s(c)),f&&(f.previous=c,f[0]=t[0],s(f))}return e});function s(e){i.remove(e),e[1][2]=n(e),i.push(e)}return{type:"Topology",bbox:e.bbox,objects:e.objects,arcs:a}},e.quantile=function(e,t){var n=[];return e.arcs.forEach(function(e){e.forEach(function(e){isFinite(e[2])&&n.push(e[2])})}),n.length&&function(e,t){if(n=e.length){if((t=+t)<=0||n<2)return e[0];if(t>=1)return e[n-1];var n,r=(n-1)*t,i=Math.floor(r),a=e[i],o=e[i+1];return a+(o-a)*(r-i)}}(n.sort(f),t)},e.simplify=function(e,t){t=null==t?Number.MIN_VALUE:+t;var n=e.arcs.map(function(e){for(var n,r=-1,i=0,a=e.length,o=new Array(a);++r<a;)(n=e[r])[2]>=t&&(o[i++]=[n[0],n[1]]);return o.length=i,o});return{type:"Topology",transform:e.transform,bbox:e.bbox,objects:e.objects,arcs:n}},e.sphericalRingArea=function(e,t){var n=x(e,!0);return t&&(n*=-1),2*(n<0?h+n:n)},e.sphericalTriangleArea=function(e){return 2*g(x(e,!1))},Object.defineProperty(e,"__esModule",{value:!0})},"object"==typeof n&&void 0!==t?i(n,e("topojson-client")):"function"==typeof define&&define.amd?define(["exports","topojson-client"],i):i(r.topojson=r.topojson||{},r.topojson)},{"topojson-client":58}],61:[function(e,t,n){(function(t,r){"use strict";var i=e("bit-twiddle"),a=e("dup");t.__TYPEDARRAY_POOL||(t.__TYPEDARRAY_POOL={UINT8:a([32,0]),UINT16:a([32,0]),UINT32:a([32,0]),INT8:a([32,0]),INT16:a([32,0]),INT32:a([32,0]),FLOAT:a([32,0]),DOUBLE:a([32,0]),DATA:a([32,0]),UINT8C:a([32,0]),BUFFER:a([32,0])});var o="undefined"!=typeof Uint8ClampedArray,s=t.__TYPEDARRAY_POOL;s.UINT8C||(s.UINT8C=a([32,0])),s.BUFFER||(s.BUFFER=a([32,0]));var l=s.DATA,u=s.BUFFER;function c(e){if(e){var t=e.length||e.byteLength,n=i.log2(t);l[n].push(e)}}function f(e){e=i.nextPow2(e);var t=i.log2(e),n=l[t];return n.length>0?n.pop():new ArrayBuffer(e)}function d(e){return new Uint8Array(f(e),0,e)}function h(e){return new Uint16Array(f(2*e),0,e)}function p(e){return new Uint32Array(f(4*e),0,e)}function v(e){return new Int8Array(f(e),0,e)}function g(e){return new Int16Array(f(2*e),0,e)}function m(e){return new Int32Array(f(4*e),0,e)}function y(e){return new Float32Array(f(4*e),0,e)}function b(e){return new Float64Array(f(8*e),0,e)}function x(e){return o?new Uint8ClampedArray(f(e),0,e):d(e)}function _(e){return new DataView(f(e),0,e)}function w(e){e=i.nextPow2(e);var t=i.log2(e),n=u[t];return n.length>0?n.pop():new r(e)}n.free=function(e){if(r.isBuffer(e))u[i.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,n=0|i.log2(t);l[n].push(e)}},n.freeUint8=n.freeUint16=n.freeUint32=n.freeInt8=n.freeInt16=n.freeInt32=n.freeFloat32=n.freeFloat=n.freeFloat64=n.freeDouble=n.freeUint8Clamped=n.freeDataView=function(e){c(e.buffer)},n.freeArrayBuffer=c,n.freeBuffer=function(e){u[i.log2(e.length)].push(e)},n.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return f(e);switch(t){case"uint8":return d(e);case"uint16":return h(e);case"uint32":return p(e);case"int8":return v(e);case"int16":return g(e);case"int32":return m(e);case"float":case"float32":return y(e);case"double":case"float64":return b(e);case"uint8_clamped":return x(e);case"buffer":return w(e);case"data":case"dataview":return _(e);default:return null}return null},n.mallocArrayBuffer=f,n.mallocUint8=d,n.mallocUint16=h,n.mallocUint32=p,n.mallocInt8=v,n.mallocInt16=g,n.mallocInt32=m,n.mallocFloat32=n.mallocFloat=y,n.mallocFloat64=n.mallocDouble=b,n.mallocUint8Clamped=x,n.mallocDataView=_,n.mallocBuffer=w,n.clearCache=function(){for(var e=0;e<32;++e)s.UINT8[e].length=0,s.UINT16[e].length=0,s.UINT32[e].length=0,s.INT8[e].length=0,s.INT16[e].length=0,s.INT32[e].length=0,s.FLOAT[e].length=0,s.DOUBLE[e].length=0,s.UINT8C[e].length=0,l[e].length=0,u[e].length=0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"bit-twiddle":2,buffer:3,dup:39}],62:[function(e,t,n){"use strict";t.exports=function(e,t,n){return 0===e.length?e:t?(n||e.sort(t),function(e,t){for(var n=1,r=e.length,i=e[0],a=e[0],o=1;o<r;++o)if(a=i,t(i=e[o],a)){if(o===n){n++;continue}e[n++]=i}return e.length=n,e}(e,t)):(n||e.sort(),function(e){for(var t=1,n=e.length,r=e[0],i=e[0],a=1;a<n;++a,i=r)if(i=r,(r=e[a])!==i){if(a===t){t++;continue}e[t++]=r}return e.length=t,e}(e))}},{}],63:[function(e,t,n){(function(){var n;n=e("../color/sort.js"),t.exports=function(e,t,r,i,a,o,s){var l,u,c;for(i||(i="asc"),a instanceof Array||(a=[a]),r instanceof Array||(r=[r]),o&&void 0!==s&&"number"!=typeof s&&(s=o.id.nesting.indexOf(s)),c=0,l=0;l<r.length&&(u=r[l],e=o&&e.d3po&&e.d3po.sortKeys?e.d3po.sortKeys[u]:e[u],t=o&&t.d3po&&t.d3po.sortKeys?t.d3po.sortKeys[u]:t[u],0===(c=o&&a.indexOf(u)>=0?n(e,t):e<t?-1:1)&&l!==r.length-1);)l++;return"asc"===i?c:-c}}).call(this)},{"../color/sort.js":80}],64:[function(e,t,n){(function(){t.exports=function(e,t){var n;return e instanceof Array&&(n=null==t?t:t.constructor,e.indexOf(t)>=0||e.indexOf(n)>=0)}}).call(this)},{}],65:[function(e,t,n){(function(){var n,r;n=e("./comparator.js"),r=e("../core/fetch/sort.js"),t.exports=function(e,t,i,a,o,s){var l,u,c,f;if(!e||e.length<=1)return e||[];if(o)for(t||(t=o.order.value||o.size.value||o.id.value),i||(i=o.order.sort.value),a||(a=o.color.value||[]),c=0,f=e.length;c<f;c++)(l=e[c]).d3po||(l.d3po={}),u="d3po"in l&&"d3po"in l.d3po?l.d3po:l,l.d3po.sortKeys=r(o,u,t,a,s);return e.sort(function(e,r){return n(e,r,t,i,a,o,s)})}}).call(this)},{"../core/fetch/sort.js":97,"./comparator.js":63}],66:[function(e,t,n){(function(){t.exports=function(e,t){return void 0===t?e:!1===t?[]:t instanceof Array?t:(e instanceof Array||(e=[]),e.indexOf(t)>=0?e.splice(e.indexOf(t),1):e.push(t),e)}}).call(this)},{}],67:[function(e,t,n){(function(){var e;(e=function(t){var n,r,i,a;if(t in(a=e.tested))return a[t];for(r=0,i=!1;r<document.styleSheets.length;){if((n=document.styleSheets[r]).href&&n.href.indexOf(t)>=0){i=!0;break}r++}return i}).tested={},t.exports=e}).call(this)},{}],68:[function(e,t,n){t.exports=/(MSIE|Trident\/|Edge\/)/i.test(navigator.userAgent)},{}],69:[function(e,t,n){(function(){var n,r;n=e("./ie.js"),r=e("./touch.js"),t.exports=r?{click:"touchend",down:"touchstart",up:"touchend",over:n?"mouseenter":"mouseover",out:n?"mouseleave":"mouseout",move:"mousemove"}:{click:"click",down:"mousedown",up:"mouseup",over:n?"mouseenter":"mouseover",out:n?"mouseleave":"mouseout",move:"mousemove"}}).call(this)},{"./ie.js":68,"./touch.js":74}],70:[function(e,t,n){(function(){var e;e=function(){var t;return t="-webkit-transform"in document.body.style?"-webkit-":"-moz-transform"in document.body.style?"-moz-":"-ms-transform"in document.body.style?"-ms-":"-o-transform"in document.body.style?"-o-":"",e=function(){return t},t},t.exports=e}).call(this)},{}],71:[function(e,t,n){(function(){t.exports="rtl"===d3.select("html").attr("dir")}).call(this)},{}],72:[function(e,t,n){t.exports={y:function(){return void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop},x:function(){return void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft}}},{}],73:[function(e,t,n){(function(){var e;e=function(){var t,n,r,i,a;return(t=document.createElement("p")).style.width="100%",t.style.height="200px",(n=document.createElement("div")).style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.visibility="hidden",n.style.width="200px",n.style.height="150px",n.style.overflow="hidden",n.appendChild(t),document.body.appendChild(n),i=t.offsetWidth,n.style.overflow="scroll",i===(a=t.offsetWidth)&&(a=n.clientWidth),document.body.removeChild(n),e=function(){return r},r=i-a},t.exports=e}).call(this)},{}],74:[function(e,t,n){(function(){t.exports=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}).call(this)},{}],75:[function(e,t,n){(function(){t.exports=function(e){var t;return(t=d3.hsl(e)).l>.45&&(t.s>.8&&(t.s=.8),t.l=.45),t.formatHex()}}).call(this)},{}],76:[function(e,t,n){(function(){t.exports=function(e,t){var n;return void 0===t&&(t=.5),t=(1-(n=d3.hsl(e)).l)*t,n.l+=t,n.s-=t,n.formatHex()}}).call(this)},{}],77:[function(e,t,n){(function(){t.exports=function(e,t,n,r){var i,a,o;return n||(n=1),r||(r=1),e=d3.rgb(e),t=d3.rgb(t),o=(n*e.r+r*t.r-n*r*t.r)/(n+r-n*r),a=(n*e.g+r*t.g-n*r*t.g)/(n+r-n*r),i=(n*e.b+r*t.b-n*r*t.b)/(n+r-n*r),d3.rgb(o,a,i).formatHex()}}).call(this)},{}],78:[function(e,t,n){(function(){var n;n=e("./scale.js"),t.exports=function(e,t){var r;return r=e||Math.floor(20*Math.random()),(t=t||n)(r)}}).call(this)},{"./scale.js":79}],79:[function(e,t,n){(function(){t.exports=d3.scaleOrdinal().range(["#bf3251","#5c57d9","#d6c650","#406662","#872a41","#1c26b3","#d05555","#549e95","#993f7b","#dc8e7a","#ede788","#7485aa","#4d6fd0","#635b56","#7454a6","#a8c380","#8abdb6","#74c0e2","#bcd8af","#a1aafb","#a17cb0","#d1a1bc"])}).call(this)},{}],80:[function(e,t,n){(function(){t.exports=function(e,t){var n,r;return n=d3.hsl(e),r=d3.hsl(t),(e=0===n.s?361:n.h)===(t=0===r.s?361:r.h)?n.l-r.l:e-t}}).call(this)},{}],81:[function(e,t,n){(function(){t.exports=function(e){var t;return(299*(t=d3.rgb(e)).r+587*t.g+114*t.b)/1e3>=128?"#444444":"#f7f7f7"}}).call(this)},{}],82:[function(e,t,n){(function(){t.exports=function(e){var t,n;return 0===(e=(e+="").replace(RegExp(" ","g"),"")).indexOf("rgb")&&(e=e.split("(")[1].split(")")[0].split(",").slice(0,3).join(",")),0===e.indexOf("hsl")&&(e=e.split(",")[2].split(")")[0]),t=d3.rgb(e).formatHex(),n=["black","#000","#000000","0%","0,0,0"].indexOf(e)>=0,"#000000"!==t||n}}).call(this)},{}],83:[function(e,t,n){(function(){var n,r,i;n=e("../../client/ie.js"),i=e("./wiki.js"),(r=function(e,t,r){r=r||"",n||"undefined"!=typeof InstallTrigger?console.log("[ d3po ] "+t):0===e.indexOf("group")?console[e]("%c[ d3po ]%c "+t,"font-weight: 800;color: #b35c1e;margin-left: 0px;","font-weight: 400;"+r):console[e]("%c"+t,r+"font-weight: 400;")}).comment=function(e){this("log",e,"color:#aaa;")},r.error=function(e,t){this("groupCollapsed","ERROR: "+e,"font-weight:800;color:#D74B03;"),this.stack(),this.wiki(t),this.groupEnd()},r.group=function(e){this("group",e,"color:#888;")},r.groupCollapsed=function(e){this("groupCollapsed",e,"color:#888;")},r.groupEnd=function(){n||console.groupEnd()},r.log=function(e){this("log",e,"color:#444444;")},r.stack=function(){var e,t,r,i,a;n||(e=new Error).stack&&(i=(i=e.stack.split("\n")).filter(function(e){return 0!==e.indexOf("Error")&&e.indexOf("d3po.js:")<0&&e.indexOf("d3po.min.js:")<0})).length&&i[0].length&&(r=window.chrome?"at ":"@",(a=i[0]).indexOf(r)>=0&&(a=a.split(r)[1]),3===(i=a.split(":")).length&&i.pop(),this("log","line "+i.pop()+" of "+(t=(t=i.join(":").split("/"))[t.length-1])+": "+a,"color:#D74B03;"))},r.time=function(e){n||console.time(e)},r.timeEnd=function(e){n||console.timeEnd(e)},r.warning=function(e,t){this("groupCollapsed",e,"color:#888;"),this.stack(),this.wiki(t),this.groupEnd()},r.wiki=function(e){e&&(e in i&&(e=d3po.repo+"wiki/"+i[e]),this("log","documentation: "+e,"color:#aaa;"))},t.exports=r}).call(this)},{"../../client/ie.js":68,"./wiki.js":84}],84:[function(e,t,n){(function(){t.exports={active:"Visualizations#active",aggs:"Visualizations#aggs",alt:"Forms#alt",attrs:"Visualizations#attrs",axes:"Visualizations#axes",background:"Visualizations#background",color:"Visualizations#color",cols:"Visualizations#cols",config:"Visualizations#config",container:"Visualizations#container",coords:"Visualizations#coords",csv:"Visualizations#csv",data:"Visualizations#data",depth:"Visualizations#depth",descs:"Visualizations#descs",dev:"Visualizations#dev",draw:"Visualizations#draw",edges:"Visualizations#edges",error:"Visualizations#error",focus:"Visualizations#focus",font:"Visualizations#font",footer:"Visualizations#footer",format:"Visualizations#format",height:"Visualizations#height",history:"Visualizations#history",hover:"Forms#hover",icon:"Visualizations#icon",id:"Visualizations#id",keywords:"Forms#keywords",labels:"Visualizations#labels",legend:"Visualizations#legend",links:"Visualizations#links",margin:"Visualizations#margin",messages:"Visualizations#messages",method:"Methods",mouse:"Visualizations#mouse",nodes:"Visualizations#nodes",open:"Forms#open",order:"Visualizations#order",remove:"Forms#remove",search:"Forms#search",select:"Forms#select",selectAll:"Forms#selectAll",shape:"Visualizations#shape",size:"Visualizations#size",temp:"Visualizations#temp",text:"Visualizations#text",time:"Visualizations#time",timeline:"Visualizations#timeline",timing:"Visualizations#timing",title:"Visualizations#title",tooltip:"Visualizations#tooltip",total:"Visualizations#total",type:"Visualizations#type",ui:"Visualizations#ui",width:"Visualizations#width",x:"Visualizations#x",y:"Visualizations#y",zoom:"Visualizations#zoom"}}).call(this)},{}],85:[function(e,t,n){var r=e("../../util/buckets.js"),i=e("../fetch/value.js"),a=e("../console/print.js");t.exports=function(e){if(e.dev.value&&a.time("getting color data range"),e.color.domain.value)var t=e.color.domain.value;else{t=[];e.data.pool.forEach(function(n){var r=parseFloat(i(e,n,e.color.value));"number"==typeof r&&!isNaN(r)&&t.indexOf(r)<0&&t.push(r)})}if(e.dev.value&&a.timeEnd("getting color data range"),t.length>1){if(e.dev.value&&a.time("calculating color scale"),(t=d3.extent(t))[0]<0&&t[1]>0)3==(n=e.color.range).length&&(t.push(t[1]),t[1]=0);else if(t[1]>0&&t[0]>=0){var n=e.color.heatmap;t=r(t,n.length)}else{n=e.color.range.slice(0);t[0]<0?n.pop():n.shift()}e.color.valueScale=d3.scaleSqrt().domain(t).range(n).interpolate(d3.interpolateRgb),e.dev.value&&a.timeEnd("calculating color scale")}else e.color.valueScale=null}},{"../../util/buckets.js":239,"../console/print.js":83,"../fetch/value.js":99}],86:[function(e,t,n){var r=e("../fetch/value.js"),i=e("../console/print.js"),a=e("../../object/validate.js");t.exports=function(e,t){e.dev.value&&i.time("filtering data");var n=d3.keys(e.data.keys||{});"attrs"in e&&(n=n.concat(d3.keys(e.attrs.keys||{}))),t=t.filter(function(t){return null!==r(e,t,e.id.value)});var o=e.types[e.type.value].requirements||[];e.data.filters.forEach(function(i){n.indexOf(e[i].value)>=0&&o.indexOf(i)>=0&&(t=t.filter(function(t){var n=r(e,t,e[i].value);return"y"===i&&e.y2.value&&null===n?n=r(e,t,e.y2.value):"x"===i&&e.x2.value&&null===n&&(n=r(e,t,e.x2.value)),"size"===i?"number"==typeof n:null!==n}))});var s=e.data.solo.length?"solo":"mute";return e.data[s].length?e.data[s].forEach(function(n){function o(t){var r=e[n][s].value,i=!1;return r.forEach(function(e){"function"==typeof e?i=e(t):e===t&&(i=!0)}),"solo"===s?i:!i}function l(t,i){if(!i&&e[n].nesting){var s=e[n].nesting;a(s)&&(s=d3.values(s));for(var l=0;l<s.length;l++){var u=t.filter(function(t){return o(r(e,t,s[l]))});u.length&&(t=u)}}else t=t.filter(function(t){return o(r(e,t,e[n].value))});return t}t=l(t),"id"===n&&("nodes"in e&&e.nodes.value&&(e.dev.value&&i.time("filtering nodes"),e.nodes.restricted=l(e.nodes.value),e.dev.value&&i.timeEnd("filtering nodes")),"edges"in e&&e.edges.value&&(e.dev.value&&i.time("filtering edges"),e.edges.restricted=e.edges.value.filter(function(t){return 2===l([t[e.edges.source],t[e.edges.target]]).length}),e.dev.value&&i.timeEnd("filtering edges")))}):"nodes"in e&&(e.nodes.restricted=void 0,e.edges.restricted=void 0),e.dev.value&&i.timeEnd("filtering data"),t}},{"../../object/validate.js":207,"../console/print.js":83,"../fetch/value.js":99}],87:[function(e,t,n){var r=e("./nest.js"),i=e("./multiformat.js"),a=e("../fetch/value.js"),o=e("../console/print.js"),s=e("../../util/uniques.js");t.exports=function(e){var t;if(e.data.time={values:[]},e.time&&e.time.value){e.dev.value&&(t="analyzing time periods",o.time(t)),e.data.time.values=s(e.data.value,e.time.value,a,e),e.data.time.values.sort(function(e,t){return e-t});var n=[];e.data.time.values.forEach(function(t,r){if(0!==r){var i=e.data.time.values[r-1];n.push(t-i),r===e.data.time.values.length-1&&(e.data.time.total=t-e.data.time.values[0])}}),n=d3.min(n),e.data.time.step=n;var l=["Milliseconds","Seconds","Minutes","Hours","Date","Month","FullYear"],u=[1e3,60,60,24,30,12,1];e.data.time.periods=l;var c=function(t,n,r){return e.data.time.stepDivider||(arr=u.slice(0,r),arr.length?e.data.time.stepDivider=arr.reduce(function(e,t){return e*t}):e.data.time.stepDivider=1),Math.round(Math.floor(n-t)/e.data.time.stepDivider)},f=e.data.time.total;l.forEach(function(t,r){var i="Date"===t?28:u[r];if(!e.data.time.stepType&&(r===l.length-1||Math.round(n)<i)){e.data.time.stepType=t;var a=e.data.time.values[0],o=e.data.time.values[e.data.time.values.length-1];e.data.time.stepIntervals=c(a,o,r)}!e.data.time.totalType&&(r===l.length-1||Math.round(f)<i)&&(e.data.time.totalType=t),n/=i,f/=i}),e.data.time.values.forEach(function(t,n){if(0!==n){var r=e.data.time.values[0];e.data.time.dataSteps.push(c(r,t,l.indexOf(e.data.time.stepType)))}else e.data.time.dataSteps=[0]});var d=e.time.format.value,h=e.format.locale.value,p=[function(e){return e.getMilliseconds()},function(e){return e.getSeconds()},function(e){return e.getMinutes()},function(e){return e.getHours()},function(e){return 1!=e.getDate()},function(e){return e.getMonth()},function(e){return!0}];e.data.time.functions=p;var v=function(e,t,n){return e===t?n&&h.timeFormat[e+"Small"]?h.timeFormat[e+"Small"]:h.timeFormat[e]:l.indexOf(e)>=4||l.indexOf(t)<=3?h.timeFormat[t+"-"+e]:(r="Date"===t?h.timeFormat[t]:h.timeFormat[t+"-Date"],"Hours"===e?r+" "+h.timeFormat[e]:r+" "+h.timeFormat["Hours-"+e]);var r};if(e.data.time.getFormat=v,d)"string"==typeof d?e.data.time.format=d3.timeFormatLocale(h.format).format(d):"function"==typeof d?e.data.time.format=d:d instanceof Array&&(e.data.time.format=i(d3.timeFormatLocale(h.format),d)),e.data.time.multiFormat=e.data.time.format;else{for(var g=e.data.time.stepType,m=e.data.time.totalType,y=[],b=l.indexOf(g);b<=l.indexOf(m);b++){var x=b-1<l.indexOf(g)?l[b]:l[b-1],_=l[b]===x&&g!==m,w=v(x,l[b],_);y.push([w,p[b]])}e.data.time.format=d3.timeFormatLocale(h.format).format(v(g,m)),y.length>1?(y[y.length-1][1]=function(e){return!0},e.data.time.multiFormat=i(d3.timeFormatLocale(h.format),y)):e.data.time.multiFormat=e.data.time.format}e.data.time.ticks=[];for(var j=d3.min(e.data.time.values),k=d3.max(e.data.time.values),z=0;z<=e.data.time.stepIntervals;z++){var M=new Date(j);M["set"+e.data.time.stepType](M["get"+e.data.time.stepType]()+z),M<=k&&e.data.time.ticks.push(M)}e.dev.value&&o.timeEnd(t)}if(e.dev.value&&(t="nesting data by time and depths",o.time(t)),e.data.nested={},0===e.data.time.values.length)e.data.nested.all={},e.id.nesting.forEach(function(t,n){var i=e.id.nesting.slice(0,n+1);e.data.nested.all[t]=r(e,e.data.value,i)});else{var A=e.data.value.reduce(function(t,n){var r=a(e,n,e.time.value).getTime();return r in t||(t[r]=[]),t[r].push(n),t},{});e.data.time.values.forEach(function(t){var n=t.getTime();e.data.nested[n]={},e.id.nesting.forEach(function(t,i){var a=e.id.nesting.slice(0,i+1);e.data.nested[n][t]=r(e,A[n],a)})})}e.dev.value&&o.timeEnd(t)}},{"../../util/uniques.js":245,"../console/print.js":83,"../fetch/value.js":99,"./multiformat.js":91,"./nest.js":92}],88:[function(e,t,n){(function(){var n;n=e("../fetch/value.js"),t.exports=function(e,t,r){var i,a,o,s,l,u,c,f,d,h;if(a=d3.nest(),e.id.grouping.value)for(void 0===r&&(r=e.id.nesting),o=s=0,u=r.length;s<u;o=++s)f=r[o],o<e.depth.value&&function(t){a.key(function(r){return n(e,r.d3po,t)})}(f);for(d=[],l=0,c=t.length;l<c;l++)i=t[l],(h=e.size.value?n(e,i,e.size.value):1)&&"number"==typeof h&&h>0&&(delete i.d3po.r,delete i.d3po.x,delete i.d3po.y,d.push({d3po:i,id:i[e.id.value],value:h}));return a.entries(d)}}).call(this)},{"../fetch/value.js":99}],89:[function(e,t,n){(function(){var n,r,i=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};n=e("../console/print.js"),r=e("../../object/validate.js"),t.exports=function(e,t){var a,o,s,l,u,c,f,d,h;if(f=t+" key analysis",e.dev.value&&n.time(f),e[t].keys={},a=function(n){var o,s,l,u,c,f,d;if(n instanceof Array){for(c=[],s=0,u=n.length;s<u;s++)o=n[s],c.push(a(o));return c}if(r(n)){for(l in f=[],n)d=n[l],0===l.indexOf("d3po")||i.call(e[t].keys,l)>=0||null===d?f.push(void 0):f.push(e[t].keys[l]=typeof d);return f}},r(e[t].value))for(o in l=d3.keys(e[t].value).length===e.id.nesting.length,u=e[t].value)if(d=u[o],l&&e.id.nesting.indexOf(o)>=0&&r(d))for(s in d)h=d[s],a(h);else a(d);else for(o in c=e[t].value)d=c[o],a(d);if(e.dev.value)return n.time(f)}}).call(this)},{"../../object/validate.js":207,"../console/print.js":83}],90:[function(e,t,n){(function(){var n,r,i;n=e("../../viz/helpers/d3functions/filetypes.js"),r=e("../console/print.js"),i=e("../../object/validate.js"),t.exports=function(e,t,a){var o,s,l;return(o=e.dev.value)&&r.time("loading "+t),l=e[t].url,e[t].filetype.value?s=e[t].filetype.value:(s=(s=l.slice(l.length-5).split(".")).length>1&&s[1])?("txt"===s&&(s="text"),e[t].filetype.accepted.indexOf(s)<0&&(s="json")):s="json",("dsv"===s?function(n){return d3.dsv(e[t].delimiter.value,n)}:n.fromString(s))(l).then(function(n){var r,a;if("function"==typeof e[t].callback){if(a=e[t].callback(n))if(i(a)&&t in a)for(r in a)r in e&&(e[r].value=a[r]);else e[t].value=a}else e[t].value=n;["json"].indexOf(s)<0&&e[t].value.forEach(function(e){var t;for(r in t=[],e)isNaN(e[r])?"false"===e[r].toLowerCase()?t.push(e[r]=!1):"true"===e[r].toLowerCase()?t.push(e[r]=!0):"null"===e[r].toLowerCase()?t.push(e[r]=null):"undefined"===e[r].toLowerCase()?t.push(e[r]=void 0):t.push(void 0):t.push(e[r]=parseFloat(e[r]));return t}),e[t].changed=!0,e[t].loaded=!0}).catch(function(t){e.error.internal='Could not load data from: "'+l+'"'}).then(function(e){return o&&r.timeEnd("loading "+t),a()})}}).call(this)},{"../../object/validate.js":207,"../../viz/helpers/d3functions/filetypes.js":250,"../console/print.js":83}],91:[function(e,t,n){t.exports=function(e,t){return function(n){return e.format(function(e){let n=0,r=!1,i="%c";for(;!r&&n<t.length;)(r=t[n][1](e))&&(i=t[n][0]),n++;return i}(n))(n)}}},{}],92:[function(e,t,n){var r=e("../../viz/helpers/d3functions/aggs.js"),i=e("../fetch/value.js"),a=e("../../object/validate.js"),o=e("../../util/uniques.js"),s=function(e,t){var n=[];return function e(r){r instanceof Array?r.forEach(e):a(r)&&t in r&&(r[t]instanceof Array?r[t].forEach(e):n.push(r))}(e),n},l=function(e){var t=[];return function e(n){for(var r=0;r<n.length;r++){var i=n[r];i&&(i.constructor===Array?e(i):t.push(i))}}(e),o(t)},u=function(e){return e.values&&e.values.length?(e.children=e.values.map(function(e){return u(e)}),delete e.values,e):e.values?e.values:e};t.exports=function(e,t,n,a){void 0===a&&(a=!0);var c=d3.nest(),f=[],d="temp"in e?["active","temp","total"]:[];n.length?n.forEach(function(t,n){c.key(function(n){return i(e,n,t)})}):c.key(function(e){return!0}),a&&e.axes&&e.axes.discrete&&(!e.time||e[e.axes.discrete].value!==e.time.value)&&c.key(function(t){return i(e,t,e[e.axes.discrete].value)});var h=n.length&&e.id.nesting.indexOf(n[n.length-1])>=0,p=n.length&&h?n.length-1:0;h?e.id.nesting[p]:e.depth.value;c.rollup(function(t){if(1===t.length&&"d3po"in t[0])return f.push(t[0]),t[0];t=t.reduce(function(e,t){return t.values instanceof Array?e.concat(t.values):(e.push(t),e)},[]);var a={d3po:{data:{},depth:p}};if(d3.sum(t,function(e){return"d3po"in e&&e.d3po.merged?1:0})===t.length)for(var u=0;u<t.length;u++){var c=t[u];a.d3po.merged||(a.d3po.merged=[]),a.d3po.merged=a.d3po.merged.concat(c.d3po.merged),c.d3po.text&&(a.d3po.text=c.d3po.text)}for(var h=0;h<d.length;h++){var v=d[h],g=e.aggs&&e.aggs.value[m]?e.aggs.value[m]:"sum";"d3po"in t[0]&&v in t[0].d3po?a.d3po[v]=d3.sum(t,function(e){return e.d3po[v]}):a.d3po[v]="function"==typeof g?g(t):r.fromString(g)(t,function(t){var n="total"===v?1:0;return e[v].value&&"number"!=typeof(n=i(e,t,e[v].value))&&(n=n?1:0),n})}for(var m in e.data.keys){if(m in a.d3po.data)a[m]=a.d3po[m];else{var y=e.aggs&&e.aggs.value[m]?e.aggs.value[m]:"sum",b=typeof y,x=e.data.keys[m],_=e.id.nesting.indexOf(m)>=0,w="time"in e&&m===e.time.value;if(m in a.d3po.data)a[m]=a.d3po[m];else if("function"===b)a[m]=e.aggs.value[m](t);else if(w)a[m]=l(o(t,m));else if(e.axes&&e.axes.discrete&&e[e.axes.discrete].value===m)a[m]=o(t,m);else if("number"!==x||"string"!==b||_){var j=s(t,m),k=1===j.length?j[0][m]:o(j,m);1===j.length?a[m]=k:k&&k.length?(k instanceof Array||(k=[k]),_&&e.id.nesting.indexOf(m)>p?a[m]=j:a[m]=k):_&&e.id.nesting.indexOf(m)-1>=p&&(!("endPoint"in a.d3po)||a.d3po.endPoint>p)&&(a.d3po.endPoint=p)}else{var z=t.map(function(e){return e[m]});(z=z.filter(function(e){return typeof e===x})).length&&(a[m]=r.fromString(y)(z))}}m in a&&a[m]instanceof Array&&1===a[m].length&&(a[m]=a[m][0])}for(var M=0;M<n.length;M++){var A=n[M];A in a||(a[A]=i(e,t[0],A))}return f.push(a),a});var v=function(t,r,i){if(t.children){for(var a in"number"==e.data.keys[n[r]]&&(t.key=parseFloat(t.key)),i[n[r]]=t.key,delete t.key,i)t[a]=i[a];r++,t.children.forEach(function(e){v(e,r,i)})}};return c=c.entries(t).map(u).map(function(e){return v(e,0,{}),e}),f}},{"../../object/validate.js":207,"../../util/uniques.js":245,"../../viz/helpers/d3functions/aggs.js":247,"../fetch/value.js":99}],93:[function(e,t,n){var r=e("../../viz/helpers/d3functions/aggs.js"),i=e("../../array/sort.js"),a=e("./nest.js"),o=e("../fetch/value.js"),s=(e("../fetch/color.js"),e("../fetch/text.js"));t.exports=function(e,t,n){var l;if("number"==typeof(l=!1===e.size.threshold.value?0:"number"==typeof e.size.threshold.value?e.size.threshold.value:"function"==typeof e.size.threshold.value?e.size.threshold.value(e):"number"==typeof e.types[e.type.value].threshold?e.types[e.type.value].threshold:"function"==typeof e.types[e.type.value].threshold?e.types[e.type.value].threshold(e):.02)&&l>0){var u=[],c=0===e.depth.value?0:{},f=[],d=[],h=[],p={},v=d3.nest();n&&v.key(function(t){return o(e,t,n)}),v.rollup(function(t){var i=t.length;e.aggs.value[e.size.value]?"function"==typeof e.aggs.value[e.size.value]?i=e.aggs.value[e.size.value](t):"string"==typeof e.aggs.value[e.size.value]&&(i=r.fromString(e.aggs.value[e.size.value])(t,function(t){return o(e,t,e.size.value)})):i=d3.sum(t,function(t){return o(e,t,e.size.value)});var a=n?o(e,t[0],n):"all";return p[a]=i,i}).entries(t),t.forEach(function(t){var r=o(e,t,e.id.value),i=o(e,t,e.size.value),a=n?o(e,t,n):"all";if(i/p[a]>=l&&u.indexOf(r)<0&&(u.push(r),e.depth.value)){var s=o(e,t,e.id.nesting[e.depth.value-1]);d.indexOf(s)<0&&d.push(s)}});var g=t.filter(function(t){var n=o(e,t,e.id.value),r=u.indexOf(n)>=0,i=e.depth.value?o(e,t,e.id.nesting[e.depth.value-1]):null;if(null!==i&&d.indexOf(i)<0&&h.indexOf(i)<0&&h.push(i),!r){var a=o(e,t,e.size.value);a>0&&(0===e.depth.value?a>c&&(c=a):(i in c||(c[i]=0),a>c[i]&&(c[i]=a)),f.push(t))}return r});if(f.length>1){f=i(f,e.size.value,"desc",[],e);var m=e.id.nesting.slice(0,e.depth.value);e.types[e.type.value].requirements.indexOf(e.axes.discrete)>=0&&m.push(e[e.axes.discrete].value);var y=a(e,f,m);y.forEach(function(t){var n,r=e.id.nesting[e.depth.value-1],i=o(e,t,r);(children=r?f.filter(function(t){return o(e,t,r)===i}):f,children.length>1)&&(e.id.nesting.forEach(function(n,r){if(e.depth.value==r){var i=t[n];t[n]="string"==typeof i?"d3po_other_"+i:"d3po_other"}else r>e.depth.value&&delete t[n]}),e.color.value&&"string"===e.color.type&&(0===e.depth.value?t[e.color.value]=e.color.missing:t[e.color.value]=o(e,i,e.color.value,r)),e.icon.value&&(t[e.icon.value]=o(e,i,e.icon.value,r)),i&&(t.d3po.depth=e.depth.value),0===e.depth.value?(n=e.format.value(e.format.locale.value.ui.values,{key:"threshold",vars:e}),n+=" < "+e.format.value(c,{key:e.size.value,vars:e})):(n=(n=s(e,t,e.depth.value-1)).length?n[0].split(" < ")[0]:e.format.value(e.format.locale.value.ui.values,{key:"threshold",vars:e}),h.indexOf(i)<0&&(n+=" < "+e.format.value(c[i],{key:e.size.value,vars:e}))),h.indexOf(i)<0&&(n+=" ("+e.format.value(100*l,{key:"share",vars:e})+")"),t.d3po.threshold=c,t.d3po.merged=children,e.text.value&&(t[e.text.value]=n),t.d3po.text=n)})}else y=f;return g.concat(y)}return t}},{"../../array/sort.js":65,"../../viz/helpers/d3functions/aggs.js":247,"../fetch/color.js":95,"../fetch/text.js":98,"../fetch/value.js":99,"./nest.js":92}],94:[function(e,t,n){(function(){var n,r;n=e("./multiformat.js"),r=e("../../font/sizes.js"),t.exports=function(e,t){var i,a,o,s,l,u,c,f,d,h,p,v,g,m,y,b,x,_;if(_=t.values||e.data.time.ticks,m=t.style||{},l=t.limit||e.width.value,y={},f=e.data.time.periods,g=e.data.time.stepType,b=e.data.time.totalType,o=e.data.time.functions,s=e.data.time.getFormat,u=e.format.locale.value.format,e.time.format.value)y.format=e.data.time.format,y.values=_,y.sizes=r(_.map(function(e){return y.format(e)}),m);else for(c=f.indexOf(g);c<=f.indexOf(b);){if(x=_.filter(function(e){var t,n;if(c===f.indexOf(g))return!0;if(t=!0,n=c-1,c<0)return!0;for(;n>=f.indexOf(g)&&t;)t=!o[n](e),n--;return t}),f[c]===b)a=d3.timeFormatLocale(u).format(s(f[c],b));else{for(d=c,a=[];d<=f.indexOf(b);)h=d-1<f.indexOf(g)?d:d-1,h=f[h],v=f[d]===h&&g!==b,i=s(h,f[d],v),a.push([i,o[d]]),d++;a[a.length-1][1]=function(){return!0},a=n(d3.timeFormatLocale(u),a)}if(p=r(x.map(function(e){return a(e)}),m),d3.sum(p,function(e){return e.width})<l||c===f.indexOf(b)){y.format=a,y.values=x,y.sizes=p;break}c++}return y}}).call(this)},{"../../font/sizes.js":136,"./multiformat.js":91}],95:[function(e,t,n){(function(){var n,r,i,a,o,s,l;n=e("./value.js"),a=e("../../color/random.js"),s=e("../../color/validate.js"),l=e("../../object/validate.js"),o=e("../../util/uniques.js"),t.exports=function(e,t,a){var s,u,c,f,d;if(l(t)&&"d3po"in t&&"color"in t.d3po)return t.d3po.color;if(void 0===a&&(a=e.id.value),"number"==typeof a&&(a=e.id.nesting[a]),e.color.value){for(c=[],f=e.id.nesting.indexOf(a);f>=0;){if(u=e.id.nesting[f],1===(d=o(t,e.color.value,n,e,u)).length&&(d=d[0]),!(d instanceof Array)&&null!=d){s=r(e,t,d,a),c.indexOf(s)<0&&c.push(s);break}f--}return 1===c.length?c[0]:e.color.missing}return i(e,t,a)},r=function(e,t,n,r){return n?e.color.valueScale?e.color.valueScale(n):s(n)?n:i(e,n,r):e.color.value&&"function"==typeof e.color.valueScale?e.color.valueScale(0):i(e,t,r)},i=function(e,t,r){return l(t)&&(t=n(e,t,r)),t instanceof Array&&(t=t[0]),a(t,e.color.scale.value)}}).call(this)},{"../../color/random.js":78,"../../color/validate.js":82,"../../object/validate.js":207,"../../util/uniques.js":245,"./value.js":99}],96:[function(e,t,n){var r=e("../data/filter.js"),i=e("../data/nest.js"),a=e("../console/print.js"),o=e("../../string/format.js"),s=e("../../string/list.js");t.exports=function(e,t,n){if(!e.data.value)return[];void 0===n&&(n=e.depth.value);var l=e.id.nesting[n];if(!t||t instanceof Array||(t=[t]),!t&&"time"in e){t=[];var u=e.time.solo.value.length?"solo":"mute",c=e.time[u].value;if(c.length){t=[];for(var f=0;f<c.length;f++){var d=c[f];if("function"==typeof d)for(var h=0;h<e.data.time.values.length;h++){var p=e.data.time.values[h].getTime();d(p)&&t.push(p)}else if(d.constructor===Date)t.push(new Date(d).getTime());else{4===(d+="").length&&parseInt(d)+""===d&&(d+="/01/01");var v=new Date(d);"Invalid Date"!==v&&t.push(v.getTime())}}"mute"===u&&(t=e.data.time.values.filter(function(e){return t.indexOf(e.getTime())<0}))}else t.push("all")}else t=["all"];if(t.indexOf("all")>=0&&e.data.time.values.length){t=e.data.time.values.slice(0);for(var g=0;g<t.length;g++)t[g]=t[g].getTime()}var m=[e.type.value,l,n].concat(e.data.filters).concat(t),y=e.data.solo.length?"solo":"mute",b=d3.keys(e.data.cache),x=e.types[e.type.value].filter||void 0;if(e.data[y].length)for(var _=0;_<e.data[y].length;_++){var w=e.data[y][_],j=e[w][y].value.slice(0);j.unshift(w),j.unshift(y),m=m.concat(j)}e.axes&&e.axes.discrete&&m.push(e.axes.discrete),m=m.join("_"),e.data.cacheID=m;for(var k,z=0;z<b.length;z++){if(b[z].split("_").slice(1).join("_")===m){m=(new Date).getTime()+"_"+m,e.data.cache[m]=e.data.cache[b[z]],delete e.data.cache[b[z]];break}}if(e.data.cache[m])return e.dev.value&&a.comment("data already cached"),k=e.data.cache[m].data,"nodes"in e&&(e.nodes.restricted=e.data.cache[m].nodes,e.edges.restricted=e.data.cache[m].edges),"function"==typeof x&&(k=x(e,k)),k;var M=[];if(k=[],e.data.value&&e.data.value.length)for(var A=0;A<t.length;A++){var E=t[A];e.data.nested[E]?k=k.concat(e.data.nested[E][l]):M.push(E)}if(0===k.length&&M.length&&!e.error.internal){M.length>1&&(M=d3.extent(M)),M=(M=M.map(function(t){return e.data.time.format(new Date(t))})).join(" - ");var S=e.format.locale.value.error.dataYear,O=e.format.locale.value.ui.and;M=s(M,O),e.error.internal=o(S,M),e.time.missing=!0}else{if(e.time&&(e.time.missing=!1),t.length>1){var T=!1;if(["x","y","x2","y2"].forEach(function(t){e[t].value===e.time.value&&"discrete"===e[t].scale.value&&(T=!0)}),!T){var C=e.id.nesting.slice(0,n+1);k=i(e,k,C)}}k=k?r(e,k):[],20===b.length&&(b.sort(),delete e.data.cache[b[0]]),m=(new Date).getTime()+"_"+m,e.data.cache[m]={data:k},"nodes"in e&&(e.data.cache[m].nodes=e.nodes.restricted,e.data.cache[m].edges=e.edges.restricted),"function"==typeof x&&(k=x(e,k)),e.dev.value&&a.comment("storing data in cache")}return k}},{"../../string/format.js":208,"../../string/list.js":209,"../console/print.js":83,"../data/filter.js":86,"../data/nest.js":92}],97:[function(e,t,n){(function(){var n,r,i,a;n=e("../../viz/helpers/d3functions/aggs.js"),a=e("./value.js"),r=e("./color.js"),i=e("./text.js"),t.exports=function(e,t,o,s,l){var u,c,f,d,h,p;for(o instanceof Array||(o=[o]),s instanceof Array||(s=[s]),e&&(void 0===l?l=e.id.value:"number"!=typeof l&&(l=e.id.nesting.indexOf(l))),h={},c=0,d=o.length;c<d;c++)f=o[c],p=e?s.indexOf(f)>=0?r(e,t,l):f===e.text.value?i(e,t,l):3===d3.keys(t).length&&t.d3po&&t.key&&t.values?a(e,t.values.map(function(e){return e.d3po}),f,l):a(e,t,f,l):t[f],[e.data.keys[f],e.attrs.keys[f]].indexOf("number")>=0?((u=e.order.agg.value||e.aggs.value[f]||"sum").constructor===String&&(u=n.fromString(u)),p instanceof Array||(p=[p]),p=u(p)):(p instanceof Array&&(p=p[0]),p="string"==typeof p?p.toLowerCase():p),h[f]=p;return h}}).call(this)},{"../../viz/helpers/d3functions/aggs.js":247,"./color.js":95,"./text.js":98,"./value.js":99}],98:[function(e,t,n){var r=e("./value.js"),i=e("../../object/validate.js"),a=e("../../util/uniques.js");t.exports=function(e,t,n){"number"!=typeof n&&(n=e.depth.value);var o,s=e.id.nesting[n];e.text.nesting&&i(e.text.nesting)?o=e.text.nesting[s]?e.text.nesting[s]:e.text.value:(o=[],e.text.value&&n===e.depth.value&&o.push(e.text.value),o.push(s)),o instanceof Array||(o=[o]);var l=[];if(i(t)&&"d3po"in t&&t.d3po.text)l.push(t.d3po.text.toString()),l.push(e.format.value(t.d3po.text.toString(),{vars:e,data:t}));else{var u=i(t)?t:void 0;u&&t[e.id.value]instanceof Array?t=t[e.id.value]:t instanceof Array||(t=[t]),o.forEach(function(n){var i=a(t,n,r,e,s);i.length&&(i.length>1&&(i=i.filter(function(e){return e instanceof Array||"string"==typeof e&&e.indexOf(" < ")<0})),1===(i=i.map(function(t){return t instanceof Array?(t=t.filter(function(e){return e})).map(function(t){return e.format.value(t.toString(),{vars:e,data:u,key:n})}):t?e.format.value(t.toString(),{vars:e,data:u,key:n}):void 0})).length&&(i=i[0]),l.push(i))})}return l}},{"../../object/validate.js":207,"../../util/uniques.js":245,"./value.js":99}],99:[function(e,t,n){(function(){var n,r,i,a,o,s,l,u,c,f;c=e("../../object/validate.js"),u=e("../../util/uniques.js"),l=function(e,t,a,o){var s,l,f,d;if(l=c(t),"function"==typeof a&&l)return a(t,e);if(l){if(a in t)return t[a];if(s=e.data.cacheID+"_"+o,n(t,s,e),a in t.d3po.data[s])return t.d3po.data[s][a];if(o in t)t=t[o];else{if(!(e.id.value in t))return null;if(t=t[e.id.value],o!==a&&(f=i(e,t,o,e.id.value)),null==f&&(f=r(e,t,o,e.id.value)),null==f)return null;if(o===a)return f;t=f}}return t instanceof Array&&!c(t[0])&&(t=u(t)),t instanceof Array&&c(t[0])&&(d=u(t,a)).length?d:(d=i(e,t,a,o))?d:d=r(e,t,a,o)},i=function(e,t,n,r){var i;return e.data.viz instanceof Array&&n in e.data.keys&&(i=u(s(e.data.viz,t,r),n)),i&&i.length?i:null},r=function(e,t,n,r){var i,a,o,l;if("attrs"in e&&e.attrs.value&&n in e.attrs.keys)if((i=c(e.attrs.value)&&r in e.attrs.value?e.attrs.value[r]:e.attrs.value)instanceof Array){if((o=u(s(i,t,r),n)).length)return o}else if(t instanceof Array){if((i=[function(){var e,n,r;if(a in i){for(r=[],e=0,n=t.length;e<n;e++)a=t[e],r.push(i[a]);return r}}()]).length&&(l=u(i,n)).length)return l}else if(t in i)return i[t][n];return null},s=function(e,t,n){return t instanceof Array?e.filter(function(e){return t.indexOf(e[n])>=0}):e.filter(function(e){return e[n]===t})},n=function(e,t,n){return"d3po"in e||(e.d3po={}),"data"in e.d3po||(e.d3po.data={}),!(n.data.changed||n.attrs&&n.attrs.changed)&&t in e.d3po.data||(e.d3po.data[t]={}),e},f=function(e,t,n,r,i){var a,o,s,l,u,f,d;if(null===i)return i;f="time"in e&&e.time.value===r,i instanceof Array||(i=[i]);for(s=l=0,u=i.length;l<u;s=++l)d=i[s],f&&null!==d&&d.constructor!==Date&&(4===(d+="").length&&parseInt(d)+""===d&&(d+="/01/01"),"Invalid Date"!==(o=new Date(d))&&(i[s]=o));return 1===i.length&&(i=i[0]),null===i||!c(t)||"string"!=typeof r||r in t||(a=e.data.cacheID+"_"+n,t.d3po.data[a][r]=i),i},o=function(e,t,n,r){var i,a,o,s,d;for(d=[],a=0,o=t.length;a<o;a++)i=t[a],c(i)?(s=l(e,i,n,r),d.push(f(e,i,r,n,s))):d.push(i);return"number"!=typeof d[0]&&(d=u(d)),1===d.length?d[0]:d},a=function(e,t,n,r){var i,a;return n?"number"==typeof n?n:(i=c(t),r||(r=e.id.value),i&&t.values instanceof Array?a=o(e,t.values,n,r):i&&t[n]instanceof Array?a=o(e,t[n],n,r):t instanceof Array?a=o(e,t,n,r):(a=l(e,t,n,r),a=f(e,t,r,n,a)),a):null},t.exports=a}).call(this)},{"../../object/validate.js":207,"../../util/uniques.js":245}],100:[function(e,t,n){(function(){t.exports=function(e){var t,n,r;for(var i in["div","svg"].indexOf(e)<0&&(e="div"),n={position:"absolute",left:"-9999px",top:"-9999px",visibility:"hidden",display:"block"},t="div"===e?{}:{position:"absolute"},r=d3.select("body").selectAll(e+".d3po_tester").data([0]).join(e).classed("d3po_tester",!0),n)r.style(i,n[i]);for(var i in t)r.attr(i,t[i]);return r}}).call(this)},{}],101:[function(e,t,n){t.exports={dev:{accepted:"{0} ليس قيمة مقبولة لـ{1}، يرجى إستخدام أحد الإجراءات التالية: {2}.",noChange:"لم يتم تحديث {0} بسبب عدم وجود تغيرات عليه.",noContainer:"الحاوية غير موجودة في الصفحة {0}.",of:"من",oldStyle:"تم دمج الخصائص الشكلية لـ{0} داخل .{1}().",sameEdge:"لا يمكن لحواف الشكل أن تكون متصله بنفسها، سيتم إزالة هذه الحواف تلقائيًا {0}.",set:"تم حفظ {0}.",setLong:"تم حفظ {0} بالقيمة {1}.",setContainer:"يرجى تحديد عنصر الحاوية بإستخدام .container()."},error:{accepted:"{0} ليس {1} مقبول للشكل البياني {2}، رجاءً إستخدم أحد هذه الطرق: {3}.",connections:"لا يوجد روابط متصلة مع {0}.",data:"البيانات غير متوفرة.",dataYear:"البيانات غير متوفرة لـ{0}.",lib:"يتطلب رسم الشكل البياني {0} توفر المكتبة البرمجية {1}.",libs:"يتطلب رسم الشكل البياني {0} توفرهذه المكتبات البرمجية: {1}.",method:"يتطلب الرسم البياني {0} وجود الدالة {1}.",methods:"يتطلب الرسم البياني {0} وجود الدوال التالية: {1}."},lowercase:[],method:{active:"أجزاء نشطة",color:"لون",depth:"عمق",dev:"مُفصَّل",focus:"تركيز",icon:"أيقونة",id:"معرف",height:"طول",labels:"وسم",legend:"مفسِّر",margin:"هامش",messages:"رسائل الحالة",order:"رتِّب",search:"بحث",shape:"شكل",size:"حجم",style:"نمط",temp:"أجزاء مؤقتة",text:"نص",time:"وقت",timeline:"جدول زمني",total:"مجوع الأجزاء",type:"نوع",width:"عرض",x:"محور سيني",y:"محور صادي",zoom:"زوم",mode:"طريقة",mute:"إخفاء",solo:"منفرد"},time:["تاريخ","يوم","شهر","وقت","سنة"],visualization:{bubbles:"فقاعات",chart:"مخطط بياني",geomap:"خريطة جغرافية",line:"مخطط بياني خطّي",network:"شبكة",rings:"خواتم",scatter:"مخطط بياني نقاطي",stacked:"رسم بياني مكدس",treemap:"رسم بياني شجري",bar:"مخطط بياني شريطي",box:"مخطط بياني صنوقي",paths:"مسارات",pie:"مخطط بياني دائري",table:"الجدول"},ui:{and:"و",back:"العودة",collapse:"أنقر للإخفاء",error:"خطأ",expand:"أنقر للتفاصيل",loading:"جار التحميل...",more:"{0} أخرى",moreInfo:"أنقر لمزيد من المعلومات",noResults:"لا يوجد نتائج تطابق {0}.",primary:"الروابط الإتصالية الأساسية",share:"شارك",total:"مجموع",values:"القيم",including:"بما فيها",or:"أو",iqr:"مجموعة الشرائح الربعية ل{0}",max:"الحد الأعلى",min:"الحد الأدنى",percentile:"المئين {0}",tukey_bottom:"التوكي الأسفل",tukey_top:"التوكي الأعلى",quartile_first:"الربع الأول",quartile_third:"الربع الثالث",median:"وسيط"},message:{data:"البيانات تحت التحليل",draw:"رسم المخطط البياني",initializing:"تهيئة {0}",loading:"تحميل البيانات",tooltipReset:"إعادة تهيئة التفاصيل المنبثقة",ui:"تحديث واجهة المستخدم"},uppercase:[]}},{}],102:[function(e,t,n){t.exports={format:{decimal:",",thousands:".",grouping:[3],currency:[""," €"],dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]},error:{accepted:"{0} ist kein gültiger {1} für {2}-Darstellungen. Benutzen Sie bitte: {3}.",connections:"Keine Verbindungen verfügbar für {0}.",data:"Keine Daten verfügbar",dataYear:"Für {0} sind keine Daten verfügbar.",lib:"{0}-Darstellungen erfordern das Laden der Bibliothek {1}.",libs:"{0}-Darstellungen erfordern das Laden folgender Bibliotheken: {1}.",method:"{0}-Darstellungen erfordern die Methode {1}.",methods:"Weitere Einstellungen für folgende Methoden {1} sind bei {0}-Darstellungen erforderlich."},lowercase:["ein","ein","und","wie","bei","aber","durch","für","von","wenn","in","in","in der Nähe","noch","von","auf","auf","oder","pro","das","die","zu","mit","über","gegen","gegen."],method:{active:"aktive Segmente",color:"Farbe",depth:"Tiefe",dev:"ausführlich",focus:"Fokus",icon:"Symbol",id:"Kennung",height:"Höhe",labels:"Beschriftungen",legend:"Legende",margin:"Rand",messages:"Statusmeldungen",order:"Reihenfolge",search:"Suche",shape:"Form",size:"Größe",style:"Stil",temp:"temporäre Segmente",text:"Text",time:"Zeit",timeline:"Zeitleiste",total:"Segmente gesamt",type:"Typ",width:"Breite",x:"x-Achse",y:"y-Achse",zoom:"Zoom",mode:"Modus",mute:"ausblenden",solo:"isolieren"},time:["Datum","Tag","Monat","Zeit","Jahr"],visualization:{bubbles:"Blasen",chart:"Diagramm",geomap:"Karte",line:"Liniendiagramm",network:"Netzwerk",rings:"Ringe",scatter:"Punktdiagramm",stacked:"Gestapelte Fläche",treemap:"Baumdiagramm",bar:"Balkendiagramm",box:"Boxplot",paths:"Pfade",pie:"Kreisdiagramm",table:"Tabelle"},ui:{and:"und",back:"zurück",collapse:"Zum Ausblenden klicken",error:"Fehler",expand:"Zum Einblenden klicken",loading:"Lade...",more:"{0} weitere",moreInfo:"Für zusätzliche Informationen klicken",noResults:"Keine Ergebnisse für {0} gefunden.",primary:"Primäre Verbindungen",share:"verteilung",total:"gesamt",values:"Werte",including:"einschließlich",or:"oder",iqr:"Interquartilsabstände {0}",max:"Maximalwert",min:"Minimalwert",percentile:"Perzentil P{0}",tukey_bottom:"Unterer Ausreißer",tukey_top:"Oberer Ausreißer",quartile_first:"Unteres Quartil Q1",quartile_third:"Oberes Quartil Q3",median:"Medianwert"},message:{data:"analysiere Daten",draw:"Darstellung wird gerendert",initializing:"initialisiere {0}",loading:"Daten werden geladen",tooltipReset:"Tooltips zurücksetzen",ui:"aktualisiere Oberfläche"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","BIP","HVAC","ID","IT","FuE","TV","UI"]}},{}],103:[function(e,t,n){(function(){t.exports={dev:{accepted:"{0} is not an accepted value for {1}, please use one of the following: {2}.",noChange:"{0} was not updated because it did not change.",noContainer:"cannot find a container on the page matching {0}.",of:"of",oldStyle:"style properties for {0} have now been embedded directly into .{1}().",sameEdge:"edges cannot link to themselves. automatically removing self-referencing edge {0}.",set:"{0} has been set.",setLong:"{0} has been set to {1}.",setContainer:"please define a container div using .container()"},error:{accepted:"{0} is not an accepted {1} for {2} visualizations, please use one of the following: {3}.",connections:"no connections available for {0}.",data:"no data available",dataYear:"no data available for {0}.",lib:"{0} visualizations require loading the {1} library.",libs:"{0} visualizations require loading the following libraries: {1}.",method:"{0} visualizations require setting the {1} method.",methods:"{0} visualizations require setting the following methods: {1}."},format:{decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%A, %B %-d, %Y %X",date:"%-m/%-d/%Y",time:"%I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},lowercase:["a","an","and","as","at","but","by","for","from","if","in","into","near","nor","of","on","onto","or","per","that","the","to","with","via","vs","vs."],message:{data:"analyzing data",draw:"drawing visualization",initializing:"initializing {0}",loading:"loading data",tooltipReset:"resetting tooltips",ui:"updating ui"},method:{active:"active segments",color:"color",depth:"depth",dev:"verbose",focus:"focus",icon:"icon",id:"id",height:"height",labels:"labels",legend:"legend",margin:"margin",messages:"status messages",mode:"mode",mute:"hide",order:"order",search:"search",shape:"shape",size:"size",solo:"isolate",style:"style",temp:"temporary segments",text:"text",time:"time",timeline:"timeline",total:"total segments",type:"type",width:"width",x:"x axis",y:"y axis",zoom:"zoom"},time:["date","day","month","time","year"],timeFormat:{FullYear:"%Y",Month:"%B",MonthSmall:"%b",Date:"%A %-d",DateSmall:"%-d",Hours:"%I %p",Minutes:"%I:%M",Seconds:"%Ss",Milliseconds:"%Lms","FullYear-Month":"%b %Y","FullYear-Date":"%-m/%-d/%Y","Month-Date":"%b %-d","Hours-Minutes":"%I:%M %p","Hours-Seconds":"%I:%M:%S %p","Hours-Milliseconds":"%H:%M:%S.%L","Minutes-Seconds":"%I:%M:%S %p","Minutes-Milliseconds":"%H:%M:%S.%L","Seconds-Milliseconds":"%H:%M:%S.%L"},ui:{and:"and",back:"back",collapse:"click to collapse",error:"error",expand:"click to expand",including:"including",iqr:"interquartile range for {0}",loading:"loading...",max:"maximum",median:"median",min:"minimum",more:"{0} more",moreInfo:"click for more info",or:"or",noResults:"no results matching {0}.",percentile:"{0} percentile",primary:"primary connections",quartile_first:"first quartile",quartile_third:"third quartile",share:"share",total:"total",tukey_bottom:"bottom tukey",tukey_top:"top tukey",values:"values"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","ER","GDP","HVAC","ID","IT","PCP","R&D","TV","UI"],visualization:{bar:"Bar Chart",box:"Box Plot",bubbles:"Bubbles",chart:"Chart",geomap:"Geo Map",line:"Line Plot",network:"Network",paths:"Paths",pie:"Pie Chart",rings:"Rings",scatter:"Scatter Plot",stacked:"Stacked Area",table:"Table",treemap:"Tree Map"}}}).call(this)},{}],104:[function(e,t,n){t.exports={format:{decimal:",",thousands:".",grouping:[3],currency:[""," €"],dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],shortDays:["dom","lun","mar","mié","jue","vie","sáb"],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],shortMonths:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"]},dev:{accepted:"{0} no es un valor aceptado para {1}, por favor utilice uno de los siguientes: {2}.",noChange:"{0} no se actualiza porque no cambió.",noContainer:"no se puede encontrar un contenedor en la página correspondiente a {0}.",of:"de",oldStyle:"propiedades de estilo para {0} ahora se han incorporado directamente en. {1} ().",sameEdge:"los vínculos no se pueden enlazar con si mismos. eliminando automáticamente el vínculo {0} que se autorreferencia.",set:"{0} se ha establecido.",setLong:"{0} ha sido establecido a {1}.",setContainer:"defina un div contenedor utilizando .container ()"},error:{accepted:"{0} no es un {1} aceptado para visualizaciones de {2}, por favor utilice uno de los siguientes: {3}.",connections:"no hay conexiones disponibles para {0}.",data:"No hay datos disponibles",dataYear:"no hay datos disponibles para {0}.",lib:"{0} visualizaciones requieren cargar las siguientes librerías: {1}.",libs:"{0} visualizaciones requieren cargar las siguientes librerías: {1}.",method:"{0} visualizaciones requieren establecer el ​​método {1}.",methods:"{0} visualizaciones requieren establecer los siguientes métodos: {1}."},lowercase:["una","y","en","pero","en","de","o","el","la","los","las","para","a","con"],method:{active:"segmentos activos",color:"color",depth:"profundidad",dev:"detallado",focus:"foco",icon:"ícono",id:"id",height:"alto",labels:"rótulo",legend:"leyenda",margin:"margen",messages:"mensajes de estado",order:"orden",search:"búsqueda",shape:"forma",size:"tamaño",style:"estilo",temp:"segmentos temporales",text:"texto",time:"tiempo",timeline:"línea de tiempo",total:"segmentos totales",type:"tipo",width:"anchura",x:"eje x",y:"eje Y",zoom:"zoom",mode:"modo",mute:"ocultar",solo:"aislar"},time:["fecha","día","mes","hora","año"],visualization:{bubbles:"Burbujas",chart:"Gráfico",geomap:"Mapa",line:"Gráfico de linea",network:"Red",rings:"Anillos",scatter:"Gráfico De Dispersión",stacked:"Área Apilada",treemap:"Tree Map",bar:"Gráfico De Barras",box:"Diagrama de Cajas",paths:"Caminos",pie:"Gráfico de Pastel",table:"Tabla"},ui:{and:"y",back:"atrás",collapse:"click para cerrar",error:"error",expand:"haga clic para ampliar",loading:"Cargando ...",more:"{0} más",moreInfo:"clic para más información",noResults:"no se encontraron resultados para {0}.",primary:"relaciones principales",share:"participación",total:"total",values:"valores",including:"Incluyendo",or:"o",iqr:"rango intercuartil para {0}",max:"máximo",min:"mínimo",percentile:"{0} percentil",tukey_bottom:"Tukey inferior",tukey_top:"la parte superior de Tukey",quartile_first:"primer cuartil",quartile_third:"tercer cuartil",median:"mediana"},message:{data:"analizando los datos",draw:"visualizando",initializing:"inicializando {0}",loading:"cargando datos",tooltipReset:"restableciendo las descripciones emergentes",ui:"actualizando la interfaz de usuario"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","PIB","HVAC","ID","TI","I&D","TV","UI"]}},{}],105:[function(e,t,n){t.exports={format:{decimal:",",thousands:".",grouping:[3],currency:[""," €"],dateTime:"%A, le %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],shortMonths:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."]},dev:{accepted:"{0} n'est pas une option valide pour {1}, les valeurs possibles sont: {2}.",noChange:"{0} n'a pas été mis à jour car inchangé.",noContainer:"impossible de trouver un contenant correspondant à {0}.",of:"de",oldStyle:"les propriétés de {0} ont été imbriquées dans .{1}().",sameEdge:"un arc ne peut pas boucler sur lui même. L'auto-référence est automatiquement éliminée {0}.",set:"{0} a été mis à jour.",setLong:"{0} a été mis à jour à {1}.",setContainer:"merci de choisir un div qui utilise .container()"},error:{accepted:"{0} n'est pas correct {1} pour {2} visualisations, merci d'utilisez une des options suivantes: {3}.",connections:"Pas de connections disponibles pour {0}.",data:"Pas de données disponibles",dataYear:"Pas de données disponibles pour {0}.",lib:"La visualisation de {0} nécessite le chargement de la librairie {1}.",libs:"La visualisation de {0} nécessite le chargement des librairies {1}.",method:"La visualisation du {0} exige la définition de {1}.",methods:"La visualisation du {0} exige les définitions de {1}."},lowercase:["un","une","de","des","et","mais","les","ou","pour","avec","comme","par","vers","si","dans","près","ni","dessus","que","le","la","via","sinon","alors"],method:{active:"segments actifs",color:"couleur",depth:"profondeur",dev:"verbeux",focus:"focus",icon:"ícone",id:"id",height:"hauteur",labels:"labels",legend:"légende",margin:"marge",messages:"messages",order:"ordre",search:"recherche",shape:"format",size:"taille",style:"style",temp:"segments temporaires",text:"texte",time:"temps",timeline:"ligne temporelle",total:"segments totaux",type:"type",width:"largeur",x:"axe x",y:"axe y",zoom:"zoom",mode:"mode",mute:"cacher",solo:"isoler"},time:["année","date","jour","heure","mois"],visualization:{bubbles:"Bulles",chart:"Graphique",geomap:"Carte",line:"Courbes",network:"Réseau",rings:"Anneaux",scatter:"Nuage de points",stacked:"Aires empilées",treemap:"Arbre",bar:"Diagramme en barres",box:"Boîtes à Moustaches",paths:"Chemins",pie:"Camembert",table:"Table"},ui:{and:"et",back:"retour",collapse:"clic pour réduire",error:"erreur",expand:"clic pour agrandir",loading:"chargement ...",more:"plus {0}",moreInfo:"clic pour plus d'information",noResults:"pas de résultat correspondant à {0}.",primary:"connections primaires",share:"part",total:"total",values:"valeurs",including:"incluant",or:"ou",iqr:"gamme interquartile pour {0}",max:"maximum",min:"le minimum",percentile:"{0} percentile",tukey_bottom:"tukey bas",tukey_top:"top tukey",quartile_first:"premier quartile",quartile_third:"le troisième quartile",median:"médian"},message:{data:"analyse des données",draw:"tracé en cours",initializing:"Initialisation {0}",loading:"chargement",tooltipReset:"réinitialisation des bulles",ui:"rafraichissement de l'interface"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","PIB","HVAC","ID","IT","TV","UI"]}},{}],106:[function(e,t,n){t.exports={format:{decimal:".",thousands:",",grouping:[3],currency:["₩",""],dateTime:"%Y/%m/%d %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["오전","오후"],days:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],shortDays:["일","월","화","수","목","금","토"],months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],shortMonths:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"]},error:{accepted:"{0}하지 허용 {1} {2} 시각화는 다음 중 하나를 사용하십시오에 대해 : {3}.",connections:"{0}에 대한 연결이 없음.",data:"자료 없음",dataYear:"{0}에 대한 자료가 없음.",lib:"{0} 시각화는 {1} 라이브러리를로드 할 필요합니다.",libs:"{0} 시각화는 다음과 같은 라이브러리를로드 할 필요 : {1}.",method:"{0} 시각화를 위해 {1} 메서드를 설정해야 한다.",methods:"{0} 시각화를 위해 다음과 같은 메서드를 설정해야한다: {1}."},lowercase:[""],method:{active:"활성 세그먼트",color:"색",depth:"깊이",dev:"풀어서",focus:"집중하다",icon:"상",id:"신분증",height:"높이",labels:"라벨",legend:"범례",margin:"여유",messages:"상태 메시지",order:"주문",search:"수색",shape:"모양",size:"크기",style:"스타일",temp:"임시 세그먼트",text:"본문",time:"시각",timeline:"타임 라인",total:"총 세그먼트",type:"유형",width:"폭",x:"X 축",y:"Y 축",zoom:"줌",mode:"모드",mute:"숨김",solo:"독주"},time:["날짜","요일","월","시간","년"],visualization:{bubbles:"버블 차트",chart:"차트",geomap:"지도형",line:"선형 그래프",network:"네트워크 그래프",rings:"반지",scatter:"산포도",stacked:"누적 된 지역",treemap:"트리 맵",bar:"막대 차트",box:"박스 플롯",paths:"경로",pie:"파이 차트",table:"탁자"},ui:{and:"과",back:"뒤로",collapse:"축소하려면 클릭",error:"오류",expand:"확장하려면 클릭",loading:"로드 중 ...",more:"{0} 이상",moreInfo:"추가 정보를 위해 클릭하십시오",noResults:"일치하는 결과값이 없음 {0}.",primary:"기본 연결",share:"비중",total:"합계",values:"값",including:"...을 포함하여",or:"또는",iqr:"대한 사 분위 범위 {0}",max:"최고",min:"최저한의",percentile:"{0} 백분위 수",tukey_bottom:"바닥 Tukey에",tukey_top:"상단 Tukey에",quartile_first:"1 분위",quartile_third:"3 분위",median:"중앙값"},message:{data:"데이터 분석 중",draw:"데이터 시각화 중",initializing:"초기화 {0}",loading:"데이터 로딩 중",tooltipReset:"툴팁을 재설정",ui:"UI 업데이트 중"},uppercase:["CEO","최고 경영자","최고 재무 책임자 (CFO)","CFO는","CNC","COO","구구","CPU","CPU에","GDP","HVAC","ID","IT","R & D","TV","UI"]}},{}],107:[function(e,t,n){t.exports={format:{decimal:",",thousands:".",grouping:[3],currency:[""," ден."],dateTime:"%A, %e %B %Y г. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["недела","понеделник","вторник","среда","четврток","петок","сабота"],shortDays:["нед","пон","вто","сре","чет","пет","саб"],months:["јануари","февруари","март","април","мај","јуни","јули","август","септември","октомври","ноември","декември"],shortMonths:["јан","фев","мар","апр","мај","јун","јул","авг","сеп","окт","ное","дек"]},error:{accepted:"{0} не е прифатлива за {1} {2} визуелизација, ве молиме користете една од следниве: {3}.",connections:"не е достапна за врски {0}.",data:"нема податоци",dataYear:"Не е достапен за податоци {0}.",lib:"{0} визуализации бараат вчитување на библиотеката {1} .",libs:"{0} визуализации бараат вчитување на следниве библиотеки: {1}.",method:"{0} визуализации бара поставување на {1} методот.",methods:"{0} визуализации бараат поставување на следниве методи: {1}."},lowercase:["a","и","во","но","на","или","да","се","со"],method:{active:"активни сегменти",color:"боја",depth:"длабочина",dev:"опширно",focus:"фокус",icon:"икона",id:"проект",height:"височина",labels:"етикети",legend:"легенда",margin:"маргина",messages:"пораки за статусот",order:"со цел",search:"барај",shape:"форма",size:"големина",style:"стил",temp:"привремени сегменти",text:"текст",time:"време",timeline:"времеплов",total:"Вкупно сегменти",type:"тип",width:"ширина",x:"x оската",y:"Y оската",zoom:"зум",mode:"режим",mute:"се скрие",solo:"изолирање"},time:["датум","ден","месец","време","година"],visualization:{bubbles:"меурчиња",chart:"Графикон",geomap:"Гео мапа",line:"Линиски график",network:"мрежа",rings:"прстени",scatter:"Распрскан график",stacked:"Наредена површина",treemap:"Мапа во вид на дрво",bar:"бар шема",box:"правоаголен дијаграм",paths:"патеки",pie:"пита графикон",table:"Табела"},ui:{and:"и",back:"назад",collapse:"кликни за да се собере",error:"грешка",expand:"Кликни за проширување",loading:"Се вчитува ...",more:"{0} повеќе",moreInfo:"кликнете за повеќе информации",noResults:"Не се пронајдени резултати за појавување на {0}.",primary:"основните врски",share:"удел",total:"Вкупниот",values:"вредности",including:"Вклучувајќи",or:"или",iqr:"interquartile опсег за {0}",max:"максималната",min:"минимум",percentile:"{0} перцентил",tukey_bottom:"дното Tukey",tukey_top:"Топ Tukey",quartile_first:"првиот квартал",quartile_third:"третиот квартал",median:"средната"},message:{data:"анализа на податоци",draw:"цртање на визуелизација",initializing:"иницијализација {0}",loading:"податоци за товарење",tooltipReset:"ресетирање на објаснувањата",ui:"ажурирање на кориничкиот интерфејс"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","GDP","HVAC","ID","IT","R&D","TV","UI"]}},{}],108:[function(e,t,n){t.exports={format:{decimal:",",thousands:".",grouping:[3],currency:["R$",""],dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]},dev:{accepted:"{0} não é um valor válido para {1}, por favor use um dos seguintes procedimentos: {2}.",noChange:"{0} não foi atualizado porque ele não mudou.",noContainer:"Não foi possível encontrar um local na página correspondente a {0}.",of:"do",oldStyle:"propriedades de estilo para {0} já foram incorporados diretamente no. {1} ().",sameEdge:"bordas não podem vincular a si mesmos. removendo automaticamente borda de auto-referência {0}.",set:"{0} foi definido.",setLong:"{0} foi definido para {1}.",setContainer:"por favor, defina um div utilizando .container()"},error:{accepted:"{0} não é um {1} reconhecido para visualizações {2}, favor usar um dos seguintes procedimentos: {3}.",connections:"Não há conexões disponíveis para {0}.",data:"Não há dados disponíveis",dataYear:"Não há dados disponíveis para {0}.",lib:"A visualização {0} necessita que seja carregado a biblioteca {1}.",libs:"A visualização {0} necessita que seja carregado as bibliotecas {1}.",method:"A visualização {0} exige a definição do método {1}.",methods:"A visualização {0} exige a definição dos métodos {1}."},lowercase:["um","uma","e","como","em","no","na","mas","por","para","pelo","pela","de","do","da","se","perto","nem","ou","que","o","a","com","v"],method:{active:"segmentos activos",color:"cor",depth:"profundidade",dev:"verboso",focus:"foco",icon:"ícone",id:"identificador",height:"altura",labels:"etiquetas",legend:"legenda",margin:"margem",messages:"mensagens de status",order:"ordenar",search:"pesquisar",shape:"forma",size:"tamanho",style:"estilo",temp:"segmentos temporários",text:"texto",time:"Tempo",timeline:"cronograma",total:"segmentos totais",type:"digitar",width:"largura",x:"eixo x",y:"eixo y",zoom:"zoom",mode:"modo",mute:"ocultar",solo:"isolar"},time:["data","dia","mês","hora","ano"],visualization:{bubbles:"Bolhas",chart:"Gráfico",geomap:"Mapa",line:"Gráfico de Linha",network:"Rede",rings:"Anéis",scatter:"dispersão",stacked:"Evolução",treemap:"Tree Map",bar:"Gráfico de Barras",box:"box Plot",paths:"caminhos",pie:"Carta de torta",table:"Mesa"},ui:{and:"e",back:"voltar",collapse:"clique para entrar em colapso",error:"erro",expand:"clique para expandir",loading:"carregando ...",more:"mais {0}",moreInfo:"Clique para mais informações",noResults:"nenhum resultado para {0}.",primary:"conexões primárias",share:"participação",total:"total",values:"valores",including:"Incluindo",or:"ou",iqr:"intervalo interquartil para {0}",max:"máximo",min:"mínimo",percentile:"{0} percentil",tukey_bottom:"tukey bottom",tukey_top:"tukey topo",quartile_first:"primeiro quartil",quartile_third:"terceiro quartil",median:"mediana"},message:{data:"analisando dados",draw:"desenhando visualização",initializing:"inicializando {0}",loading:"carregando dados",tooltipReset:"redefinindo as dicas",ui:"atualizando interface"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","PIB","HVAC","ID","TI","P&D","TV","IU"]}},{}],109:[function(e,t,n){t.exports={format:{decimal:",",thousands:".",grouping:[3],currency:["€",""],dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]},error:{accepted:"{0} não é uma {1} válida para a visualização {2}, por favor escolha uma das seguintes: {3}.",connections:"não existem ligações disponíveis para {0}.",data:"não existem dados disponíveis",dataYear:"não existem dados disponíveis para {0}.",lib:"a visualização {0} necessita que a biblioteca {1} seja carregada.",libs:"a visualização {0} necessita que as seguintes bibliotecas sejam carregadas: {1}.",method:"A visualização {0} exige a definição do método {1}.",methods:"A visualização {0} exige a definição dos seguintes métodos {1}."},lowercase:["um","uma","e","como","em","no","na","mas","por","para","pelo","pela","de","do","da","se","perto","nem","ou","que","o","a","com","v"],method:{active:"segmentos activos",color:"cor",depth:"profundidade",dev:"verboso",focus:"foco",icon:"ícone",id:"identificador",height:"altura",labels:"etiquetas",legend:"legenda",margin:"margem",messages:"estado",order:"ordenar",search:"pesquisar",shape:"forma",size:"tamanho",style:"estilo",temp:"segmentos temporários",text:"texto",time:"tempo",timeline:"linha temporal",total:"segmentos totais",type:"digitar",width:"largura",x:"eixo dos xx",y:"eixo dos yy",zoom:"zoom",mode:"modo",mute:"ocultar",solo:"isolar"},time:["data","dia","mês","hora","ano"],visualization:{bubbles:"Bolhas",chart:"Diagrama",geomap:"Mapa",line:"Gráfico de Linha",network:"Grafo",rings:"Anéis",scatter:"Gráfico de Dispersão",stacked:"Gráfico de Área",treemap:"Tree Map",bar:"Gráfico de Barras",box:"Diagrama de Caixa e Bigodes",paths:"caminhos",pie:"Gráfico de Setores",table:"Mesa"},ui:{and:"e",back:"voltar",collapse:"Clique para colapsar",error:"erro",expand:"clique para expandir",loading:"a carregar ...",more:"mais {0}",moreInfo:"Clique para mais informações",noResults:"nenhum resultado para {0}.",primary:"ligações principais",share:"proporção",total:"total",values:"valores",including:"Incluindo",or:"ou",iqr:"intervalo interquartil para {0}",max:"máximo",min:"mínimo",percentile:"{0} percentil",tukey_bottom:"tukey bottom",tukey_top:"tukey topo",quartile_first:"primeiro quartil",quartile_third:"terceiro quartil",median:"mediana"},message:{data:"a analisar os dados",draw:"a desenhar a visualização",initializing:"a inicializar {0}",loading:"a carregar os dados",tooltipReset:"a actualizar as caixas de informação",ui:"a actualizar o interface"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","PIB","HVAC","ID","TI","I&D","TV","IU"]}},{}],110:[function(e,t,n){t.exports={format:{decimal:",",thousands:" ",grouping:[3],currency:[""," руб."],dateTime:"%A, %e %B %Y г. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],shortDays:["вс","пн","вт","ср","чт","пт","сб"],months:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],shortMonths:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"]},error:{accepted:"{0} не является обслуживаемым {1} для {2} визуализаций, пожалуйста, используйте одно из следующих действий: {3}.",connections:"нет соединений, доступных для {0}.",data:"данные недоступны",dataYear:"нет данных для {0}.",lib:"{0} визуализаций требуют загрузки {1} библиотеки.",libs:"{0} визуализаций требует загрузки следующие библиотеки: {1}.",method:"{0} визуализаций требуют установки {1} метод.",methods:"{0} визуализаций требуют установки следующих методов: {1}."},lowercase:["и","как","в","но","для","из","если в","в","недалеко","ни","на","на","или","в","что","к","с","с помощью","против","против"],method:{active:"активные сегменты",color:"цвет",depth:"глубина",dev:"подробный",focus:"фокус",icon:"значок",id:"Я бы",height:"высота",labels:"надписи",legend:"легенда",margin:"поле",messages:"сообщения о состоянии",order:"заказ",search:"поиск",shape:"форма",size:"размер",style:"стиль",temp:"временные сегменты",text:"текст",time:"время",timeline:"график",total:"всего сегментов",type:"тип",width:"ширина",x:"ось х",y:"ось Y",zoom:"масштаб",mode:"Режим",mute:"скрывать",solo:"изолировать"},time:["дата","день недели","месяц","время","год"],visualization:{bubbles:"Пузыри",chart:"Диаграмма",geomap:"Карта Geo",line:"линия Участок",network:"сеть",rings:"Кольца",scatter:"Scatter Plot",stacked:"Stacked Площадь",treemap:"Дерево Карта",bar:"гистограмма",box:"Box Участок",paths:"пути",pie:"Круговая диаграмма",table:"Таблица"},ui:{and:"а также",back:"назад",collapse:"нажмите, чтобы свернуть",error:"ошибка",expand:"нажмите, чтобы развернуть",loading:"загрузка ...",more:"{0} более",moreInfo:"нажмите для получения дополнительной информации",noResults:"нет результатов, соответствующих {0}.",primary:"первичные соединения",share:"доля",total:"Всего",values:"значения",including:"в том числе",or:"или",iqr:"межквартильный диапазон для {0}",max:"максимальная",min:"минимальный",percentile:"{0} процентиль",tukey_bottom:"нижний Тьюки",tukey_top:"сверху Тьюки",quartile_first:"первый квартиль",quartile_third:"третий квартиль",median:"медиана"},message:{data:"данные анализа",draw:"рисование визуализация",initializing:"инициализацией {0}",loading:"Загрузка данных",tooltipReset:"сброс всплывающих подсказок",ui:"обновление пользовательского интерфейса"},uppercase:["ID"]}},{}],111:[function(e,t,n){t.exports={format:{decimal:",",thousands:".",grouping:[3],currency:["₺",""],dateTime:"%A, %e %B %Y г. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:[""," pm"],days:["pazar","pazartesi","salı","çarşamba","perşembe","cuma","cumartesi"],shortDays:["pazar","pazartesi","salı","çarşamba","perşembe","cuma","cumartesi"],months:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],shortMonths:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"]},dev:{accepted:"{0} {1}, aşağıdakilerden birini kullanın lütfen için kabul değer değildir: {2}.",noChange:"{0} o değişmedi çünkü güncelleştirildi.",noContainer:"sayfa eşleştirme {0} üzerine bir kap bulamıyorum.",of:"arasında",oldStyle:"{0} şimdi doğrudan gömülü olan stil özellikleri. {1} ().",sameEdge:"kenarları kendilerine bağlayamazsınız. otomatik olarak kendi kendine referans kenarı {0} kaldırılıyor.",set:"{0} kurulmuştur.",setLong:"{0} {1} olarak ayarlandı.",setContainer:") (.container Kullanarak bir kapsayıcı div tanımlamak lütfen"},error:{accepted:"{0} değildir kabul edilen {1} {2} görsel, aşağıdakilerden birini kullanın lütfen için: {3}.",connections:"için hiçbir bağlantı {0}.",data:"uygun veri yoktur",dataYear:"için uygun veri yoktur {0}.",lib:"{0} görselleştirme {1} kitaplığı yüklemesinde gerektirir.",libs:"{0} görsel aşağıdaki kitaplıkları yüklemek gerektirir: {1}.",method:"{0} görselleştirme {1} yöntemini ayarlama gerektirir.",methods:"{0} görsel aşağıdaki yöntemleri ayarı gerektirir: {1}."},lowercase:["A","bir","ve benzeri gibi","en ancak tarafından için","IF bölgesi içine yakın","ne","ve","üzerinde","ya da","bu","her üzerine","için olan ile","vs vs."],method:{active:"aktif bölümler",color:"renk",depth:"derinlik",dev:"gereksiz sözlerle dolu",focus:"odak",icon:"ikon",id:"İD",height:"yükseklik",labels:"katmanlar",legend:"lejant",margin:"kenar",messages:"durum iletileri",order:"sipariş",search:"arama",shape:"şekil",size:"boyut",style:"stil",temp:"geçici segmentler",text:"Metin",time:"zaman",timeline:"zaman çizelgesi",total:"toplam segmentler",type:"tip",width:"genişlik",x:"x ekseni",y:"y ekseni",zoom:"yakınlaştırma",mode:"kip",mute:"sakla",solo:"solo"},time:["tarih","gün","ay","saat","yıl"],visualization:{bubbles:"baloncuklar",chart:"Grafik",geomap:"coğrafi Harita",line:"çizgi Arsa",network:"Ağ",rings:"halkalar",scatter:"Dağılım grafiği",stacked:"yığılmış Alan",treemap:"ağaç Haritası",bar:"Bar grafik",box:"kutu Grafiği",paths:"yollar",pie:"Pasta grafik",table:"tablo"},ui:{and:"ve",back:"geri",collapse:"daraltmak için tıklayın",error:"hata",expand:"Genişletmek için tıklayın",loading:"Yükleniyor...",more:"{0} tane daha",moreInfo:"Daha fazla bilgi için tıklayın",noResults:"Eşleşen sonuç yok {0}.",primary:"öncelikli bağlantılar",share:"paylaş",total:"Genel Toplam",values:"değerler",including:"dahil olmak üzere",or:"veya",iqr:"için çeyrekler arası aralık {0}",max:"maksimum",min:"asgari",percentile:"{0} yüzdelik",tukey_bottom:"alt tukey",tukey_top:"üst tukey",quartile_first:"ilk çeyrek",quartile_third:"üçüncü çeyrek",median:"medyan"},message:{data:"analiz verisi",draw:"çizim görselleştirme",initializing:"başlatılıyor {0}",loading:"veri yükleniyor",tooltipReset:"ipuçları sıfırlama",ui:"güncelleme ui"},uppercase:["CEO","CEO'lar","CFO","CFO","CNC","COO","COO","CPU","CPU","GSYİH","HVAC","kimlik","bilişim","Ar-Ge","TV","UI"]}},{}],112:[function(e,t,n){t.exports={format:{decimal:".",thousands:",",grouping:[3],currency:["¥",""],dateTime:"%A %B %e %Y %X",date:"%Y/%-m/%-d",time:"%H:%M:%S",periods:["上午","下午"],days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],shortDays:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],shortMonths:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},error:{accepted:"{0}对于{2}的可视化效果并不是一个可接受的{1}, 请使用如下的一个：{3}.",connections:"没有对{0}可用的连接。",data:"无可用数据",dataYear:"没有数据对{0}可用。",lib:"{0}的可视化要求装载{1}库。",libs:"{0}的可视化需要加载以下库：{1}。",method:"{0}的可视化要求设置{1}方法。",methods:"{0}的可视化要求设置以下方法：{1}。"},lowercase:["一个","和","在","但是","在...里","的","或者","这","向","与...一起"],method:{active:"活跃段",color:"颜色",depth:"深度",dev:"详细",focus:"焦点",icon:"图标",id:"身份认证",height:"高度",labels:"标签",legend:"图例注释",margin:"外边距",messages:"状态消息",order:"规则",search:"搜索",shape:"形状",size:"大小",style:"样式",temp:"暂时性区段",text:"文本",time:"时间",timeline:"时间轴",total:"总段",type:"类型",width:"宽度",x:"X轴",y:"Y轴",zoom:"缩放",mode:"模式",mute:"隐藏",solo:"隔离"},time:["日","星期","月","时间","年"],visualization:{bubbles:"气泡",chart:"图表",geomap:"地理地图",line:"线图",network:"网络",rings:"特性",scatter:"散点图",stacked:"堆积面积图",treemap:"树图",bar:"条图",box:"箱形图",paths:"路径",pie:"饼形图",table:"表"},ui:{and:"和",back:"后面",collapse:"点击合并",error:"错误",expand:"单击以展开",loading:"载入中...",more:"{0}更多",moreInfo:"点击了解更多信息",noResults:"没有结果匹配{0}。",primary:"主要连接",share:"共享",total:"总",values:"值",including:"包括",or:"要么",iqr:"间距范围为{0}",max:"最大值",min:"最低限度",percentile:"{0}百分",tukey_bottom:"底部杜克",tukey_top:"顶部杜克",quartile_first:"第一个四分位数",quartile_third:"第三个四分位数",median:"中位数"},message:{data:"分析数据",draw:"绘制可视化",initializing:"初始化{0}",loading:"加载数据",tooltipReset:"重置工具提示",ui:"更新UI"},uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","GDP","HVAC","ID","电视","用户界面","研发"]}},{}],113:[function(e,t,n){(function(){t.exports={ar_SA:e("./languages/ar_SA.js"),de_DE:e("./languages/de_DE.js"),en_US:e("./languages/en_US.js"),es_ES:e("./languages/es_ES.js"),fr_FR:e("./languages/fr_FR.js"),ko_KR:e("./languages/ko_KR.js"),mk_MK:e("./languages/mk_MK.js"),pt_BR:e("./languages/pt_BR.js"),pt_PT:e("./languages/pt_PT.js"),ru_RU:e("./languages/ru_RU.js"),zh_CN:e("./languages/tr_TR.js"),zh_CN:e("./languages/zh_CN.js")}}).call(this)},{"./languages/ar_SA.js":101,"./languages/de_DE.js":102,"./languages/en_US.js":103,"./languages/es_ES.js":104,"./languages/fr_FR.js":105,"./languages/ko_KR.js":106,"./languages/mk_MK.js":107,"./languages/pt_BR.js":108,"./languages/pt_PT.js":109,"./languages/ru_RU.js":110,"./languages/tr_TR.js":111,"./languages/zh_CN.js":112}],114:[function(e,t,n){(function(){var n,r,i,a,o,s,l,u,c;r=e("../../util/copy.js"),o=e("../console/print.js"),s=e("./process/detect.js"),l=e("./set.js"),u=e("../../string/format.js"),c=e("../../object/validate.js"),t.exports=function(e,t){var n,o,s;for(n in s=[],t)o=t[n],e[n]=r(o),e[n].initialized=a(e,e[n],n),s.push(e.self[n]=i(e,n));return s},a=function(e,t,n,r){var i;for(i in t.previous=!1,t.changed=!1,t.initialized=!1,t.callback=!1,"init"in t&&!("value"in t)&&(t.value=t.init(e),delete t.init),"process"in t&&(t.value=s(e,t,t.value)),t)"global"===i?n in e||(e[n]=[]):"value"!==i&&c(t[i])&&a(e,t[i],i,n);return!0},i=function(e,t){return function(r,i){var a,s,l,f,d,h,p,v;if("function"==typeof(a="accepted"in e[t]?e[t].accepted:null)&&(a=a(e)),a instanceof Array||(a=[a]),r===Object)return e[t];if(!arguments.length&&a.indexOf(void 0)<0)return"value"in e[t]?e[t].value:e[t];if("style"===t&&"object"==typeof r)for(h in v=e.format.locale.value.dev.oldStyle,r)o.warning(u(v,'"'+h+'"',h),h),e.self[h](r[h]);if("font"===t)for(f in"string"==typeof r&&(r={family:r}),p=!0,l=function(e,t,n,r){c(e[n])&&t in e[n]&&(c(e[n][t])?e[n][t].process?e[n][t].value=e[n][t].process(r):e[n][t].value=r:e[n][t]=r)},s=function(e,t,n){var r;if(c(e)){if(p)for(r in e)l(e,t,r,n);else"font"in e&&l(e,t,"font",n);for(r in p=!1,e)s(e[r],t,n)}},r)d=r[f],"secondary"!==f&&(c(d)&&(d=d.value),d&&s(e,f,d));return n(e,t,e,t,r),"function"==typeof i&&(e[t].callback=i),!1===e[t].chainable?e[t].value:e.self}},n=function(e,t,r,i,a){var o,s,u,f;if(["accepted","changed","initialized","previous","process"].indexOf(i)<0)if(f=c(a),u=c(r[i])&&"objectAccess"in r[i]&&!1===r[i].objectAccess,o=f&&(u||!("value"in a)&&(!c(r[i])||!(d3.keys(a)[0]in r[i]))),null===a||!f||o)l(e,t,r,i,a);else if(f)for(s in a)n(e,t,r[i],s,a[s])}}).call(this)},{"../../object/validate.js":207,"../../string/format.js":208,"../../util/copy.js":242,"../console/print.js":83,"./process/detect.js":122,"./set.js":128}],115:[function(e,t,n){(function(){t.exports=function(e){return e||(e=!1),{accepted:[!1,Array,Function,Number,Object,String],callback:{accepted:[!1,Function],value:!1},global:e,process:Array,value:[]}}}).call(this)},{}],116:[function(e,t,n){(function(){var n;n=e("../../../client/rtl.js"),t.exports=function(e){var t;return t=["left","center","right"],!1===e&&t.unshift(!1),t.indexOf(e)<0&&(e="left"),{accepted:t,process:function(e){return n?"left"===e?"right":"right"===e?"left":e:e},value:e}}}).call(this)},{"../../../client/rtl.js":71}],117:[function(e,t,n){(function(){t.exports=function(e){var t;return t=["line-through","none","overline","underline"],!1===e&&t.unshift(!1),t.indexOf(e)<0&&(e="none"),{accepted:t,value:e}}}).call(this)},{}],118:[function(e,t,n){(function(){var n,r;r=e("../../../font/validate.js"),n=["Fira Sans","sans-serif"],t.exports=function(e){return void 0===e&&(e=n),{process:r,value:e}}}).call(this)},{"../../../font/validate.js":137}],119:[function(e,t,n){(function(){t.exports=function(e){var t;return t=["top","middle","bottom"],!1===e&&t.unshift(!1),t.indexOf(e)<0&&(e="bottom"),{accepted:t,mapping:{top:"0ex",middle:"0.5ex",bottom:"1ex"},process:function(e){return this.text=e,this.mapping[e]},value:e}}}).call(this)},{}],120:[function(e,t,n){(function(){t.exports=function(e){var t;return t=["capitalize","lowercase","none","uppercase"],!1===e&&t.unshift(!1),t.indexOf(e)<0&&(e="none"),{accepted:t,value:e}}}).call(this)},{}],121:[function(e,t,n){(function(){t.exports=function(e,t,n){var r;return t.history&&t.history.reset(),e.constructor===String?e.indexOf("/")>=0?(n.url=e,[]):(r=d3.selectAll(e)).size()?r:(e.indexOf(".")>=0&&(n.url=e),[]):e}}).call(this)},{}],122:[function(e,t,n){(function(){var n,r;n=e("../../../util/copy.js"),r=e("../../../array/update.js"),t.exports=function(e,t,i){return t.process===Array?r(n(t.value),i):"object"==typeof t.process&&"string"==typeof i?t.process[i]:"function"==typeof t.process?t.process(i,e,t):i}}).call(this)},{"../../../array/update.js":66,"../../../util/copy.js":242}],123:[function(e,t,n){(function(){var n;n=e("../../../client/css.js"),t.exports=function(e,t,r){return!1===e||e.indexOf("fa-")<0||0===e.indexOf("fa-")&&n("font-awesome")?e:r.fallback}}).call(this)},{"../../../client/css.js":67}],124:[function(e,t,n){(function(){t.exports=function(e,t){var n,r,i,a,o,s,l,u,c,f,d,h,p;if("string"==typeof e){for(n=r=0,o=(e=e.split(" ")).length;r<o;n=++r)p=e[n],e[n]=parseFloat(p,10);e=1===e.length?e[0]:2===e.length?{top:e[0],right:e[1],bottom:e[0],left:e[1]}:3===e.length?{top:e[0],right:e[1],bottom:e[2],left:e[1]}:4===e.length?{top:e[0],right:e[1],bottom:e[2],left:e[3]}:0}if(h=["top","right","bottom","left"],"number"==typeof e)for(i=0,s=h.length;i<s;i++)t[d=h[i]]=e;else for(a=0,l=h.length;a<l;a++)t[d=h[a]]=e[d];for(t.css="",f=[],n=c=0,u=h.length;c<u;n=++c)d=h[n],n&&(t.css+=" "),f.push(t.css+=t[d]+"px");return f}}).call(this)},{}],125:[function(e,t,n){(function(){var n,r,i,a;n=e("../../array/contains.js"),r=e("../../string/format.js"),i=e("../../string/list.js"),a=e("../console/print.js"),t.exports=function(e,t,o,s,l){var u,c,f,d,h,p,v,g;if("function"==typeof t&&(t=t(e)),t instanceof Array||(t=[t]),!1===(c=n(t,o))&&void 0!==o){for(p=[],g=JSON.stringify(o),"string"!=typeof o&&(g='"'+g+'"'),d=0,h=t.length;d<h;d++)"string"==typeof(u=t[d])?p.push('"'+u+'"'):"function"==typeof u?p.push(u.toString().split("()")[0].substring(9)):void 0===u?p.push("undefined"):p.push(JSON.stringify(u));p=i(p,e.format.locale.value.ui.or),e.type&&["mode","shape"].indexOf(s)>=0?(v=e.format.locale.value.error.accepted,f=e.format.locale.value.visualization[e.type.value]||e.type.value,a.warning(r(v,g,s,f,p),s)):(v=e.format.locale.value.dev.accepted,a.warning(r(v,g,l,p),s))}return!c}}).call(this)},{"../../array/contains.js":64,"../../string/format.js":208,"../../string/list.js":209,"../console/print.js":83}],126:[function(e,t,n){(function(){t.exports=function(e){var t;return(t=["auto","optimizeSpeed","crispEdges","geometricPrecision"]).indexOf(e)>=0||(e="crispEdges"),{accepted:t,value:e}}}).call(this)},{}],127:[function(e,t,n){(function(){var n,r;r=e("../../object/validate.js"),n=function(e,t){var i;for(i in e.changed&&(e.changed=!1),"draw"===t&&(e.frozen=!1,e.update=!0,e.first=!1),e)i.indexOf("d3po")<0&&r(e[i])&&n(e[i],i)},t.exports=n}).call(this)},{"../../object/validate.js":207}],128:[function(e,t,n){(function(){var n,r,i,a,o,s,l,u,c;n=e("../../util/copy.js"),r=e("../../util/d3selection.js"),c=e("../../object/validate.js"),i=e("../../object/merge.js"),a=e("../console/print.js"),o=e("./process/detect.js"),s=e("./rejected.js"),l=e("../../string/format.js"),u=e("../../array/update.js"),t.exports=function(e,t,f,d,h){var p,v,g,m,y,b,x,_,w,j,k,z,M,A;if(z="value"!==d&&d&&d!==t?'"'+d+'" '+e.format.locale.value.dev.of+" ."+t+"()":"."+t+"()",p="value"===d&&"accepted"in f?f.accepted:c(f[d])&&"accepted"in f[d]?f[d].accepted:[h],!s(e,p,h,t,z)){if(c(f[d])&&"value"in f[d]&&(j=d,f=f[d],d="value"),"value"===d&&"process"in f&&(h=o(e,f,h)),f[d]instanceof Array||f[d]!==h||void 0===h){if(f.changed=!0,f.loaded&&(f.loaded=!1),"history"in e&&"draw"!==t&&((v=n(f)).method=t,e.history.chain.push(v)),f.previous=f[d],"id"in e&&"value"===d&&"nesting"in f)if("id"!==t){if("object"!=typeof f.nesting&&(f.nesting={}),c(h)){for(b in h)"string"==typeof h[b]&&(h[b]=[h[b]]);f.nesting=i(f.nesting,h),e.id.value in f.nesting||(f.nesting[e.id.value]=h[d3.keys(h)[0]])}else h instanceof Array?f.nesting[e.id.value]=h:f.nesting[e.id.value]=[h];f[d]=f.nesting[e.id.value][0]}else h instanceof Array?(f.nesting=h,"depth"in e&&e.depth.value<h.length?f[d]=h[e.depth.value]:(f[d]=h[0],"depth"in e&&(e.depth.value=0))):(f[d]=h,f.nesting=[h],"depth"in e&&(e.depth.value=0));else"depth"===t?(h>=e.id.nesting.length?e.depth.value=e.id.nesting.length-1:e.depth.value=h<0?0:h,e.id.value=e.id.nesting[e.depth.value],"object"==typeof e.text.nesting&&(w=e.text.nesting[e.id.value])&&(e.text.nesting[e.id.value]="string"==typeof w?[w]:w,e.text.value=w instanceof Array?w[0]:w)):c(f[d])&&c(h)?f[d]=i(f[d],h):f[d]=h;"value"===d&&f.global&&(y=f[d].length>0,(x=j||d)in e&&(y&&e.data[x].indexOf(t)<0||!y&&e.data[x].indexOf(t)>=0)&&(e.data[x]=u(e.data[x],t))),"value"===d&&f.dataFilter&&e.data&&e.data.filters.indexOf(t)<0&&e.data.filters.push(t),e.dev.value&&f.changed&&void 0!==f[d]&&(_=f[d]instanceof Array&&f[d].length>10,m=r(f[d]),M="function"==typeof f[d],null!==(A=_||m||M?null:"string"==typeof f[d]?f[d]:JSON.stringify(f[d]))&&A.length<260?(k=e.format.locale.value.dev.setLong,a.log(l(k,z,'"'+A+'"'))):(k=e.format.locale.value.dev.set,a.log(l(k,z))))}else k=e.format.locale.value.dev.noChange,e.dev.value&&a.comment(l(k,z));"value"===d&&f.callback&&!f.url&&(g="function"==typeof f.callback?f.callback:f.callback.value)&&g(h,e.self)}}}).call(this)},{"../../array/update.js":66,"../../object/merge.js":206,"../../object/validate.js":207,"../../string/format.js":208,"../../util/copy.js":242,"../../util/d3selection.js":243,"../console/print.js":83,"./process/detect.js":122,"./rejected.js":125}],129:[function(e,t,n){var r=e("../console/print.js"),i=e("../../string/format.js");t.exports=function(e){if(e.dev.value){var t="analyzing edges list";r.time(t)}var n=e.types[e.type.value].requirements;n instanceof Array||(n=[n]);var a=n.indexOf("nodes")>=0&&!e.nodes.value;if(a){e.nodes.value=[];var o=[];e.nodes.changed=!0}e.edges.value.forEach(function(t){["source","target"].forEach(function(n){var r=typeof t[e.edges[n]];if("object"!==r)if("number"!==r||a||"number"===e.data.keys[e.id.value])if(a&&o.indexOf(t[e.edges[n]])>=0)t[e.edges[n]]=e.nodes.value.filter(function(r){return r[e.id.value]===t[e.edges[n]]})[0];else{var i={};i[e.id.value]=t[e.edges[n]],t[e.edges[n]]=i}else t[e.edges[n]]=e.nodes.value[t[e.edges[n]]];var s=t[e.edges[n]];a&&o.indexOf(s[e.id.value])<0&&(o.push(s[e.id.value]),e.nodes.value.push(s))}),"keys"in e.data||(e.data.keys={}),e.id.value in e.data.keys||(e.data.keys[e.id.value]=typeof t[e.edges.source][e.id.value])}),e.edges.value=e.edges.value.filter(function(t){var n=t[e.edges.source][e.id.value];if(n===t[e.edges.target][e.id.value]){var a=e.format.locale.value.dev.sameEdge;return r.warning(i(a,'"'+n+'"'),"edges"),!1}return!0}),e.edges.linked=!0,e.dev.value&&r.timeEnd(t)}},{"../../string/format.js":208,"../console/print.js":83}],130:[function(e,t,n){var r=e("./hideelement.js");t.exports=function(e){var t=[e.color.value,e.icon.value,e.keywords.value,e.alt.value,"style"];function n(e,n){[].forEach.call(n.attributes,function(t){if(/^data-/.test(t.name)){var n=t.name.substr(5).replace(/-(.)/g,function(e,t){return t.toUpperCase()});e[n]=t.value}}),t.forEach(function(t){null!==n.getAttribute(t)&&(e[t]=n.getAttribute(t))})}e.text.value||e.self.text("text"),t=t.concat(e.id.nesting),e.self.data({element:e.data.value});var i=e.data.element.value.node().tagName.toLowerCase(),a=e.data.element.value.attr("type"),o=[];if("select"===i){var s=e.data.element.value.node().id;s&&e.self.container({id:s}),e.data.element.value.selectAll("option").each(function(t,r){var i={};if(i.text=d3.select(this).text(),n(i,this),o.push(i),this.selected)for(r=e.id.nesting.length-1;r>=0;r--){var a=e.id.nesting[r];if(a in i){e.self.focus(i[a]);break}}})}else if("input"===i&&"radio"===a){var l=e.data.element.value.node().getAttribute("name");l&&e.self.container({id:l}),e.data.element.value.each(function(t,i){var a={};n(a,this);var s=a[e.id.value]||this.id||!1;if(s&&isNaN(parseFloat(s))){var l=d3.select("label[for="+s+"]");l.empty()||(a.text=l.html(),l.call(r))}o.push(a),this.checked&&e.self.focus(a[e.id.value])})}!e.focus.value.length&&o.length&&(e.data.element.value.node().selectedIndex=0,e.self.focus(o[0][e.id.value]));var u=d3.select("legend[for="+e.container.id+"]");u.empty()||(e.self.title(u.html()),u.call(r));var c=!!e.container.value&&e.container.value.node().tagName.toLowerCase();return!1!==e.container.value&&"body"!==c||(e.container.value=d3.select(e.data.element.value.node().parentNode)),e.data.element.value.call(r),o}},{"./hideelement.js":131}],131:[function(e,t,n){t.exports=function(e){e.style("position","absolute","important").style("clip","rect(1px 1px 1px 1px)","important").style("clip","rect(1px, 1px, 1px, 1px)","important").style("width","1px","important").style("height","1px","important").style("margin","-1px","important").style("padding","0","important").style("border","0","important").style("overflow","hidden","important")}},{}],132:[function(e,t,n){var r=e("../console/print.js");t.exports=function(e){if("network"===e.type.value){if(e.dev.value){var t="analyzing node positions";r.time(t)}if(e.nodes.value.filter(function(e){return"number"==typeof e.x&&"number"==typeof e.y}).length===e.nodes.value.length)e.nodes.positions=!0;else{var n=d3.forceLink(e.edges.value),i=e.edges.strength.value;i&&("string"==typeof i?n.strength(function(e){return e[i]}):n.strength(i));for(var a=d3.forceSimulation(e.nodes.value).force("center",d3.forceCenter([e.width.viz/2,e.height.viz/2])).force("links",n),o=50;o>0&&(a.tick(),!(a.alpha()<.01));--o);a.stop(),e.nodes.positions=!0}e.dev.value&&r.timeEnd(t)}}},{"../console/print.js":83}],133:[function(e,t,n){(function(){var n;n=e("numeric"),t.exports=function(e,t){var r,i,a,o,s,l,u,c,f,d,h,p,v,g,m,y,b,x,_,w,j,k,z;for(null==t&&(t={}),null==t.maxDegree&&(t.maxDegree=5),r=e.length,y=Number.MAX_VALUE,s=null,a=function(){var n,r,i;for(i=[],c=n=1,r=t.maxDegree+1;1<=r?n<r:n>r;c=1<=r?++n:--n)i.push(function(){var t,n,r;for(r=[],n=0,t=e.length;n<t;n++)m=e[n],r.push(Math.pow(m[0],c));return r}());return i}(),k=function(){var t,n,r;for(r=[],t=0,n=e.length;t<n;t++)m=e[t],r.push(m[1]);return r}(),d=v=0,b=1<<t.maxDegree;0<=b?v<b:v>b;d=0<=b?++v:--v){for(o=[function(){var e,t,n;for(n=[],e=0,t=r;0<=t?e<t:e>t;0<=t?++e:--e)n.push(1);return n}()],f=[0],h=g=0,x=t.maxDegree;0<=x?g<x:g>x;h=0<=x?++g:--g)(d&1<<h)>0&&(o.push(a[h]),f.push(h+1));i=n.transpose(o),p=f.length,l=n.dot(n.dot(n.inv(n.dot(o,i)),o),k),z=n.dot(i,l),_=n.sub(k,z),w=(j=n.dot(_,_))/(r-p),(u=-2*(-.5*r*Math.log(2*Math.PI)-.5*r*Math.log(w)-j/(2*w))+p*(Math.log(r)-Math.log(2*Math.PI)))<y&&(y=u,s=[f,l,z])}return s}}).call(this)},{numeric:53}],134:[function(e,t,n){(function(){var n;n=e("static-kdtree"),t.exports=function(e,t){var r,i,a,o,s,l,u,c,f,d,h;return null==t&&(t=10),h=n(e),u=function(){var n,r,i;for(i=[],n=0,r=e.length;n<r;n++)c=e[n],i.push(h.knn(c,t+1).slice(1));return i}(),d=function(t,n){var r,i,a,o,s,l;for(r=e[t],i=e[n],o=0,t=s=0,l=r.length;0<=l?s<l:s>l;t=0<=l?++s:--s)o+=(a=r[t]-i[t])*a;return o},o=function(){var n,r,a;for(a=[],i=n=0,r=e.length;0<=r?n<r:n>r;i=0<=r?++n:--n)a.push(d(i,u[i][t-1]));return a}(),f=function(e,t){return Math.max(d(e,t),o[t])},s=function(e){var n,r,i,a,o;for(a=0,r=0,i=(o=u[e]).length;r<i;r++)n=o[r],a+=f(e,n);return t/a},l=function(){var t,n,r;for(r=[],i=t=0,n=e.length;0<=n?t<n:t>n;i=0<=n?++t:--t)r.push(s(i));return r}(),function(){var n,o,s,c,f,d;for(d=[],i=n=0,c=e.length;0<=c?n<c:n>c;i=0<=c?++n:--n){for(r=0,o=0,s=(f=u[i]).length;o<s;o++)a=f[o],r+=l[a];r/=t,d.push([i,r/l[i]])}return d}().sort(function(e,t){return t[1]-e[1]})}}).call(this)},{"static-kdtree":55}],135:[function(e,t,n){(function(){t.exports=function(e){var t,n;return n=d3.median(e),t=d3.median(e.map(function(e){return Math.abs(e-n)})),e.map(function(e,r){return[r,Math.abs(e-n)/t]}).sort(function(e,t){return t[1]-e[1]})}}).call(this)},{}],136:[function(e,t,n){(function(){var n;n=e("../core/font/tester.js"),t.exports=function(e,t,r){var i,a,o,s,l,u,c;r||(r={}),t=t||{},u=r.parent||n("svg").append("text"),s=[],e instanceof Array||(e=[e]),c=u.selectAll("tspan").data(e),i={left:"0px",position:"absolute",top:"0px",x:0,y:0},l=0,"letter-spacing"in t&&(l=parseFloat(t["letter-spacing"]),delete t["letter-spacing"]),o=function(e){var t;return t=0,l&&(t=(d3.select(e).text().length-1)*l),e.getComputedTextLength()+t},a=function(e){return e.parentNode.getBBox().height||e.getBoundingClientRect().height};var f=c.enter().append("tspan").text(String);for(var d in styles)f.style(d,t[d]);for(var d in attrs)f.attr(d,i[d]);return f.each(function(e){if("function"==typeof r.mod)return r.mod(this)}).each(function(e){var t,n,r;return(t=d3.select(this).selectAll("tspan")).size()?(r=[],t.each(function(){return r.push(o(this))}),r=d3.max(r)):r=o(this),n=a(this),s.push({height:n,text:e,width:r})}),c.remove(),r.parent||u.remove(),s}}).call(this)},{"../core/font/tester.js":100}],137:[function(e,t,n){(function(){var n,r;n=e("../core/font/tester.js"),(r=function(e){var t,i,a,o,s,l,u,c,f,d,h,p,v;for(e instanceof Array||(e=e.split(",")),o=0,l=e.length;o<l;o++)e[o].trim();if((a=e.join(", "))in(t=r.complete))return t[a];for(d=function(e){return p.append("span").style("font-family",e).style("font-size","32px").style("padding","0px").style("margin","0px").text("abcdefghiABCDEFGHI_!@#$%^&*()_+1234567890")},h=function(e,t){var n,r,i;return r=(n=d(e)).node().offsetWidth,i=t.node().offsetWidth,n.remove(),r!==i},p=n("div"),c=d("monospace"),f=d("sans-serif"),s=0,u=e.length;s<u;s++)if((v=h((i=e[s])+",monospace",c))||(v=h(i+",sans-serif",f)),v){v=i;break}return v||(v="sans-serif"),c.remove(),f.remove(),t[a]=v,v}).complete={},t.exports=r}).call(this)},{"../core/font/tester.js":100}],138:[function(e,t,n){var r=e("../array/sort.js"),i=e("../core/methods/attach.js"),a=e("../core/data/format.js"),o=e("../core/data/keys.js"),s=e("../core/data/load.js"),l=e("../core/fetch/data.js"),u=e("../client/ie.js"),c=e("../core/methods/reset.js"),f=e("../core/console/print.js");t.exports=function(){var t={types:{auto:e("./types/auto.js"),button:e("./types/button/button.js"),drop:e("./types/drop/drop.js"),toggle:e("./types/toggle.js")},self:function(e){var n=t.data.value instanceof Array&&t.data.value.length>t.data.large;if(t.draw.timing=t.draw.first||n||u?0:t.timing.ui,t.data.value instanceof Array){if(t.dev.value&&f.group('drawing "'+t.type.value+'"'),t.data.changed&&(t.data.cache={},o(t,"data"),a(t)),t.data.viz=l(t),t.data.sort.value&&(t.data.changed||t.order.changed||t.order.sort.changed)&&r(t.data.viz,t.order.value||t.text.value,t.order.sort.value,t.color.value,t),!1===t.focus.value&&["auto","button"].indexOf(t.type.value)<0){var i=t.data.element.value;if(i&&"select"===i.node().tagName.toLowerCase()){var d=i.property("selectedIndex");d=d<0?0:d;var h=i.selectAll("option")[0][d],p=h.getAttribute("data-"+t.id.value)||h.getAttribute(t.id.value);p&&(t.focus.value=p)}!1===t.focus.value&&t.data.viz.length&&(t.focus.value=t.data.viz[0][t.id.value]),t.dev.value&&!1!==t.focus.value&&f.log('"value" set to "'+t.focus.value+'"')}var v=function(e,n){n="number"!=typeof n?1===t.id.nesting.length?0:t.id.nesting.length-1:n;var r=t.id.nesting[n];return n>0&&(!(r in e)||e[r]instanceof Array)?v(e,n-1):r};if(t.data.changed){"auto"===t.search.value?t.data.viz.length>10?(t.search.enabled=!0,t.dev.value&&f.log("Search enabled.")):(t.search.enabled=!1,t.dev.value&&f.log("Search disabled.")):t.search.enabled=t.search.value;var g=t.data.element.value?t.data.element.value.node().tagName.toLowerCase():"";if(t.data.element.value&&"select"===g){var m=[];for(var y in t.data.nested.all)m=m.concat(t.data.nested.all[y]);options=t.data.element.value.selectAll("option").data(m,function(e){var t=!!e&&v(e);return!!(e&&t in e)&&e[t]}),options.exit().remove(),options.enter().append("option"),options.each(function(e){var n=v(e),r=n===t.id.value?t.text.value||t.id.value:!0!==t.text.nesting&&n in t.text.nesting?t.text.nesting[n]:n;for(var i in e)"object"!=typeof e[i]&&(i===r&&d3.select(this).html(e[i]),["alt","value"].indexOf(i)>=0?d3.select(this).attr(i,e[i]):d3.select(this).attr("data-"+i,e[i]));e[n]===t.focus.value?this.selected=!0:this.selected=!1})}}else if(t.focus.changed&&t.data.element.value){if("select"===t.data.element.value.node().tagName.toLowerCase())t.data.element.value.selectAll("option").each(function(e){e[v(e)]===t.focus.value?this.selected=!0:this.selected=!1});else"radio"===t.data.element.value.attr("type").toLowerCase()&&t.data.element.value.each(function(e){this.value===t.focus.value?this.checked=!0:this.checked=!1})}if("auto"!==t.type.value){if(!t.container.ui){t.container.ui=t.container.value.selectAll("div#d3po_"+t.type.value+"_"+t.container.id).data(["container"]);var b=t.data.element.value?t.data.element.value[0][0]:null;if(b)if(b.id)b="#"+b.id;else{var x=b.getAttribute(t.id.value)?t.id.value:"data-"+t.id.value;b=b.getAttribute(x)?"["+x+"="+b.getAttribute(x)+"]":null}t.container.ui.enter().insert("div",b).attr("id","d3po_"+t.type.value+"_"+t.container.id).style("position","relative").style("overflow","visible").style("vertical-align","top")}t.container.ui.style("display",t.ui.display.value),t.container.ui.transition().duration(t.draw.timing).style("margin",t.ui.margin.css);var _=t.container.ui.selectAll("div.d3po_title").data(t.title.value?[t.title.value]:[]);_.enter().insert("div","#d3po_"+t.type.value+"_"+t.container.id).attr("class","d3po_title").style("display","inline-block"),_.style("color",t.font.color).style("font-family",t.font.family.value).style("font-size",t.font.size+"px").style("font-weight",t.font.weight).style("padding",t.ui.padding.css).style("border-color","transparent").style("border-style","solid").style("border-width",t.ui.border+"px").text(String).each(function(e){t.margin.left=this.offsetWidth})}if(t.data.value.length){var w=t.format.locale.value.visualization[t.type.value];t.dev.value&&f.time("drawing "+w),t.types[t.type.value](t),t.dev.value&&f.timeEnd("drawing "+w)}else!t.data.url||t.data.loaded&&!t.data.stream||s(t,"data",t.self.draw);t.dev.value&&f.timeEnd("total draw time"),c(t)}}};return i(t,{active:e("./methods/active.js"),alt:e("./methods/alt.js"),color:e("./methods/color.js"),config:e("./methods/config.js"),container:e("./methods/container.js"),data:e("./methods/data.js"),depth:e("./methods/depth.js"),dev:e("./methods/dev.js"),draw:e("./methods/draw.js"),focus:e("./methods/focus.js"),font:e("./methods/font.js"),format:e("./methods/format.js"),height:e("./methods/height.js"),history:e("./methods/history.js"),hover:e("./methods/hover.js"),icon:e("./methods/icon.js"),id:e("./methods/id.js"),keywords:e("./methods/keywords.js"),margin:e("./methods/margin.js"),open:e("./methods/open.js"),order:e("./methods/order.js"),remove:e("./methods/remove.js"),search:e("./methods/search.js"),select:e("./methods/select.js"),selectAll:e("./methods/selectall.js"),text:e("./methods/text.js"),timing:e("./methods/timing.js"),title:e("./methods/title.js"),type:e("./methods/type.js"),ui:e("./methods/ui.js"),width:e("./methods/width.js")}),t.self}},{"../array/sort.js":65,"../client/ie.js":68,"../core/console/print.js":83,"../core/data/format.js":87,"../core/data/keys.js":89,"../core/data/load.js":90,"../core/fetch/data.js":96,"../core/methods/attach.js":114,"../core/methods/reset.js":127,"./methods/active.js":139,"./methods/alt.js":140,"./methods/color.js":141,"./methods/config.js":142,"./methods/container.js":143,"./methods/data.js":144,"./methods/depth.js":145,"./methods/dev.js":146,"./methods/draw.js":147,"./methods/focus.js":148,"./methods/font.js":149,"./methods/format.js":150,"./methods/height.js":151,"./methods/history.js":152,"./methods/hover.js":153,"./methods/icon.js":154,"./methods/id.js":155,"./methods/keywords.js":156,"./methods/margin.js":157,"./methods/open.js":158,"./methods/order.js":159,"./methods/remove.js":160,"./methods/search.js":161,"./methods/select.js":162,"./methods/selectall.js":163,"./methods/text.js":164,"./methods/timing.js":165,"./methods/title.js":166,"./methods/type.js":167,"./methods/ui.js":168,"./methods/width.js":169,"./types/auto.js":170,"./types/button/button.js":171,"./types/drop/drop.js":176,"./types/toggle.js":193}],139:[function(e,t,n){(function(){e("../../core/methods/filter.js"),t.exports={accepted:[!1,Array,Function,Number,String],value:!1}}).call(this)},{"../../core/methods/filter.js":115}],140:[function(e,t,n){(function(){var n;n=e("../../core/methods/filter.js"),t.exports={accepted:[!1,Array,Function,Object,String],mute:n(!0),solo:n(!0),value:"alt"}}).call(this)},{"../../core/methods/filter.js":115}],141:[function(e,t,n){(function(){t.exports={accepted:[String],value:"color"}}).call(this)},{}],142:[function(e,t,n){(function(){t.exports={accepted:[Object],objectAccess:!1,process:function(e,t){var n,r;for(n in e)r=e[n],n in t.self&&t.self[n](r);return e},value:{}}}).call(this)},{}],143:[function(e,t,n){(function(){var n;n=e("../../util/d3selection.js"),t.exports={accepted:[!1,Array,Object,String],element:!1,id:"default",process:function(e){return!1===e?d3.select("body"):n(e)?e:e instanceof Array?d3.select(e[0][0]):(this.selector=e,d3.select(e))},value:d3.select("body")}}).call(this)},{"../../util/d3selection.js":243}],144:[function(e,t,n){var r=e("../../util/d3selection.js"),i=e("../../core/methods/process/data.js");t.exports={accepted:[!1,Array,Function,String],delimiter:{accepted:[String],value:"|"},element:{process:function(e,t){var n=!1;return r(e)?n=e:"string"!=typeof e||d3.select(e).empty()||(n=d3.select(e)),n&&t.self.container(d3.select(n.node().parentNode)),n},value:!1},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},filters:[],large:400,mute:[],process:function(e,t){return"default"===t.container.id&&e.length&&t.self.container({id:"default"+e.length}),i(e,t,this)},solo:[],sort:{accepted:[Boolean],value:!1},value:!1}},{"../../core/methods/process/data.js":121,"../../util/d3selection.js":243}],145:[function(e,t,n){(function(){t.exports={accepted:[Number],value:0}}).call(this)},{}],146:[function(e,t,n){(function(){t.exports={accepted:[Boolean],value:!1}}).call(this)},{}],147:[function(e,t,n){var r=e("../../util/d3selection.js"),i=e("../../core/parse/hideelement.js"),a=e("../../core/parse/element.js"),o=e("../../core/console/print.js"),s=e("../../string/format.js");t.exports={accepted:[void 0,Function],first:!0,frozen:!1,process:function(e,t){if(!1===this.initialized)return this.initialized=!0,e;if(!t.data.value||t.data.value instanceof Array&&!r(t.data.value)?t.data.element.value&&t.data.element.value.call(i):t.data.value=a(t),void 0===e&&"function"==typeof this.value&&(e=this.value),!1===t.container.value){var n=t.format.locale.value.dev.setContainer;o.warning(n,"container")}else if(t.container.value.empty()){n=t.format.locale.value.dev.noContainer;var l=t.container.selector||"";o.warning(s(n,'"'+l+'"'),"container")}else t.dev.value&&o.time("total draw time"),t.container.value.call(t.self);if("function"==typeof e&&t.history.chain.length){var u={};t.history.chain.forEach(function(e){var t=e.method;delete e.method,u[t]=e}),e(u),t.history.chain=[]}return e},update:!0,value:void 0}},{"../../core/console/print.js":83,"../../core/parse/element.js":130,"../../core/parse/hideelement.js":131,"../../string/format.js":208,"../../util/d3selection.js":243}],148:[function(e,t,n){(function(){t.exports={accepted:[!1,Number,String],process:function(e,t){var n,r,i,a,o,s,l,u,c,f;if((r=t.data.element.value)&&["string","number"].indexOf(typeof e)>=0)if(i=r.node().tagName.toLowerCase(),a=r.attr("type"),"select"===i)for(o=s=0,u=(f=r.selectAll("option")).length;s<u;o=++s)(n=f[o])&&n[t.id.value]===e&&(r.node().selectedIndex=o);else if("input"===i&&"radio"===a)for(l=0,c=r.length;l<c;l++)n=r[l],this.checked=n&&n[t.id.value]===e;return e},value:!1}}).call(this)},{}],149:[function(e,t,n){(function(){var n,r,i,a;i=e("../../core/methods/font/family.js"),n=e("../../core/methods/font/align.js"),r=e("../../core/methods/font/decoration.js"),a=e("../../core/methods/font/transform.js"),t.exports={align:n(),color:"#444444",decoration:r(),family:i(),secondary:{align:n(),color:"#444444",decoration:r(),family:i(),size:12,spacing:0,transform:a(),weight:200},size:12,spacing:0,transform:a(),weight:200}}).call(this)},{"../../core/methods/font/align.js":116,"../../core/methods/font/decoration.js":117,"../../core/methods/font/family.js":118,"../../core/methods/font/transform.js":120}],150:[function(e,t,n){(function(){var n,r,i,a;n=e("../../number/format.js"),r=e("../../core/locale/locale.js"),i=e("../../object/merge.js"),a=e("../../string/title.js"),t.exports={accepted:[Function,String],affixes:{accepted:[Object],objectAccess:!1,value:{}},locale:{accepted:function(){return d3.keys(r)},process:function(e){var t;return"en_US",t=r.en_US,"en_US"!==e&&(t=i(t,r[e])),this.language=e,t},value:"en_US"},number:{accepted:[!1,Function],value:!1},process:function(e,t){if("string"==typeof e)t.self.format({locale:e});else if("function"==typeof e)return e;return this.value},text:{accepted:[!1,Function],value:!1},value:function(e,t){var r,i;return t||(t={}),(i=t.vars||{}).time&&i.time.value&&t.key===i.time.value?(r=e.constructor===Date?e:new Date(e),i.data.time.format(r)):"number"==typeof e?(this.number.value||n)(e,t):"string"==typeof e?(this.text.value||a)(e,t):JSON.stringify(e)}}}).call(this)},{"../../core/locale/locale.js":113,"../../number/format.js":205,"../../object/merge.js":206,"../../string/title.js":211}],151:[function(e,t,n){(function(){t.exports={accepted:[!1,Number],max:600,secondary:!1,value:!1}}).call(this)},{}],152:[function(e,t,n){(function(){t.exports={back:function(){if(this.states.length)return this.states.pop()()},chain:[],reset:function(){var e;for(e=[];this.states.length;)e.push(this.states.pop()());return e},states:[]}}).call(this)},{}],153:[function(e,t,n){(function(){t.exports={accepted:[Boolean,Number,String],value:!1}}).call(this)},{}],154:[function(e,t,n){(function(){var n;n=e("../../core/methods/process/icon.js"),t.exports={accepted:[!1,Array,Function,Object,String],back:{accepted:[!1,String],fallback:"&#x276e;",opacity:1,process:n,rotate:0,value:"fa-angle-left"},button:{accepted:[!1,String],fallback:!1,opacity:1,process:n,rotate:0,value:!1},drop:{accepted:[!1,String],fallback:"&#x276f;",opacity:1,process:n,rotate:0,value:"fa-angle-down"},next:{accepted:[!1,String],fallback:"&#x276f;",opacity:1,process:n,rotate:0,value:"fa-angle-right"},select:{accepted:[!1,String],fallback:"&#x2713;",opacity:1,process:n,rotate:0,value:"fa-check"},style:{accepted:[Object,String],value:"default"},value:"icon"}}).call(this)},{"../../core/methods/process/icon.js":123}],155:[function(e,t,n){(function(){var n;n=e("../../core/methods/filter.js"),t.exports={accepted:[Array,String],dataFilter:!0,mute:n(!0),nesting:["value"],solo:n(!0),value:"value"}}).call(this)},{"../../core/methods/filter.js":115}],156:[function(e,t,n){(function(){var n;n=e("../../core/methods/filter.js"),t.exports={accepted:[!1,Array,Function,Object,String],mute:n(!0),solo:n(!0),value:"keywords"}}).call(this)},{"../../core/methods/filter.js":115}],157:[function(e,t,n){(function(){var n;n=e("../../core/methods/process/margin.js"),t.exports={accepted:[Number,Object,String],process:function(e){var t;return void 0===e&&(e=this.value),t=e,n(e,this),t},value:0}}).call(this)},{"../../core/methods/process/margin.js":124}],158:[function(e,t,n){(function(){t.exports={accepted:[Boolean],flipped:{accepted:[Boolean],value:!1},value:!1}}).call(this)},{}],159:[function(e,t,n){(function(){t.exports={accepted:[!1,Function,String],sort:{accepted:["asc","desc"],value:"asc"},value:!1}}).call(this)},{}],160:[function(e,t,n){(function(){t.exports={accepted:[void 0,Function],process:function(e,t){this.initialized&&t.container.ui.remove(),delete t.container.ui},value:void 0}}).call(this)},{}],161:[function(e,t,n){(function(){t.exports={accepted:["auto",Boolean],process:function(e){return"Boolean"==typeof e&&(this.enabled=e),e},term:"",value:"auto"}}).call(this)},{}],162:[function(e,t,n){(function(){t.exports={accepted:[String],chainable:!1,process:function(e,t){var n;return(n=t.container.value)&&e?n.select(e):e},value:void 0}}).call(this)},{}],163:[function(e,t,n){(function(){t.exports={accepted:[String],chainable:!1,process:function(e,t){var n;return(n=t.container.value)&&e?n.selectAll(e):e},value:void 0}}).call(this)},{}],164:[function(e,t,n){(function(){var n;n=e("../../core/methods/filter.js"),t.exports={accepted:[!1,String],nesting:!0,mute:n(!0),solo:n(!0),secondary:{accepted:[!1,String],nesting:!0,value:!1},value:!1}}).call(this)},{"../../core/methods/filter.js":115}],165:[function(e,t,n){(function(){t.exports={mouseevents:60,ui:200}}).call(this)},{}],166:[function(e,t,n){(function(){var n,r,i,a;n=e("../../core/methods/font/decoration.js"),r=e("../../core/methods/font/family.js"),a=e("../../core/methods/font/transform.js"),i=e("../../string/strip.js"),t.exports={accepted:[!1,Function,String],font:{align:"center",color:"#444444",decoration:n(),family:r(),size:16,transform:a(),weight:400},link:!1,process:function(e,t){var n;return 0===t.container.id.indexOf("default")&&e&&(n=i(e).toLowerCase(),t.self.container({id:n})),e},value:!1}}).call(this)},{"../../core/methods/font/decoration.js":117,"../../core/methods/font/family.js":118,"../../core/methods/font/transform.js":120,"../../string/strip.js":210}],167:[function(e,t,n){(function(){t.exports={accepted:function(e){return d3.keys(e.types)},value:"auto"}}).call(this)},{}],168:[function(e,t,n){(function(){var n,r,i,a,o;i=e("../../core/methods/font/family.js"),n=e("../../core/methods/font/align.js"),r=e("../../core/methods/font/decoration.js"),a=e("../../core/methods/process/margin.js"),o=e("../../core/methods/font/transform.js"),t.exports={align:n("center"),border:1,color:{primary:{process:function(e,t){var n;return n=this.value,t.ui.color.secondary.value||(t.ui.color.secondary.value=d3.rgb(n).darker(.75).formatHex()),e},value:"#ffffff"},secondary:{value:!1}},display:{acceped:["block","inline-block"],value:"inline-block"},font:{align:n("center"),color:"#444",decoration:r(),family:i(),size:11,transform:o(),weight:200},margin:{process:function(e){var t;return void 0===e&&(e=this.value),t=e,a(e,this),t},value:5},padding:{process:function(e){var t;return void 0===e&&(e=this.value),t=e,a(e,this),t},value:5}}}).call(this)},{"../../core/methods/font/align.js":116,"../../core/methods/font/decoration.js":117,"../../core/methods/font/family.js":118,"../../core/methods/font/transform.js":120,"../../core/methods/process/margin.js":124}],169:[function(e,t,n){(function(){t.exports={accepted:[!1,Number],secondary:!1,value:!1}}).call(this)},{}],170:[function(e,t,n){t.exports=function(e){var t=e.data.value.length;1===t?e.self.type("button").draw():t<5?e.self.type("toggle").draw():e.self.type("drop").draw()}},{}],171:[function(e,t,n){(function(){t.exports=function(t){var n,r,i,a,o,s,l,u;return s=e("../../../core/console/print.js"),i=e("./functions/color.js"),a=e("./functions/icons.js"),o=e("./functions/mouseevents.js"),l=e("./functions/style.js"),n=t.container.ui.selectAll("div.d3po_node").data(t.data.viz,function(e){return e[t.id.value]}),t.dev.value&&s.time("enter"),n.enter().append("div").attr("class","d3po_node").call(i,t).call(l,t).call(a,t).call(o,t),t.dev.value&&s.timeEnd("enter"),t.draw.update||t.draw.timing?(t.dev.value&&s.time("ordering"),n.order(),t.dev.value&&s.timeEnd("ordering"),u=n):(r=[t.focus.previous,t.focus.value,t.hover.previous,t.hover.value].filter(function(e){return e}),u=n.filter(function(e){return r.indexOf(e[t.id.value])>=0})),t.dev.value&&s.time("update"),u.classed("d3po_button_active",function(e){return t.focus.value===e[t.id.value]}),t.draw.timing?u.transition().duration(t.draw.timing).call(i,t).call(l,t):u.call(i,t).call(l,t),u.call(a,t).call(o,t),t.dev.value&&s.timeEnd("update"),n.exit().remove()}}).call(this)},{"../../../core/console/print.js":83,"./functions/color.js":172,"./functions/icons.js":173,"./functions/mouseevents.js":174,"./functions/style.js":175}],172:[function(e,t,n){(function(){t.exports=function(t,n){var r,i;return r=e("../../../../color/legible.js"),e("../../../../color/lighter.js"),i=e("../../../../color/text.js"),t.style("background-color",function(e){var t;return t=n.focus.value===e[n.id.value]?n.ui.color.secondary.value:n.ui.color.primary.value,n.hover.value===e[n.id.value]&&(t=d3.rgb(t).darker(.15).formatHex()),t}).style("color",function(e){var t,a,o;return o=n.focus.value===e[n.id.value]?.75:1,!(e[n.icon.value]&&n.data.viz.length<n.data.large)&&e[n.color.value]?a=r(e[n.color.value]):(t=n.focus.value===e[n.id.value]?n.ui.color.secondary.value:n.ui.color.primary.value,n.hover.value===e[n.id.value]&&(t=d3.rgb(t).darker(.15).formatHex()),a=i(t)),"rgba("+(a=d3.rgb(a)).r+","+a.g+","+a.b+","+o+")"}).style("border-color",n.ui.color.secondary.value)}}).call(this)},{"../../../../color/legible.js":75,"../../../../color/lighter.js":76,"../../../../color/text.js":81}],173:[function(e,t,n){var r=e("../../../../client/prefix.js"),i=e("../../../../client/rtl.js");t.exports=function(e,t){var n="right"===t.font.align.value&&!i||i&&"right"===t.font.align.value;e.each(function(e,a){var o=["label"];e[t.icon.value]&&t.data.viz.length<=t.data.large&&o.push("icon");var s=t.icon.button.value;e[t.id.value]===t.focus.value&&t.icon.select.value?(s=t.icon.select.value,o.push("selected")):s&&!1!==e.d3po.icon&&o.push("selected");var l=0,u=d3.select(this).selectAll("div.d3po_button_element").data(o,function(e){return e});u.enter().append("div").style("display",function(e){return"label"===e?"block":"absolute"}),u.order().attr("class",function(e){var t="";return"selected"===e&&0===s.indexOf("fa-")&&(t=" fa "+s),"d3po_button_element d3po_button_"+e+t}).html(function(n){if("label"===n){var r=t.text.value&&t.text.value in e&&!(e[t.text.value]instanceof Array)?t.text.value:t.id.value;return t.format.value(e[r])}return"selected"===n&&s.indexOf("fa-")<0?s:""}).style("background-image",function(n){return"icon"===n?"url('"+e[t.icon.value]+"')":"none"}).style("background-color",function(n){return"icon"===n&&"knockout"===e.style?e[t.color.value]||t.ui.color.primary.value:"transparent"}).style("background-size","100%").style("text-align",function(e){return"label"===e?t.font.align.value:"center"}).style("position",function(e){return"label"==e?"static":"absolute"}).style("width",function(e){return"label"===e?"auto":(l=t.height.value?t.height.value-(t.ui.padding.top+t.ui.padding.bottom)-2*t.ui.border:t.font.size+t.ui.border)+"px"}).style("height",function(e){return"icon"===e?l+"px":"auto"}).style("margin-top",function(e){if("label"===e)return"0px";if(this.offsetHeight||this.getBoundingClientRect().height)var n=this.offsetHeight||this.getBoundingClientRect().height;else if("selected"===e)n=t.font.size;else n=l;return-n/2+"px"}).style("top",function(e){return"label"===e?"auto":"50%"}).style("left",function(e){return"icon"===e&&!n||"selected"===e&&n?t.ui.padding.left+"px":"auto"}).style("right",function(e){return"icon"===e&&n||"selected"===e&&!n?t.ui.padding.right+"px":"auto"}).style(r()+"transition",function(e){return"selected"===e?t.draw.timing/1e3+"s":"none"}).style(r()+"transform",function(e){var n="selected"===e?t.icon.select.rotate:"none";return"string"==typeof n?n:"rotate("+n+"deg)"}).style("opacity",function(e){return"selected"===e?t.icon.select.opacity:1}),u.exit().remove();var c=d3.select(this).selectAll(".d3po_button_label");if(l>0){var f=t.ui.padding;f=3===o.length?f.top+"px "+(2*f.right+l)+"px "+f.bottom+"px "+(2*f.left+l)+"px":o.indexOf("icon")>=0&&!i||o.indexOf("selected")>=0&&i?f.top+"px "+f.right+"px "+f.bottom+"px "+(2*f.left+l)+"px":f.top+"px "+(2*f.right+l)+"px "+f.bottom+"px "+f.left+"px",c.style("padding",f)}else c.style("padding",t.ui.padding.css);if("number"==typeof t.width.value){var d=t.width.value;d-=parseFloat(c.style("padding-left"),10),d-=parseFloat(c.style("padding-right"),10),d-=2*t.ui.border,d+="px"}else d="auto";c.style("width",d)})}},{"../../../../client/prefix.js":70,"../../../../client/rtl.js":71}],174:[function(e,t,n){(function(){t.exports=function(t,n,r){var i,a;return r=e("./color.js"),i=e("../../../../client/pointer.js"),a=e("../../../../client/ie.js"),t.on(i.over,function(e,t){return n.self.hover(e[n.id.value]),a||!n.draw.timing?d3.select(this).style("cursor","pointer").call(r,n):d3.select(this).style("cursor","pointer").transition().duration(n.timing.mouseevents).call(r,n)}).on(i.out,function(e){return n.self.hover(!1),a||!n.draw.timing?d3.select(this).style("cursor","auto").call(r,n):d3.select(this).style("cursor","auto").transition().duration(n.timing.mouseevents).call(r,n)}).on(i.click,function(e){return!1!==n.focus.value?n.self.focus(e[n.id.value]).draw():n.focus.callback?n.focus.callback(e,n.self):void 0})}}).call(this)},{"../../../../client/ie.js":68,"../../../../client/pointer.js":69,"./color.js":172}],175:[function(e,t,n){t.exports=function(e,t){e.style("position","relative").style("margin",t.ui.margin.css).style("display",t.ui.display.value).style("border-style","solid").style("border-width",t.ui.border+"px").style("font-family",t.font.family.value).style("font-size",t.font.size+"px").style("font-weight",t.font.weight).style("letter-spacing",t.font.spacing+"px")}},{}],176:[function(e,t,n){(function(){t.exports=function(t){var n,r,i,a,o,s,l,u,c,f,d;return i=e("./functions/element.js"),a=e("./functions/keyboard.js"),d=e("./functions/window.js"),f=e("./functions/width.js"),n=e("./functions/button.js"),l=e("./functions/selector.js"),u=e("./functions/title.js"),s=e("./functions/search.js"),o=e("./functions/list.js"),r=e("./functions/data.js"),c=e("./functions/update.js"),t.margin.top=0,t.margin.title=0,i(t),a(t),d(t),f(t),n(t),l(t),u(t),s(t),o(t),r(t),c(t)}}).call(this)},{"./functions/button.js":179,"./functions/data.js":180,"./functions/element.js":181,"./functions/keyboard.js":184,"./functions/list.js":185,"./functions/search.js":187,"./functions/selector.js":188,"./functions/title.js":189,"./functions/update.js":190,"./functions/width.js":191,"./functions/window.js":192}],177:[function(e,t,n){t.exports=function(e,t,n){var r=[];if((n=n||e.active.value)instanceof Array)for(var i=0;i<n.length;i++)r.push(this(e,t,n[i]));else{var a=typeof n;"number"===a?r.push(e.depth.value===n):"function"===a?r.push(n(t)):r.push(t===n)}return r.indexOf(!0)>=0}},{}],178:[function(e,t,n){var r=e("../../../../core/console/print.js");t.exports=function(e){e.dev.value&&r.time("rotating arrow");var t="&#x276f;"===e.icon.drop.value?90:0;if(e.open.value!=e.open.flipped.value)var n=180+t;else n=t;e.container.button.icon({select:{opacity:e.open.value?.5:1,rotate:n}}).draw(),e.dev.value&&r.timeEnd("rotating arrow")}},{"../../../../core/console/print.js":83}],179:[function(e,t,n){var r=e("../../../../util/copy.js"),i=e("../../../../client/pointer.js"),a=e("../../../form.js"),o=e("../../../../core/console/print.js");t.exports=function(e){if("button"in e.container||(e.dev.value&&o.time("creating main button"),e.container.button=a().container(e.container.ui).type("button").ui({margin:0}),e.dev.value&&o.timeEnd("creating main button")),e.focus.changed||e.data.changed||e.depth.changed){var t=e.depth.value,n=r(e.data.value.filter(function(n){for(var r=!1,i=0;i<e.id.nesting.length;i++){var a=e.id.nesting[i];if(r=a in n&&n[a]===e.focus.value){t=i;break}}return r})[0]);n||(n=e.container.button.data()[0]||e.data.viz[0]),e.container.button.data([n]).id(e.id.nesting).depth(t)}var s=!0===e.hover.value&&e.focus.value;e.container.button.draw({update:e.draw.update}).focus("").font(e.font).format(e.format).hover(s).icon({button:e.icon.drop.value,select:e.icon.drop.value,value:e.icon.value}).text(e.text.value).timing({ui:e.draw.timing}).ui({border:e.ui.border,color:e.ui.color,padding:e.ui.padding.css}).width(e.width.value).draw();var l=e.container.button.container(Object).ui;e.margin.top+=l.node().offsetHeight||l.node().getBoundingClientRect().height,l.on(i.click,function(){e.self.open(!e.open.value).draw()})}},{"../../../../client/pointer.js":69,"../../../../core/console/print.js":83,"../../../../util/copy.js":242,"../../../form.js":138}],180:[function(e,t,n){var r=e("../../../../string/format.js"),i=e("../../../../string/strip.js");t.exports=function(e){if(e.data.url&&!e.data.loaded){var t={};t[e.text.value||e.id.value]=e.format.value(e.format.locale.value.ui.loading),e.data.filtered=[t],e.data.changed="loading"!==e.data.lastFilter,e.data.lastFilter="loading"}else if(e.open.value)if(e.search.term){var n=i(e.search.term).split("_"),a=[e.id.value,e.text.value,e.alt.value,e.keywords.value];a=a.filter(function(e){return e}),n=n.filter(function(e){return""!==e});var o=[],s=[],l=[],u=[];if(e.id.nesting.forEach(function(t){u=u.concat(e.data.nested.all[t])}),u.forEach(function(t){var r=!1;a.forEach(function(a){if(!r&&a in t&&"string"==typeof t[a]){var u=t[a].toLowerCase();if([e.text.value,e.id.value].indexOf(a)>=0&&0===u.indexOf(e.search.term))o.push(t),r=!0;else if(u.indexOf(e.search.term)>=0)s.push(t),r=!0;else{var c=i(u).split("_");for(var f in c){if(r)break;for(var d in n)if(0===c[f].indexOf(n[d])){l.push(t),r=!0;break}}}}})}),e.data.filtered=d3.merge([o,s,l]),e.data.filtered.forEach(function(e,t){e.d3po_order=t}),e.data.changed=!0,e.data.lastFilter="search",0===e.data.filtered.length){var c={},f=e.format.value(e.format.locale.value.ui.noResults);c[e.text.value||e.id.value]=r(f,'"'+e.search.term+'"'),e.data.filtered=[c]}}else e.data.filtered=e.data.viz,e.data.changed="viz"!==e.data.lastFilter,e.data.lastFilter="viz",e.id.nesting.length>1&&e.depth.value<e.id.nesting.length-1&&(e.data.filtered=e.data.filtered.filter(function(t){return"endPoint"in t.d3po&&t.d3po.endPoint===e.depth.value&&(t.d3po.icon=!1),!0}),e.data.changed="depth"!==e.data.lastFilter,e.data.lastFilter="depth");else e.data.filtered=[]}},{"../../../../string/format.js":208,"../../../../string/strip.js":210}],181:[function(e,t,n){(function(){t.exports=function(e){if(e.data.element.value)return e.data.element.value.on("focus."+e.container.id,function(){return e.self.hover(!0).draw()}),e.data.element.value.on("blur."+e.container.id,function(){if(!e.search.enabled||d3.event.relatedTarget!==e.container.value.select("input").node())return e.self.open(!1).hover(!1).draw()}),e.data.element.value.on("change."+e.container.id,function(){return e.self.focus(this.value).draw()}),e.data.element.value.on("keydown.cancel_"+e.container.id,function(){if(9!==d3.event.keyCode)return d3.event.preventDefault()})}}).call(this)},{}],182:[function(e,t,n){t.exports=function(e){var t=e.height.secondary,n=e.container.button.container().node().getBoundingClientRect(),r=window.innerHeight-n.bottom-2*e.ui.border-e.ui.margin.top-e.ui.margin.bottom-e.ui.padding.top-e.ui.padding.bottom;r<3*n.height&&(r=n.top-10,e.self.open({flipped:!0})),"number"!=typeof t&&(t=r),t>e.height.max&&(t=e.height.max),e.self.height({secondary:t})}},{}],183:[function(e,t,n){(function(){var n,r,i,a;n=e("./active.js"),r=e("../../../../util/copy.js"),i=e("../../../form.js"),a=e("../../../../core/console/print.js"),t.exports=function(e){var t,o,s;e.open.value&&(e.dev.value&&a.time("updating list items"),"items"in e.container||(e.container.items=i().container(e.container.list).type("button").ui({border:0,display:"block",margin:0}).width(!1)),o=e.draw.timing?e.data.large:1,(s=r(e.order)).value=e.search.term.length?"d3po_order":e.order.value,t=e.depth.value===e.id.nesting.length-1,(e.focus.changed||!1===e.container.items.focus())&&e.container.items.focus(e.focus.value,function(t){var r,i,a,o;i=e.data.filtered.filter(function(n){return n[e.id.value]===t})[0],e.depth.value<e.id.nesting.length-1&&e.id.nesting[e.depth.value+1]in i?(a=e.depth.value,o=e.id.solo.value,e.history.states.push(function(){return e.self.depth(a).id({solo:o}).draw()}),e.self.depth(e.depth.value+1).id({solo:[t]}).draw()):(e.depth.changed||e.self.open(!1),(r=t!==e.focus.value)&&e.active.value&&(r=n(e,t)),r&&e.self.focus(t).draw())}),e.container.items.active(e.active.value).data({large:o,sort:e.data.sort.value,value:e.data.filtered}).draw({update:e.draw.update}).font(e.font.secondary).format(e.format).hover(e.hover.value).id(e.id.value).icon({button:!t&&e.icon.next,select:!!t&&e.icon.select,value:e.icon.value}).order(s).text(e.text.secondary.value||e.text.value).timing({ui:e.draw.timing}).ui({color:{primary:1===e.id.nesting.length?e.ui.color.primary.value:e.ui.color.secondary.value,secondary:e.ui.color.secondary.value},padding:e.ui.padding.css}).draw(),e.dev.value&&a.timeEnd("updating list items"))}}).call(this)},{"../../../../core/console/print.js":83,"../../../../util/copy.js":242,"../../../form.js":138,"./active.js":177}],184:[function(e,t,n){(function(){t.exports=function(e){return d3.select(window).on("keydown."+e.container.id,function(){var t,n,r,i,a,o,s,l,u,c,f,d;if(l=d3.event.keyCode,e.open.value||!0===e.hover.value){for(c=!0===e.hover.value?"focus":"hover",o=!1,a=s=0,u=(f=e.data.filtered).length;s<u;a=++s)if(f[a][e.id.value]===e[c].value){o=a;break}if(9===l&&e.open.value&&(!e.search.enabled||e.search.enabled&&!d3.event.shiftKey))return e.self.open(!1).hover(!1).draw();if([38,40].indexOf(l)>=0)return!1===o?o=0:38===l?e.open.value&&(o<=0?o=e.data.filtered.length-1:o-=1):40===l&&e.open.value&&(o>=e.data.filtered.length-1?o=0:o+=1),i="boolean"!=typeof e.hover.value?e.data.filtered[o][e.id.value]:e.focus.value,e.self.hover(i).open(!0).draw();if(13===l)return"boolean"!=typeof e.hover.value?(t=e.data.filtered.filter(function(t){return t[e.id.value]===e.hover.value})[0],(n=e.depth.value)<e.id.nesting.length-1&&e.id.nesting[n+1]in t?(d=e.id.solo.value,r=function(){return e.self.depth(n).id({solo:d}).draw()},e.history.states.push(r),e.self.depth(e.depth.value+1).id({solo:[e.hover.value]}).draw()):e.self.focus(e.hover.value).hover(!0).draw()):e.self.hover(e.focus.value).open(!0).draw();if(27===l){if(e.open.value)return e.self.open(!1).hover(!0).draw();if(!0===e.hover.value)return e.self.hover(!1).draw()}}})}}).call(this)},{}],185:[function(e,t,n){var r=e("../../../../core/console/print.js");t.exports=function(e){e.dev.value&&r.time("populating list"),e.container.list=e.container.selector.selectAll("div.d3po_drop_list").data(["list"]),e.container.list.enter().append("div").attr("class","d3po_drop_list").attr("id","d3po_drop_list_"+e.container.id).style("overflow-y","auto").style("overflow-x","hidden"),e.dev.value&&r.timeEnd("populating list")}},{"../../../../core/console/print.js":83}],186:[function(e,t,n){var r=e("../../../../core/console/print.js");t.exports=function(e){if(e.open.value){e.dev.value&&r.time("calculating height");var t=!1;if("none"==e.container.selector.style("display"))t=!0;t&&e.container.selector.style("display","block");var n=e.container.selector.style("height"),i=e.container.selector.property("scrollTop"),a=e.container.list.style("max-height"),o=e.container.list.property("scrollTop");e.container.selector.style("height","auto"),e.container.list.style("max-height","200000px"),e.container.listHeight=parseFloat(e.container.selector.style("height"),10),e.container.list.style("max-height",a).property("scrollTop",o),e.container.selector.style("height",n).property("scrollTop",i);var s=!1;if(e.container.listHeight>e.height.secondary&&(e.container.listHeight=e.height.secondary,s=!0),t&&e.container.selector.style("display","none"),e.dev.value&&r.timeEnd("calculating height"),s){e.dev.value&&r.time("calculating scroll position");var l=e.container.list.select("div").selectAll("div.d3po_node"),u=l[0][0],c="boolean"!=typeof e.hover.value?e.hover.value:e.focus.value;l.each(function(t,n){t[e.id.value]===c&&(u=this)});t=!1;"none"===e.container.selector.style("display")&&(t=!0,e.container.selector.style("display","block"));var f=u.offsetTop,d=u.offsetHeight||u.getBoundingClientRect().height,h=e.container.list.property("scrollTop");t&&e.container.selector.style("display","none"),t||e.data.changed||e.depth.changed?e.container.listScroll=f:(e.container.listScroll=h,f<h?e.container.listScroll=f:f+d>h+e.height.secondary-e.search.height&&(e.container.listScroll=f-(e.height.secondary-d-e.search.height))),e.dev.value&&r.timeEnd("calculating scroll position")}else e.container.listScroll=0}else e.container.listScroll=e.container.list.property("scrollTop"),e.container.listHeight=0}},{"../../../../core/console/print.js":83}],187:[function(e,t,n){var r=e("../../../../client/prefix.js"),i=e("../../../../core/console/print.js");t.exports=function(t){t.dev.value&&i.time("creating search");var n=e("./data.js"),a=e("./items.js"),o=e("./update.js");function s(e){e.style("padding",t.ui.padding.css).style("display","block").style("background-color",d3.rgb(t.ui.color.primary.value).darker(.15).formatHex())}function l(e){var n=t.width.secondary-2*t.ui.padding.left-2*t.ui.padding.right+2*t.ui.border;e.style("padding",t.ui.padding.left/2+t.ui.padding.right/2+"px").style("width",n+"px").style("border-width","0px").style("font-family",t.font.secondary.family.value).style("font-size",t.font.secondary.size+"px").style("font-weight",t.font.secondary.weight).style("text-align",t.font.secondary.align).style("outline","none").style(r()+"border-radius","0").attr("placeholder",t.format.value(t.format.locale.value.method.search))}t.container.search=t.container.selector.selectAll("div.d3po_drop_search").data(t.search.enabled?["search"]:[]),t.draw.timing?(t.container.search.transition().duration(t.draw.timing).call(s),t.container.search.select("input").transition().duration(t.draw.timing).call(l)):(t.container.search.call(s),t.container.search.select("input").call(l)),t.container.search.enter().insert("div","#d3po_drop_list_"+t.container.id).attr("class","d3po_drop_search").attr("id","d3po_drop_search_"+t.container.id).call(s).append("input").attr("id","d3po_drop_input_"+t.container.id).style("-webkit-appearance","none").call(l),t.container.search.select("input").on("keyup."+t.container.id,function(e){var r=this.value;t.search.term!==r&&(t.search.term=r,n(t),a(t),o(t))}),t.container.search.exit().remove();var u=t.container.selector.style("display");t.container.selector.style("display","block"),t.search.height=t.search.enabled?t.container.search.node().offsetHeight||t.container.search.node().getBoundingClientRect().height:0,t.container.selector.style("display",u),t.search.enabled&&(t.margin.title+=t.search.height),t.dev.value&&i.timeEnd("creating search")}},{"../../../../client/prefix.js":70,"../../../../core/console/print.js":83,"./data.js":180,"./items.js":183,"./update.js":190}],188:[function(e,t,n){t.exports=function(e){e.container.selector=e.container.ui.selectAll("div.d3po_drop_selector").data(["selector"]),e.container.selector.enter().append("div").attr("class","d3po_drop_selector").style("position","absolute").style("top","0px").style("z-index","-1").style("overflow","hidden"),e.container.selector.style("padding",e.ui.border+"px")}},{}],189:[function(e,t,n){var r=e("../../../../client/pointer.js"),i=e("../../../../color/lighter.js"),a=e("../../../../core/console/print.js"),o=e("../../../../color/text.js");t.exports=function(e){if(e.open.value){e.dev.value&&a.time("creating title and back button");var t=1===e.id.solo.value.length&&e.depth.value>0,n=t,s=e.container.button.data(Object).viz[0];n=!0;for(var l=0;l<e.id.nesting.length;l++){var u=e.id.nesting[l];if(u in s&&s[u]===e.focus.value){n=!1;break}}function c(t){t.style("padding",e.ui.padding.css).style("display","block").style("background-color",e.ui.color.secondary.value).style("font-family",e.font.secondary.family.value).style("font-size",e.font.secondary.size+"px").style("font-weight",e.font.secondary.weight).style("text-align",e.font.secondary.align).style("color",o(e.ui.color.secondary.value))}function f(t){if(!t.empty()){var n=0===e.icon.back.value.indexOf("fa-")?" fa "+e.icon.back.value:"";n="d3po_drop_back"+n;var r=0===e.icon.back.value.indexOf("fa-")?"":e.icon.back.value;t.style("position","absolute").attr("class",n).style("top",e.ui.padding.top+e.font.secondary.size/2/2.5+"px").html(r)}}function d(t){var r=n?e.focus.value:e.format.locale.value.ui.back;t.text(e.format.value(r)).style("padding","0px "+(e.ui.padding.left+e.ui.padding.right)+"px")}e.container.title=e.container.selector.selectAll("div.d3po_drop_title").data(t?["title"]:[]),e.draw.timing?(e.container.title.transition().duration(e.draw.timing).call(c),e.container.title.select("div.d3po_drop_title_text").transition().duration(e.draw.timing).call(d)):(e.container.title.call(c),e.container.title.select("div.d3po_drop_title_text").call(d)),e.container.title.select("span.d3po_drop_back").call(f);var h=e.container.title.enter().insert("div","#d3po_drop_list_"+e.container.id).attr("class","d3po_drop_title").attr("id","d3po_drop_title_"+e.container.id).call(c);h.append("span").attr("id","d3po_drop_back_"+e.container.id).attr("class","d3po_drop_back").call(f),h.append("div").attr("id","d3po_drop_title_text_"+e.container.id).attr("class","d3po_drop_title_text").call(d),e.container.title.on(r.over,function(t,n){var r=i(e.ui.color.secondary.value);d3.select(this).style("cursor","pointer").transition().duration(e.timing.mouseevents).style("background-color",r).style("color",o(r))}).on(r.out,function(t){var n=e.ui.color.secondary.value;d3.select(this).style("cursor","auto").transition().duration(e.timing.mouseevents).style("background-color",n).style("color",o(n))}).on(r.click,function(t){e.history.back()}),e.container.title.exit().remove(),t&&(e.margin.title+=e.container.title.node().offsetHeight||e.container.title.node().getBoundingClientRect().height),e.dev.value&&a.timeEnd("creating title and back button")}}},{"../../../../client/pointer.js":69,"../../../../color/lighter.js":76,"../../../../color/text.js":81,"../../../../core/console/print.js":83}],190:[function(e,t,n){var r=e("./items.js"),i=e("./height.js"),a=e("../../../../core/console/print.js"),o=e("./scroll.js"),s=e("./arrow.js");t.exports=function(e){function t(t){var n=e.open.flipped.value;t.style("top",function(){return n?"auto":e.margin.top-e.ui.border+"px"}).style("bottom",function(){return n?e.margin.top+e.ui.border+"px":"auto"})}function n(n){n.style("left",function(){return"left"===e.font.align.value?e.margin.left+"px":"center"===e.font.align.value?e.margin.left-(e.width.secondary-e.width.value)/2+"px":"auto"}).style("right",function(){return"right"===e.font.align.value?"0px":"auto"}).style("height",e.container.listHeight+"px").style("padding",e.ui.border+"px").style("background-color",e.ui.color.secondary.value).style("z-index",function(){return e.open.value?"9999":"-1"}).style("width",e.width.secondary-2*e.ui.border+"px").style("opacity",e.open.value?1:0).call(t)}function l(n){n.style("display",e.open.value?null:"none").call(t),e.search.enabled&&e.open.value&&e.container.selector.select("div.d3po_drop_search input").node().focus()}e.draw.timing?e.container.ui.transition().duration(e.draw.timing).each("start",function(){e.open.value&&d3.select(this).style("z-index",9999)}).style("margin",e.ui.margin.css).each("end",function(){e.open.value||d3.select(this).style("z-index","auto")}):e.container.ui.style("margin",e.ui.margin.css).style("z-index",function(){return e.open.value?9999:"auto"}),r(e),i(e),o(e),s(e),e.dev.value&&a.time("drawing list");var u,c=e.open.value?e.height.secondary-e.margin.title:0;if(e.draw.timing){e.container.selector.transition().duration(e.draw.timing).each("start",function(){d3.select(this).style("display",e.open.value?"block":null)}).call(n).each("end",function(){d3.select(this).transition().duration(e.draw.timing).call(l)}),e.container.list.transition().duration(e.draw.timing).style("width",e.width.secondary-2*e.ui.border+"px").style("max-height",c+"px").tween("scroll",(u=e.container.listScroll,function(){var e=d3.interpolateNumber(this.scrollTop,u);return function(t){this.scrollTop=e(t)}}))}else e.container.selector.call(n).call(l),e.container.list.style("width",e.width.secondary-2*e.ui.border+"px").style("max-height",c+"px").property("scrollTop",e.container.listScroll);e.dev.value&&a.timeEnd("drawing list")}},{"../../../../core/console/print.js":83,"./arrow.js":178,"./height.js":182,"./items.js":183,"./scroll.js":186}],191:[function(e,t,n){var r=e("../../../../util/copy.js"),i=e("../../../../core/font/tester.js"),a=e("../../../form.js"),o=e("../../../../core/console/print.js"),s=e("../../../../object/validate.js");t.exports=function(e){var t=[];for(var n in e.data.nested.all){var l=e.data.nested.all[n],u=s(e.text.nesting)&&n in e.text.nesting?e.text.nesting[n][0]:n;[e.id.value,e.text.value].indexOf(u)<0&&(l=r(l)).forEach(function(t){t[e.text.value||e.id.value]=t[u]}),t=t.concat(l)}function c(n){var r="primary"===n?"value":n,s="value"===r?e.icon.drop.value:e.icon.select.value||e.icon.drop.value,l="value"===r?e.text.value:e.text.secondary.value||e.text.value,u="value"===r?e.font:e.font.secondary;e.dev.value&&o.time("calculating "+n+" width");var c=a().container(i()).data({large:9999,value:t}).draw({update:!1}).font(u).format(e.format).icon({button:s,value:e.icon.value}).id(e.id.value).timing({ui:0}).text(l||e.id.value).type("button").ui({border:"primary"===n?e.ui.border:0,display:"inline-block",margin:0,padding:e.ui.padding.css}).width(!1).draw(),f=[];c.selectAll("div.d3po_node").each(function(e){f.push(this.offsetWidth+1)}).remove();var d={};d[r]=d3.max(f),e.self.width(d),e.dev.value&&o.timeEnd("calculating "+n+" width")}"number"!=typeof e.width.value&&c("primary"),"number"!=typeof e.width.secondary&&(e.text.secondary.value&&e.text.value!==e.text.secondary.value?c("secondary"):e.self.width({secondary:e.width.value}))}},{"../../../../core/console/print.js":83,"../../../../core/font/tester.js":100,"../../../../object/validate.js":207,"../../../../util/copy.js":242,"../../../form.js":138}],192:[function(e,t,n){var r=e("../../../../util/child.js"),i=function(e,t){if(void 0===t)t=window;d3.select(t).on("click."+e.container.id,function(){var t=d3.event.target||d3.event.toElement,n=t.parentNode;n&&["d3po_node","d3po_drop_title"].indexOf(n.className)>=0&&(t=n.parentNode),t&&n&&!r(e.container.ui,t)&&(e.open.value||e.hover.value)&&e.self.open(!1).hover(!1).draw()});try{var n=window.parent.location.host===window.location.host}catch(e){n=!1}n&&t.self!==window.top&&i(e,t.parent)};t.exports=i},{"../../../../util/child.js":240}],193:[function(e,t,n){var r=e("../form.js");t.exports=function(e){"buttons"in e.container||(e.container.buttons=r().container(e.container.ui).type("button"));var t=e.data.viz.length,n=!!e.width.value&&e.width.value/t,i=e.container.ui.selectAll("div.d3po_toggle").data(e.data.viz,function(t){return t[e.id.value]});i.exit().remove(),i.enter().append("div").attr("class","d3po_toggle").style("display","inline-block").style("vertical-align","top"),i.order().each(function(t){"form"in t.d3po||(t.d3po.form=r().container(d3.select(this)));var i=e.id.nesting.length>e.depth.value?e.id.nesting[e.depth.value+1]:e.id.value;t[i]instanceof Array?t.d3po.form.container({id:e.container.id+"_"+t[e.id.value]}).data(t[i]).id(e.id.nesting.slice(1)).type("drop"):t.d3po.form.data([t]).id(e.id.value).type("button"),t.d3po.form.color(e.color).focus(e.focus.value,function(t){t!==e.focus.value&&e.self.focus(t).draw()}).hover(e.hover.value).icon({select:!1,value:e.icon.value}).font(e.font).format(e.format).order(e.order).text(e.text.value).ui({border:e.ui.border,color:e.ui.color,display:"inline-block",margin:0,padding:e.ui.padding.css}).width(n).draw()}),e.data.element.value&&e.data.element.value.on("focus."+e.container.id,function(){e.self.focus(this.value).hover(this.value).draw()}).on("blur."+e.container.id,function(){e.self.hover(!1).draw()})}},{"../form.js":138}],194:[function(e,t,n){(function(){var n,r,i,a,o,s,l,u,c,f,d;f=e("simplify-js"),t.exports=function(e,t){var r,a,s,l,c,h,p,v,g,m,y,b,x,_,w,j,k,z,M,A,E,S,O,T,C,N,P,F,q,B,D,I,R,L,U,V,Y,H,G,X,W,Q,Z,$,J,K,ee,te,ne,re,ie,ae,oe,se,le,ue,ce,fe,de,he,pe,ve,ge,me;if(e.length<3)return null;if(y=[],.5,5,null==t&&(t={}),null==t.maxAspectRatio&&(t.maxAspectRatio=15),null==t.minWidth&&(t.minWidth=0),null==t.minHeight&&(t.minHeight=0),null==t.tolerance&&(t.tolerance=.02),null==t.nTries&&(t.nTries=20),null!=t.angle&&(t.angle instanceof Array?c=t.angle:"number"==typeof t.angle?c=[t.angle]:"string"!=typeof t.angle||isNaN(t.angle)||(c=[Number(t.angle)])),null==c&&(c=d3.range(-90,95,5)),null!=t.aspectRatio&&(t.aspectRatio instanceof Array?p=t.aspectRatio:"number"==typeof t.aspectRatio?p=[t.aspectRatio]:"string"!=typeof t.aspectRatio||isNaN(t.aspectRatio)||(p=[Number(t.aspectRatio)])),null!=t.origin&&t.origin instanceof Array&&(G=t.origin[0]instanceof Array?t.origin:[t.origin]),0===(h=Math.abs(d3.polygonArea(e))))return null;if(L=(K=d3.extent(e,function(e){return e[0]}))[0],q=K[1],U=(ee=d3.extent(e,function(e){return e[1]}))[0],B=ee[1],he=Math.min(q-L,B-U)*t.tolerance,de=function(){var t,n,r;for(r=[],t=0,n=e.length;t<n;t++)X=e[t],r.push({x:X[0],y:X[1]});return r}(),he>0&&(de=f(de,he),e=function(){var e,t,n;for(n=[],e=0,t=de.length;e<t;e++)X=de[e],n.push([X.x,X.y]);return n}()),t.vdebug&&y.push({type:"simplify",poly:e}),L=(te=d3.extent(e,function(e){return e[0]}))[0],q=te[1],[[L,U=(ne=d3.extent(e,function(e){return e[1]}))[0]],[q,U],[q,B=ne[1]],[L,B]],g=(re=[q-L,B-U])[0],v=re[1],ve=Math.min(g,v)/50,null==G)for(G=[],m=d3.polygonCentroid(e),i(m,e)&&G.push(m);G.length<t.nTries;)ce=Math.random()*g+L,fe=Math.random()*v+U,i(ue=[ce,fe],e)&&G.push(ue);for(t.vdebug&&y.push({type:"origins",points:G}),T=0,P=null,w=0,M=c.length;w<M;w++)for(l=-(s=c[w])*Math.PI/180,t.vdebug&&y.push({type:"angle",angle:s}),x=j=0,A=G.length;j<A;x=++j)for(Y=G[x],Q=(ie=n(e,Y,l))[0],$=ie[1],W=(ae=n(e,Y,l+Math.PI/2))[0],Z=ae[1],V=[],null!=Q&&null!=$&&V.push([(Q[0]+$[0])/2,(Q[1]+$[1])/2]),null!=W&&null!=Z&&V.push([(W[0]+Z[0])/2,(W[1]+Z[1])/2]),t.vdebug&&y.push({type:"modifOrigin",idx:x,p1W:Q,p2W:$,p1H:W,p2H:Z,modifOrigins:V}),k=0,E=V.length;k<E;k++)if(H=V[k],t.vdebug&&y.push({type:"origin",cx:H[0],cy:H[1]}),Q=(oe=n(e,H,l))[0],$=oe[1],null!==Q&&null!==$&&(R=Math.min(d(H,Q),d(H,$)),F=2*Math.sqrt(R),W=(se=n(e,H,l+Math.PI/2))[0],Z=se[1],null!==W&&null!==Z&&(I=Math.min(d(H,W),d(H,Z)),!(F*(N=2*Math.sqrt(I))<T))))for(null!=p?a=p:(D=Math.max(1,t.minWidth/N,T/(N*N)),C=Math.min(t.maxAspectRatio,F/t.minHeight,F*F/T),a=d3.range(D,C+.5,.5)),O=0,S=a.length;O<S;O++)if(r=a[O],z=Math.max(t.minWidth,Math.sqrt(T*r)),!((le=Math.min(F,N*r))*N<T))for(le-z>=ve&&t.vdebug&&y.push({type:"aRatio",aRatio:r});le-z>=ve;)b=(pe=(z+le)/2)/r,ge=H[0],me=H[1],J=u(J=[[ge-pe/2,me-b/2],[ge+pe/2,me-b/2],[ge+pe/2,me+b/2],[ge-pe/2,me+b/2]],l,H),o(J,e)?(_=!0,T=pe*b,P={cx:ge,cy:me,width:pe,height:b,angle:s},z=pe):(_=!1,le=pe),t.vdebug&&y.push({type:"rectangle",cx:ge,cy:me,width:pe,height:b,areaFraction:pe*b/h,angle:s,insidePoly:_});return[P,T,y]},d=function(e,t){var n,r;return(n=t[0]-e[0])*n+(r=t[1]-e[1])*r},s=function(e,t,n){var r,i,a,o;return r=(o=t[1]<n[1]?[t,n]:[n,t])[0],i=o[1],e[1]!==i[1]&&e[1]!==r[1]||(e[1]+=Number.MIN_VALUE),!(e[1]>i[1]||e[1]<r[1])&&(!(e[0]>r[0]&&e[0]>i[0])&&(e[0]<r[0]&&e[0]<i[0]||(a=(i[1]-r[1])/(i[0]-r[0]),(e[1]-r[1])/(e[0]-r[0])>a)))},i=function(e,t){var n,r,i,a,o;for(a=-1,r=t[(o=t.length)-1],i=0;++a<o;)n=r,r=t[a],s(e,n,r)&&i++;return i%2!=0},a=function(e,t,n){var r,i;return 1e-9,r=e[0],i=e[1],!(r<Math.min(t[0],n[0])-1e-9||r>Math.max(t[0],n[0])+1e-9||i<Math.min(t[1],n[1])-1e-9||i>Math.max(t[1],n[1])+1e-9)},r=function(e,t,n,r){var i,a,o,s,l,u,c;return 1e-9,s=e[0]-t[0],u=e[1]-t[1],l=n[0]-r[0],o=s*(c=n[1]-r[1])-u*l,Math.abs(o)<1e-9?null:[((i=e[0]*t[1]-e[1]*t[0])*l-(a=n[0]*r[1]-n[1]*r[0])*s)/o,(i*c-a*u)/o]},c=function(e,t,n,i){var o;return null!=(o=r(e,t,n,i))&&(a(o,e,t)&&a(o,n,i))},o=function(e,t){var n,r,a,o,s,l,u,f;for(s=-1,u=e.length,f=t.length,a=e[u-1];++s<u;)for(n=a,a=e[s],l=-1,o=t[f-1];++l<f;)if(r=o,o=t[l],c(n,a,r,o))return!1;return i(e[0],t)},l=function(e,t,n){var r,i,a,o;return null==n&&(n=[0,0]),a=e[0]-n[0],o=e[1]-n[1],[(r=Math.cos(t))*a-(i=Math.sin(t))*o+n[0],i*a+r*o+n[1]]},u=function(e,t,n){var r,i,a,o;for(o=[],r=0,i=e.length;r<i;r++)a=e[r],o.push(l(a,t,n));return o},n=function(e,t,n){var i,o,s,l,u,c,f,h,p,v,g,m,y,b;for(1e-9,y=(t=[t[0]+1e-9*Math.cos(n),t[1]+1e-9*Math.sin(n)])[0],b=t[1],g=[y+Math.cos(n),b+Math.sin(n)],c=0,Math.abs(g[0]-y)<1e-9&&(c=1),u=-1,o=e[(p=e.length)-1],f=Number.MAX_VALUE,h=Number.MAX_VALUE,s=null,l=null;++u<p;)i=o,o=e[u],null!=(v=r(t,g,i,o))&&a(v,i,o)&&(m=d(t,v),v[c]<t[c]?m<f&&(f=m,s=v):v[c]>t[c]&&m<h&&(h=m,l=v));return[s,l]}}).call(this)},{"simplify-js":54}],195:[function(e,t,n){(function(){t.exports=function(e,t,n){var r,i,a,o;return i={x:0,y:0},e<0&&(e=2*Math.PI+e),"square"===n?(a=Math.PI/180*45,e<=Math.PI?e<Math.PI/2?e<a?(i.x+=t,o=Math.tan(e)*t,i.y+=o):(i.y+=t,r=t/Math.tan(e),i.x+=r):e<Math.PI-a?(i.y+=t,r=t/Math.tan(Math.PI-e),i.x-=r):(i.x-=t,o=Math.tan(Math.PI-e)*t,i.y+=o):e<3*Math.PI/2?e<a+Math.PI?(i.x-=t,o=Math.tan(e-Math.PI)*t,i.y-=o):(i.y-=t,r=t/Math.tan(e-Math.PI),i.x-=r):e<2*Math.PI-a?(i.y-=t,r=t/Math.tan(2*Math.PI-e),i.x+=r):(i.x+=t,o=Math.tan(2*Math.PI-e)*t,i.y-=o)):(i.x+=t*Math.cos(e),i.y+=t*Math.sin(e)),i}}).call(this)},{}],196:[function(e,t,n){(function(){var n;n=e("../geom/offset.js"),t.exports=function(e){var t,r,i,a,o,s,l,u,c,f,d,h,p,v;if(!e)return[];for(u=[],i=0,o=(e=e.slice(1).slice(0,-1).split(/L|A/)).length;i<o;i++)if(1===(l=(l=e[i]).split(" ")).length)u.push(l[0].split(",").map(function(e){return parseFloat(e)}));else{for(c=u[u.length-1],a=l.pop().split(",").map(function(e){return parseFloat(e)}),f=parseFloat(l.shift().split(",")[0]),v=Math.sqrt(Math.pow(a[0]-c[0],2)+Math.pow(a[1]-c[1],2)),t=Math.acos((f*f+f*f-v*v)/(2*f*f)),"1"===l[1].split(",")[0]&&(t=2*Math.PI-t),d=t/(2*Math.PI)*(f*Math.PI*2)/5,h=Math.atan2(-c[1],-c[0])-Math.PI,r=p=t/d;r<t;)s=n(h+r,f),u.push([s.x,s.y]),r+=p;u.push(a)}return u}}).call(this)},{"../geom/offset.js":195}],197:[function(e,t,n){(function(){var n;(n={}).version="0.1.0",n.repo="https://github.com/pachamaltese/d3po/",n.array={comparator:e("./array/comparator.js"),contains:e("./array/contains.js"),sort:e("./array/sort.js"),update:e("./array/update.js")},n.client={css:e("./client/css.js"),ie:e("./client/ie.js"),pointer:e("./client/pointer.js"),prefix:e("./client/prefix.js"),rtl:e("./client/rtl.js"),scroll:e("./client/scroll.js"),scrollbar:e("./client/scrollbar.js"),touch:e("./client/touch.js")},n.color={legible:e("./color/legible.js"),lighter:e("./color/lighter.js"),mix:e("./color/mix.js"),random:e("./color/random.js"),scale:e("./color/scale.js"),sort:e("./color/sort.js"),text:e("./color/text.js"),validate:e("./color/validate.js")},n.data={bestRegress:e("./data/bestregression.js"),lof:e("./data/lof.js"),mad:e("./data/mad.js")},n.font={sizes:e("./font/sizes.js"),validate:e("./font/validate.js")},n.form=e("./form/form.js"),n.geom={largestRect:e("./geom/largestrectangle.js"),offset:e("./geom/offset.js"),path2poly:e("./geom/path2poly.js")},n.network={cluster:e("./network/cluster.js"),distance:e("./network/distance.js"),normalize:e("./network/normalize.js"),shortestPath:e("./network/shortestpath.js"),smallestGap:e("./network/smallestgap.js"),subgraph:e("./network/subgraph.js")},n.number={format:e("./number/format.js")},n.object={merge:e("./object/merge.js"),validate:e("./object/validate.js")},n.string={format:e("./string/format.js"),list:e("./string/list.js"),strip:e("./string/strip.js"),title:e("./string/title.js")},n.textwrap=e("./textwrap/textwrap.js"),n.tooltip={create:e("./tooltip/create.js"),move:e("./tooltip/move.js"),remove:e("./tooltip/remove.js")},n.util={buckets:e("./util/buckets.js"),child:e("./util/child.js"),closest:e("./util/closest.js"),copy:e("./util/copy.js"),d3selection:e("./util/d3selection.js"),dataurl:e("./util/dataurl.js"),uniques:e("./util/uniques.js")},n.viz=e("./viz/viz.js"),e("./client/css.js"),e("./core/console/print.js"),"undefined"!=typeof window&&(window.d3po=n),t.exports=n}).call(this)},{"./array/comparator.js":63,"./array/contains.js":64,"./array/sort.js":65,"./array/update.js":66,"./client/css.js":67,"./client/ie.js":68,"./client/pointer.js":69,"./client/prefix.js":70,"./client/rtl.js":71,"./client/scroll.js":72,"./client/scrollbar.js":73,"./client/touch.js":74,"./color/legible.js":75,"./color/lighter.js":76,"./color/mix.js":77,"./color/random.js":78,"./color/scale.js":79,"./color/sort.js":80,"./color/text.js":81,"./color/validate.js":82,"./core/console/print.js":83,"./data/bestregression.js":133,"./data/lof.js":134,"./data/mad.js":135,"./font/sizes.js":136,"./font/validate.js":137,"./form/form.js":138,"./geom/largestrectangle.js":194,"./geom/offset.js":195,"./geom/path2poly.js":196,"./network/cluster.js":199,"./network/distance.js":200,"./network/normalize.js":201,"./network/shortestpath.js":202,"./network/smallestgap.js":203,"./network/subgraph.js":204,"./number/format.js":205,"./object/merge.js":206,"./object/validate.js":207,"./string/format.js":208,"./string/list.js":209,"./string/strip.js":210,"./string/title.js":211,"./textwrap/textwrap.js":235,"./tooltip/create.js":236,"./tooltip/move.js":237,"./tooltip/remove.js":238,"./util/buckets.js":239,"./util/child.js":240,"./util/closest.js":241,"./util/copy.js":242,"./util/d3selection.js":243,"./util/dataurl.js":244,"./util/uniques.js":245,"./viz/viz.js":374}],198:[function(e,t,n){(function(){window.d3=e("d3"),window.topojson=e("topojson")}).call(this)},{d3:38,topojson:57}],199:[function(e,t,n){(function(){var n;n=e("./normalize.js"),t.exports=function(e,t){var r,i,a,o,s,l,u,c,f,d,h,p,v,g,m,y,b,x,_,w,j,k,z,M,A,E,S,O,T;if(h=[],null==t&&(t={}),(null==t.nodes||"object"!=typeof t.nodes)&&(e=(S=n(e,t))[0],null===(t=S[1])))return null;for(v in t.distance,M=t.nodeid,T=t.startpoint,d=t.endpoint,E={},A=t.nodes)E[v]={node:A[v].node,degree:0};for(w=0,_={},p=0,b=e.length;p<b;p++)r=M(T(f=e[p])),i=M(d(f)),r in _||(_[r]={}),i in _||(_[i]={}),i in _[r]||(_[r][i]=0,_[i][r]=0,w++,E[r].degree+=1,E[i].degree+=1);for(v in l={},0,E)z=E[v],l[v]={score:z.degree/(2*w),nodes:[v]};for(r in _)for(i in _[r])_[r][i]=1/(2*w)-E[r].degree*E[i].degree/(4*w*w);for(g=0;g<1e3;){for(r in c=-1,j=void 0,k=void 0,_)for(i in _[r])_[r][i]>c&&(c=_[r][i],j=r,k=i);if(c<0)break;for(y in _[j])y!==k&&(y in _[k]?_[k][y]+=_[j][y]:_[k][y]=_[j][y]-2*l[k].score*l[y].score,_[y][k]=_[k][y]),delete _[y][j];for(y in _[k])y in _[j]||y===k||(_[k][y]-=2*l[j].score*l[y].score,_[y][k]=_[k][y]);for(m=0,x=(O=l[j].nodes).length;m<x;m++)z=O[m],l[k].nodes.push(z);l[k].score+=l[j].score,t.vdebug&&h.push({type:"merge",father:k,child:j,nodes:l[k].nodes}),delete l[j],delete _[j],c,g++}return(s=function(){var e;for(a in e=[],l)u=l[a],e.push([a,u.nodes.length]);return e}()).sort(function(e,t){return t[1]-e[1]}),[function(){var e,t,n;for(n=[],e=0,t=s.length;e<t;e++)o=s[e],n.push(l[o[0]].nodes);return n}(),h]}}).call(this)},{"./normalize.js":201}],200:[function(e,t,n){(function(){t.exports=function(e,t){var n,r;return e instanceof Array||(e=[e.x,e.y]),t instanceof Array||(t=[t.x,t.y]),n=Math.abs(e[0]-t[0]),r=Math.abs(e[1]-t[1]),Math.sqrt(n*n+r*r)}}).call(this)},{}],201:[function(e,t,n){(function(){var n;n=e("../core/console/print.js"),t.exports=function(e,t){var r,i,a,o,s,l,u,c,f,d,h,p,v,g,m,y,b,x,_,w,j,k,z,M,A,E,S,O,T,C,N;if(O=t.source,C=t.target,o=t.directed,s=t.distance,M=t.nodeid,T=t.startpoint,c=t.endpoint,r=t.K,N=t.vdebug,o||(o=!1),null==r&&(r=1),null==M?M=function(e){return e}:"string"==typeof M&&(M=function(e){return function(t){return t[e]}}(M)),null!=O&&"object"==typeof O&&(O=M(O)),null!=C&&"object"==typeof C&&(C=M(C)),null==T?T=function(e){return e.source}:"string"==typeof T&&(T=function(e){return function(t){return t[e]}}(T)),null==c?c=function(e){return e.target}:"string"==typeof c&&(c=function(e){return function(t){return t[e]}}(c)),null==s)s=function(e){return 1};else if("number"==typeof s)s=function(e){return function(t){return e}}(s);else if("string"==typeof s)s=function(e){return function(t){return t[e]}}(s);else if(s instanceof Array){for(u={},d=m=0,x=e.length;m<x;d=++m)l=e[d],i=M(T(l)),a=M(c(l)),u[i+"_"+a]=s[d];s=function(e){return i=M(T(e)),a=M(c(e)),u[i+"_"+a]}}for(A={},y=0,_=e.length;y<_;y++){for(l=e[y],k=T(l),z=c(l),v=M(k),g=M(z),b=0,w=(E=[k,z]).length;b<w;b++)(h=M(j=E[b]))in A||(A[h]={node:j,outedges:[]});A[v].outedges.push(l),o||A[g].outedges.push(l)}return f=null,0===e.length?f="The length of edges is 0":r<0?f="K can not have negative value":null==s(e[0])?f="Check the distance function/attribute":null==T(e[0])?f="Check the startpoint function/attribute":null==c(e[0])?f="Check the endpoint function/attribute":null==(p=M(T(e[0])))||"string"!=(S=typeof p)&&"number"!==S?f="Check the nodeid function/attribute":null==O||O in A?null==C||C in A||(f="The target is not in the graph"):f="The source is not in the graph",null!=f?(n.error(f),null):[e,{source:O,target:C,directed:o,distance:s,nodeid:M,startpoint:T,endpoint:c,K:r,nodes:A,vdebug:N}]}}).call(this)},{"../core/console/print.js":83}],202:[function(e,t,n){(function(){var n,r;n=e("heap"),r=e("./normalize.js"),t.exports=function(e,t,i){var a,o,s,l,u,c,f,d,h,p,v,g,m,y,b,x,_,w,j,k,z,M,A,E,S,O,T,C;if(null==i&&(i={}),i.source=t,(null==i.nodes||"object"!=typeof i.nodes)&&(k=r(e,i),e=k[0],null===(i=k[1])))return null;for(g in t=i.source,O=i.target,u=i.directed,c=i.distance,_=i.nodeid,S=i.startpoint,d=i.endpoint,a=i.K,w=i.nodes)w[g].count=0;for(p=new n(function(e,t){return e.distance-t.distance}),C={},null==O&&(C[t]=!0),p.push({edge:null,target:t,distance:0}),x=0,E=[];!p.empty()&&(x=Math.max(x,p.size()),w[T=(j=p.pop()).target].count++,null==O?E.push(j):T===O&&E.push(j),E.length!==a);)if(w[T].count<=a)for(v=0,y=(z=w[T].outedges).length;v<y;v++){if(o=_(S(f=z[v])),l=_(d(f)),u||l!==T||(o=(M=[l,o])[0],l=M[1]),null==O){if(C[l])continue;C[l]=!0}s=j.distance+c(f),p.push({edge:f,previous:j,target:l,distance:s})}for(h=function(t){for(e=[];null!=t.edge;)e.push(t.edge),t=t.previous;return e.reverse()},m=0,b=E.length;m<b;m++)A=E[m],null!=O&&(delete A.target,A.edges=h(A)),delete A.edge,delete A.previous;return E}}).call(this)},{"./normalize.js":201,heap:40}],203:[function(e,t,n){(function(){var n;n=e("./distance.js"),t.exports=function(e,t){var r;return t||(t={}),r=[],d3.quadtree().x(function(e){return t.accessor?t.accessor(e)[0]:e[0]}).y(function(e){return t.accessor?t.accessor(e)[1]:e[1]}).addData(e).visit(function(e){var i,a,o,s,l,u,c,f;if(!e.leaf)for(i=0,o=(c=e.nodes).length;i<o;i++)if((l=c[i])&&l.point)if(t.origin)r.push(n(l,t));else for(a=0,s=(f=e.nodes).length;a<s;a++)(u=f[a])&&u.point&&u.point!==l.point&&r.push(n(l,u));return!1}),t.all?r.sort(function(e,t){return e-t}):d3.min(r)}}).call(this)},{"./distance.js":200}],204:[function(e,t,n){(function(){var n;n=e("./normalize.js"),t.exports=function(e,t,r){var i,a,o,s,l,u,c,f,d,h,p,v;return null==r&&(r={}),r.source=t,null!=r.nodes&&"object"==typeof r.nodes||(h=n(e,r),e=h[0],null!==(r=h[1]))?(t=r.source,o=r.directed,s=r.distance,f=r.nodeid,p=r.startpoint,u=r.endpoint,i=r.K,d=r.nodes,(v={})[t]=!0,(a=function(e,t){var n,r,l,c,h,g,m,y,b;for(b=[],c=0,h=(m=d[e].outedges).length;c<h;c++)l=m[c],n=f(p(l)),r=f(u(l)),o||r!==e||(n=(y=[r,n])[0],r=y[1]),r in v?b.push(void 0):(g=t+s(l))<=i?(v[r]=!0,b.push(a(r,g))):b.push(void 0);return b})(t,0),{nodes:function(){var e;for(c in e=[],v)e.push(d[c].node);return e}(),edges:function(){var t,n,r;for(r=[],t=0,n=e.length;t<n;t++)l=e[t],f(p(l))in v&&f(u(l))in v&&r.push(l);return r}()}):null}}).call(this)},{"./normalize.js":201}],205:[function(e,t,n){(function(){var n;n=e("../core/locale/languages/en_US.js"),t.exports=function(e,t){var r,i,a,o,s,l,u,c,f,d;return null==e||!1===e?"":(t||(t={}),f=(l="locale"in t?t.locale:n).time.slice(),i=d3.formatLocale(l.format),t||(t={}),d=t.vars||{},a=t.key,o=!("labels"in t)||t.labels,s=e.toString().split(".")[0].length,d.time&&d.time.value&&f.push(d.time.value),"string"==typeof a&&f.indexOf(a.toLowerCase())>=0?u=e:"share"===a?(u=0===e?0:e>=100?i.format(",f")(e):e>99?i.format(".3g")(e):i.format(".2g")(e),u+="%"):e<10&&e>-10?(c=1,(s=e.toString().split(".")).length>1&&(c=d3.min([parseFloat(s[1]).toString().length,2]),-1<e&&e<1||(c+=1+(s[1].length-parseFloat(s[1]).toString().length))),u=i.format("."+c+"g")(e)):u=s>3?i.formatPrefix(".3g",e)(e).replace("G","B"):3===s?i.format(",f")(e):0===e?0:e===parseInt(e,10)?i.format(".2")(e):i.format(".3g")(e),u.length>2&&""+u.indexOf(".0")===u.length-2&&(u=u.slice(0,u.length-2)),o&&a&&"format"in d&&a in d.format.affixes.value?(r=d.format.affixes.value[a])[0]+u+r[1]:u)}}).call(this)},{"../core/locale/languages/en_US.js":103}],206:[function(e,t,n){(function(){var n,r;n=e("../util/d3selection.js"),r=e("./validate.js"),t.exports=function(e,t){var i,a;return i=function(e,t,a){var o,s,l;for(o in s=[],e)void 0!==(l=e[o])?!a&&r(l)?("object"!=typeof t[o]&&(t[o]={}),s.push(i(l,t[o],0===o.indexOf("d3po")))):!n(l)&&l instanceof Array?s.push(t[o]=l.slice(0)):s.push(t[o]=l):s.push(void 0);return s},a={},e&&i(e,a),t&&i(t,a),a}}).call(this)},{"../util/d3selection.js":243,"./validate.js":207}],207:[function(e,t,n){(function(){t.exports=function(e){return e&&e.constructor===Object}}).call(this)},{}],208:[function(e,t,n){t.exports=function(){var e=Array.prototype.slice.call(arguments),t=e.shift();return t.unkeyed_index=0,t.replace(/\{(\w*)\}/g,function(n,r){if(""===r&&(r=t.unkeyed_index,t.unkeyed_index++),r==+r)return"undefined"!==e[r]?e[r]:n;for(var i=0;i<e.length;i++)if("object"==typeof e[i]&&void 0!==e[i][r])return e[i][r];return n}.bind(t))}},{}],209:[function(e,t,n){(function(){var n,r;n=e("./format.js"),r=e("../core/locale/languages/en_US.js").ui,t.exports=function(e,t,i,a){var o;return e instanceof Array?(e=e.slice(0),t||(t=r.and),a||(a=r.moreText),2===e.length?e.join(" "+t+" "):(i&&e.length>i&&(o=e.length-i+1,(e=e.slice(0,i-1))[i-1]=n(a,o)),e.length>1&&(e[e.length-1]=t+" "+e[e.length-1]),e.join(", "))):e}}).call(this)},{"../core/locale/languages/en_US.js":103,"./format.js":208}],210:[function(e,t,n){t.exports=function(e){var t=[[/[\300-\305]/g,"A"],[/[\340-\345]/g,"a"],[/[\306]/g,"AE"],[/[\346]/g,"ae"],[/[\337]/g,"B"],[/[\307]/g,"C"],[/[\347]/g,"c"],[/[\320\336\376]/g,"D"],[/[\360]/g,"d"],[/[\310-\313]/g,"E"],[/[\350-\353]/g,"e"],[/[\314-\317]/g,"I"],[/[\354-\357]/g,"i"],[/[\321]/g,"N"],[/[\361]/g,"n"],[/[\322-\326\330]/g,"O"],[/[\362-\366\370]/g,"o"],[/[\331-\334]/g,"U"],[/[\371-\374]/g,"u"],[/[\327]/g,"x"],[/[\335]/g,"Y"],[/[\375\377]/g,"y"]];return""+e.toString().replace(/[^A-Za-z0-9\-_]/g,function(e){if(" "===e)return"-";for(var n=!1,r=0;r<t.length;r++)if(new RegExp(t[r][0]).test(e)){n=t[r][1];break}return n||""})}},{}],211:[function(e,t,n){(function(){var n;n=e("../core/locale/languages/en_US.js"),t.exports=function(e,t){var r,i,a,o;return e?(t||(t={}),t.key,"."===e.charAt(e.length-1)?e.charAt(0).toUpperCase()+e.substr(1):(a="locale"in this?this.locale.value:n,o=a.lowercase.map(function(e){return e.toLowerCase()}),i=(i=a.uppercase).concat(i.map(function(e){return e+"s"})),r=i.map(function(e){return e.toLowerCase()}),e.replace(/[^\s!-#%&(-\x2A,-:;\x3F@\x5B-\x5D_\x7B}\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]*/g,function(t,n){var a;return t?(a=r.indexOf(t.toLowerCase()))>=0?i[a]:o.indexOf(t.toLowerCase())>=0&&0!==n&&n!==e.length-1?t.toLowerCase():t.charAt(0).toUpperCase()+t.substr(1).toLowerCase():""}))):""}}).call(this)},{"../core/locale/languages/en_US.js":103}],212:[function(e,t,n){(function(){var n,r;n=e("./foreign.js"),r=e("./tspan.js"),t.exports=function(e){e.text.html.value?n(e):r(e)}}).call(this)},{"./foreign.js":213,"./tspan.js":216}],213:[function(e,t,n){(function(){t.exports=function(e){var t,n,r,i,a;r=(a=e.container.value).attr("font-family")||a.style("font-family"),t=e.align.value||a.attr("text-anchor")||a.style("text-anchor"),n=a.attr("fill")||a.style("fill"),i=a.attr("opacity")||a.style("opacity"),t="end"===t?"right":"middle"===t?"center":"left",d3.select(a.node().parentNode).append("foreignObject").attr("width",e.width.value+"px").attr("height",e.height.value+"px").attr("x","0px").attr("y","0px").append("xhtml:div").style("font-family",r).style("font-size",e.size.value[1]+"px").style("color",n).style("text-align",t).style("opacity",i).text(e.text.current)}}).call(this)},{}],214:[function(e,t,n){(function(){t.exports=function(e){var t,n,r,i,a,o,s,l,u,c;if(o=(i=(n=e.container.value).node().previousElementSibling)?i.tagName.toLowerCase():"",i&&(i=d3.select(i)),e.container.x=e.x.value||parseFloat(n.attr("x"),10),e.container.y=e.y.value||parseFloat(n.attr("y"),10),i&&(e.shape.accepted.indexOf(o)>=0&&e.self.shape(o),"rect"===o?(u=parseFloat(i.attr("x"),10)||0,c=parseFloat(i.attr("y"),10)||0,!1===e.padding.value&&(t=Math.abs(u-e.container.x))&&e.self.padding(t),e.container.x||(e.container.x=u+e.padding.value),e.container.y||(e.container.y=c+e.padding.value),e.width.value||(l=parseFloat(i.attr("width")),e.self.width(l)),e.height.value||(r=parseFloat(i.attr("height")),e.self.height(r))):"circle"===o?(a=parseFloat(i.attr("r"),10),u=parseFloat(i.attr("cx"),10)||0,u-=a,c=parseFloat(i.attr("cy"),10)||0,c-=a,!1===e.padding.value&&(t=Math.abs(u-e.container.x))&&e.self.padding(t),e.container.x||(e.container.x=u+e.padding.value),e.container.y||(e.container.y=c+e.padding.value),e.width.value||e.self.width(2*a,10),e.height.value||e.self.height(2*a,10)):(e.width.value||e.self.width(500),e.height.value||e.self.height(500))),e.container.x||(e.container.x=0),e.container.y||(e.container.y=0),e.width.inner=e.width.value-2*e.padding.value,e.height.inner=e.height.value-2*e.padding.value,s=n.attr("font-size")||n.style("font-size"),s=parseFloat(s,10),e.container.fontSize=s,e.container.dy=parseFloat(n.attr("dy"),10),!e.size.value)return e.resize.value?e.self.size([4,80]):e.self.size([s/2,s])}}).call(this)},{}],215:[function(e,t,n){(function(){t.exports=function(e){var t;if(e.text.value||(t=e.container.value.text())&&(t.indexOf("tspan")>=0&&(t.replace(/\<\/tspan\>\<tspan\>/g," "),t.replace(/\<\/tspan\>/g,""),t.replace(/\<tspan\>/g,"")),t=(t=t.replace(/(\r\n|\n|\r)/gm,"")).replace(/^\s+|\s+$/g,""),e.self.text(t)),e.text.value instanceof Array?e.text.phrases=e.text.value.filter(function(e){return["string","number"].indexOf(typeof e)>=0}):e.text.phrases=[e.text.value+""],!e.align.value)return e.container.align=e.container.value.style("text-anchor")||e.container.value.attr("text-anchor")}}).call(this)},{}],216:[function(e,t,n){(function(){var n;n=e("../../client/rtl.js"),t.exports=function(e){var t,r,i,a,o,s,l,u,c,f,d,h,p,v,g,m,y,b,x,_,w,j,k,z,M,A,E,S,O,T,C;return d=function(t){return(!v||t?e.container.value.append("tspan"):e.container.value.insert("tspan","tspan")).attr("x",S+"px").attr("dy",r+"px").style("baseline-shift","0%").attr("dominant-baseline","alphabetic")},f=-90===e.rotate.value||90===e.rotate.value,M=f?e.height.inner:e.width.inner,s=f?e.width.inner:e.height.inner,O="end"===(t="circle"===e.shape.value?"middle":e.align.value||e.container.align||"start")||"start"===t&&n?M:"middle"===t?M/2:0,z=e.valign.value||"top",S=e.container.x+O,a=e.resize.value?e.size.value[1]:e.container.fontSize||e.size.value[0],r=e.container.dy||1.1*a,w=null,p=null,A=null,v=!1,C=0,"circle"===e.shape.value&&("middle"===z?C=s/r%1*r/2:"end"===z&&(C=s/r%1*r)),e.container.value.attr("text-anchor",t).attr("font-size",a+"px").style("font-size",a+"px").attr("x",e.container.x).attr("y",e.container.y),k=function(){if(w.remove(),v?(l++,w=e.container.value.select("tspan")):(l--,w=d3.select(e.container.value.node().lastChild)),!w.empty())return A=w.text().match(/[^\s-]+-?/g),i()},u=function(){var t;return"circle"===e.shape.value?((t=(l-1)*r+C)>s/2&&(t+=r),2*Math.sqrt(t*(M/2*2-t))):M},i=function(){var t,n;return A&&A.length?(t=(n=A.pop()).charAt(n.length-1),1===n.length&&e.text.split.value.indexOf(n)>=0?i():(e.text.split.value.indexOf(t)>=0&&(n=n.substr(0,n.length-1)),w.text(A.join(" ")+" "+n+"..."),w.node().getComputedTextLength()>u()?i():void 0)):k()},h=function(t){var n,r,i,a;if(n=w.text(),a="",v){if(" "===(a=e.text.current.charAt(e.text.current.length-p.length-1)))for(i="",r=2;" "===a;)i+=" ",a=e.text.current.charAt(e.text.current.length-p.length-r),r++;else i="";p=t+i+p,w.text(t+i+n)}else{if(" "===(a=e.text.current.charAt(p.length)))for(i="",r=1;" "===a;)i+=" ",a=e.text.current.charAt(p.length+r),r++;else i="";p+=i+t,w.text(n+i+t)}if(Math.floor(w.node().getComputedTextLength())>u()||"\n"===a)return w.text(n),n.length&&(w=d()),w.text(t),v?l--:l++},_=1,l=null,c=null,(E=function(){var t,n,i,a,o,u;for(e.container.value.text("").html(""),A=e.text.words.slice(),v&&A.reverse(),p="",w=d(!0),l=_,n=0,i=A.length;n<i;n++){if(u=A[n],l*r>s){k();break}for(h(u),o=!0;o;){for(a=e.text.current.charAt(p.length),t=1;" "===a;)a=e.text.current.charAt(p.length+t),t++;(o=e.text.split.value.indexOf(a)>=0)&&h(a)}}return l*r>s&&k(),c=Math.abs(l-_)+1})(),c=0,e.container.value.selectAll("tspan").each(function(){if(d3.select(this).text().length)return c++}),"circle"===e.shape.value&&(x=s-c*r)>r&&("middle"===z?(_=1+(x/r/2>>0),E()):"bottom"===z&&(v=!0,_=s/r>>0,E())),c=0,e.container.value.selectAll("tspan").each(function(){if(d3.select(this).text().length)return c++}),"top"===z?T=0:(o=c*r,T="middle"===z?s/2-o/2:s-o),j="translate(0,"+(T-=.2*r)+")",180===e.rotate.value||-180===e.rotate.value?(y=e.container.x+M/2,b=e.container.y+s/2):(g=e.rotate.value<0?M:s,y=e.container.x+g/2,b=e.container.y+g/2),m="rotate("+e.rotate.value+", "+y+", "+b+")",e.container.value.attr("transform",m+j)}}).call(this)},{"../../client/rtl.js":71}],217:[function(e,t,n){(function(){var n,r,i,a;n=e("./flow.js"),r=e("../../font/sizes.js"),a=function(e){var t;e.text.phrases.length&&(e.text.current=e.text.phrases.shift()+"",e.text.words=e.text.current.match(e.text.split.break),(t=e.text.current.charAt(0))!==e.text.words[0].charAt(0)&&(e.text.words[0]=t+e.text.words[0]),e.container.value.html(""),e.resize.value?i(e):n(e))},t.exports=a,i=function(e){var t,i,o,s,l,u,c,f,d,h,p,v,g,m,y,b,x;for(x=[],c=0;c<e.text.words.length;)t=c===e.text.words.length-1?"":" ",x.push(e.text.words[c]+t),c++;y=(h=-90===e.rotate.value||90===e.rotate.value)?e.height.inner:e.width.inner,l=h?e.width.inner:e.height.inner,p=Math.floor(e.size.value[1]),f="circle"===e.shape.value?.75*y:y,g=r(x,{"font-size":p+"px"},{parent:e.container.value}),d=d3.max(g,function(e){return e.width}),i=1.165+y/l*.11,m=d3.sum(g,function(t){var n;return n=e.container.dy||1.2*p,t.width*n})*i,s="circle"===e.shape.value?Math.PI*Math.pow(y/2,2):f*l,(d>f||m>s)&&(o=Math.sqrt(s/m),b=f/d,v=d3.min([o,b]),p=d3.max([e.size.value[0],Math.floor(p*v)])),u=Math.floor(.8*l),p>u&&(p=u),d*(p/e.size.value[1])<=f?(p!==e.size.value[1]&&e.self.size([e.size.value[0],p]),n(e)):a(e)}}).call(this)},{"../../font/sizes.js":136,"./flow.js":212}],218:[function(e,t,n){(function(){t.exports={accepted:[!1,"start","middle","end","left","center","right"],process:function(e){var t;return(t=["left","center","right"].indexOf(e))>=0&&(e=this.accepted[t+1]),e},value:!1}}).call(this)},{}],219:[function(e,t,n){arguments[4][142][0].apply(n,arguments)},{dup:142}],220:[function(e,t,n){(function(){var n;n=e("../../util/d3selection.js"),t.exports={accepted:[!1,Array,Object,String],element:!1,id:"default",process:function(e){return!1!==e&&(n(e)?e:e instanceof Array?d3.select(e[0][0]):(this.selector=e,d3.select(e)))},value:!1}}).call(this)},{"../../util/d3selection.js":243}],221:[function(e,t,n){arguments[4][146][0].apply(n,arguments)},{dup:146}],222:[function(e,t,n){(function(){var n,r;n=e("../../core/console/print.js"),r=e("../../string/format.js"),t.exports={accepted:[void 0],process:function(e,t){var i,a;return!1===this.initialized?e:(!1===t.container.value?(a=t.format.locale.value.dev.setContainer,n.warning(a,"container")):t.container.value.empty()?(a=t.format.locale.value.dev.noContainer,i=t.container.selector||"",n.warning(r(a,'"'+i+'"'),"container")):(t.dev.value&&n.time("total draw time"),t.container.value.call(t.self)),e)},value:void 0}}).call(this)},{"../../core/console/print.js":83,"../../string/format.js":208}],223:[function(e,t,n){(function(){var n,r;n=e("../../core/locale/locale.js"),r=e("../../object/merge.js"),t.exports={accepted:[Function,String],locale:{accepted:function(){return d3.keys(n)},process:function(e){var t;return"en_US",t=n.en_US,"en_US"!==e&&(t=r(t,n[e])),this.language=e,t},value:"en_US"},process:function(e,t){if(this.initialized&&"string"==typeof e)t.self.format({locale:e});else if("function"==typeof e)return e;return this.value},value:"en_US"}}).call(this)},{"../../core/locale/locale.js":113,"../../object/merge.js":206}],224:[function(e,t,n){(function(){t.exports={accepted:[!1,Number],value:!1}}).call(this)},{}],225:[function(e,t,n){arguments[4][224][0].apply(n,arguments)},{dup:224}],226:[function(e,t,n){arguments[4][146][0].apply(n,arguments)},{dup:146}],227:[function(e,t,n){(function(){t.exports={accepted:[-180,-90,0,90,180],value:0}}).call(this)},{}],228:[function(e,t,n){(function(){t.exports={accepted:["circle","square"],value:!1}}).call(this)},{}],229:[function(e,t,n){(function(){t.exports={accepted:[Array,!1],value:!1}}).call(this)},{}],230:[function(e,t,n){(function(){t.exports={accepted:[!1,Array,Number,String],html:{accepted:[Boolean],value:!1},init:function(e){var t;return t=this.split.value,this.split.break=new RegExp("[^\\s\\"+t.join("\\")+"]+\\"+t.join("?\\")+"?","g"),!1},split:{accepted:[Array],process:function(e){return this.break=new RegExp("[^\\s\\"+e.join("\\")+"]+\\"+e.join("?\\")+"?","g"),e},value:["-","/",";",":","&"]}}}).call(this)},{}],231:[function(e,t,n){(function(){t.exports={accepted:[!1,"top","middle","bottom"],value:!1}}).call(this)},{}],232:[function(e,t,n){arguments[4][224][0].apply(n,arguments)},{dup:224}],233:[function(e,t,n){arguments[4][224][0].apply(n,arguments)},{dup:224}],234:[function(e,t,n){arguments[4][224][0].apply(n,arguments)},{dup:224}],235:[function(e,t,n){(function(){var n,r,i,a,o;n=e("../core/methods/attach.js"),i=e("./helpers/parsesize.js"),r=e("../core/console/print.js"),a=e("./helpers/parsetext.js"),o=e("./helpers/wrap.js"),t.exports=function(){var t;return n(t={self:function(e){return e.each(function(){i(t),t.size.value[0]<=t.height.inner?(a(t),o(t)):t.container.value.html(""),t.dev.value&&r.timeEnd("total draw time")}),t.self}},{align:e("./methods/align.js"),config:e("./methods/config.js"),container:e("./methods/container.js"),dev:e("./methods/dev.js"),draw:e("./methods/draw.js"),format:e("./methods/format.js"),height:e("./methods/height.js"),padding:e("./methods/padding.js"),resize:e("./methods/resize.js"),rotate:e("./methods/rotate.js"),text:e("./methods/text.js"),shape:e("./methods/shape.js"),size:e("./methods/size.js"),valign:e("./methods/valign.js"),width:e("./methods/width.js"),x:e("./methods/x.js"),y:e("./methods/y.js")}),t.self}}).call(this)},{"../core/console/print.js":83,"../core/methods/attach.js":114,"./helpers/parsesize.js":214,"./helpers/parsetext.js":215,"./helpers/wrap.js":217,"./methods/align.js":218,"./methods/config.js":219,"./methods/container.js":220,"./methods/dev.js":221,"./methods/draw.js":222,"./methods/format.js":223,"./methods/height.js":224,"./methods/padding.js":225,"./methods/resize.js":226,"./methods/rotate.js":227,"./methods/shape.js":228,"./methods/size.js":229,"./methods/text.js":230,"./methods/valign.js":231,"./methods/width.js":232,"./methods/x.js":233,"./methods/y.js":234}],236:[function(e,t,n){var r=e("../core/locale/languages/en_US.js"),i=e("../client/pointer.js"),a=e("../color/legible.js"),o=e("./move.js"),s=e("../client/prefix.js"),l=e("../client/rtl.js"),u=e("./remove.js"),c=e("../client/scroll.js"),f=e("../client/scrollbar.js"),d=e("../string/list.js"),h=e("../color/text.js");function p(){d3.selectAll("div.d3po_tooltip_data_desc").style("height","0px"),d3.selectAll("div.d3po_tooltip_data_help").style("background-color","#ccc")}t.exports=function(e){var t=e.fullscreen?250:200,n=s();e.width=e.width||t,e.max_width=e.max_width||386,e.id=e.id||"default",e.size=e.fullscreen||e.html?"large":"small",e.offset=e.offset||0,e.arrow_offset=e.arrow?8:0,e.x=e.x||0,e.y=e.y||0,e.parent=e.parent||d3.select("body"),e.curtain=e.curtain||"#fff",e.curtainopacity=e.curtainopacity||.8,e.background=e.background||"#fff",e.fontcolor=e.fontcolor||"#444",e.fontfamily=e.fontfamily||"sans-serif",e.fontweight=e.fontweight||"normal",e.fontsize=e.fontsize||"12px",e.style=e.style||"default",e.zindex="small"==e.size?2e3:500,e.locale=e.locale||r,e.stacked=e.stacked||!1;var v=e.parent?e.parent.node().offsetHeight||e.parent.node().getBoundingClientRect().height:0;if(e.iconsize||(e.iconsize="small"==e.size?22:50),e.parent.node()===document.body){e.limit=[window.innerWidth+c.x(),window.innerHeight+c.y()];var g=f();document.body.scrollHeight>window.innerHeight&&(e.limit[0]-=g)}else e.limit=[parseFloat(e.parent.style("width"),10),parseFloat(e.parent.style("height"),10)];if(e.title instanceof Array){var m=e.locale.ui.and,y=e.locale.ui.more;e.title=d(e.title,m,3,y)}if(u(e.id),e.anchor={},e.fullscreen)e.anchor.x="center",e.anchor.y="center",e.x=e.parent?e.parent.node().offsetWidth/2:window.innerWidth/2,e.y=e.parent?v/2:window.innerHeight/2;else if(e.align){var b=e.align.split(" ");e.anchor.y=b[0],b[1]?e.anchor.x=b[1]:e.anchor.x="center"}else e.anchor.x="center",e.anchor.y="top";var x=e.width-30;if(e.fullscreen)e.parent.append("div").attr("id","d3po_tooltip_curtain_"+e.id).attr("class","d3po_tooltip_curtain").style("background-color",e.curtain).style("opacity",e.curtainopacity).style("position","absolute").style("z-index",499).style("top","0px").style("right","0px").style("bottom","0px").style("left","0px").on(i.click,function(){u(e.id)});var _=e.parent.append("div").datum(e).attr("id","d3po_tooltip_id_"+e.id).attr("class","d3po_tooltip d3po_tooltip_"+e.size).style("color",e.fontcolor).style("font-family",e.fontfamily).style("font-weight",e.fontweight).style("font-size",e.fontsize+"px").style(n+"box-shadow","0px 1px 3px rgba(0, 0, 0, 0.25)").style("position","absolute").on(i.out,p);e.max_height&&_.style("max-height",e.max_height+"px"),e.fixed?(_.style("z-index",500),e.mouseevents=!0):_.style("z-index",2e3);var w=_.append("div").datum(e).attr("class","d3po_tooltip_container").style("background-color",e.background).style("padding","6px");if(e.fullscreen&&e.html&&!e.stacked){k=e.parent?.75*e.parent.node().offsetWidth:.75*window.innerWidth,B=e.parent?.75*v:.75*window.innerHeight,w.style("width",k+"px").style("height",B+"px");var j=w.append("div").attr("class","d3po_tooltip_body").style("padding-right","6px").style("display","inline-block").style("z-index",1).style("width",e.width+"px")}else{if("auto"==e.width){var k="auto";w.style("max-width",e.max_width+"px")}else k=e.width-14+"px";j=w.style("width",k)}if(e.title||e.icon)var z=j.append("div").attr("class","d3po_tooltip_header").style("position","relative").style("z-index",1);if(e.fullscreen){_.append("div").attr("class","d3po_tooltip_close").style("background-color",e.color).style("color",h(e.color)).style("position","absolute").style(n+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.25)").style("font-size","20px").style("height","18px").style("line-height","14px").style("text-align","center").style("right","16px").style("top","-10px").style("width","18px").style("z-index",10).html("&times;").on(i.over,function(){d3.select(this).style("cursor","pointer").style(n+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.5)")}).on(i.out,function(){d3.select(this).style("cursor","auto").style(n+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.25)")}).on(i.click,function(){u(e.id)});d3.select("body").on("keydown.esc_"+e.id,function(){27===d3.event.keyCode&&(u(e.id),d3.select("body").on("keydown.esc_"+e.id,null))})}if(e.mouseevents){if(!0!==e.mouseevents){var M=d3.select(e.mouseevents).on(i.out),A=function(){var t=d3.event.toElement||d3.event.relatedTarget;if(t)var n=0==("string"==typeof t.className?t.className:t.className.baseVal).indexOf("d3po_tooltip");else n=!1;t&&(E(_.node(),t)||E(e.mouseevents,t)||n)||(M(d3.select(e.mouseevents).datum()),p(),d3.select(e.mouseevents).on(i.out,M))},E=function(e,t){for(var n=t.parentNode;null!==n;){if(n==e)return!0;n=n.parentNode}return!1};d3.select(e.mouseevents).on(i.out,A),_.on(i.out,A);var S=d3.select(e.mouseevents).on(i.move);S&&_.on(i.move,S)}}else _.style("pointer-events","none");if(e.arrow)_.append("div").attr("class","d3po_tooltip_arrow").style("background-color",e.background).style(n+"box-shadow","0px 1px 3px rgba(0, 0, 0, 0.25)").style("position","absolute").style("bottom","-5px").style("height","10px").style("left","50%").style("margin-left","-5px").style("width","10px").style(n+"transform","rotate(45deg)").style("z-index",-1);if(e.icon){var O=z.append("div").attr("class","d3po_tooltip_icon").style("width",e.iconsize+"px").style("height",e.iconsize+"px").style("z-index",1).style("background-position","50%").style("background-size","100%").style("background-image","url("+e.icon+")").style("display","inline-block").style("margin","0px 3px 3px 0px");"knockout"==e.style&&O.style("background-color",e.color),x-=O.node().offsetWidth}if(e.title){var T=e.max_width-6;e.icon&&(T-=e.iconsize+6),T+="px";z.append("div").attr("class","d3po_tooltip_title").style("max-width",T).style("color",e.icon?e.fontcolor:a(e.color)).style("vertical-align","top").style("width",x+"px").style("display","inline-block").style("overflow","hidden").style("text-overflow","ellipsis").style("word-wrap","break-word").style("z-index",1).style("font-size","large"===e.size?"18px":"16px").style("line-height","large"===e.size?"20px":"17px").style("padding","large"===e.size?"3px 6px":"3px").text(e.title)}if(e.description)j.append("div").attr("class","d3po_tooltip_description").style("font-size","12px").style("padding","6px").text(e.description);if(e.data||e.html&&!e.fullscreen)var C=j.append("div").attr("class","d3po_tooltip_data_container").style("overflow-y","auto").style("z-index",-1);if(e.data){var N=0,P={},F=null;e.data.forEach(function(t,r){t.group&&F!=t.group&&(F=t.group,C.append("div").attr("class","d3po_tooltip_data_title").style("font-size","12px").style("font-weight","bold").style("padding","6px 3px 0px 3px").text(t.group));var o=C.append("div").attr("class","d3po_tooltip_data_block").style("font-size","12px").style("padding","3px 6px").style("position","relative").datum(t);!0===t.highlight?o.style("color",a(e.color)):(t.allColors||t.highlight!==e.color)&&o.style("color",a(t.highlight));var u=o.append("div").attr("class","d3po_tooltip_data_name").style("display","inline-block").html(t.name).on(i.out,function(){d3.event.stopPropagation()});if(t.link&&u.style("cursor","pointer").on(i.click,t.link),t.value instanceof Array){var c=e.locale.ui.and,f=e.locale.ui.more;t.value=list(t.value,c,3,f)}var d=o.append("div").attr("class","d3po_tooltip_data_value").style("display","block").style("position","absolute").style("text-align","right").style("top","3px").html(t.value).on(i.out,function(){d3.event.stopPropagation()});if(l?d.style("left","6px"):d.style("right","6px"),e.mouseevents&&t.desc){var h=o.append("div").attr("class","d3po_tooltip_data_desc").style("color","#888").style("overflow","hidden").style(n+"transition","height 0.5s").style("width","85%").text(t.desc).on(i.out,function(){d3.event.stopPropagation()}),v=h.node().offsetHeight||h.node().getBoundingClientRect().height;h.style("height","0px");var g=u.append("div").attr("class","d3po_tooltip_data_help").style("background-color","#ccc").style(n+"border-radius","5px").style("color","#fff").style("cursor","pointer").style("display","inline-block").style("font-size","8px").style("font-weight","bold").style("height","10px").style("margin","3px 0px 0px 3px").style("padding-right","1px").style("text-align","center").style("width","10px").style("vertical-align","top").style(s+"transition","background-color 0.5s").text("?").on(i.over,function(){var e=d3.select(this.parentNode.parentNode).style("color");d3.select(this).style("background-color",e),h.style("height",v+"px")}).on(i.out,function(){d3.event.stopPropagation()});u.style("cursor","pointer").on(i.over,function(){p();var e=d3.select(this.parentNode).style("color");g.style("background-color",e),h.style("height",v+"px")}),o.on(i.out,function(){d3.event.stopPropagation(),p()})}var m=parseFloat(d.style("width"),10);m>e.width/2&&(m=e.width/2),m>N&&(N=m),r!=e.data.length-1&&(t.group&&t.group==e.data[r+1].group||!t.group&&!e.data[r+1].group)&&C.append("div").attr("class","d3po_tooltip_data_seperator").style("background-color","#ddd").style("display","block").style("height","1px").style("margin","0px 3px")}),C.selectAll(".d3po_tooltip_data_name").style("width",function(){return parseFloat(d3.select(this.parentNode).style("width"),10)-N-30+"px"}),C.selectAll(".d3po_tooltip_data_value").style("width",N+"px").each(function(e){var t=parseFloat(d3.select(this).style("height"),10);P[e.name]=t}),C.selectAll(".d3po_tooltip_data_name").style("min-height",function(e){return P[e.name]+"px"})}!e.html||e.fullscreen&&!e.stacked||(C.append("div").html(e.html),e.js&&e.js(w));var q=j.append("div").attr("class","d3po_tooltip_footer").style("font-size","10px").style("position","relative").style("text-align","center");if(e.footer&&q.html(e.footer),e.height=_.node().offsetHeight||_.node().getBoundingClientRect().height,e.html&&e.fullscreen&&!e.stacked){var B=e.height-12;k=_.node().offsetWidth-e.width-44;w.append("div").attr("class","d3po_tooltip_html").style("width",k+"px").style("height",B+"px").style("display","inline-block").style("vertical-align","top").style("overflow-y","auto").style("padding","0px 12px").style("position","absolute").html(e.html),e.js&&e.js(w)}if(e.width=_.node().offsetWidth,"center"!=e.anchor.y?e.height+=e.arrow_offset:e.width+=e.arrow_offset,e.data||(!e.fullscreen||e.stacked)&&e.html){if(!e.fullscreen||e.stacked){var D=e.fixed?v-e.y-10:v-10;B=e.height<D?e.height:D}else B=e.height;B-=parseFloat(w.style("padding-top"),10),B-=parseFloat(w.style("padding-bottom"),10),z&&(B-=z.node().offsetHeight||z.node().getBoundingClientRect().height,B-=parseFloat(z.style("padding-top"),10),B-=parseFloat(z.style("padding-bottom"),10)),q&&(B-=q.node().offsetHeight||q.node().getBoundingClientRect().height,B-=parseFloat(q.style("padding-top"),10),B-=parseFloat(q.style("padding-bottom"),10)),C.style("max-height",B+"px")}e.height=_.node().offsetHeight||_.node().getBoundingClientRect().height,o(e.x,e.y,e.id)}},{"../client/pointer.js":69,"../client/prefix.js":70,"../client/rtl.js":71,"../client/scroll.js":72,"../client/scrollbar.js":73,"../color/legible.js":75,"../color/text.js":81,"../core/locale/languages/en_US.js":103,"../string/list.js":209,"./move.js":237,"./remove.js":238}],237:[function(e,t,n){(function(){var n,r;r=e("../client/scroll.js"),t.exports=function(e,t,i){var a,o,s;return i||(i="default"),(s=d3.select("div#d3po_tooltip_id_"+i)).node()&&((a=s.datum()).cx=e,a.cy=t,a.fixed||(o="body"===a.parent.node().tagName.toLowerCase()?[r.x(),r.y()]:[0,0],"center"!==a.anchor.y?("right"===a.anchor.x?a.x=a.cx-a.arrow_offset-4:"center"===a.anchor.x?a.x=a.cx-a.width/2:"left"===a.anchor.x&&(a.x=a.cx-a.width+a.arrow_offset+2),"bottom"===a.anchor.y?a.flip=a.cy+a.height+a.offset<=a.limit[1]:"top"===a.anchor.y&&(a.flip=a.cy-a.height-a.offset<o[1]),a.flip?a.y=a.cy+a.offset+a.arrow_offset:a.y=a.cy-a.height-a.offset-a.arrow_offset):(a.y=a.cy-a.height/2,"right"===a.anchor.x?a.flip=a.cx+a.width+a.offset<=a.limit[0]:"left"===a.anchor.x&&(a.flip=a.cx-a.width-a.offset<o[0]),"center"===a.anchor.x?(a.flip=!1,a.x=a.cx-a.width/2):a.flip?a.x=a.cx+a.offset+a.arrow_offset:a.x=a.cx-a.width-a.offset),a.x<o[0]?a.x=o[0]:a.x+a.width>a.limit[0]&&(a.x=a.limit[0]-a.width),a.y<o[1]?a.y=o[1]:a.y+a.height>a.limit[1]&&(a.y=a.limit[1]-a.height)),s.style("top",a.y+"px").style("left",a.x+"px"),a.arrow&&s.selectAll(".d3po_tooltip_arrow").call(n)),s},n=function(e){return e.style("bottom",function(e){return"center"===e.anchor.y||e.flip?"auto":"-5px"}).style("right",function(e){return"center"!==e.anchor.y||e.flip?"auto":"-5px"}).style("top",function(e){return"center"!==e.anchor.y&&e.flip?"-5px":"center"===e.anchor.y?"50%":"auto"}).style("left",function(e){return"center"===e.anchor.y&&e.flip?"-5px":"center"!==e.anchor.y?"50%":"auto"}).style("margin-left",function(e){var t;return"center"===e.anchor.y?"auto":(t="right"===e.anchor.x?-e.width/2+e.arrow_offset/2:"left"===e.anchor.x?e.width/2-2*e.arrow_offset-5:-5,e.cx-e.width/2-5<t?(t=e.cx-e.width/2-5)<2-e.width/2&&(t=2-e.width/2):-(e.limit[0]-e.cx-e.width/2+5)>t&&(t=-(e.limit[0]-e.cx-e.width/2+5))>e.width/2-11&&(t=e.width/2-11),t+"px")}).style("margin-top",function(e){var t;return"center"!==e.anchor.y?"auto":(t="bottom"===e.anchor.y?-e.height/2+e.arrow_offset/2-1:"top"===e.anchor.y?e.height/2-2*e.arrow_offset-2:-9,e.cy-e.height/2-e.arrow_offset<t?(t=e.cy-e.height/2-e.arrow_offset)<4-e.height/2&&(t=4-e.height/2):-(e.limit[1]-e.cy-e.height/2+e.arrow_offset)>t&&(t=-(e.limit[1]-e.cy-e.height/2+e.arrow_offset))>e.height/2-22&&(t=e.height/2-22),t+"px")})}}).call(this)},{"../client/scroll.js":72}],238:[function(e,t,n){(function(){t.exports=function(e){return e?(d3.selectAll("div#d3po_tooltip_curtain_"+e).remove(),d3.selectAll("div#d3po_tooltip_id_"+e).remove()):(d3.selectAll("div.d3po_tooltip_curtain").remove(),d3.selectAll("div.d3po_tooltip").remove())}}).call(this)},{}],239:[function(e,t,n){(function(){t.exports=function(e,t){var n;return[],n=1/(t-1)*(e[1]-e[0]),d3.range(e[0],e[1]+n,n)}}).call(this)},{}],240:[function(e,t,n){(function(){var n;n=e("./d3selection.js"),t.exports=function(e,t){var r;if(!e||!t)return!1;for(n(e)&&(e=e.node()),n(e)&&(t=t.node()),r=t.parentNode;null!==r;){if(r===e)return!0;r=r.parentNode}return!1}}).call(this)},{"./d3selection.js":243}],241:[function(e,t,n){(function(){t.exports=function(e,t){var n,r;return t.constructor===String?(r=e.indexOf(t))>-1?e[r]:e[0]:(n=e[0],e.forEach(function(e){if(Math.abs(t-e)<Math.abs(t-n))return n=e}),n)}}).call(this)},{}],242:[function(e,t,n){(function(){var n,r,i;r=e("../object/merge.js"),i=e("../object/validate.js"),n=function(e){var t;return i(e)?r(e):e instanceof Array?(t=[],e.forEach(function(e){return t.push(n(e))}),t):e},t.exports=n}).call(this)},{"../object/merge.js":206,"../object/validate.js":207}],243:[function(e,t,n){(function(){var n;n=e("../client/ie.js"),t.exports=function(e){return n?"object"==typeof e&&e instanceof Array&&"size"in e&&"select"in e:e instanceof d3.selection}}).call(this)},{"../client/ie.js":68}],244:[function(e,t,n){(function(){t.exports=function(e,t){var n;(n=new Image).src=e,n.crossOrigin="Anonymous",n.onload=function(){var e;(e=document.createElement("canvas")).width=this.width,e.height=this.height,e.getContext("2d").drawImage(this,0,0),t.call(this,e.toDataURL("image/png")),e=null}}}).call(this)},{}],245:[function(e,t,n){(function(){var n,r;n=e("../object/validate.js"),r=function(e,t,i,a,o,s){var l,u,c,f,d,h,p,v,g,m,y,b,x;if(void 0===e)return[];if(a&&void 0===o&&(o=a.id.value),s=!0===s&&void 0===s,e instanceof Array||(e=[e]),m=[],void 0===t)return e.reduce(function(e,t){var n;return n=JSON.stringify(t),m.indexOf(n)<0&&(e.indexOf(t)<0&&e.push(t),m.push(n)),e},[]);if(x=[],l=function(e){var t;if(null!=e&&(t=JSON.stringify(e),m.indexOf(t)<0))return x.push(e),m.push(t)},"function"==typeof i&&a)for(c=0,h=e.length;c<h;c++)for(u=e[c],f=0,p=(b=r(i(a,u,t,o))).length;f<p;f++)l(b[f]);else if("function"==typeof t)for(d=0,v=e.length;d<v;d++)l(b=t(u=e[d]));else for(y=0,g=e.length;y<g;y++)u=e[y],n(u)&&l(b=u[t]);return s?x.sort(function(e,t){return e-t}):x},t.exports=r}).call(this)},{"../object/validate.js":207}],246:[function(e,t,n){(function(){t.exports=function(e){var t,n,r,i,a;for(e.container.value.style("position",function(){var e;return e=d3.select(this).style("position"),["absolute","fixed"].indexOf(e)>=0?e:"relative"}),e.container.changed&&e.container.value.html(""),n=0,r=(i=["width","height"]).length;n<r;n++)e[a=i[n]].value||((t=function(n){var r,i;return void 0===n.tagName||["BODY","HTML"].indexOf(n.tagName)>=0?(i=window["inner"+a.charAt(0).toUpperCase()+a.slice(1)],(r=document!==n&&d3.select(n))&&("width"===a?(i-=parseFloat(r.style("margin-left"),10),i-=parseFloat(r.style("margin-right"),10),i-=parseFloat(r.style("padding-left"),10),i-=parseFloat(r.style("padding-right"),10)):(i-=parseFloat(r.style("margin-top"),10),i-=parseFloat(r.style("margin-bottom"),10),i-=parseFloat(r.style("padding-top"),10),i-=parseFloat(r.style("padding-bottom"),10))),e[a].value=i<=20?e[a].small:i):"number"==typeof(i=parseFloat(d3.select(n).style(a),10))&&i>0?e[a].value=i:"BODY"!==n.tagName?t(n.parentNode):void 0})(e.container.value.node()),1===d3.selectAll("body > *:not(script)").size()&&d3.select("body").style("overflow","hidden"));e.container.value.style("width",e.width.value+"px").style("height",e.height.value+"px")}}).call(this)},{}],247:[function(e,t,n){(function(){var e={},n={sum:d3.sum,min:d3.min,max:d3.max,mean:d3.mean,median:d3.median};e.defaultString="sum",e.allowedStrings=Object.keys(n),e.fromString=function(t){return n[t]||n[e.defaultString]},t.exports=e}).call(this)},{}],248:[function(e,t,n){(function(){var e={},n={category10:d3.schemeCategory10,accent:d3.schemeAccent,dark2:d3.schemeDark2,paired:d3.schemePaired,pastel1:d3.schemePastel1,pastel2:d3.schemePastel2,set1:d3.schemeSet1,set2:d3.schemeSet2,set3:d3.schemeSet3,tableau10:d3.schemeTableau10};e.defaultString="category10",e.allowedStrings=Object.keys(n),e.fromString=function(t){return n[t]||n[e.defaultString]},t.exports=e}).call(this)},{}],249:[function(e,t,n){(function(){var e={},n={basis:d3.curveBasis,"basis-open":d3.curveBasisOpen,cardinal:d3.curveCardinal,"cardinal-open":d3.curveCardinalOpen,linear:d3.curveLinear,monotone:d3.curveMonotoneY,step:d3.curveStep,"step-before":d3.curveStepBefore,"step-after":d3.curveStepAfter};e.defaultString="linear",e.allowedStrings=Object.keys(n),e.fromString=function(t){return n[t]||n[e.defaultString]},t.exports=e}).call(this)},{}],250:[function(e,t,n){(function(){var e={},n={json:d3.json,xml:d3.xml,html:d3.html,csv:d3.csv,dsv:d3.dsv,tsv:d3.tsv,txt:d3.text,text:d3.text};e.defaultString="json",e.allowedStrings=Object.keys(n),e.fromString=function(t){return n[t]||n[e.defaultString]},t.exports=e}).call(this)},{}],251:[function(e,t,n){(function(){var e={},n={albers:d3.geoAlbers,albersUsa:d3.geoAlbersUsa,azimuthalEqualArea:d3.geoAzimuthalEqualArea,azimuthalEquidistant:d3.geoAzimuthalEquidistant,conicConformal:d3.geoConicConformal,conicEqualArea:d3.geoConicEqualArea,conicEquidistant:d3.geoConicEquidistant,equirectangular:d3.geoEquirectangular,gnomonic:d3.geoGnomonic,mercator:d3.geoMercator,orthographic:d3.geoOrthographic,stereographic:d3.geoStereographic,transverseMercator:d3.geoTransverseMercator};e.defaultString="mercator",e.allowedStrings=Object.keys(n),e.fromString=function(t){return n[t]||n[e.defaultString]},t.exports=e}).call(this)},{}],252:[function(e,t,n){(function(){var e={},n={linear:d3.scaleLinear,sqrt:d3.scaleSqrt,pow:d3.scalePow,log:d3.scaleLog,quantize:d3.scaleQuantize,threshold:d3.scaleThreshold,quantile:d3.scaleQuantile,identity:d3.scaleIdentity,ordinal:d3.scaleOrdinal};e.defaultString="linear",e.allowedStrings=Object.keys(n),e.fromString=function(t){return n[t]||n[e.defaultString]},t.exports=e}).call(this)},{}],253:[function(e,t,n){var r=e("../../core/data/format.js"),i=e("../../core/data/color.js"),a=e("../../core/data/keys.js"),o=e("../../core/data/load.js"),s=e("./ui/drawer.js"),l=e("./ui/legend.js"),u=e("./ui/timeline.js"),c=e("./errorCheck.js"),f=e("../../core/fetch/data.js"),d=e("./finish.js"),h=e("./focus/tooltip.js"),p=e("./ui/history.js"),v=e("../../core/parse/edges.js"),g=e("../../core/parse/nodes.js"),m=e("../../core/console/print.js"),y=e("../../tooltip/remove.js"),b=e("./types/run.js"),x=e("./shapes/draw.js"),_=e("../../string/format.js"),w=e("./svg/enter.js"),j=e("./svg/update.js"),k=e("./ui/titles.js"),z=e("../../object/validate.js");t.exports=function(e){var t=[],n=e.type.value,M=e.format.locale.value,A=M.message.ui,E=M.message.draw;if(["data","attrs","coords","nodes","edges"].forEach(function(n){e.error.value||e[n].loaded||!e[n].url||t.push({function:function(e,t){o(e,n,t)},message:M.message.loading,wait:!0})}),e.draw.update){var S=M.visualization[n]||n,O=e.types[n].setup||!1,T=e.types[n].requirements||[],C=_(M.message.initializing,S),N=M.message.data;T instanceof Array||(T=[T]),S=S.toLowerCase(),e.error.value||"function"!=typeof O||t.push({function:function(e){if(e.dev.value){var t="running "+S+" setup";m.time(t)}O(e),e.dev.value&&m.timeEnd(t)},message:C}),e.container.changed&&t.push({function:w,message:C}),n in e.g.apps||t.push({function:function(e){if(e.dev.value){var t="creating "+S+" group";m.time(t)}e.g.apps[n]=e.g.app.append("g").attr("id",n).attr("opacity",0),e.dev.value&&m.timeEnd(t)},message:C}),e.data.changed&&t.push({function:function(e){e.data.cache={},delete e.nodes.restricted,delete e.edges.restricted,a(e,"data")},message:N}),e.attrs.changed&&t.push({function:function(e){a(e,"attrs")},message:N}),t.push({function:function(e){if(!e.color.type||e.color.changed||e.data.changed||e.attrs.changed||e.id.changed||e.depth.changed||e.id.solo.changed||!e.time.fixed.value&&(e.time.solo.changed||e.time.mute.changed)){if(e.color.valueScale=!1,e.dev.value){var t="checking color type";m.time(t)}if(e.color.type=!1,e.color.value){var n=e.color.value;z(n)&&(n=n[e.id.value]?n[e.id.value]:n[d3.keys(n)[0]]),e.data.keys&&n in e.data.keys?e.color.type=e.data.keys[n]:e.attrs.keys&&n in e.attrs.keys&&(e.color.type=e.attrs.keys[n])}else e.data.keys&&(e.color.type=e.data.keys[e.id.value]);e.dev.value&&m.timeEnd(t)}},message:N}),(T.indexOf("edges")>=0&&e.edges.value&&(!e.edges.linked||e.edges.changed)||T.indexOf("nodes")>=0&&!e.nodes.value&&e.edges.value)&&t.push({function:v,message:N}),T.indexOf("nodes")>=0&&e.edges.value&&(!e.nodes.positions||e.nodes.changed||e.type.changed)&&t.push({function:g,message:N}),(e.data.changed||e.time.changed||e.time.format.changed||e.type.changed||e.id.changed||e.x.scale.changed&&[e.x.scale.value,e.x.scale.previous].indexOf("discrete")>=0||e.y.scale.changed&&[e.y.scale.value,e.y.scale.previous].indexOf("discrete")>=0)&&t.push({function:r,message:N}),e.error.value||t.push({function:function(e){var t=e.time.fixed.value?["all"]:null;if(e.dev.value){var n=t?"fetching pool data":"fetching data";m.time(n)}e.data.pool=f(e,t),e.dev.value&&m.timeEnd(n),t?(e.dev.value&&m.time("fetching data for current year"),e.data.viz=f(e),e.dev.value&&m.timeEnd("fetching data for current year")):e.data.viz=e.data.pool,e.draw.timing=e.data.viz.length<e.data.large?e.timing.transitions:0},message:N}),e.error.value||t.push({check:function(e){return e.color.value&&"number"===e.color.type&&!1===e.color.valueScale},function:i,message:N})}return t.push({function:function(e){if(e.dev.value){var t=e.format.locale.value.message.tooltipReset;m.time(t)}e.type.previous&&n!==e.type.previous&&y(e.type.previous),y(n),e.dev.value&&m.timeEnd(t)},message:A}),e.error.value||t.push({function:c,message:A}),t.push({function:function(e){if(e.margin.process(),k(e),!e.error.value)if(e.draw.update)s(e),u(e),l(e);else{e.dev.value&&m.time("calculating margins");var t=e.container.value.select("div#d3po_drawer").node().offsetHeight||e.container.value.select("div#d3po_drawer").node().getBoundingClientRect().height,n=e.g.timeline.node().getBBox();n=e.timeline.value?n.height+e.ui.padding:0;var r=e.g.legend.node().getBBox();r=e.legend.value?r.height+e.ui.padding:0,e.margin.bottom+=t+n+r,e.dev.value&&m.timeEnd("calculating margins")}p(e),e.height.viz-=e.margin.top+e.margin.bottom,e.width.viz-=e.margin.left+e.margin.right},message:A}),e.error.value||t.push({function:h,message:A}),t.push({function:j,message:E}),!e.error.value&&e.draw.update&&t.push({function:[b,x],message:E}),t.push({function:d,message:E}),t}},{"../../core/console/print.js":83,"../../core/data/color.js":85,"../../core/data/format.js":87,"../../core/data/keys.js":89,"../../core/data/load.js":90,"../../core/fetch/data.js":96,"../../core/parse/edges.js":129,"../../core/parse/nodes.js":132,"../../object/validate.js":207,"../../string/format.js":208,"../../tooltip/remove.js":238,"./errorCheck.js":254,"./finish.js":255,"./focus/tooltip.js":256,"./shapes/draw.js":266,"./svg/enter.js":279,"./svg/update.js":280,"./types/run.js":283,"./ui/drawer.js":284,"./ui/history.js":285,"./ui/legend.js":286,"./ui/timeline.js":288,"./ui/titles.js":289}],254:[function(e,t,n){var r=e("../../core/fetch/text.js"),i=e("../../core/console/print.js"),a=e("../../core/methods/rejected.js"),o=e("../../string/format.js"),s=e("../../string/list.js");t.exports=function(e){e.dev.value&&i.time("checking for errors");var t=["id"],n=e.types[e.type.value].requirements;n&&(n instanceof Array?t=t.concat(e.types[e.type.value].requirements):t.push(n));var l=[];if(t.forEach(function(t){if("string"==typeof t)e[t].value&&e[t].value.length||l.push('"'+t+'"');else if("function"==typeof t){var n=t(e);!n.status&&n.text&&l.push('"'+n.text+'"')}}),l.length>1){var u=e.format.locale.value.error.methods,c=e.format.locale.value.visualization[e.type.value]||e.type.value,f=e.format.locale.value.ui.and;l=s(l,f),e.error.internal=o(u,c,l)}else if(1===l.length){u=e.format.locale.value.error.method,c=e.format.locale.value.visualization[e.type.value]||e.type.value;e.error.internal=o(u,c,l[0])}if(!e.error.internal&&t.indexOf("edges")>=0&&t.indexOf("focus")>=0&&0==e.edges.connections(e.focus.value[0],e.id.value).length){var d=r(e,e.focus.value[0],e.depth.value);u=e.format.locale.value.error.connections;e.error.internal=o(u,'"'+d+'"')}t=["d3"];e.types[e.type.value].libs&&(t=t.concat(e.types[e.type.value].libs));l=[];if(t.forEach(function(e){window[e]||l.push('"'+e+'"')}),l.length>1){u=e.format.locale.value.error.libs,c=e.format.locale.value.visualization[e.type.value],f=e.format.locale.value.ui.and;l=s(l,f),e.error.internal=o(u,c,l)}else if(1===l.length){u=e.format.locale.value.error.lib,c=e.format.locale.value.visualization[e.type.value];e.error.internal=o(u,c,l[0])}var h=e.shape.accepted(e);h instanceof Array||(h=[h]);var p=e.shape.value;if(p&&!a(e,h,p,"shape")||e.self.shape(h[0]),"modes"in e.types[e.type.value]){var v=e.types[e.type.value].modes;v instanceof Array||(v=[v]);var g=e.type.mode.value;g&&!a(e,v,g,"mode")||e.self.type({mode:v[0]})}e.dev.value&&i.timeEnd("checking for errors")}},{"../../core/console/print.js":83,"../../core/fetch/text.js":98,"../../core/methods/rejected.js":125,"../../string/format.js":208,"../../string/list.js":209}],255:[function(e,t,n){var r=e("./shapes/edges.js"),i=e("./shapes/paths.js"),a=e("./ui/message.js"),o=e("./focus/viz.js"),s=e("../../core/methods/reset.js"),l=e("../../core/console/print.js"),u=e("./shapes/labels.js"),c=e("../../string/title.js"),f=e("./zoom/bounds.js"),d=e("./zoom/labels.js"),h=e("./zoom/mouse.js");t.exports=function(e){if(e.draw.first?setTimeout(function(){o(e)},e.draw.timing):o(e),!e.error.value){var t=e.zoom.viewport||e.zoom.bounds;e.types[e.type.value].zoom&&e.zoom.value&&t?(e.dev.value&&l.time("calculating zoom"),e.draw.first||e.zoom.reset?f(e,t,0):(e.type.changed||e.focus.changed||e.height.changed||e.width.changed||e.nodes.changed||e.legend.changed||e.timeline.changed||e.ui.changed)&&f(e,t),e.dev.value&&l.timeEnd("calculating zoom")):(e.zoom.bounds=[[0,0],[e.width.viz,e.height.viz]],e.zoom.scale=1,f(e))}var n=e.zoom.size?e.zoom.size.width:e.width.viz,p=e.zoom.size?e.zoom.size.height:e.height.viz,v=e.zoom.bounds?e.zoom.bounds[0][0]:0,g=e.zoom.bounds?e.zoom.bounds[0][1]:0;if(e.g.overlay.attr("width",n).attr("height",p).attr("x",v).attr("y",g),e.error.value||(e.draw.update?(e.edges.path?i(e):r(e),u(e,"data"),e.edges.label&&!e.edges.path&&setTimeout(function(){u(e,"edges")},e.draw.timing+200)):(e.labels.value||e.labels.changed)&&e.types[e.type.value].zoom&&e.zoom.value&&e.draw.timing&&setTimeout(function(){d(e)},e.draw.timing)),!e.error.value){var m=e.types[e.type.value].requirements||[];m instanceof Array||(m=[m]);var y=m.indexOf("data")>=0;e.error.internal||e.data.viz&&e.returned.nodes.length||!y||(e.error.internal=e.format.locale.value.error.data)}var b=e.type.previous;if(b&&e.type.value!=b&&e.g.apps[b]&&(e.dev.value&&l.time('hiding "'+b+'"'),e.draw.timing?e.g.apps[b].transition().duration(e.draw.timing).attr("opacity",0):e.g.apps[b].attr("opacity",0),e.dev.value&&l.timeEnd()),!e.error.value){var x=y&&0===e.data.viz.length||e.error.internal||e.error.value?0:e.focus.value.length&&e.types[e.type.value].zoom&&e.zoom.value?1-e.tooltip.curtain.opacity:1,_=e.draw.timing;e.group.transition().duration(_).attr("opacity",x),e.g.data.transition().duration(_).attr("opacity",x),e.g.edges.transition().duration(_).attr("opacity",x)}e.error.value?a(e,e.error.value):e.error.internal?(e.error.internal=c(e.error.internal),l.warning(e.error.internal),a(e,e.error.internal),e.error.internal=null):a(e),setTimeout(function(){s(e),e.types[e.type.value].zoom&&e.zoom.value?(e.g.zoom.datum(e).call(e.zoom.behavior.on("zoom",h)),e.zoom.scroll.value||e.g.zoom.on("mousewheel.zoom",null).on("MozMousePixelScroll.zoom",null).on("wheel.zoom",null),e.zoom.click.value||e.g.zoom.on("dblclick.zoom",null),e.zoom.pan.value||e.g.zoom.on("mousedown.zoom",null).on("mousemove.zoom",null)):e.g.zoom.call(e.zoom.behavior.on("zoom",null)).on("dblclick.zoom",null).on("mousedown.zoom",null).on("mousemove.zoom",null).on("mousewheel.zoom",null).on("MozMousePixelScroll.zoom",null).on("touchstart.zoom",null).on("wheel.zoom",null)},e.draw.timing)}},{"../../core/console/print.js":83,"../../core/methods/reset.js":127,"../../string/title.js":211,"./focus/viz.js":257,"./shapes/edges.js":267,"./shapes/labels.js":269,"./shapes/paths.js":271,"./ui/message.js":287,"./zoom/bounds.js":290,"./zoom/labels.js":292,"./zoom/mouse.js":293}],256:[function(e,t,n){(function(){var n,r,i,a;n=e("../tooltip/create.js"),r=e("../../../core/fetch/value.js"),i=e("../../../core/console/print.js"),a=e("../../../tooltip/remove.js"),t.exports=function(e){var t,o,s;o=e.focus,!e.error.internal&&1===o.value.length&&o.value.length&&!e.small&&o.tooltip.value?(e.dev.value&&i.time("drawing focus tooltip"),(t=e.data.pool.filter(function(t){return r(e,t,e.id.value)===o.value[0]})).length>=1?t=t[0]:(t={})[e.id.value]=o.value[0],s=e.labels.padding,n({anchor:"top left",arrow:!1,data:t,fullscreen:!1,id:"visualization_focus",length:"long",maxheight:e.height.viz-2*s,mouseevents:!0,offset:0,vars:e,width:e.tooltip.large,x:e.width.value-e.margin.right-s,y:e.margin.top+s}),e.width.viz-=e.tooltip.large+2*s,e.dev.value&&i.timeEnd("drawing focus tooltip")):a("visualization_focus")}}).call(this)},{"../../../core/console/print.js":83,"../../../core/fetch/value.js":99,"../../../tooltip/remove.js":238,"../tooltip/create.js":281}],257:[function(t,n,r){var i=t("../../../client/pointer.js"),a=t("../../../client/ie.js"),o=t("../../../core/fetch/value.js"),s=t("../../../core/console/print.js"),l=t("../../../util/uniques.js");n.exports=function(t){if(t.g.edge_focus.selectAll("g").remove(),t.g.data_focus.selectAll("g").remove(),t.focus.value.length&&t.types[t.type.value].zoom&&t.zoom.value){t.dev.value&&s.time("drawing focus elements");var n=t.g.edges.selectAll("g");if(n.size()>0){n.each(function(e){var n=e[t.edges.source][t.id.value],r=e[t.edges.target][t.id.value];if(n==t.focus.value[0]||r==t.focus.value[0]){var i=t.g.edge_focus.node().appendChild(this.cloneNode(!0));d3.select(i).datum(e).attr("opacity",1).selectAll("line, path").datum(e)}});var r=t.edges.arrows.value;t.g.edge_focus.selectAll("line, path").attr("vector-effect","non-scaling-stroke").style("stroke",t.color.focus).style("stroke-width",function(){return a&&t.types[t.type.value].zoom?0:t.edges.size.value?d3.select(this).style("stroke-width"):2*t.data.stroke.width}).attr("marker-start",function(e){var n=t.edges.arrows.direction.value;if("bucket"in e.d3po)var i="_"+e.d3po.bucket;else i="";return"source"==n&&r?"url(#d3po_edge_marker_focus"+i+")":"none"}).attr("marker-end",function(e){var n=t.edges.arrows.direction.value;if("bucket"in e.d3po)var i="_"+e.d3po.bucket;else i="";return"target"==n&&r?"url(#d3po_edge_marker_focus"+i+")":"none"}),t.g.edge_focus.selectAll("text").style("fill",t.color.focus)}var u=l(t.edges.connections(t.focus.value[0],t.id.value,!0),t.id.value,o,t);u.push(t.focus.value[0]);var c=[],f=[],d=[0],h=[0];t.g.data.selectAll("g").each(function(n){if(u.indexOf(n[t.id.value])>=0){var r=t.g.data_focus.node().appendChild(this.cloneNode(!0));r=d3.select(r).datum(n).attr("opacity",1);for(e in"coordinates"==t.shape.value?t.zoom.viewport=t.path.bounds(t.zoom.coords[n.d3po.id]):"d3po"in n&&("x"in n.d3po&&c.push(n.d3po.x),"y"in n.d3po&&f.push(n.d3po.y),"r"in n.d3po?(d.push(n.d3po.r),h.push(n.d3po.r)):("width"in n.d3po&&d.push(n.d3po.width/2),"height"in n.d3po&&h.push(n.d3po.height/2))),i){var a=d3.select(this).on(i[e]);a&&r.on(i[e],a)}}});if(c.length&&f.length){var p=d3.extent(c),v=d3.extent(f),g=d3.max(d),m=d3.max(h);t.zoom.viewport=[[p[0]-g,v[0]-m],[p[1]+g,v[1]+m]]}t.g.data_focus.selectAll("path").style("stroke-width",a&&t.types[t.type.value].zoom?0:2*t.data.stroke.width),t.dev.value&&s.timeEnd("drawing focus elements")}else t.zoom.viewport=!1}},{"../../../client/ie.js":68,"../../../client/pointer.js":69,"../../../core/console/print.js":83,"../../../core/fetch/value.js":99,"../../../util/uniques.js":245}],258:[function(e,t,n){(function(){var n,r,i,a;a=e("./style.js"),r=e("../../../geom/largestrectangle.js"),i=e("../../../geom/path2poly.js"),n={start:{},end:{}},t.exports=function(e,t,o,s){var l,u,c,f;l=d3.arc().innerRadius(function(e){return e.d3po.r_inner}).outerRadius(function(e){return e.d3po.r_outer}).startAngle(function(e){return e.d3po.startAngle}).endAngle(function(e){return e.d3po.endAngle}),c=function(t){var n,a;return e.labels.value&&(t.d3po.label?t.d3po_label=t.d3po.label:t.d3po.endAngle-t.d3po.startAngle>=.1?(n=i(l(t)),(a=r(n,{angle:0}))[0]?t.d3po_label={w:a[0].width,h:a[0].height,x:a[0].cx,y:a[0].cy}:delete t.d3po_label):delete t.d3po_label),[t]},e.draw.timing?(f=d3.arc().innerRadius(function(e){return e.d3po.r_inner}).outerRadius(function(e){return e.d3po.r_outer}).startAngle(function(e){return void 0===n.start[e.d3po.id]&&(n.start[e.d3po.id]=0),isNaN(n.start[e.d3po.id])&&(n.start[e.d3po.id]=e.d3po.startAngle),n.start[e.d3po.id]}).endAngle(function(e){return void 0===n.end[e.d3po.id]&&(n.end[e.d3po.id]=0),isNaN(n.end[e.d3po.id])&&(n.end[e.d3po.id]=e.d3po.endAngle),n.end[e.d3po.id]}),u=function(e,t){return e.attrTween("d",function(e){var r,i,a,o;return void 0===t?(o=e.d3po.startAngle,r=e.d3po.endAngle):0===t&&(o=0,r=0),a=d3.interpolate(n.start[e.d3po.id],o),i=d3.interpolate(n.end[e.d3po.id],r),function(t){return n.start[e.d3po.id]=a(t),n.end[e.d3po.id]=i(t),f(e)}})},o.append("path").attr("class","d3po_data").call(a,e).attr("d",f),t.selectAll("path.d3po_data").data(c).transition().duration(e.draw.timing).call(a,e).call(u),s.selectAll("path.d3po_data").transition().duration(e.draw.timing).call(u,0)):(o.append("path").attr("class","d3po_data"),t.selectAll("path.d3po_data").data(c).call(a,e).attr("d",l))}}).call(this)},{"../../../geom/largestrectangle.js":194,"../../../geom/path2poly.js":196,"./style.js":275}],259:[function(e,t,n){var r=e("../../../core/fetch/text.js"),i=e("../../../font/sizes.js"),a=e("../../../geom/largestrectangle.js"),o=e("../d3functions/curves.js"),s=e("./style.js");t.exports=function(e,t,n,l){var u=d3.area().x(function(e){return e.d3po.x}).y0(function(e){return e.d3po.y0}).y1(function(e){return e.d3po.y}).curve(o.fromString(e.shape.interpolate.value)),c=d3.area().x(function(e){return e.d3po.x}).y0(function(e){return e.d3po.y0}).y1(function(e){return e.d3po.y0}).curve(o.fromString(e.shape.interpolate.value));n.append("path").attr("class","d3po_data").attr("d",function(e){return c(e.values)}).call(s,e);var f={"font-weight":e.labels.font.weight,"font-family":e.labels.font.family.value};t.selectAll("path.d3po_data").data(function(t){if(e.labels.value&&t.values.length>1){var n=!1;if(d3.max(t.values,function(e){return e.d3po.y0-e.d3po.y})>e.labels.font.size){var o=[],s=[],l=r(e,t);t.values.forEach(function(e){o.push([e.d3po.x,e.d3po.y]),s.push([e.d3po.x,e.d3po.y0])}),o=o.concat(s.reverse());var u=null;if(l.length){var c=i(l[0],f);u=c[0].width/c[0].height}n=a(o,{angle:d3.range(-70,71,1),aspectRatio:u,tolerance:0})}if(n&&n[0]){var d={w:~~n[0].width,h:~~n[0].height,x:~~n[0].cx,y:~~n[0].cy,angle:-1*n[0].angle,padding:2,names:l};0!==n[0].angle?d.translate={x:d.x,y:d.y}:d.translate=!1,d.w>=10&&d.h>=10&&(t.d3po_label=d)}}return[t]}),e.draw.timing?t.selectAll("path.d3po_data").transition().duration(e.draw.timing).attr("d",function(e){return u(e.values)}).call(s,e):t.selectAll("path.d3po_data").attr("d",function(e){return u(e.values)}).call(s,e)}},{"../../../core/fetch/text.js":98,"../../../font/sizes.js":136,"../../../geom/largestrectangle.js":194,"../d3functions/curves.js":249,"./style.js":275}],260:[function(e,t,n){e("../../../core/fetch/text.js"),e("../../../geom/largestrectangle.js");var r=e("./style.js");t.exports=function(e,t,n,i){function a(e){e.attr("transform",function(e){var t=Math.min(e.d3po.width,e.d3po.height);return"scale("+Math.floor(t/16)+")"})}n.append("path").attr("class","d3po_data").attr("d","M5-6.844L3.594-5.407L-2,0.188l-1.594-1.594L-5-2.844L-7.844,0l1.438,1.406l3,3L-2,5.843l1.406-1.438l7-7L7.844-4L5-6.844z").call(function(e){e.attr("transform","scale(1)")}).call(r,e),t.selectAll("path.d3po_data").data(function(e){return[e]}),e.draw.timing?t.selectAll("path.d3po_data").transition().duration(e.draw.timing).call(a).call(r,e):t.selectAll("path.d3po_data").call(a).call(r,e)}},{"../../../core/fetch/text.js":98,"../../../geom/largestrectangle.js":194,"./style.js":275}],261:[function(e,t,n){(function(){var n,r,i;e("../../../core/fetch/value.js"),n=e("../../../core/fetch/color.js"),r=e("../../../color/lighter.js"),i=e("./segments.js"),t.exports=function(e,t,a){var o,s,l,u;return s=e.d3po.shape||t.shape.value,"line"===t.shape.value&&"circle"!==s?"none":"area"===t.shape.value||"active"===s||"line"===t.shape.value?n(t,e):"temp"===s?a?n(t,e):"url(#d3po_hatch_"+e.d3po.id+")":e.d3po.static?r(n(t,e),.75):(o=i(t,e,"active"),l=i(t,e,"temp"),u=i(t,e,"total"),!t.active.value&&!t.temp.value||!0===o||o&&u&&o>=u&&!l||o&&!u?n(t,e):t.active.spotlight.value?t.color.missing:r(n(t,e),.75))}}).call(this)},{"../../../color/lighter.js":76,"../../../core/fetch/color.js":95,"../../../core/fetch/value.js":99,"./segments.js":274}],262:[function(e,t,n){(function(){var n,r,i,a,o,s,l,u;n=e("../../../util/copy.js"),r=e("../../../network/distance.js"),i=e("../../../core/fetch/text.js"),a=e("../../../font/sizes.js"),s=e("../../../geom/largestrectangle.js"),l=e("../../../geom/path2poly.js"),projections=e("../d3functions/projections.js"),u=e("./style.js"),o={},t.exports=function(e,t,c,f){var d,h;return(d="function"==typeof e.coords.projection.value?e.coords.projection.value:projections.fromString(e.coords.projection.value)()).center&&d.center(e.coords.center),e.zoom.scale||(e.zoom.scale=1),e.zoom.area=1/e.zoom.scale/e.zoom.scale,e.path=d3.geoPath().projection(d),e.draw.timing?t.selectAll("path.d3po_data").attr("d",e.path).transition().duration(e.draw.timing).call(u,e):t.selectAll("path.d3po_data").attr("d",e.path).call(u,e),c.append("path").attr("id",function(e){return e.id}).attr("class","d3po_data").attr("d",e.path).call(u,e),h=e.old_height!==e.height.viz||e.height.changed||e.old_width!==e.width.viz||e.width.changed,e.old_height=e.height.viz,e.old_width=e.width.viz,e.coords.changed||h||e.coords.mute.changed||e.coords.solo.changed||e.type.changed||e.text.changed||e.coords.projection.changed||e.labels.changed?(e.zoom.bounds=null,e.zoom.reset=!0,e.zoom.coords={},t.each(function(t){var u,c,f,d,h,p,v,g,m,y,b,x,_,w,j,k,z,M,A,E,S;if(e.coords.simplify.value&&t.geometry.coordinates.length>1){for(m=[],c=[],u=0,x=n(t),M=n(t),t.geometry.coordinates=t.geometry.coordinates.filter(function(t,n){var r;return M.geometry.coordinates=[t],(r=e.path.area(M))>0&&(c.push(r),r>u&&(x.geometry.coordinates=[t],u=r),!0)}),h=e.path.centroid(x),y=b=0,_=(A=t.geometry.coordinates).length;b<_;y=++b)d=A[y],M.geometry.coordinates=[d],m.push(r(e.path.centroid(M),h));g=m.reduce(function(e,t,n){return t&&e.push(c[n]/t),e},[]),v=d3.quantile(g,e.coords.threshold.value),M.geometry.coordinates=t.geometry.coordinates.filter(function(e,t){var n,r;return r=m[t],n=c[t],0===r||n/r>=v}),(p=x.geometry.coordinates[0])&&"MultiPolygon"===x.geometry.type&&(p=p[0],x.geometry.coordinates[0]=p,x.geometry.type="Polygon")}else M=t,x=t,p=t.geometry.coordinates[0];return e.zoom.coords[t.d3po.id]=M,delete t.d3po_label,e.labels.value&&(w=i(e,t),p&&w.length&&(j=l(e.path(x)),S={"font-weight":e.labels.font.weight,"font-family":e.labels.font.family.value},k=null,1===w[0].split(" ").length&&(k=(E=a(w[0],S)[0]).width/E.height),(z=s(j,{angle:0,aspectRatio:k}))&&(z=z[0],t.d3po_label={anchor:"middle",valign:"center",h:z.height,w:z.width,x:z.cx,y:z.cy,names:w}))),o[t.id]=t.d3po_label,f=e.path.bounds(M),e.zoom.bounds?(e.zoom.bounds[0][0]>f[0][0]&&(e.zoom.bounds[0][0]=f[0][0]),e.zoom.bounds[0][1]>f[0][1]&&(e.zoom.bounds[0][1]=f[0][1]),e.zoom.bounds[1][0]<f[1][0]&&(e.zoom.bounds[1][0]=f[1][0]),e.zoom.bounds[1][1]<f[1][1]?e.zoom.bounds[1][1]=f[1][1]:void 0):e.zoom.bounds=f})):e.focus.value.length?void 0:(e.zoom.viewport=!1,t.each(function(e){return e.d3po_label=o[e.id]}))}}).call(this)},{"../../../core/fetch/text.js":98,"../../../font/sizes.js":136,"../../../geom/largestrectangle.js":194,"../../../geom/path2poly.js":196,"../../../network/distance.js":200,"../../../util/copy.js":242,"../d3functions/projections.js":251,"./style.js":275}],263:[function(e,t,n){var r=e("./style.js");t.exports=function(e,t,n,i){function a(e){e.attr("d",d3.symbol().type(d3.symbolCross).size(function(e){var t=Math.min(e.d3po.width,e.d3po.height);return d3.scalePow().exponent(2)(t/2)}))}n.append("path").attr("class","d3po_data").call(function(e){e.attr("d",d3.symbol().type(d3.symbolCross).size(10))}).call(r,e),t.selectAll("path.d3po_data").data(function(e){return[e]}),e.draw.timing?t.selectAll("path.d3po_data").transition().duration(e.draw.timing).call(a).call(r,e):t.selectAll("path.d3po_data").call(a).call(r,e)}},{"./style.js":275}],264:[function(e,t,n){var r=e("./style.js");t.exports=function(e,t,n,i){function a(e){e.attr("d",d3.symbol().type(d3.symbolDiamond).size(function(e){var t=Math.min(e.d3po.width,e.d3po.height);return d3.scalePow().exponent(2)(t/2)}))}n.append("path").attr("class","d3po_data").call(function(e){e.attr("d",d3.symbol().type(d3.symbolDiamond).size(10))}).call(r,e),t.selectAll("path.d3po_data").data(function(e){return[e]}),e.draw.timing?t.selectAll("path.d3po_data").transition().duration(e.draw.timing).call(a).call(r,e):t.selectAll("path.d3po_data").call(a).call(r,e)}},{"./style.js":275}],265:[function(e,t,n){var r=e("./style.js");t.exports=function(e,t,n,i){e.arcs||(e.arcs={donut:{},active:{},temp:{}});var a=d3.arc().startAngle(0).endAngle(function(t){var n=e.arcs[t.d3po.shape][t.d3po.id].a;return n>2*Math.PI?2*Math.PI:n}).innerRadius(function(t){return t.d3po.static?0:e.arcs[t.d3po.shape][t.d3po.id].r*e.data.donut.size}).outerRadius(function(t){return e.arcs[t.d3po.shape][t.d3po.id].r});function o(t,n,r,i){if(!n)n=0;if("number"!=typeof r)r=void 0;if("number"!=typeof i)i=void 0;t.attrTween("d",function(t){if(null==r)var o=t.d3po.r?t.d3po.r:d3.max([t.d3po.width,t.d3po.height]);else o=r;if(null==i)var s=t.d3po.segments[t.d3po.shape];else s=i;e.arcs[t.d3po.shape][t.d3po.id]||(e.arcs[t.d3po.shape][t.d3po.id]={r:0},e.arcs[t.d3po.shape][t.d3po.id].a=2*Math.PI);var l=d3.interpolate(e.arcs[t.d3po.shape][t.d3po.id].r,o+n),u=d3.interpolate(e.arcs[t.d3po.shape][t.d3po.id].a,s);return function(n){return e.arcs[t.d3po.shape][t.d3po.id].r=l(n),e.arcs[t.d3po.shape][t.d3po.id].a=u(n),a(t)}})}function s(e){return e.d3po.label?e.d3po_label=e.d3po.label:delete e.d3po_label,[e]}e.draw.timing?(i.selectAll("path.d3po_data").transition().duration(e.draw.timing).call(o,0,0).each("end",function(t){delete e.arcs[t.d3po.shape][t.d3po.id]}),t.selectAll("path.d3po_data").data(s).transition().duration(e.draw.timing).call(o).call(r,e),n.append("path").attr("class","d3po_data").transition().duration(0).call(o,0,0).call(r,e).transition().duration(e.draw.timing).call(o).call(r,e)):(i.selectAll("path.d3po_data").each(function(t){delete e.arcs[t.d3po.shape][t.d3po.id]}),n.append("path").attr("class","d3po_data"),t.selectAll("path.d3po_data").data(s).call(o).call(r,e))}},{"./style.js":275}],266:[function(e,t,n){var r=e("../../../util/child.js"),i=e("../../../util/closest.js"),a=e("../tooltip/create.js"),o=e("../../../client/pointer.js"),s=e("../../../core/fetch/value.js"),l=e("../../../core/fetch/color.js"),u=e("../../../core/fetch/text.js"),c=e("../../../color/legible.js"),f=e("../../../core/console/print.js"),d=e("../../../tooltip/remove.js"),h=e("./segments.js"),p=e("./fill.js"),v=e("../../../string/strip.js"),g=e("../../../client/touch.js"),m=e("../zoom/propagation.js"),y=e("../../../util/uniques.js"),b=e("../../../object/validate.js"),x=e("../zoom/direction.js"),_={arc:e("./arc.js"),area:e("./area.js"),check:e("./check.js"),coordinates:e("./coordinates.js"),cross:e("./cross.js"),diamond:e("./diamond.js"),donut:e("./donut.js"),line:e("./line.js"),radial:e("./radial.js"),rect:e("./rect.js"),triangle_down:e("./triangle_down.js"),triangle_up:e("./triangle_up.js"),whisker:e("./whisker.js")};t.exports=function(e){var t=e.returned.nodes||[],n=e.returned.edges||[];e.draw.timing=t.length<e.data.large&&n.length<e.edges.large?e.timing.transitions:0;var w={arc:"arc",area:"area",check:"check",circle:"rect",coordinates:"coordinates",cross:"cross",donut:"donut",diamond:"diamond",line:"line",plus:"cross",radial:"radial",rect:"rect",square:"rect",triangle_down:"triangle_down",triangle:"triangle_up",triangle_up:"triangle_up",whisker:"whisker"},j={};function k(t){if(!t.d3po.id){t.d3po.id="";for(var n=0;n<=e.depth.value;n++)t.d3po.id+=s(e,t,e.id.nesting[n])+"_";t.d3po.id+=S,["x","y","x2","y2"].forEach(function(n){if("discrete"==e[n].scale.value){var r=s(e,t,e[n].value);r.constructor===Date&&(r=r.getTime()),t.d3po.id+="_"+r}}),t.d3po.suffix&&(t.d3po.id+="_"+t.d3po.suffix),t.d3po.id=v(t.d3po.id)}return t}function z(t,n){var r=e.types[e.type.value].scale,i=1;r&&(b[r]&&e.shape.value in r?i=r[e.shape.value]:"function"==typeof r?i=r(e,e.shape.value):"number"==typeof r&&(i=r)),i=n?i:1,t.attr("transform",function(e){return["line","area","coordinates"].indexOf(S)<0?"translate("+(e.d3po.x||0)+","+(e.d3po.y||0)+")scale("+i+")":"scale("+i+")"})}function M(t){t.attr("id",function(e){return"d3po_group_"+e.d3po.id}).attr("class",function(t){var n=e.class.value?" "+s(e,t,e.class.value):"";return"d3po_"+S+n})}for(var A in t.forEach(function(t){var n=t.d3po&&t.d3po.shape?t.d3po.shape:e.shape.value;n in w&&(t.d3po&&(t.d3po.shape=n),j[n=w[n]]||(j[n]=[]),j[n].push(t))}),w)if(!(w[A]in j)||0===d3.keys(j).length){var E=e.g.data.selectAll("g.d3po_"+w[A]);e.draw.timing?E.transition().duration(e.draw.timing).attr("opacity",0).remove():E.remove()}for(var S in j){var O=e.g.data.selectAll("g.d3po_"+S).data(j[S],function(t){if(t.d3po||(t.d3po={}),"coordinates"===S)return t.d3po.id=t.id,t.id;if(!t.d3po.id)if(t.values)t.values.forEach(function(e){(e=k(e)).d3po.shape="circle"}),t.d3po.id=t.key;else if(!(t=k(t)).d3po.segments){t.d3po.segments={donut:2*Math.PI};var n=h(e,t,"active"),r=h(e,t,"temp"),i=h(e,t,"total");i&&(t.d3po.segments.active=n?n/i*(2*Math.PI):0,t.d3po.segments.temp=r?r/i*(2*Math.PI)+t.d3po.segments.active:0)}return!!t.d3po&&t.d3po.id});if(e.draw.timing)var T=O.exit().transition().duration(e.draw.timing).attr("opacity",0).remove();else T=O.exit().remove();e.draw.timing?O.transition().duration(e.draw.timing).call(z).call(M):O.call(z).call(M);var C=e.draw.timing?0:1,N=O.enter().append("g").attr("opacity",C).call(z).call(M);e.draw.timing&&N.transition().duration(e.draw.timing).attr("opacity",1),O.order(),e.dev.value&&f.time('drawing "'+S+'" shapes'),_[S](e,O,N,T,z),e.dev.value&&f.timeEnd('drawing "'+S+'" shapes'),["rect","donut"].indexOf(S)>=0&&e.types[e.type.value].fill&&(e.dev.value&&f.time('filling "'+S+'" shapes'),p(e,O,N,T,z),e.dev.value&&f.timeEnd('filling "'+S+'" shapes'))}function P(t){if(t&&e.g.edges.selectAll("g").size()>0){e.g.edge_hover.selectAll("*").remove(),e.g.edges.selectAll("g").each(function(n){var r=t[e.id.value],i=n[e.edges.source][e.id.value],a=n[e.edges.target][e.id.value];if(i==r||i=="left_"+r||i=="right_"+r||a==r||a=="left_"+r||a=="right_"+r){var o=e.g.edge_hover.node().appendChild(this.cloneNode(!0));d3.select(o).datum(n).attr("opacity",1).selectAll("line, path").datum(n)}});var n=e.edges.arrows.value;e.g.edge_hover.attr("opacity",0).selectAll("line, path").style("stroke",e.color.primary).style("stroke-width",function(t){return e.edges.path&&t.dy?Math.max(1,t.dy):e.edges.size.value?d3.select(this).style("stroke-width"):2*e.data.stroke.width}).attr("marker-start",function(t){var r=e.edges.arrows.direction.value;if("bucket"in t.d3po)var i="_"+t.d3po.bucket;else i="";return"source"==r&&n?"url(#d3po_edge_marker_highlight"+i+")":"none"}).attr("marker-end",function(t){var r=e.edges.arrows.direction.value;if("bucket"in t.d3po)var i="_"+t.d3po.bucket;else i="";return"target"==r&&n?"url(#d3po_edge_marker_highlight"+i+")":"none"}),e.g.edge_hover.selectAll("text").style("fill",e.color.primary),e.draw.timing?(e.g.edge_hover.transition().duration(e.timing.mouseevents).attr("opacity",1),e.g.edges.transition().duration(e.timing.mouseevents).attr("opacity",.5)):e.g.edge_hover.attr("opacity",1)}else e.draw.timing?(e.g.edge_hover.transition().duration(e.timing.mouseevents).attr("opacity",0).transition().selectAll("*").remove(),e.g.edges.transition().duration(e.timing.mouseevents).attr("opacity",1)):e.g.edge_hover.selectAll("*").remove()}if(P(),e.tooltip.value)e.g.data.selectAll("g").on(o.over,function(t){if(g&&m(e,d3.event),d3.event.buttons||!e.mouse.value||!e.mouse.over.value||e.draw.frozen||t.d3po&&t.d3po.static)d(e.type.value);else{var n="function"!=typeof e.mouse.over.value;if("function"==typeof e.mouse.over.value&&(n=e.mouse.over.value(t,e.self)),n){var r=x(t.d3po_data||t,e),s="function"==typeof e.mouse.viz||"function"==typeof e.mouse.viz[o.click]||e.zoom.value&&(e.types[e.type.value].zoom||t.d3po.threshold&&t.d3po.merged||1===r||-1===r&&e.history.states.length&&!e.tooltip.value.long);if(d3.select(this).style("cursor",s?"pointer":"auto").transition().duration(e.timing.mouseevents).call(z,!0),d3.select(this).selectAll(".d3po_data").transition().duration(e.timing.mouseevents).attr("opacity",1),e.covered=!1,t.values&&e.axes.discrete){var l="x"===e.axes.discrete?0:1,u=d3.mouse(e.container.value.node())[l],c=y(t.values,function(t){return t.d3po[e.axes.discrete]}),f=i(c,u);t.d3po_data=t.values[c.indexOf(f)],t.d3po=t.values[c.indexOf(f)].d3po}var h=t.d3po_data?t.d3po_data:t;a({vars:e,data:h}),"function"==typeof e.mouse.viz?e.mouse.viz(t.d3po_data||t,e):e.mouse.viz[o.over]&&e.mouse.viz[o.over](t.d3po_data||t,e),P(t)}}}).on(o.move,function(t){if(g&&m(e,d3.event),d3.event.buttons||!e.mouse.value||!e.mouse.move.value||e.draw.frozen||t.d3po&&t.d3po.static)d(e.type.value);else{var n="function"!=typeof e.mouse.move.value;if("function"==typeof e.mouse.move.value&&(n=e.mouse.move.value(t,e.self)),n){var r=x(t.d3po_data||t,e),s="function"==typeof e.mouse.viz||"function"==typeof e.mouse.viz[o.click]||e.zoom.value&&(e.types[e.type.value].zoom||t.d3po.threshold&&t.d3po.merged||1===r||-1===r&&e.history.states.length&&!e.tooltip.value.long);d3.select(this).style("cursor",s?"pointer":"auto");e.types[e.type.value].tooltip;if(t.values&&e.axes.discrete){var l="x"===e.axes.discrete?0:1,u=d3.mouse(e.container.value.node())[l],c=y(t.values,function(t){return t.d3po[e.axes.discrete]}),f=i(c,u);t.d3po_data=t.values[c.indexOf(f)],t.d3po=t.values[c.indexOf(f)].d3po}var h=t.d3po_data?t.d3po_data:t;a({vars:e,data:h}),"function"==typeof e.mouse.viz?e.mouse.viz(t.d3po_data||t,e):e.mouse.viz[o.move]&&e.mouse.viz[o.move](t.d3po_data||t,e)}}}).on(o.out,function(t){if(g&&m(e,d3.event),!d3.event.buttons&&e.mouse.value&&e.mouse.out.value){var n="function"!=typeof e.mouse.out.value;if("function"==typeof e.mouse.out.value&&(n=e.mouse.out.value(t,e.self)),n)r(this,d3.event.toElement)||e.draw.frozen||t.d3po&&t.d3po.static||(d3.select(this).transition().duration(e.timing.mouseevents).call(z),d3.select(this).selectAll(".d3po_data").transition().duration(e.timing.mouseevents).attr("opacity",e.data.opacity),e.covered||d(e.type.value),"function"==typeof e.mouse.viz?e.mouse.viz(t.d3po_data||t,e):e.mouse.viz[o.out]&&e.mouse.viz[o.out](t.d3po_data||t,e),P())}else d(e.type.value)});else{var F=function(){m(e,d3.event)};e.g.data.selectAll("g").on(o.over,F).on(o.move,F).on(o.out,F)}d3.select(window).on("scroll.d3po",function(){d(e.type.value)}),e.g.data.selectAll("g").on(o.click,function(t){if((!e.mouse.viz||!1!==e.mouse.viz.click)&&e.mouse.value&&e.mouse.click.value&&!d3.event.defaultPrevented&&!e.draw.frozen&&(!t.d3po||!t.d3po.static)){var n="function"!=typeof e.mouse.click.value;if("function"==typeof e.mouse.click.value&&(n=e.mouse.click.value(t,e.self)),n){if(t.values&&e.axes.discrete){var r="x"===e.axes.discrete?0:1,f=d3.mouse(e.container.value.node())[r],h=y(t.values,function(t){return t.d3po[e.axes.discrete]}),p=i(h,f);t.d3po_data=t.values[h.indexOf(p)],t.d3po=t.values[h.indexOf(p)].d3po}"function"==typeof e.mouse.viz?e.mouse.viz(t.d3po_data||t,e):e.mouse.viz[o.out]?e.mouse.viz[o.out](t.d3po_data||t,e):e.mouse.viz[o.click]&&e.mouse.viz[o.click](t.d3po_data||t,e);var v=x(t.d3po_data||t,e),g=e.id.solo.value,m=u(e,t)[0],b=c(l(e,t)),_=e.title.sub.value||!1,w=e.title.sub.font.color,j=e.title.total.font.color;if(t.d3po.threshold&&t.d3po.merged&&e.zoom.value)e.history.states.push(function(){e.self.id({solo:g}).title({sub:{font:{color:w},value:_},total:{font:{color:j}}}).draw()}),e.self.id({solo:g.concat(y(t.d3po.merged,e.id.value,s,e))}).title({sub:{font:{color:b},value:m},total:{font:{color:b}}}).draw();else if(1===v&&e.zoom.value){var k=s(e,t.d3po_data||t,e.id.value);e.history.states.push(function(){e.self.depth(e.depth.value-1).id({solo:g}).title({sub:{font:{color:w},value:_},total:{font:{color:j}}}).draw()}),e.self.depth(e.depth.value+1).id({solo:g.concat(k)}).title({sub:{font:{color:b},value:m},total:{font:{color:b}}}).draw()}else if(-1===v&&e.zoom.value&&e.history.states.length&&!e.tooltip.value.long)e.history.back();else if(e.types[e.type.value].zoom&&e.zoom.value)P(),d3.select(this).transition().duration(e.timing.mouseevents).call(z),d3.select(this).selectAll(".d3po_data").transition().duration(e.timing.mouseevents).attr("opacity",e.data.opacity),d(e.type.value),e.draw.update=!1,t&&t[e.id.value]!=e.focus.value[0]?e.self.focus(t[e.id.value]).draw():e.self.focus(!1).draw();else if(e.types[e.type.value].requirements.indexOf("focus")<0){P();var M=t.d3po_data?t.d3po_data:t;a({vars:e,data:M})}}}})}},{"../../../client/pointer.js":69,"../../../client/touch.js":74,"../../../color/legible.js":75,"../../../core/console/print.js":83,"../../../core/fetch/color.js":95,"../../../core/fetch/text.js":98,"../../../core/fetch/value.js":99,"../../../object/validate.js":207,"../../../string/strip.js":210,"../../../tooltip/remove.js":238,"../../../util/child.js":240,"../../../util/closest.js":241,"../../../util/uniques.js":245,"../tooltip/create.js":281,"../zoom/direction.js":291,"../zoom/propagation.js":294,"./arc.js":258,"./area.js":259,"./check.js":260,"./coordinates.js":262,"./cross.js":263,"./diamond.js":264,"./donut.js":265,"./fill.js":268,"./line.js":270,"./radial.js":272,"./rect.js":273,"./segments.js":274,"./triangle_down.js":276,"./triangle_up.js":277,"./whisker.js":278}],267:[function(e,t,n){var r=e("../../../util/buckets.js"),i=e("../d3functions/curves.js"),a=e("../../../geom/offset.js");t.exports=function(e){var t=e.returned.edges||[],n=e.zoom.behavior.scaleExtent()[0];if("string"==typeof e.edges.size.value){var o=d3.extent(t,function(t){return t[e.edges.size.value]}),s=d3.min(e.returned.nodes||[],function(e){return e.d3po.r})*(2*e.edges.size.scale);e.edges.scale=d3.scaleSqrt().domain(o).range([e.edges.size.min,s*n])}else{var l="number"==typeof e.edges.size.value?e.edges.size.value:e.edges.size.min;e.edges.scale=function(){return l}}var u=e.edges.opacity.value,c=typeof u;function f(t){t.attr("opacity",0).style("stroke-width",0).style("stroke",e.background.value).style("fill","none")}function d(t){var n=e.edges.arrows.value;t.attr("opacity",function(t){return"number"===c?u:"function"===c?u(t,e):e.edges.opacity.scale.value(t[u])}).style("stroke-width",function(t){return e.edges.scale(t[e.edges.size.value])}).style("stroke",e.edges.color).attr("marker-start",function(t){var r=e.edges.arrows.direction.value;if("bucket"in t.d3po)var i="_"+t.d3po.bucket;else i="";return"source"==r&&n?"url(#d3po_edge_marker_default"+i+")":"none"}).attr("marker-end",function(t){var r=e.edges.arrows.direction.value;if("bucket"in t.d3po)var i="_"+t.d3po.bucket;else i="";return"target"==r&&n?"url(#d3po_edge_marker_default"+i+")":"none"}).attr("vector-effect","non-scaling-stroke").attr("pointer-events","none")}function h(t){t.attr("x1",function(t){return t[e.edges.source].d3po.edges[t[e.edges.target][e.id.value]].x}).attr("y1",function(t){return t[e.edges.source].d3po.edges[t[e.edges.target][e.id.value]].y}).attr("x2",function(t){return t[e.edges.target].d3po.edges[t[e.edges.source][e.id.value]].x}).attr("y2",function(t){return t[e.edges.target].d3po.edges[t[e.edges.source][e.id.value]].y})}e.edges.opacity.changed&&"string"===c&&e.edges.opacity.scale.value.domain(d3.extent(t,function(e){return e[u]})).range([e.edges.opacity.min.value,1]);var p=d3.line().curve(i.fromString(e.edges.interpolate.value));function v(e){e.attr("d",function(e){return p(e.d3po.spline)})}function g(t){if(delete t.d3po_label,e.g.edges.selectAll("line, path").size()<e.edges.large&&e.edges.label&&t[e.edges.label]){if("spline"in t.d3po)var n=this.getTotalLength(),r=this.getPointAtLength(n/2),i=this.getPointAtLength(n/2-.1*n),a=this.getPointAtLength(n/2+.1*n),o=Math.atan2(a.y-i.y,a.x-i.x)*(180/Math.PI),s=(this.parentNode.getBBox(),.8*n),l=r.x,u=r.y;else{this.getBBox();var c=t[e.edges.source],f=t[e.edges.target],d={x:c.d3po.edges[f[e.id.value]].x,y:c.d3po.edges[f[e.id.value]].y},h={x:f.d3po.edges[c[e.id.value]].x,y:f.d3po.edges[c[e.id.value]].y},p=h.x-d.x,v=h.y-d.y;r={x:h.x-p/2,y:h.y-v/2},o=Math.atan2(v,p)*(180/Math.PI),s=n=Math.sqrt(p*p+v*v),l=r.x,u=r.y}s+=2*e.labels.padding;var g=0;e.edges.arrows.value&&(g="number"==typeof e.edges.arrows.value?e.edges.arrows.value:8,s-=2*(g/=e.zoom.behavior.scaleExtent()[1])),(o<-90||o>90)&&(o-=180),s*e.zoom.behavior.scaleExtent()[0]>20&&(t.d3po_label={x:l,y:u,translate:{x:l,y:u},w:s,h:15+2*e.labels.padding,angle:o,anchor:"middle",valign:"center",color:e.edges.color,resize:!1,names:[e.format.value(t[e.edges.label])],background:1})}}var m=e.edges.arrows.value?"string"==typeof e.edges.size.value?["default_0","default_1","default_2","highlight_0","highlight_1","highlight_2","focus_0","focus_1","focus_2"]:["default","highlight","focus"]:[];if("string"==typeof e.edges.size.value)for(var y=r(e.edges.scale.range(),4),b=[],x=0;x<3;x++)b.push(y[x+1]+(y[1]-y[0])*(x+2)*2);else{var _="number"==typeof e.edges.arrows.value?e.edges.arrows.value:8;b="number"==typeof e.edges.size.value?e.edges.size.value/_:_}var w=e.defs.selectAll(".d3po_edge_marker").data(m,String),j=function(t){t.attr("d",function(t){var n=t.split("_");if(2==n.length&&e.edges.scale){n=parseInt(n[1]);var r=b[n]}else r=b;return"target"==e.edges.arrows.direction.value?"M 0,-"+r/2+" L "+.85*r+",0 L 0,"+r/2+" L 0,-"+r/2:"M 0,-"+r/2+" L -"+.85*r+",0 L 0,"+r/2+" L 0,-"+r/2}).attr("fill",function(t){var n=t.split("_")[0];return"default"==n?e.edges.color:"focus"==n?e.color.focus:e.color.primary}).attr("transform","scale("+1/n+")")};e.draw.timing?(w.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),w.select("path").transition().duration(e.draw.timing).attr("opacity",1).call(j)):(w.exit().remove(),w.select("path").attr("opacity",1).call(j));var k=e.draw.timing?0:1,z=w.enter().append("marker").attr("id",function(e){return"d3po_edge_marker_"+e}).attr("class","d3po_edge_marker").attr("orient","auto").attr("markerUnits","userSpaceOnUse").style("overflow","visible").append("path").attr("opacity",k).attr("vector-effect","non-scaling-stroke").call(j);e.draw.timing&&z.transition().duration(e.draw.timing).attr("opacity",1);var M="string"==typeof e.edges.size.value?r(e.edges.scale.domain(),4):null,A=e.edges.arrows.direction.value,E=t.filter(function(t){if(t.d3po||(t.d3po={}),t.d3po.id="edge_"+t[e.edges.source][e.id.value]+"_"+t[e.edges.target][e.id.value],!0!==t.d3po.spline){if(M){var r=t[e.edges.size.value];t.d3po.bucket=r<M[1]?0:r<M[2]?1:2;var i=.85*b[t.d3po.bucket]/n}else{delete t.d3po.bucket;i=.85*b/n}var o=t[e.edges.source],s=t[e.edges.target];if(!o.d3po||!s.d3po)return!1;var l=Math.atan2(o.d3po.y-s.d3po.y,o.d3po.x-s.d3po.x),u=Math.atan2(s.d3po.y-o.d3po.y,s.d3po.x-o.d3po.x),c="source"==A&&e.edges.arrows.value?o.d3po.r+i:o.d3po.r,f="target"==A&&e.edges.arrows.value?s.d3po.r+i:s.d3po.r,d=a(l,c,e.shape.value),h=a(u,f,e.shape.value);return"edges"in o.d3po||(o.d3po.edges={}),o.d3po.edges[s[e.id.value]]={x:o.d3po.x-d.x,y:o.d3po.y-d.y},"edges"in s.d3po||(s.d3po.edges={}),s.d3po.edges[o[e.id.value]]={x:s.d3po.x-h.x,y:s.d3po.y-h.y},!0}return!1}),S=e.g.edges.selectAll("g.d3po_edge_line").data(E,function(e){return e.d3po.id}),O=t.filter(function(t){if(t.d3po.spline){if(M){var r=t[e.edges.size.value];t.d3po.bucket=r<M[1]?0:r<M[2]?1:2;var i=.85*b[t.d3po.bucket]/n}else{delete t.d3po.bucket;i=.85*b/n}var o=t[e.edges.source],s=t[e.edges.target],l=o.d3po.edges&&o.d3po.edges[s[e.id.value]]||{},u=s.d3po.edges&&s.d3po.edges[o[e.id.value]]||{},c=e.edges.arrows.value&&"source"==A?i:0,f=e.edges.arrows.value&&"target"==A?i:0,d=o.d3po.x>s.d3po.x?.9:1.1,h=o.d3po.x>s.d3po.x?1.1:.9,p="number"==typeof l.angle?l.angle:Math.atan2(o.d3po.y-s.d3po.y,o.d3po.x-s.d3po.x)*d,v=a(p,o.d3po.r+c,e.shape.value),g="number"==typeof u.angle?u.angle:Math.atan2(s.d3po.y-o.d3po.y,s.d3po.x-o.d3po.x)*h,m=a(g,s.d3po.r+f,e.shape.value),y=[o.d3po.x-v.x,o.d3po.y-v.y],x=!!l.offset&&a(p,l.offset),_=x?[y[0]-x.x,y[1]-x.y]:y,w=[s.d3po.x-m.x,s.d3po.y-m.y],j=!!u.offset&&a(g,u.offset),k=j?[w[0]-j.x,w[1]-j.y]:w,z=k[0]-_[0],E=k[1]-_[1],S="number"==typeof l.radius?l.radius:Math.sqrt(z*z+E*E)/4,O="number"==typeof u.radius?u.radius:Math.sqrt(z*z+E*E)/4,T=a(p,S-o.d3po.r-2*c),C=a(g,O-s.d3po.r-2*f);t.d3po.spline=[y,w];var N=Math.abs(Math.atan2(o.d3po.y-s.d3po.y,o.d3po.x-s.d3po.x)).toFixed(5),P=Math.abs(p).toFixed(5),F=Math.abs(g-Math.PI).toFixed(5);return(P!==F||[P,F].indexOf(N)<0)&&(t.d3po.spline.splice(1,0,[_[0]-T.x,_[1]-T.y],[k[0]-C.x,k[1]-C.y]),x&&t.d3po.spline.splice(1,0,_),j&&t.d3po.spline.splice(t.d3po.spline.length-1,0,k)),!0}return!1}),T=e.g.edges.selectAll("g.d3po_edge_path").data(O,function(e){return e.d3po.id});e.draw.timing?(S.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),T.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),S.selectAll("text.d3po_label, rect.d3po_label_bg").transition().duration(e.draw.timing/2).attr("opacity",0).remove(),T.selectAll("text.d3po_label, rect.d3po_label_bg").transition().duration(e.draw.timing/2).attr("opacity",0).remove(),S.selectAll("line").data(function(e){return[e]}).transition().duration(e.draw.timing).call(h).call(d).each("end",g),T.selectAll("path").data(function(e){return[e]}).transition().duration(e.draw.timing).call(v).call(d).each("end",g),S.enter().append("g").attr("class","d3po_edge_line").append("line").call(h).call(f).transition().duration(e.draw.timing).call(d).each("end",g),T.enter().append("g").attr("class","d3po_edge_path").append("path").call(v).call(f).transition().duration(e.draw.timing).call(d).each("end",g)):(S.exit().remove(),T.exit().remove(),S.selectAll("text.d3po_label, rect.d3po_label_bg").remove(),T.selectAll("text.d3po_label, rect.d3po_label_bg").remove(),S.selectAll("line").data(function(e){return[e]}).call(h).call(d).call(g),T.selectAll("path").data(function(e){return[e]}).call(v).call(d).call(g),S.enter().append("g").attr("class","d3po_edge_line").append("line").call(h).call(f).call(d).call(g),T.enter().append("g").attr("class","d3po_edge_path").append("path").call(v).call(f).call(d).call(g))}},{"../../../geom/offset.js":195,"../../../util/buckets.js":239,"../d3functions/curves.js":249}],268:[function(e,t,n){var r=e("../../../util/copy.js"),i=e("../../../core/fetch/color.js"),a=(e("../../../core/fetch/value.js"),e("./segments.js")),o=e("./style.js");t.exports=function(e,t,n,s){function l(e){e.attr("x",0).attr("y",0).attr("width",0).attr("height",0)}function u(t,n){n||(n=0),t.attr("x",function(e){return-(e.d3po.r?2*e.d3po.r:e.d3po.width)/2-n/2}).attr("y",function(e){return-(e.d3po.r?2*e.d3po.r:e.d3po.height)/2-n/2}).attr("width",function(e){return(e.d3po.r?2*e.d3po.r:e.d3po.width)+n}).attr("height",function(e){return(e.d3po.r?2*e.d3po.r:e.d3po.height)+n}).attr("rx",function(t){var r=t.d3po.r?2*t.d3po.r:t.d3po.width;return["circle","donut"].indexOf(e.shape.value)>=0?(r+n)/2:0}).attr("ry",function(t){var r=t.d3po.r?2*t.d3po.r:t.d3po.height;return["circle","donut"].indexOf(e.shape.value)>=0?(r+n)/2:0}).attr("shape-rendering",function(t){return["square"].indexOf(e.shape.value)>=0?e.shape.rendering.value:"auto"})}e.arcs||(e.arcs={donut:{},active:{},temp:{}});var c=d3.arc().startAngle(0).endAngle(function(t){var n=e.arcs[t.d3po.shape][t.d3po.id].a;return n>2*Math.PI?2*Math.PI:n}).innerRadius(function(t){return t.d3po.static||"donut"!==e.shape.value?0:e.arcs[t.d3po.shape][t.d3po.id].r*e.data.donut.size}).outerRadius(function(t){var n=e.arcs[t.d3po.shape][t.d3po.id].r;return"donut"===e.shape.value?n:2*n});function f(t,n,r,i){n||(n=0),"number"!=typeof r&&(r=void 0),"number"!=typeof i&&(i=void 0),t.attrTween("d",function(t){if(void 0===r)var a=t.d3po.r?t.d3po.r:d3.max([t.d3po.width,t.d3po.height]);else a=r;if(void 0===i)var o=t.d3po.segments[t.d3po.shape];else o=i;e.arcs[t.d3po.shape][t.d3po.id]||(e.arcs[t.d3po.shape][t.d3po.id]={r:0},e.arcs[t.d3po.shape][t.d3po.id].a="donut"===t.d3po.shape?2*Math.PI:0);var s=d3.interpolate(e.arcs[t.d3po.shape][t.d3po.id].r,a+n),l=d3.interpolate(e.arcs[t.d3po.shape][t.d3po.id].a,o);return function(n){return e.arcs[t.d3po.shape][t.d3po.id].r=s(n),e.arcs[t.d3po.shape][t.d3po.id].a=l(n),c(t)}})}t.each(function(t){var n=a(e,t,"active"),s=a(e,t,"temp"),c=a(e,t,"total"),d=d3.select(this),h=i(e,t),p=[],v=[];if(c&&e.types[e.type.value].fill){var g;if(s)(g=r(t)).d3po.shape="temp",p.push(g),v=["temp"];if(n&&(n<c||s))(g=r(t)).d3po.shape="active",p.push(g)}function m(t){t.attr("stroke",h).attr("stroke-width",1).attr("shape-rendering",e.shape.rendering.value)}var y=e.defs.selectAll("pattern#d3po_hatch_"+t.d3po.id).data(v);e.draw.timing?(y.selectAll("rect").transition().duration(e.draw.timing).style("fill",h),y.selectAll("line").transition().duration(e.draw.timing).style("stroke",h)):(y.selectAll("rect").style("fill",h),y.selectAll("line").style("stroke",h));var b=y.enter().append("pattern").attr("id","d3po_hatch_"+t.d3po.id).attr("patternUnits","userSpaceOnUse").attr("x","0").attr("y","0").attr("width","10").attr("height","10").append("g");b.append("rect").attr("x","0").attr("y","0").attr("width","10").attr("height","10").attr("fill",h).attr("fill-opacity",.25),b.append("line").attr("x1","0").attr("x2","10").attr("y1","0").attr("y2","10").call(m),b.append("line").attr("x1","-1").attr("x2","1").attr("y1","9").attr("y2","11").call(m),b.append("line").attr("x1","9").attr("x2","11").attr("y1","-1").attr("y2","1").call(m);var x=p.length?[t]:[],_=d.selectAll("#d3po_clip_"+t.d3po.id).data(x);_.enter().insert("clipPath",".d3po_mouse").attr("id","d3po_clip_"+t.d3po.id).append("rect").attr("class","d3po_clipping").call(l),e.draw.timing?(_.selectAll("rect").transition().duration(e.draw.timing).call(u),_.exit().transition().delay(e.draw.timing).remove()):(_.selectAll("rect").call(u),_.exit().remove());var w=d.selectAll("path.d3po_fill").data(p);w.transition().duration(e.draw.timing).call(o,e).call(f),w.enter().insert("path","rect.d3po_mouse").attr("class","d3po_fill").attr("clip-path","url(#d3po_clip_"+t.d3po.id+")").transition().duration(0).call(o,e).call(f,0,void 0,0).transition().duration(e.draw.timing).call(f).call(o,e),w.exit().transition().duration(e.draw.timing).call(f,0,void 0,0).remove()})}},{"../../../core/fetch/color.js":95,"../../../core/fetch/value.js":99,"../../../util/copy.js":242,"./segments.js":274,"./style.js":275}],269:[function(e,t,n){e("../../../util/copy.js");var r=e("../../../core/fetch/text.js"),i=e("../../../core/fetch/value.js"),a=e("../../../color/mix.js"),o=e("../../../core/console/print.js"),s=(e("../../../client/rtl.js"),e("./segments.js")),l=e("./color.js"),u=e("../../../string/list.js"),c=e("../../../color/text.js"),f=e("../../../textwrap/textwrap.js");t.exports=function(e,t){var n=e.types[e.type.value].zoom?e.zoom.behavior.scaleExtent():[1,1],d=e.g[t].selectAll("g"),h=function(t){t.attr("opacity",function(t){var r=parseFloat(d3.select(this).attr("font-size"),10);return t.visible=r*(e.zoom.scale/n[1])>=2,t.visible?1:0})},p=function(t){e.draw.timing?t.transition().duration(e.draw.timing).attr("opacity",0).remove():t.remove()},v=function(t){e.labels.valign.value;t.attr("font-weight",e.labels.font.weight).attr("font-family",e.labels.font.family.value).attr("stroke","none").attr("pointer-events",function(e){return e.mouse?"auto":"none"}).attr("fill",function(t){if(t.color)return t.color;var n=l(t.parent,e),r=c(n),i=t.text?0:1;return a(n,r,.2,i)}).each(function(t){if(t.resize instanceof Array)t.resize[0],t.resize[1];var r=t.resize,i=!0;t.resize instanceof Array||(r=[7,n[1]/n[0]*40],i=t.resize);var a="bottom"===e.labels.valign.value?t.share:0;isNaN(t.percentage)?f().align(t.anchor||e.labels.align.value).container(d3.select(this)).height(t.h*n[1]-t.share).padding(t.padding/2).resize(i).size(r).shape(t.shape||"square").text(t.names).valign(e.labels.valign.value).width(t.w*n[1]).x(t.x-t.w*n[1]/2+t.padding/2).y(t.y-t.h*n[1]/2+t.padding/2+a).draw():f().align(t.anchor||e.labels.align.value).container(d3.select(this)).height(t.h*n[1]-t.share).padding(t.padding/2).resize(i).size(r).shape(t.shape||"square").text(t.names+"\n"+e.format.value(100*t.percentage,{key:"share",vars:e})).valign(e.labels.valign.value).width(t.w*n[1]).x(t.x-t.w*n[1]/2+t.padding/2).y(t.y-t.h*n[1]/2+t.padding/2+a).draw()}).attr("transform",function(e){var t=d3.select(this).attr("transform")||"",r=e.angle||0,i=e.translate&&e.translate.x?e.translate.x:0,a=e.translate&&e.translate.y?e.translate.y:0;return t.length&&(t=t.split(")").slice(-3).join(")")),"rotate("+r+","+i+","+a+")scale("+1/n[1]+")translate("+(e.x*n[1]-e.x)+","+(e.y*n[1]-e.y)+")"+t})};if("edges"===t||e.labels.value){if(e.dev.value){var g="drawing "+t+" labels";o.time(g)}d.each(function(t){var a=t.d3po&&"label"in t.d3po&&!t.d3po.label,o=t.d3po_label||null,l=t.d3po.text?t.d3po.text:o&&o.names?o.names:e.labels.text.value?i(e,t,e.labels.text.value):r(e,t),c=o&&"group"in o?o.group:d3.select(this),f=e.types[e.type.value].fill;if(l instanceof Array||(l=[l]),o)if(["line","area"].indexOf(e.shape.value)>=0)var d=!0;else if(t&&"d3po"in t){var g=s(e,t,"active"),m=s(e,t,"temp"),y=s(e,t,"total");d=!m&&!g||g>=y||!g&&m>=y}if(a||!(o&&o.force||d)&&f)delete t.d3po_label,d3.select(this).selectAll("text#d3po_label_"+t.d3po.id+", rect#d3po_label_bg_"+t.d3po.id).call(p),e.g.labels.selectAll("text#d3po_label_"+t.d3po.id+", rect#d3po_label_bg_"+t.d3po.id).call(p);else if(o&&(o.resize=!1!==e.labels.resize.value&&(!(o&&"resize"in o)||o.resize),o.padding="number"==typeof o.padding?o.padding:e.labels.padding),o&&o.w*n[1]-o.padding>=20&&o.h*n[1]-o.padding>=10&&l.length){for(var b=e.format.locale.value.ui.and,x=e.format.locale.value.ui.more,_=0;_<l.length;_++)l[_]instanceof Array&&(l[_]=u(l[_],b,3,x));o.names=l,o.share=0,o.percentage=t.d3po.share,o.parent=t;var w=c.selectAll("text#d3po_label_"+t.d3po.id).data([o],function(e){return!!e&&e.names}),j=o.resize?void 0:e.labels.font.size*n[0]+"px";if(e.draw.timing&&1===e.zoom.scale?(w.transition().duration(e.draw.timing/2).call(v).call(h),w.enter().append("text").attr("font-size",j).attr("id","d3po_label_"+t.d3po.id).attr("class","d3po_label").attr("opacity",0).call(v).transition().duration(e.draw.timing/2).delay(e.draw.timing/2).call(h)):(w.attr("opacity",1).call(v).call(h),w.enter().append("text").attr("font-size",j).attr("id","d3po_label_"+t.d3po.id).attr("class","d3po_label").call(v).call(h)),w.exit().call(p),0===w.size()||0===w.selectAll("tspan").size())delete t.d3po_label,d3.select(this).selectAll("text#d3po_label_"+t.d3po.id+", rect#d3po_label_bg_"+t.d3po.id).call(p),e.g.labels.selectAll("text#d3po_label_"+t.d3po.id+", rect#d3po_label_bg_"+t.d3po.id).call(p);else{if(o.background){var k=["background"],z=w.node().getBBox();(A={height:z.height,width:z.width,x:z.x,y:z.y>0?z.y:-z.height/2}).width+=e.labels.padding*n[0],A.height+=e.labels.padding*n[0],A.x-=e.labels.padding*n[0]/2,A.y-=e.labels.padding*n[0]/2;var M=w.attr("transform").match(/translate\(([^a-z]+)\)/gi)[0];(M=(M=M.replace(/([^a-z])\s([^a-z])/gi,"$1,$2")).split(",")).length>1&&(M=(M=M[M.length-1]).substring(0,M.length-1),A.y+=parseFloat(M))}else{k=[];var A={}}var E=c.selectAll("rect#d3po_label_bg_"+t.d3po.id).data(k),S="number"==typeof o.background?o.background:"string"==typeof o.background?1:.6;function O(t){var n="string"==typeof o.background?o.background:"none"===e.background.value?"#ffffff":e.background.value,r="string"==typeof o.background?o.background:n,i=w.attr("transform").split(")");i.pop(),i.pop(),i.push(""),i=i.join(")"),t.attr("fill",r).attr(A).attr("transform",i)}e.draw.timing?(E.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),E.transition().duration(e.draw.timing).attr("opacity",S).call(O),E.enter().insert("rect",".d3po_label").attr("id","d3po_label_bg_"+t.d3po.id).attr("class","d3po_label_bg").attr("opacity",0).call(O).transition().duration(e.draw.timing).attr("opacity",S)):(E.exit().remove(),E.enter().insert("rect",".d3po_label").attr("id","d3po_label_bg_"+t.d3po.id).attr("class","d3po_label_bg"),E.attr("opacity",S).call(O))}}else delete t.d3po_label,d3.select(this).selectAll("text#d3po_label_"+t.d3po.id+", rect#d3po_label_bg_"+t.d3po.id).call(p),e.g.labels.selectAll("text#d3po_label_"+t.d3po.id+", rect#d3po_label_bg_"+t.d3po.id).call(p)}),e.dev.value&&o.timeEnd(g)}else{if(e.dev.value){g="removing "+t+" labels";o.time(g)}d.selectAll("text.d3po_label, rect.d3po_label_bg").call(p),e.g.labels.selectAll("text.d3po_label, rect.d3po_label_bg").call(p),e.dev.value&&o.timeEnd(g)}}},{"../../../client/rtl.js":71,"../../../color/mix.js":77,"../../../color/text.js":81,"../../../core/console/print.js":83,"../../../core/fetch/text.js":98,"../../../core/fetch/value.js":99,"../../../string/list.js":209,"../../../textwrap/textwrap.js":235,"../../../util/copy.js":242,"./color.js":261,"./segments.js":274}],270:[function(e,t,n){var r=e("../../../util/copy.js"),i=e("../../../util/closest.js"),a=e("../../../client/pointer.js"),o=e("../d3functions/curves.js"),s=e("./style.js"),l=e("../../../core/fetch/value.js");function u(e){e.attr("x",function(e){return e.d3po.x}).attr("y",function(e){return e.d3po.y}).attr("width",0).attr("height",0)}function c(e,t){void 0===t&&(t=0),e.attr("x",function(e){var n=e.d3po.r?2*e.d3po.r:e.d3po.width;return e.d3po.x-(n/2+t/2)}).attr("y",function(e){var n=e.d3po.r?2*e.d3po.r:e.d3po.height;return e.d3po.y-(n/2+t/2)}).attr("width",function(e){return(e.d3po.r?2*e.d3po.r:e.d3po.width)+t}).attr("height",function(e){return(e.d3po.r?2*e.d3po.r:e.d3po.height)+t}).attr("rx",function(e){return((e.d3po.r?2*e.d3po.r:e.d3po.width)+t)/2}).attr("ry",function(e){return((e.d3po.r?2*e.d3po.r:e.d3po.height)+t)/2})}function f(e,t,n,r){var i=e.draw.timing?e.timing.mouseevents:0;void 0===r&&(r=0),i?(d3.select(t.parentNode).selectAll("path.d3po_line").transition().duration(i).style("stroke-width",function(t){var i=n;if(i.constructor!==Number){var a=l(e,t,n);i=a&&a.length?d3.max(a):e.data.stroke.width}return i+r}),d3.select(t.parentNode).selectAll("rect").transition().duration(i).style("stroke-width",function(t){var r=n;if(r.constructor!==Number){var i=l(e,t,n);r=i&&i.length?d3.max(i):e.data.stroke.width}return r}).call(c,r)):(d3.select(t.parentNode).selectAll("path.d3po_line").style("stroke-width",function(t){var i=n;if(i.constructor!==Number){var a=l(e,t,n);i=a&&a.length?d3.max(a):e.data.stroke.width}return i+r}),d3.select(t.parentNode).selectAll("rect").style("stroke-width",function(t){var r=n;if(r.constructor!==Number){var i=l(e,t,n);r=i&&i.length?d3.max(i):e.data.stroke.width}return r}).call(c,r))}t.exports=function(e,t,n,d){var h=d3.line().x(function(e){return e.d3po.x}).y(function(e){return e.d3po.y}).curve(o.fromString(e.shape.interpolate.value)),p=e.size.value||e.data.stroke.width,v=e[e.axes.discrete],g=function(t){var n=p;if(n.constructor!==Number){var r=l(e,t,p);n=r&&r.length?d3.max(r):e.data.stroke.width}return n<15?15:n},m=v.ticks.values.map(function(e){return e.constructor===Date?e.getTime():e});t.each(function(t){var n=!1,o=[],d=[],y=r(t),b=d3.select(this);y.values=[],y.segment_key=y.key,t.values.forEach(function(a,s,u){var c=l(e,a,v.value);c.constructor===Date&&(c=c.getTime());var f=m.indexOf(i(m,c));!1===n||n===f-1?(y.values.push(a),y.segment_key+="_"+f):(y.values.length>1?o.push(y):d.push(y.values[0]),(y=r(t)).values=[a]),s===u.length-1&&(y.values.length>1?o.push(y):d.push(y.values[0])),n=f});var x=b.selectAll("path.d3po_line").data(o,function(e){return e.d3po||(e.d3po={}),e.d3po.shape="line",e.segment_key}),_=b.selectAll("rect.d3po_anchor").data(d,function(e){return e.d3po||(e.d3po={}),e.d3po.r=p,e.d3po.id});e.draw.timing?(x.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),x.transition().duration(e.draw.timing).attr("d",function(e){return h(e.values)}).call(s,e),x.enter().append("path").attr("class","d3po_line").style("stroke-linecap","round").attr("d",function(e){return h(e.values)}).call(s,e).attr("opacity",0).transition().duration(e.draw.timing).attr("opacity",1),_.enter().append("rect").attr("class","d3po_anchor").attr("id",function(e){return e.d3po.id}).call(u).call(s,e),_.transition().duration(e.draw.timing).call(c).call(s,e),_.exit().transition().duration(e.draw.timing).call(u).remove()):(x.exit().remove(),x.enter().append("path").attr("class","d3po_line").style("stroke-linecap","round"),x.attr("d",function(e){return h(e.values)}).call(s,e),_.enter().append("rect").attr("class","d3po_anchor").attr("id",function(e){return e.d3po.id}),_.exit().remove(),_.call(c).call(s,e));var w=b.selectAll("path.d3po_mouse").data(o,function(e){return e.segment_key});w.enter().append("path").attr("class","d3po_mouse").attr("d",function(e){return h(e.values)}).style("stroke","black").style("stroke-width",g).style("fill","none").style("stroke-linecap","round").attr("opacity",0),w.on(a.over,function(t){!e.draw.frozen&&e.mouse.value&&e.mouse.over.value&&f(e,this,p,2)}).on(a.out,function(t){!e.draw.frozen&&e.mouse.value&&e.mouse.out.value&&f(e,this,p,0)}),e.draw.timing?w.transition().duration(e.draw.timing).attr("d",function(e){return h(e.values)}).style("stroke-width",g):w.attr("d",function(e){return h(e.values)}).style("stroke-width",g),w.exit().remove()})}},{"../../../client/pointer.js":69,"../../../core/fetch/value.js":99,"../../../util/closest.js":241,"../../../util/copy.js":242,"../d3functions/curves.js":249,"./style.js":275}],271:[function(e,t,n){t.exports=function(e){var t=e.returned.edges||[],n=e.g.edges.selectAll("g.d3po_edge_path").data(t,function(t){return t.d3po.id="path_"+t[e.edges.source][e.id.value]+"_"+t[e.edges.target][e.id.value],t.d3po.id});function r(t){t.attr("d",e.edges.path).style("stroke-width",function(e){return Math.max(1,e.dy)}).style("stroke","#ddd").style("fill","none").attr("transform",function(e){return"translate("+e.d3po.x+","+e.d3po.y+")"})}e.draw.timing?(n.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),n.selectAll("text.d3po_label, rect.d3po_label_bg").transition().duration(e.draw.timing/2).attr("opacity",0).remove(),n.selectAll("path").data(function(e){return[e]}).transition().duration(e.draw.timing).call(r),n.enter().append("g").attr("class","d3po_edge_path").append("path").style("stroke-width",0).transition().duration(e.draw.timing).call(r)):(n.exit().remove(),n.selectAll("text.d3po_label, rect.d3po_label_bg").remove(),n.selectAll("path").data(function(e){return[e]}).call(r),n.enter().append("g").attr("class","d3po_edge_path").append("path").call(r))}},{}],272:[function(e,t,n){(function(){var n,r,i,a;a=e("./style.js"),i={},n={},r={r:{},a:{}},t.exports=function(e,t,o,s){var l,u,c,f,d;c=e.id.nesting[e.depth.value+1],f=d3.lineRadial().curve(d3.curveLinearClosed).radius(function(e){return e.d3po.r}).angle(function(e){return e.d3po.a}),l=function(t){return e.labels.value&&(t.d3po.label?t.d3po_label=t.d3po.label:delete t.d3po_label),[t]},e.draw.timing?(t.each(function(t){var n,r,i,a,o;for(o=[],r=0,i=(a=t[c]).length;r<i;r++)n=a[r],o.push(n.d3po.id=n[e.id.value]+"_"+n[c]);return o}),u=d3.lineRadial().curve(d3.curveLinearClosed).radius(function(e,t){return void 0===i[e.d3po.id]&&(i[e.d3po.id]=0),isNaN(i[e.d3po.id])&&(i[e.d3po.id]=e.d3po.r),i[e.d3po.id]}).angle(function(e,t){return void 0===n[e.d3po.id]&&(n[e.d3po.id]=e.d3po.a),isNaN(n[e.d3po.id])&&(n[e.d3po.id]=e.d3po.a),n[e.d3po.id]}),d=function(e,t){return e.attrTween("d",function(e){var a,o,s,l,f,d,h;for(h=e[c],s=l=0,f=h.length;l<f;s=++l)a=(o=h[s]).d3po.a,void 0===t?d=o.d3po.r:0===t&&(d=0),r.a[o.d3po.id]=d3.interpolate(n[o.d3po.id],a),r.r[o.d3po.id]=d3.interpolate(i[o.d3po.id],d);return function(t){var a,l,f;for(f=e[c],s=a=0,l=f.length;a<l;s=++a)o=f[s],n[o.d3po.id]=r.a[o.d3po.id](t),i[o.d3po.id]=r.r[o.d3po.id](t);return u(e[c])}})},o.append("path").attr("class","d3po_data").call(a,e).attr("d",function(e){return u(e[c])}),t.selectAll("path.d3po_data").data(l).transition().duration(e.draw.timing).call(a,e).call(d),s.selectAll("path.d3po_data").transition().duration(e.draw.timing).call(d,0)):(o.append("path").attr("class","d3po_data"),t.selectAll("path.d3po_data").data(l).call(a,e).attr("d",function(e){return f(e[c])}))}}).call(this)},{"./style.js":275}],273:[function(e,t,n){(function(){var n;n=e("./style.js"),t.exports=function(e,t,r,i){var a,o,s;return a=function(t){var n,r;return e.labels.value&&!t.d3po.label?(r=t.d3po.r?2*t.d3po.r:t.d3po.width,n=t.d3po.r?2*t.d3po.r:t.d3po.height,t.d3po_label={w:r,h:n,x:0,y:0},t.d3po_share={w:r,h:n,x:0,y:0},t.d3po_label.shape="circle"===t.d3po.shape?"circle":"square"):t.d3po.label?t.d3po_label=t.d3po.label:delete t.d3po_label,[t]},o=function(e){return e.attr("x",function(e){return e.d3po.init&&"x"in e.d3po.init?e.d3po.init.x:e.d3po.init&&"width"in e.d3po.init?-e.d3po.width/2:0}).attr("y",function(e){return e.d3po.init&&"y"in e.d3po.init?e.d3po.init.y:e.d3po.init&&"height"in e.d3po.init?-e.d3po.height/2:0}).attr("width",function(e){return e.d3po.init&&"width"in e.d3po.init?e.d3po.init.width:0}).attr("height",function(e){return e.d3po.init&&"height"in e.d3po.init?e.d3po.init.height:0})},s=function(t){return t.attr("x",function(e){return-(e.d3po.r?2*e.d3po.r:e.d3po.width)/2}).attr("y",function(e){return-(e.d3po.r?2*e.d3po.r:e.d3po.height)/2}).attr("width",function(e){return e.d3po.r?2*e.d3po.r:e.d3po.width}).attr("height",function(e){return e.d3po.r?2*e.d3po.r:e.d3po.height}).attr("rx",function(e){var t,n;return t="circle"===e.d3po.shape,n=e.d3po.r?2*e.d3po.r:e.d3po.width,t?(n+2)/2:0}).attr("ry",function(e){var t,n;return n="circle"===e.d3po.shape,t=e.d3po.r?2*e.d3po.r:e.d3po.height,n?(t+2)/2:0}).attr("transform",function(e){return"rotate"in e.d3po?"rotate("+e.d3po.rotate+")":""}).attr("shape-rendering",function(t){return"square"!==t.d3po.shape||"rotate"in t.d3po?"auto":e.shape.rendering.value})},e.draw.timing?(r.append("rect").attr("class","d3po_data").call(o).call(n,e),t.selectAll("rect.d3po_data").data(a).transition().duration(e.draw.timing).call(s).call(n,e),i.selectAll("rect.d3po_data").transition().duration(e.draw.timing).call(o)):(r.append("rect").attr("class","d3po_data"),t.selectAll("rect.d3po_data").data(a).call(s).call(n,e))}}).call(this)},{"./style.js":275}],274:[function(e,t,n){(function(){var n;n=e("../../../core/fetch/value.js"),t.exports=function(e,t,r){var i;return(i=e[r].value)?r in t.d3po?t.d3po[r]:n(e,t,i):t.d3po[r]}}).call(this)},{"../../../core/fetch/value.js":99}],275:[function(e,t,n){(function(){var n,r,i;n=e("./color.js"),r=e("../../../client/ie.js"),i=e("../../../core/fetch/value.js"),t.exports=function(e,t){return e.attr("fill",function(e){return e.d3po&&e.d3po.spline?"none":n(e,t)}).style("stroke",function(e){var r;return e.d3po&&e.d3po.stroke?e.d3po.stroke:(r=e.values?n(e.values[0],t):n(e,t,!0),d3.rgb(r).darker(.6).formatHex())}).style("stroke-width",function(e){var n;if(r&&t.types[t.type.value].zoom)return 0;if("line"===e.d3po.shape&&t.size.value){if(t.size.value.constructor===Number)return t.size.value;if((n=i(t,e,t.size.value))&&n.length)return d3.max(n)}return t.data.stroke.width}).attr("opacity",t.data.opacity).attr("vector-effect","non-scaling-stroke")}}).call(this)},{"../../../client/ie.js":68,"../../../core/fetch/value.js":99,"./color.js":261}],276:[function(e,t,n){var r=e("./style.js");t.exports=function(e,t,n,i){function a(e){e.attr("d",d3.symbol().type(d3.symbolTriangle).size(function(e){var t=Math.min(e.d3po.width,e.d3po.height);return d3.scalePow().exponent(2)(t/2)})).attr("transform","rotate(180)")}n.append("path").attr("class","d3po_data").call(function(e){e.attr("d",d3.symbol().type(d3.symbolTriangle).size(10)).attr("transform","rotate(180)")}).call(r,e),t.selectAll("path.d3po_data").data(function(e){return[e]}),e.draw.timing?t.selectAll("path.d3po_data").transition().duration(e.draw.timing).call(a).call(r,e):t.selectAll("path.d3po_data").call(a).call(r,e)}},{"./style.js":275}],277:[function(e,t,n){var r=e("./style.js");t.exports=function(e,t,n,i){function a(e){e.attr("d",d3.symbol().type(d3.symbolTriangle).size(function(e){var t=Math.min(e.d3po.width,e.d3po.height);return d3.scalePow().exponent(2)(t/2)}))}n.append("path").attr("class","d3po_data").call(function(e){e.attr("d",d3.symbol().type(d3.symbolTriangle).size(10))}).call(r,e),t.selectAll("path.d3po_data").data(function(e){return[e]}),e.draw.timing?t.selectAll("path.d3po_data").transition().duration(e.draw.timing).call(a).call(r,e):t.selectAll("path.d3po_data").call(a).call(r,e)}},{"./style.js":275}],278:[function(e,t,n){(function(){t.exports=function(e,t,n,r){var i,a,o,s,l,u,c,f,d;a=function(e){return e.d3po.text?e.d3po_label={w:f,h:f,x:0,y:0,background:"#fff",resize:!1,angle:["left","right"].indexOf(e.d3po.position)>=0?90:0}:e.d3po.label?e.d3po_label=e.d3po.label:delete e.d3po_label,[e]},d=function(t){return t.style("stroke-width",e.data.stroke.width).style("stroke","#444").attr("fill","none").attr("shape-rendering",e.shape.rendering.value)},o=function(e){return e.attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",0)},c=function(e){return e.attr("x1",function(e){var t,n;return["top","bottom"].indexOf(e.d3po.position)>=0?0:(t=e.d3po.offset||0,n=e.d3po.width||0,(t<0?-n:n)+t)}).attr("x2",function(e){return["top","bottom"].indexOf(e.d3po.position)>=0?0:e.d3po.offset||0}).attr("y1",function(e){var t,n;return["left","right"].indexOf(e.d3po.position)>=0?0:(n=e.d3po.offset||0,t=e.d3po.height||0,(n<0?-t:t)+n)}).attr("y2",function(e){return["left","right"].indexOf(e.d3po.position)>=0?0:e.d3po.offset||0}).attr("marker-start","url(#d3po_whisker_marker)")},(s=e.defs.selectAll("#d3po_whisker_marker").data([0])).enter().append("marker").attr("id","d3po_whisker_marker").attr("markerUnits","userSpaceOnUse").style("overflow","visible").append("line"),(i=t.datum())?(u=i.d3po.position,l=["top","bottom"].indexOf(u)>=0?"horizontal":"vertical",f="horizontal"===l?i.d3po.width:i.d3po.height):(l="horizontal",f=0),s.select("line").attr("x1","horizontal"===l?-f/2:0).attr("x2","horizontal"===l?f/2:0).attr("y1","vertical"===l?-f/2:0).attr("y2","vertical"===l?f/2:0).call(d).style("stroke-width",2*e.data.stroke.width),e.draw.timing?(n.append("line").attr("class","d3po_data").call(d).call(o),t.selectAll("line.d3po_data").data(a).transition().duration(e.draw.timing).call(d).call(c),r.selectAll("line.d3po_data").transition().duration(e.draw.timing).call(o)):(n.append("line").attr("class","d3po_data"),t.selectAll("line.d3po_data").data(a).call(d).call(c))}}).call(this)},{}],279:[function(e,t,n){var r=e("../../../client/pointer.js"),i=e("../../../client/prefix.js"),a=e("../../../core/console/print.js"),o=e("../../../client/touch.js"),s=e("../zoom/propagation.js");t.exports=function(e){e.dev.value&&a.time("creating SVG elements"),e.svg=e.container.value.selectAll("svg#d3po").data([0]),e.svg.enter().insert("svg","#d3po_message").attr("id","d3po").attr("width",e.width.value).attr("height",e.height.value).attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:xlink","http://www.w3.org/1999/xlink"),e.g.bg=e.svg.selectAll("rect#bg").data(["bg"]),e.g.bg.enter().append("rect").attr("id","bg").attr("fill",e.background.value).attr("stroke","none").attr("width",e.width.value).attr("height",e.height.value),e.g.timeline=e.svg.selectAll("g#timeline").data(["timeline"]),e.g.timeline.enter().append("g").attr("id","timeline").attr("transform","translate(0,"+e.height.value+")"),e.g.legend=e.svg.selectAll("g#key").data(["key"]),e.g.legend.enter().append("g").attr("id","key").attr("transform","translate(0,"+e.height.value+")"),e.g.footer=e.svg.selectAll("g#footer").data(["footer"]),e.g.footer.enter().append("g").attr("id","footer").attr("transform","translate(0,"+e.height.value+")");var t="clipping_"+e.container.id;e.g.clipping=e.svg.selectAll("#clipping").data(["clipping"]),e.g.clipping.enter().append("clipPath").attr("id",t).append("rect").attr("width",e.width.viz).attr("height",e.height.viz),e.g.container=e.svg.selectAll("g#container").data(["container"]),e.g.container.enter().append("g").attr("id","container").attr("clip-path","url(#"+t+")").attr("transform","translate("+e.margin.left+","+e.margin.top+")"),e.g.zoom=e.g.container.selectAll("g#zoom").data(["zoom"]),e.g.zoom.enter().append("g").attr("id","zoom"),e.g.viz=e.g.zoom.selectAll("g#d3po_viz").data(["d3po_viz"]),e.g.viz.enter().append("g").attr("id","d3po_viz"),e.g.overlay=e.g.viz.selectAll("rect#d3po_overlay").data([{id:"d3po_overlay"}]),e.g.overlay.enter().append("rect").attr("id","d3po_overlay").attr("width",e.width.value).attr("height",e.height.value).attr("opacity",0),e.g.overlay.on(r.move,function(t){o&&s(e,d3.event),e.types[e.type.value].zoom&&e.zoom.pan.value&&e.zoom.behavior.scaleExtent()[0]<e.zoom.scale?d3.select(this).style("cursor",i()+"grab"):d3.select(this).style("cursor","auto")}).on(r.up,function(t){o&&s(e,d3.event),e.types[e.type.value].zoom&&e.zoom.pan.value&&e.zoom.behavior.scaleExtent()[0]<e.zoom.scale?d3.select(this).style("cursor",i()+"grab"):d3.select(this).style("cursor","auto")}).on(r.down,function(t){o&&s(e,d3.event),e.types[e.type.value].zoom&&e.zoom.pan.value&&e.zoom.behavior.scaleExtent()[0]<e.zoom.scale?d3.select(this).style("cursor",i()+"grabbing"):d3.select(this).style("cursor","auto")}),e.g.app=e.g.viz.selectAll("g#app").data(["app"]),e.g.app.enter().append("g").attr("id","app"),e.g.edges=e.g.viz.selectAll("g#edges").data(["edges"]),e.g.edges.enter().append("g").attr("id","edges").attr("opacity",0),e.g.edge_focus=e.g.viz.selectAll("g#focus").data(["focus"]),e.g.edge_focus.enter().append("g").attr("id","focus"),e.g.edge_hover=e.g.viz.selectAll("g#edge_hover").data(["edge_hover"]),e.g.edge_hover.enter().append("g").attr("id","edge_hover").attr("opacity",0),e.g.data=e.g.viz.selectAll("g#data").data(["data"]),e.g.data.enter().append("g").attr("id","data").attr("opacity",0),e.g.data_focus=e.g.viz.selectAll("g#data_focus").data(["data_focus"]),e.g.data_focus.enter().append("g").attr("id","data_focus"),e.g.labels=e.g.viz.selectAll("g#d3po_labels").data(["d3po_labels"]),e.g.labels.enter().append("g").attr("id","d3po_labels"),e.defs=e.svg.selectAll("defs").data(["defs"]),e.defs.enter().append("defs"),e.dev.value&&a.timeEnd("creating SVG elements")}},{"../../../client/pointer.js":69,"../../../client/prefix.js":70,"../../../client/touch.js":74,"../../../core/console/print.js":83,"../zoom/propagation.js":294}],280:[function(e,t,n){var r=e("../../../core/console/print.js");t.exports=function(e){e.dev.value&&r.time("updating SVG elements"),e.draw.timing?(e.container.value.transition().duration(e.draw.timing).style("width",e.width.value+"px").style("height",e.height.value+"px"),e.svg.transition().duration(e.draw.timing).attr("width",e.width.value).attr("height",e.height.value),e.g.bg.transition().duration(e.draw.timing).attr("width",e.width.value).attr("height",e.height.value).attr("fill",e.background.value),e.g.clipping.select("rect").transition().duration(e.draw.timing).attr("width",e.width.viz).attr("height",e.height.viz),e.g.container.transition().duration(e.draw.timing).attr("transform","translate("+e.margin.left+","+e.margin.top+")")):(e.container.value.style("width",e.width.value+"px").style("height",e.height.value+"px"),e.svg.attr("width",e.width.value).attr("height",e.height.value),e.g.bg.attr("width",e.width.value).attr("height",e.height.value).attr("fill",e.background.value),e.g.clipping.select("rect").attr("width",e.width.viz).attr("height",e.height.viz),e.g.container.attr("transform","translate("+e.margin.left+","+e.margin.top+")")),e.dev.value&&r.timeEnd("updating SVG elements")}},{"../../../core/console/print.js":83}],281:[function(e,t,n){var r=e("../../../array/sort.js"),i=e("../../../tooltip/create.js"),a=e("../../../core/data/nest.js"),o=e("./data.js"),s=e("../../../core/fetch/color.js"),l=e("../../../core/fetch/text.js"),u=e("../../../core/fetch/value.js"),c=e("../../../object/merge.js"),f=e("../../../tooltip/remove.js"),d=e("../shapes/segments.js"),h=e("../../../client/scroll.js"),p=e("../../../util/uniques.js"),v=e("../../../object/validate.js"),g=e("../zoom/direction.js");t.exports=function(e){"d3po"in e.data||(e.data.d3po={});var t=e.vars,n=e.data,m="d3po"in n&&"depth"in n.d3po?n.d3po.depth:t.depth.value,y=(e.ex,!!e.mouseevents&&e.mouseevents),b=!("arrow"in e)||e.arrow,x=u(t,n,t.id.value),_=e.id||t.type.value;if(!d3.event||"click"!=d3.event.type||!t.tooltip.html.value&&!t.tooltip.value.long||"fullscreen"in e){M=!1;var w=e.anchor||t.tooltip.anchor,j=(A=e.length||"short",g(n,t));if(-1===j){var k=t.id.nesting[m-1];u(t,x,k)}var z="";if(t.mouse.click.value&&(!t.mouse.viz||!1!==t.mouse.viz.click))if(1===j&&t.zoom.value)z=t.format.value(t.format.locale.value.ui.expand);else if(-1===j&&t.zoom.value&&t.history.states.length&&!t.tooltip.value.long)z=t.format.value(t.format.locale.value.ui.collapse);else if(t.small||"short"!=A||!t.tooltip.html.value&&!t.tooltip.value.long||1===t.focus.value.length&&t.focus.value[0]==x){if("long"==A)z=t.footer.value||""}else var z=t.format.locale.value.ui.moreInfo;E=!!z.length&&t.format.value(z,{key:"footer",vars:t})}else{var M=!0,A=(b=!1,y=!0,"long"),E=t.footer.value;t.covered=!0}if("x"in e)var S=e.x;else if("static"===t.types[t.type.value].tooltip){S=n.d3po.x;t.zoom.translate&&t.zoom.scale&&(S=t.zoom.translate[0]+S*t.zoom.scale),S+=t.margin.left,"long"!==e.length&&(O+=h.x(),S+=t.container.value.node().getBoundingClientRect().left,S+=parseFloat(t.container.value.style("padding-left"),10))}else S=d3.mouse(d3.select("html").node())[0];if("y"in e)var O=e.y;else if("static"==t.types[t.type.value].tooltip){O=n.d3po.y;t.zoom.translate&&t.zoom.scale&&(O=t.zoom.translate[1]+O*t.zoom.scale),O+=t.margin.top,"long"!==e.length&&(O+=h.y(),O+=t.container.value.node().getBoundingClientRect().top,O+=parseFloat(t.container.value.style("padding-top"),10))}else O=d3.mouse(d3.select("html").node())[1];if("offset"in e)var T=e.offset;else if("static"==t.types[t.type.value].tooltip){T=n.d3po.r?n.d3po.r:n.d3po.height/2;t.zoom.scale&&(T*=t.zoom.scale)}else T=3;function C(h){var g,x="depth"in e?e.depth:m,j={},k=t.id.nesting[x+1]in n?x+1:x,z=t.id.nesting[k],C="merged"in n.d3po?n.d3po.merged:n[z];C instanceof Array||(C=[C]);var N=u(t,n,t.size.value);if(t.tooltip.children.value){if((C=C.slice(0)).length>1&&v(C[0])&&(C=a(t,C,[z])),t.size.value&&v(C[0])){var P=[],F=C.filter(function(e){if(!(null===u(t,e,t.size.value)||"d3po"in e&&e.d3po.merged))return!0;P.push(e)});r(F,t.size.value,"desc",[],t),C=F.concat(P)}var q=!0===t.tooltip.children.value?3:t.tooltip.children.value,B="short"===A?q:t.data.large,D=C.length,I=d3.min([D,B]);g={values:[]};for(var R=0;R<I&&C.length;R++){var L=C.shift(),U=l(t,L,k)[0],V=v(L)?u(t,L,z,k):L;if(V!==n[t.id.nesting[x]]&&U&&!g[U]){var Y=v(L)?u(t,L,t.size.value,z):null,H=s(t,L,z);g[U]=!Y||Y instanceof Array?"":t.format.value(Y,{key:t.size.value,vars:t,data:L});var G={};G[U]=g[U],g.values.push(G),H&&(g.d3po_colors||(g.d3po_colors={}),g.d3po_colors[U]=H)}else R--}D>I&&(g.d3poMore=D-I)}function X(e){return"string"==typeof t[e].value?t[e].value:t.format.locale.value.method[e]}n.d3po.tooltip&&(j=c(j,n.d3po.tooltip)),t.tooltip.size.value&&(N&&"number"!=typeof t.size.value&&(j[X("size")]=N),t.axes.opposite&&t[t.axes.opposite].value!==t.size.value&&(j[X(t.axes.opposite)]=u(t,n,t[t.axes.opposite].value)),t.axes.opposite&&t[t.axes.opposite+"2"].value!==t.size.value&&(j[X(t.axes.opposite+"2")]=u(t,n,t[t.axes.opposite+"2"].value)),t.color.valueScale&&(j[X("color")]=u(t,n,t.color.value)));var W=d(t,n,"active"),Q=d(t,n,"temp"),Z=d(t,n,"total");"number"==typeof W&&W>0&&Z&&(j[X("active")]=W+"/"+Z+" ("+t.format.value(W/Z*100,{key:"share",vars:t,data:n})+")"),"number"==typeof Q&&Q>0&&Z&&(j[X("temp")]=Q+"/"+Z+" ("+t.format.value(Q/Z*100,{key:"share",vars:t,data:n})+")"),t.tooltip.share.value&&n.d3po.share&&(j.share=t.format.value(100*n.d3po.share,{key:"share",vars:t,data:n}));k="depth"in e?e.depth:m;var $=e.title||l(t,n,k)[0],J=p(n,t.icon.value,u,t,t.id.nesting[k]),K=e.titleOnly?[]:o(t,n,A,j,g,k);if(J=1===J.length&&"string"==typeof J[0]&&J[0],K.length>0||E||!n.d3po_label&&"short"==A&&$||n.d3po_label&&(!("visible"in n.d3po_label)||"visible"in n.d3po_label&&!1===n.d3po_label.visible)){if($||($=t.format.value(V,{key:t.id.value,vars:t})),(k="d3po"in n&&"merged"in n.d3po?m-1:"depth"in e?e.depth:m)<0&&(k=0),k=t.id.nesting[k],"string"==typeof t.icon.style.value)var ee=t.icon.style.value;else if("object"==typeof t.icon.style.value&&t.icon.style.value[k])ee=t.icon.style.value[k];else ee="default";var te=t.tooltip.small;e.width?te=e.width:M&&(te=t.tooltip.large);var ne=!M&&"long"!==e.length||M&&t.tooltip.fullscreen.value?d3.select("body"):t.container.value;!e.description&&n&&t.tooltip.sub.value&&(e.description=u(t,n,t.tooltip.sub.value)),i({align:w,arrow:b,locale:t.format.locale.value,background:t.tooltip.background,curtain:t.tooltip.curtain.color,curtainopacity:t.tooltip.curtain.opacity,fontcolor:t.tooltip.font.color,fontfamily:t.tooltip.font.family.value,fontsize:t.tooltip.font.size,fontweight:t.tooltip.font.weight,data:K,color:s(t,n),allColors:!0,footer:!1===e.footer?e.footer:E,fullscreen:M,html:h,js:e.js,icon:J,id:_,max_height:e.maxheight,max_width:te,mouseevents:y,offset:T,parent:ne,stacked:t.tooltip.stacked.value,style:ee,title:$,description:e.description,width:e.width||M||0!=K.length?te:"auto",x:S,y:O})}else f(_)}if(M||"long"===e.length)if("string"==typeof t.tooltip.html.value)C(t.tooltip.html.value);else if("function"==typeof t.tooltip.html.value)C(t.tooltip.html.value(x));else if(t.tooltip.html.value&&"object"==typeof t.tooltip.html.value&&t.tooltip.html.value.url){var N=t.tooltip.html.value.url;"function"==typeof N&&(N=N(x)),d3.json(N).then(function(e){C(t.tooltip.html.value.callback?t.tooltip.html.value.callback(e):e)})}else C(e.html);else C(e.html)}},{"../../../array/sort.js":65,"../../../client/scroll.js":72,"../../../core/data/nest.js":92,"../../../core/fetch/color.js":95,"../../../core/fetch/text.js":98,"../../../core/fetch/value.js":99,"../../../object/merge.js":206,"../../../object/validate.js":207,"../../../tooltip/create.js":236,"../../../tooltip/remove.js":238,"../../../util/uniques.js":245,"../shapes/segments.js":274,"../zoom/direction.js":291,"./data.js":282}],282:[function(e,t,n){var r=e("../../../util/copy.js"),i=e("../../../core/fetch/value.js"),a=e("../../../core/fetch/color.js"),o=e("../../../core/fetch/text.js"),s=e("../../../color/legible.js"),l=e("../../../object/merge.js"),u=e("../../../client/prefix.js"),c=e("../../../string/format.js"),f=e("../../../object/validate.js");t.exports=function(e,t,n,d,h,p){if(e.small)return[];if(!n)n="long";if("long"==n)var v="short";else v="long";var g={};if(d&&"string"==typeof d)d=[d];else if(d&&"object"==typeof d){g=l(g,d);d=[];for(var m in g)d.push(m)}else if(!d)d=[];var y=[];if(e.tooltip.value instanceof Array)var b=e.tooltip.value;else if("string"==typeof e.tooltip.value)b=[e.tooltip.value];else{if(e.tooltip.value[e.id.nesting[p]])b=e.tooltip.value[e.id.nesting[p]];else b=e.tooltip.value;b instanceof Array||(b=b[n]?b[n]:b[v]?[]:l({"":[]},b)),"string"==typeof b?b=[b]:b instanceof Array||(b=l({"":[]},b))}function x(n,r){if(e.attrs.value[r])var a=r;else a=null;r&&(r=e.format.value(r));var o=g[n]||i(e,t,n,a);if(f(o))_.push({name:e.format.value(n),value:e.format.value(o.value,{key:o.key,vars:e}),group:r});else if(null!=o&&"undefined"!=o&&!(o instanceof Array)&&("string"==typeof o&&o.indexOf("d3po_other")<0||"string"!=typeof o)){var s=e.format.locale.value.ui[n]?e.format.value(e.format.locale.value.ui[n]):e.format.value(n),l=y.indexOf(n)>=0;o instanceof Array?o.forEach(function(r){r=e.format.value(r,{key:n,vars:e,data:t})}):o=e.format.value(o,{key:n,vars:e,data:t});var u={name:s,value:o,highlight:l,group:r};if(e.descs.value)if("function"==typeof e.descs.value){var c=e.descs.value(n);"string"==typeof c&&(u.desc=c)}else n in e.descs.value&&(u.desc=e.descs.value[n]);_.push(u)}}var _=[];if(b.constructor===Array&&(b={"":b}),e.id.nesting.length&&p<e.id.nesting.length-1){b=r(b);e.id.nesting.forEach(function(e,t){t>p&&b[e]&&delete b[e]})}for(var w in b){b[w].constructor!==Array&&(b[w]=[b[w]]);for(var j=d.length;j>0;j--)b[w].indexOf(d[j-1])>=0&&d.splice(j-1,1)}if(e.tooltip.value.long&&"object"==typeof e.tooltip.value.long){for(var w in e.tooltip.value.long)for(j=d.length;j>0;j--){var k=d[j-1];e.tooltip.value.long[w].indexOf(k)>=0&&(b[w]||(b[w]=[]),b[w].push(k),d.splice(j-1,1))}}for(var w in d.length&&(b[""]||(b[""]=[]),b[""]=b[""].concat(d)),b)b[w].forEach(function(e){x(e,w)});if(h){var z=e.format.locale.value.ui.including,M=h.d3po_colors;h.values.forEach(function(t){var n=d3.keys(t)[0];_.push({group:e.format.value(z),highlight:!(!M||!M[n])&&M[n],name:n,value:t[n]})}),h.d3poMore&&_.push({group:e.format.value(z),highlight:!0,name:c(e.format.locale.value.ui.more,h.d3poMore),value:""})}if(e.tooltip.connections.value&&"long"===n){var A=e.edges.connections(t[e.id.value],e.id.value,!0);A.length&&A.forEach(function(t){var n=(n=e.data.viz.filter(function(n){return n[e.id.value]===t[e.id.value]})).length?n[0]:t,r=o(e,n)[0],i=a(e,n),l=e.tooltip.font.size,c="square"==e.shape.value?0:l;styles=["background-color: "+i,"border-color: "+s(i),"border-style: solid","border-width: "+e.data.stroke.width+"px","display: inline-block","height: "+l+"px","left: 0px","position: absolute","width: "+l+"px","top: 0px",u()+"border-radius: "+c+"px"],node="<div style='"+styles.join("; ")+";'></div>";_.push({group:e.format.value(e.format.locale.value.ui.primary),highlight:!1,link:function(){e.self.focus([n[e.id.value]]).draw()},name:"<div id='d3potooltipfocuslink_"+n[e.id.value]+"' class='d3po_tooltip_focus_link' style='position:relative;padding-left:"+1.5*l+"px;'>"+node+r+"</div>"})})}return _}},{"../../../client/prefix.js":70,"../../../color/legible.js":75,"../../../core/fetch/color.js":95,"../../../core/fetch/text.js":98,"../../../core/fetch/value.js":99,"../../../object/merge.js":206,"../../../object/validate.js":207,"../../../string/format.js":208,"../../../util/copy.js":242}],283:[function(e,t,n){(function(){var n;n=e("../../../core/console/print.js"),t.exports=function(e){var t,r,i,a,o,s,l,u,c;if(e.group=e.g.apps[e.type.value],e.mouse.viz=!1,e.edges.path=!1,a=!(i=((c=e.types[e.type.value]).requirements||[]).indexOf("data")>=0)||i&&e.data.viz.length,!e.error.internal&&a){for(t=e.format.locale.value.visualization[e.type.value],e.dev.value&&n.time("running "+t),o=0,s=(l=e.data.viz).length;o<s;o++)(r=l[o]).d3po&&(delete r.d3po.shape,delete r.d3po.label,delete r.d3po.rotate,delete r.d3po.share);u=c(e),e.dev.value&&n.timeEnd("running "+t)}else u=null;e.returned={nodes:[],edges:null},u instanceof Array?e.returned.nodes=u:u&&(u.nodes&&(e.returned.nodes=u.nodes),u.edges&&(e.returned.edges=u.edges))}}).call(this)},{"../../../core/console/print.js":83}],284:[function(e,t,n){var r=e("../../../util/copy.js"),i=e("../../../form/form.js"),a=e("../../../core/console/print.js"),o=e("../../../object/validate.js");t.exports=function(e){var t=e.ui.value&&e.ui.value.length,n=e.ui.position.value;e.dev.value&&t&&a.time("drawing custom UI elements");var s=e.container.value.selectAll("div#d3po_drawer").data(["d3po_drawer"]);s.enter().append("div").attr("id","d3po_drawer");var l={};e.ui.position.accepted.forEach(function(t){l[t]=t==n?e.margin.bottom+"px":"auto"}),s.style("text-align",e.ui.align.value).style("position","absolute").style("width",e.width.value-2*e.ui.padding+"px").style("height","auto").style(l);var u=s.selectAll("div.d3po_drawer_ui").data(t?e.ui.value:[],function(e){return e.method||!1});u.exit().remove(),u.enter().append("div").attr("class","d3po_drawer_ui").style("display","inline-block"),u.style("padding",e.ui.padding+"px").each(function(t){var n,a;t.form||(t.form=i().container(d3.select(this)).data({sort:!1}).id("id").text("text")),"string"==typeof t.method&&t.method in e?(n=e[t.method].value,a=function(n){n!==e[t.method].value&&e.self[t.method](n).draw()}):(n=t.focus||t.value[0],o(n)&&(n=n[d3.keys(n)[0]]),"function"==typeof t.method&&(a=function(r){r!==n&&(n=r,t.focus=r,t.method(r,e.self))}));var s,l=[];t.label?s=t.label:"string"==typeof t.method&&t.method in e&&(s=e.format.locale.value.method[t.method]||t.method),t.value.forEach(function(t){var n={};o(t)?(n.id=t[d3.keys(t)[0]],n.text=e.format.value(d3.keys(t)[0])):(n.id=t,n.text=e.format.value(t)),l.push(n)});var u=r(e.ui.font);u.align=r(e.font.align),u.secondary=r(u),t.form.data(l).font(u).focus(t.value.length>1&&n).focus({callback:a}).format(e.format.locale.language).format({number:e.format.number.value,text:e.format.text.value}).title(e.format.value(s)).type(t.type||"auto").ui({align:e.ui.align.value,border:e.ui.border,color:{primary:e.ui.color.primary.value,secondary:e.ui.color.secondary.value},padding:e.ui.padding,margin:0}).width(t.width||!1).draw()});var c=s.node().offsetHeight||s.node().getBoundingClientRect().height;c&&(e.margin[n]+=c),e.dev.value&&t&&a.timeEnd("drawing custom UI elements")}},{"../../../core/console/print.js":83,"../../../form/form.js":138,"../../../object/validate.js":207,"../../../util/copy.js":242}],285:[function(e,t,n){(function(){var n,r,i,a;n=e("../../../client/pointer.js"),r=e("../../../color/lighter.js"),i=e("../../../core/console/print.js"),a=e("../../../client/css.js"),t.exports=function(e){var t,o,s,l,u,c,f,d,h,p,v,g,m,y;return!e.small&&e.history.value&&e.history.states.length>0?(e.dev.value&&i.time("drawing back button"),t=e.container.value.selectAll("div#d3po_back_button").data(["d3po_back_button"]).style("position","relative").style("z-index",1900),d=e.title.sub.font.size,o=e.title.sub.font.color,l=e.title.sub.font.family.value,y=e.title.sub.font.weight,f=e.title.sub.padding,v=!1,e.title.sub.value&&["start","left"].indexOf(e.title.sub.font.align)<0?v="sub":e.title.total.value&&["start","left"].indexOf(e.title.total.font.align)<0?v="total":e.title.value&&["start","left"].indexOf(e.title.font.align)<0&&(v="title"),v?(h=function(e){var t;return t=(t=(t=(t=e.attr("transform").match(/translate\(([^a-z]+)\)/gi)[0]).replace(/([^a-z])\s([^a-z])/gi,"$1,$2")).split(","))[t.length-1],parseFloat(t.substring(0,t.length-1))},g=e.svg.select(".d3po_title."+v),m=h(g)+h(g.select("text"))):(m=e.margin.top-e.title.padding,c=d+2*f,e.margin.top+=c),s=parseFloat(e.container.value.style("padding-top"),10),m+=s,s=parseFloat(e.container.value.style("padding-left"),10),u=e.margin.left+d/2+s,p=function(e){return e.style("position","absolute").style("left",u+"px").style("top",m+"px").style("color",o).style("font-family",l).style("font-weight",y).style("font-size",d+"px")},t.enter().append("div").attr("id","d3po_back_button").style("opacity",0).call(p).html(function(){var t;return a("font-awesome")&&0===e.icon.back.value.indexOf("fa-")?(t="<i class='fa "+e.icon.back.value,t+="' style='margin-top:2px;margin-right:4px;'></i>"):t=e.icon.back.value+" ",t+e.format.value(e.format.locale.value.ui.back)}),t.on(n.over,function(){if(!e.small&&e.history.states.length>0)return d3.select(this).style("cursor","pointer").transition().duration(e.timing.mouseevents).style("color",r(o,.25))}).on(n.out,function(){if(!e.small&&e.history.states.length>0)return d3.select(this).style("cursor","auto").transition().duration(e.timing.mouseevents).style("color",o)}).on(n.click,function(){return e.history.back()}).transition().duration(e.draw.timing).style("opacity",1).call(p),e.dev.value?i.timeEnd("drawing back button"):void 0):e.container.value.selectAll("div#d3po_back_button").transition().duration(e.draw.timing).style("opacity",0).remove()}}).call(this)},{"../../../client/css.js":67,"../../../client/pointer.js":69,"../../../color/lighter.js":76,"../../../core/console/print.js":83}],286:[function(e,t,n){var r=e("../../../array/sort.js"),i=e("../../../util/buckets.js"),a=e("../../../util/copy.js"),o=e("../tooltip/create.js"),s=e("../../../core/data/nest.js"),l=e("../../../util/dataurl.js"),u=e("../../../client/pointer.js"),c=e("../../../core/fetch/value.js"),f=e("../../../core/fetch/color.js"),d=e("../../../core/fetch/text.js"),h=e("../../../core/console/print.js"),p=e("../../../tooltip/remove.js"),v=e("../../../color/text.js"),g=e("../../../util/uniques.js"),m=e("../../../client/scroll.js"),y=e("../../../string/strip.js"),b=e("../../../textwrap/textwrap.js"),x=(e("../../../client/touch.js"),e("../../../object/validate.js"));t.exports=function(e){var t=!0,n=0;if(!e.error.internal&&e.color.value&&!e.small&&e.legend.value)if(e.color.valueScale)if(e.color.valueScale){e.dev.value&&h.time("drawing color scale"),e.g.legend.selectAll("g.d3po_color").transition().duration(e.draw.timing).attr("opacity",0).remove();var _=e.color.valueScale.domain();L=e.color.valueScale.range();_.length<=2&&(_=i(_,6));var w=e.g.legend.selectAll("g.d3po_scale").data(["scale"]);w.enter().append("g").attr("class","d3po_scale").attr("opacity",0);var j=e.container.id+"_legend_heatmap",k=w.selectAll("#"+j).data(["heatmap"]);k.enter().append("linearGradient").attr("id",j).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").attr("spreadMethod","pad");var z=k.selectAll("stop").data(d3.range(0,L.length));z.enter().append("stop").attr("stop-opacity",1),z.attr("offset",function(e){return Math.round(e/(L.length-1)*100)+"%"}).attr("stop-color",function(e){return L[e]}),z.exit().remove();var M=w.selectAll("rect#gradient").data(["gradient"]);M.enter().append("rect").attr("id","gradient").attr("x",function(t){return"middle"==e.legend.align?e.width.value/2:"end"==e.legend.align?e.width.value:0}).attr("y",e.ui.padding).attr("width",0).attr("height",e.legend.gradient.height).attr("stroke",e.legend.font.color).attr("stroke-width",1).style("fill","url(#"+j+")");var A=w.selectAll("text.d3po_tick").data(d3.range(0,_.length));A.enter().append("text").attr("class","d3po_tick").attr("stroke","none").attr("x",function(t){return"middle"==e.legend.align?e.width.value/2:"end"==e.legend.align?e.width.value:0}).attr("y",function(t){return this.getBBox().height+e.legend.gradient.height+2*e.ui.padding});var E=0;if(A.order().attr("font-weight",e.legend.font.weight).attr("font-family",e.legend.font.family.value).attr("font-size",e.legend.font.size+"px").style("text-anchor",e.legend.font.align).attr("fill",e.legend.font.color).text(function(t){return e.format.value(_[t],{key:e.color.value,vars:e})}).attr("y",function(t){return this.getBBox().height+e.legend.gradient.height+2*e.ui.padding}).each(function(e){var t=Math.ceil(this.getBBox().width);t>E&&(E=t)}),E+=2*e.labels.padding,(V=E*(_.length-1))+E<e.width.value){V+E<e.width.value/2&&(V=e.width.value/2,E=V/_.length,V-=E),G="start"==e.legend.align?e.ui.padding:"end"==e.legend.align?e.width.value-e.ui.padding-V:e.width.value/2-V/2,A.transition().duration(e.draw.timing).attr("x",function(e){return G+E*e}),A.exit().transition().duration(e.draw.timing).attr("opacity",0).remove();var S=w.selectAll("rect.d3po_tick").data(d3.range(0,_.length));S.enter().append("rect").attr("class","d3po_tick").attr("x",function(t){return"middle"==e.legend.align?e.width.value/2:"end"==e.legend.align?e.width.value:0}).attr("y",e.ui.padding).attr("width",0).attr("height",e.ui.padding+e.legend.gradient.height).attr("fill",e.legend.font.color),S.transition().duration(e.draw.timing).attr("x",function(e){return G+E*e-(0===e?1:0)}).attr("y",e.ui.padding).attr("width",1).attr("height",e.ui.padding+e.legend.gradient.height).attr("fill",e.legend.font.color),S.exit().transition().duration(e.draw.timing).attr("width",0).remove(),M.transition().duration(e.draw.timing).attr("x",function(t){return"middle"==e.legend.align?e.width.value/2-V/2:"end"==e.legend.align?e.width.value-V-e.ui.padding:e.ui.padding}).attr("y",e.ui.padding).attr("width",V).attr("height",e.legend.gradient.height),w.transition().duration(e.draw.timing).attr("opacity",1),e.dev.value&&h.timeEnd("drawing color scale")}else t=!1}else t=!1;else{var O;if(e.dev.value&&h.time("grouping data by colors"),e.nodes.value&&e.types[e.type.value].requirements.indexOf("nodes")>=0){if(O=a(e.nodes.restriced||e.nodes.value),e.data.viz.length)for(var T=0;T<O.length;T++){var C=e.data.viz.filter(function(t){return t[e.id.value]===O[T][e.id.value]});C.length&&(O[T]=C[0])}}else O=e.data.viz;O.length&&"key"in O[0]&&"values"in O[0]&&(O=d3.merge(O.map(function(e){return e.values})));var N=function(t){return f(e,t,P)},P=0,F=e.id.value,q=e.id.nesting.indexOf(e.color.value);if(q>=0)P=q,F=e.id.nesting[q];else for(var B=0;B<=e.depth.value;B++){P=B,F=e.id.nesting[B];var D=g(O,function(t){return c(e,t,F)}),I=g(O,N);if(D.length>=I.length&&I.length>1)break}var R=[e.color.value],L=s(e,O,R,!1);e.dev.value&&h.timeEnd("grouping data by color");var U=e.width.value,V=(n=e.legend.size)*L.length+e.ui.padding*(L.length+1);if(n instanceof Array){e.dev.value&&h.time("calculating legend size");for(T=n[1];T>=n[0];T--)if(U>=(V=T*L.length+e.ui.padding*(L.length+1))){n=T;break}e.dev.value&&h.timeEnd("calculating legend size")}else"number"!=typeof n&&!1!==n&&(n=30);if(U<V||1==L.length)t=!1;else{if(V-=2*e.ui.padding,e.dev.value&&h.time("sorting legend"),"function"==typeof e.legend.order.value)L=e.legend.order.value(L);else{var Y=e[e.legend.order.value].value,H=e.color.value;Y?"color"!==e.legend.order.value&&(H=[]):Y=e[e.color.value].value,r(L,Y,e.legend.order.sort.value,H,e,P)}var G;function X(t){t.attr("transform",function(t,r){return"translate("+(G+r*(e.ui.padding+n))+","+e.ui.padding+")"})}function W(t){t.attr("width",n).attr("height",n).attr("fill",function(t){d3.select(this.parentNode).select("text").remove();var r,i=g(t,e.icon.value,c,e,F),a=f(e,t,F);if(e.legend.icons.value&&1===i.length&&"string"==typeof i[0]){i=i[0];var o=y(i+"_"+a),s=e.icon.style.value,u=e.defs.selectAll("pattern#"+o).data([o]);a="knockout"==("string"==typeof s?e.icon.style.value:x(s)&&s[F]?s[F]:"default")?a:"none",u.select("rect").transition().duration(e.draw.timing).attr("fill",a).attr("width",n).attr("height",n),u.select("image").transition().duration(e.draw.timing).attr("width",n).attr("height",n);var h=u.enter().append("pattern").attr("id",o).attr("width",n).attr("height",n);return h.append("rect").attr("fill",a).attr("stroke","none").attr("width",n).attr("height",n),h.append("image").attr("xlink:href",i).attr("width",n).attr("height",n).each(function(e){0===i.indexOf("/")||i.indexOf(window.location.hostname)>=0?l(i,function(e){u.select("image").attr("xlink:href",e)}):u.select("image").attr("xlink:href",i)}),"url(#"+o+")"}if(e.legend.labels.value&&1===(r=e.legend.text.value?[c(e,t,e.legend.text.value,P)]:d(e,t,P)).length&&!(r[0]instanceof Array)&&r[0].length){var p=d3.select(this.parentNode).append("text"),m=e.legend.font.size;m instanceof Array||(m=[m]),p.attr("font-size",m[m.length-1]+"px").attr("font-weight",e.legend.font.weight).attr("font-family",e.legend.font.family.value).attr("stroke","none").attr("fill",v(a)).attr("x",0).attr("y",0).each(function(t){b().align("middle").container(d3.select(this)).height(n).padding(e.ui.padding).resize(m.length>1).size(m).text(r[0]).width(n).valign("middle").draw()}),p.select("tspan").empty()&&p.remove()}return a})}e.dev.value&&h.timeEnd("sorting legend"),e.dev.value&&h.time("drawing legend"),G="start"==e.legend.align?e.ui.padding:"end"==e.legend.align?U-e.ui.padding-V:U/2-V/2,e.g.legend.selectAll("g.d3po_scale").transition().duration(e.draw.timing).attr("opacity",0).remove();var Q={},Z=e.g.legend.selectAll("g.d3po_color").data(L,function(t){var n=f(e,t,F);return n in Q||(Q[n]=-1),Q[n]++,Q[n]+"_"+n});Z.enter().append("g").attr("class","d3po_color").attr("opacity",0).call(X).append("rect").attr("class","d3po_color").attr("stroke","none").call(W),Z.order().transition().duration(e.draw.timing).call(X).attr("opacity",1).selectAll("rect.d3po_color").call(W),Z.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),e.legend.tooltip.value&&Z.on(u.over,function(t,r){d3.select(this).style("cursor","pointer");var i,a,s,l=this.getBoundingClientRect(),f=l.left+n/2+m.x(),h=l.top+n/2+m.y()+5,p=c(e,t,F),v=e.id.nesting.indexOf(F);if(i=e.legend.title.value?c(e,t,e.legend.title.value,P):v>=0?d(e,t,v)[0]:e.format.value(c(e,t,e.color.value,F),{key:e.color.value,vars:e,data:t}),e.legend.filters.value&&!(p instanceof Array)){a="<div style='text-align:center;'>";var g=e.format.locale.value;a+="<div class='mute'>"+e.format.value(g.method.mute)+"</div>",a+="<div class='solo'>"+e.format.value(g.method.solo)+"</div>",a+="</div>",s=function(t){var n={border:"1px solid #ccc",display:"inline-block",margin:"1px 2px",padding:"3px 5px"};t.select(".mute").style(n).on(u.over,function(){d3.select(this).style("cursor","pointer")}).on(u.click,function(){var t=e.id.mute.value;e.history.states.push(function(){e.self.id({mute:t}).draw()}),e.self.id({mute:p}).draw()}),t.select(".solo").style(n).on(u.over,function(){d3.select(this).style("cursor","pointer")}).on(u.click,function(){var t=e.id.solo.value;e.history.states.push(function(){e.self.id({solo:t}).draw()}),e.self.id({solo:p}).draw()})}}o({data:t,html:a,js:s,depth:P,footer:!1,vars:e,x:f,y:h,mouseevents:this,title:i,titleOnly:!e.legend.data.value,offset:.4*n})}).on(u.out,function(t){p(e.type.value)}),e.dev.value&&h.timeEnd("drawing legend")}}else t=!1;if(e.legend.value&&key&&t){if(e.dev.value&&h.time("positioning legend"),n)var $=n+e.ui.padding;else{var J=e.g.legend.node().getBBox();$=J.height+J.y}0===e.margin.bottom&&(e.margin.bottom+=e.ui.padding),e.margin.bottom+=$,e.g.legend.transition().duration(e.draw.timing).attr("transform","translate(0,"+(e.height.value-e.margin.bottom)+")"),e.dev.value&&h.timeEnd("positioning legend")}else e.dev.value&&h.time("hiding legend"),e.g.legend.transition().duration(e.draw.timing).attr("transform","translate(0,"+e.height.value+")"),e.dev.value&&h.timeEnd("hiding legend")}},{"../../../array/sort.js":65,"../../../client/pointer.js":69,"../../../client/scroll.js":72,"../../../client/touch.js":74,"../../../color/text.js":81,"../../../core/console/print.js":83,"../../../core/data/nest.js":92,"../../../core/fetch/color.js":95,"../../../core/fetch/text.js":98,"../../../core/fetch/value.js":99,"../../../object/validate.js":207,"../../../string/strip.js":210,"../../../textwrap/textwrap.js":235,"../../../tooltip/remove.js":238,"../../../util/buckets.js":239,"../../../util/copy.js":242,"../../../util/dataurl.js":244,"../../../util/uniques.js":245,"../tooltip/create.js":281}],287:[function(e,t,n){e("../../../client/pointer.js");var r=e("../../../color/text.js");t.exports=function(e,t){t=e.messages.value?t:null;var n=e.messages.style.value||(t===e.error.internal?"large":e.messages.style.backup);if("large"===n)var i=e.messages,a="center";else{if(e.footer.value)i=e.footer;else if(e.title.value)i=e.title;else if(e.title.sub.value)i=e.title.sub;else if(e.title.total.value)i=e.title.total;else i=e.title.sub;a=i.position}i={color:i.font.color,"font-family":i.font.family.value,"font-weight":i.font.weight,"font-size":i.font.size+"px",padding:i.padding+"px"};var o=e.messages.background.value;o||"none"!==(o=e.background.value)&&"transparent"!==o||(o=r(i.color)),e.g.message=e.container.value.selectAll("div#d3po_message").data(["message"]),e.g.message.enter().append("div").attr("id","d3po_message").attr("opacity",0).append("div").attr("class","d3po_message_text").style("display","block"),e.g.message.select(".d3po_message_text").text(t||e.g.message.text());navigator.onLine;e.g.message.style("display",t?"inline-block":"none").call(function(t){t.style(i).style("position","absolute").style("background-color",o).style("text-align","center").style("left",function(){return"center"==a?"50%":"0px"}).style("width",function(){return"center"==a?"auto":e.width.value+"px"}).style("margin-left",function(){return"center"==a?-this.offsetWidth/2+"px":"0px"}).style("top",function(){return"center"==a?"50%":"top"==a?"0px":"auto"}).style("bottom",function(){return"bottom"==a?"0px":"auto"}).style("margin-top",function(){return"large"==n?-(this.offsetHeight||this.getBoundingClientRect().height)/2+"px":"0px"})}).style("opacity",t?1:0)}},{"../../../client/pointer.js":69,"../../../color/text.js":81}],288:[function(e,t,n){(function(){var n,r,i,a,o,s,l,u,c;n=e("../../../util/closest.js"),r=e("../../../client/css.js"),e("../../../font/sizes.js"),i=e("../../../client/pointer.js"),a=e("../../../color/mix.js"),s=e("../../../client/prefix.js"),l=e("../../../core/console/print.js"),u=e("../../../color/text.js"),c=e("../../../core/data/time.js"),o=!1,t.exports=function(e){var t,f,d,h,p,v,g,m,y,b,x,_,w,j,k,z,M,A,E,S,O,T,C,N,P,F,q,B,D,I,R,L,U,V,Y,H,G,X,W,Q,Z,$,J,K,ee,te,ne,re,ie,ae,oe;if(!e.timeline.value||e.error.internal&&e.data.missing||e.small||!e.data.time||!(e.data.time.values.length>1))return e.g.timeline.transition().duration(e.draw.timing).attr("transform","translate(0,"+e.height.value+")");if(e.dev.value&&l.time("drawing timeline"),H={"font-weight":e.ui.font.weight,"font-family":e.ui.font.family.value,"font-size":e.ui.font.size+"px","text-anchor":"middle"},oe=e.data.time.ticks.map(function(e){return new Date(e)}),Z=c(e,{values:oe,style:H}),te=Z.values.map(Number),Q=Z.format,e.time.solo.value.length)for(_=d3.extent(e.time.solo.value),x=w=0,z=_.length;w<z;x=++w)(m=_[x]).constructor!==Date&&(4===(m+="").length&&parseInt(m)+""===m&&(m+="/01/01"),m=new Date(m),_[x]=m);else _=d3.extent(oe);if(ae=oe.slice(),re=d3.max(Z.sizes.map(function(e){return e.height})),j=1+~~d3.max(Z.sizes.map(function(e){return e.width})),j+=2*e.ui.padding,J=e.timeline.height.value||re+2*e.ui.padding,ee=j*oe.length,q=J,U=J-2*e.ui.padding>=re,t=e.width.value-2*e.ui.padding,U&&e.timeline.play.value&&(t-=q+e.ui.padding),!U||te.length<oe.length||t<j*te.length){for(S=j,ee=(j=(t-j)/oe.length)*oe.length,K=1,X=1+~~(S/(ee/te.length));X<te.length-1&&(te.length-1)%X!=0;)X++;te=te.filter(function(e,t){return t%X==0})}else K=0,(A=new Date(oe[0]))["set"+(R=e.data.time.stepType)](A["get"+R]()+oe.length),ae.push(A);return D=new Date(_[0]),D=n(ae,D),y=new Date(_[1]),K||y["set"+e.data.time.stepType](y["get"+e.data.time.stepType]()+1),y=n(ae,y),ie=ae.map(Number),E=ie.indexOf(+D),M=ie.indexOf(+y),h=[D,y],I="start"===e.timeline.align?e.ui.padding:"end"===e.timeline.align?e.width.value-e.ui.padding-ee:e.width.value/2-ee/2,U&&e.timeline.play.value&&(I+=(q+e.ui.padding)/2),L=function(){return clearInterval(o),o=!1,T.call(C,"icon")},v=function(){var e,t,r;if(null!==d3.event.sourceEvent){if(o&&L(),h=d.extent(),(r=n(ae,h[0]))===(t=n(ae,h[1]))&&(E=ie.indexOf(+r),r<h[0]||0===E?t=ae[E+1]:r=ae[E-1]),E=ie.indexOf(+r),(M=ie.indexOf(+t))-E>=1)e=[r,t];else if(E+1<=oe.length)e=[r,ae[E+1]];else{for(e=[r],x=1;x<=1;)E+x<=oe.length?e.push(ae[E+x]):e.unshift(ae[E-(E+x-oe.length)]),x++;e=[e[0],e[e.length-1]]}return h=e,V.attr("fill",Y),d3.select(this).call(d.extent(e))}},B=function(){var t;return t=M-E==oe.length-K?[]:(t=ie.filter(function(e,t){return t>=E&&t<M+K})).map(function(e){return new Date(e)}),F(),e.self.time({solo:t}).draw()},g=function(){var t,r,i,a;if(null!==d3.event.sourceEvent&&(e.time.solo.value.length?(a=d3.extent(e.time.solo.value),i=ie.indexOf(+n(ae,a[0])),r=ie.indexOf(+n(ae,a[1])),t=i!==E||r!==M):t=M-E!=oe.length-K,t))return B()},P=function(t){return t.attr("width",q+1).attr("height",J+1).attr("fill",e.ui.color.primary.value).attr("stroke",e.ui.color.primary.value).attr("stroke-width",1).attr("x",I-q-1-e.ui.padding).attr("y",e.ui.padding)},(O=e.g.timeline.selectAll("rect.d3po_timeline_play").data(U&&e.timeline.play.value?[0]:[])).enter().append("rect").attr("class","d3po_timeline_play").attr("shape-rendering","crispEdges").attr("opacity",0).call(P),O.transition().duration(e.draw.timing).call(P),O.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),T=e.g.timeline.selectAll("text.d3po_timeline_playIcon").data(U&&e.timeline.play.value?[0]:[]),C=function(t,n){var i;return n=e.timeline.play[n],r("font-awesome")?(n=n.awesome,i="FontAwesome"):(n=n.fallback,i="inherit"),t.style("font-family",i).text(n)},N=function(t){var n;return n=J/2+e.ui.padding+1,t.attr("fill",u(e.ui.color.primary.value)).attr("stroke","none").attr(H).attr("x",I-(q-1)/2-e.ui.padding).attr("y",n).attr("dy","0.5ex").call(C,o?"pause":"icon")},T.enter().append("text").attr("class","d3po_timeline_playIcon").call(N).style("pointer-events","none").attr("opacity",0),T.call(N).transition().duration(e.draw.timing).attr("opacity",1),T.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),(F=function(){return M-E==oe.length-K?(O.on(i.hover,null).on(i.click,null).transition().duration(e.draw.timing).attr("opacity",.3),T.transition().duration(e.draw.timing).attr("opacity",.3)):(O.on(i.over,function(){return d3.select(this).style("cursor","pointer")}).on(i.out,function(){return d3.select(this).style("cursor","auto")}).on(i.click,function(){return o?L():(T.call(C,"pause"),M===oe.length?(M-=E,E=0):(E++,M++),B(),o=setInterval(function(){return M===oe.length-K?L():(E++,M++,B())},e.timeline.play.timing.value))}).transition().duration(e.draw.timing).attr("opacity",1),T.transition().duration(e.draw.timing).attr("opacity",1))})(),Y=function(t){var n,r,i;return r=K?t<=h[1]:t<h[1],t>=h[0]&&r?(i=1,n=u(e.ui.color.secondary.value)):(i=.5,n=u(e.ui.color.primary.value)),K&&e.background.value&&"none"!==e.background.value&&(n=d3.rgb(u(e.background.value))),"rgba("+(n=d3.rgb(n)).r+","+n.g+","+n.b+","+i+")"},(f=e.g.timeline.selectAll("rect.d3po_timeline_background").data(["background"])).enter().append("rect").attr("class","d3po_timeline_background").attr("shape-rendering","crispEdges").attr("width",ee+2).attr("height",J+2).attr("fill",e.ui.color.primary.value).attr("x",I-1).attr("y",e.ui.padding),f.transition().duration(e.draw.timing).attr("width",ee+2).attr("height",J+2).attr("fill",e.ui.color.primary.value).attr("x",I-1).attr("y",e.ui.padding),(W=e.g.timeline.selectAll("g#ticks").data(["ticks"])).enter().append("g").attr("id","ticks").attr("transform","translate("+e.width.value/2+","+e.ui.padding+")"),(p=e.g.timeline.selectAll("g#brush").data(["brush"])).enter().append("g").attr("id","brush"),(k=e.g.timeline.selectAll("g#labels").data(["labels"])).enter().append("g").attr("id","labels"),(V=k.selectAll("text").data(oe,function(e,t){return t})).enter().append("text").attr("stroke","none").attr("y",0).attr("dy","0.5ex").attr("x",0),ne=d3.scaleTime().domain(d3.extent(ae)).rangeRound([0,ee]),V.order().attr(H).text(function(e,t){return te.indexOf(+e)>=0?Q(e):""}).attr("opacity",function(t,n){return e.data.time.dataSteps.indexOf(n)>=0?1:.4}).attr("fill",Y).attr("transform",function(t,n){var r,i;return r=I+ne(t),K||(r+=j/2),i=J/2+e.ui.padding+1,K&&(i+=J/2+re),"translate("+Math.round(r)+","+Math.round(i)+")"}),V.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),d=d3.svg.brush().x(ne).extent(h).on("brush",v).on("brushend",g),G=e.axes.discrete&&e[e.axes.discrete].value===e.time.value?e[e.axes.discrete].ticks.color:e.x.ticks.color,W.attr("transform","translate("+I+","+(e.ui.padding+1)+")").transition().duration(e.draw.timing).call(d3.axisTop().scale(ne).ticks(function(){return ae}).tickFormat("").tickSize(-J).tickPadding(0)).selectAll("line").attr("stroke-width",1).attr("shape-rendering","crispEdges").attr("stroke",function(t){return te.indexOf(+t)>=0?G:a(G,e.background.value,.4,1)}),W.selectAll("path").attr("fill","none"),p.attr("transform","translate("+I+","+(e.ui.padding+1)+")").attr("opacity",1).call(d),V.attr("pointer-events","none"),p.selectAll("rect.background").attr("fill","none").style("visibility","visible").attr("height",J).attr("shape-rendering","crispEdges").on(i.move,function(){var t;return t=e.timeline.hover.value,["grab","grabbing"].indexOf(t)>=0&&(t=s()+t),d3.select(this).style("cursor",t)}),p.selectAll("rect.extent").attr("opacity",.75).attr("height",J).attr("fill",e.ui.color.secondary.value).attr("shape-rendering","crispEdges").on(i.move,function(){var t;return t=e.timeline.hover.value,["grab","grabbing"].indexOf(t)>=0&&(t=s()+t),d3.select(this).style("cursor",t)}),e.timeline.handles.value?((b=p.selectAll("g.resize").selectAll("rect.d3po_handle").data(["d3po_handle"])).enter().insert("rect","rect").attr("class","d3po_handle"),b.attr("fill",e.timeline.handles.color).attr("transform",function(t){return"translate("+("resize e"===this.parentNode.className.baseVal?-e.timeline.handles.size:0)+",0)"}).attr("width",e.timeline.handles.size).style("visibility","visible").attr("shape-rendering","crispEdges").attr("opacity",e.timeline.handles.opacity),p.selectAll("g.resize").selectAll("rect").attr("height",J)):p.selectAll("g.resize").remove(),$=e.g.timeline.node().getBBox(),0===e.margin.bottom&&(e.margin.bottom+=e.ui.padding),e.margin.bottom+=$.height+$.y,e.g.timeline.transition().duration(e.draw.timing).attr("transform","translate(0,"+Math.round(e.height.value-e.margin.bottom-e.ui.padding/2)+")"),e.margin.bottom+=e.ui.padding,e.dev.value?l.time("drawing timeline"):void 0}}).call(this)},{"../../../client/css.js":67,"../../../client/pointer.js":69,"../../../client/prefix.js":70,"../../../color/mix.js":77,"../../../color/text.js":81,"../../../core/console/print.js":83,"../../../core/data/time.js":94,"../../../font/sizes.js":136,"../../../util/closest.js":241}],289:[function(e,t,n){var r=e("../d3functions/aggs.js"),i=e("../../../client/pointer.js"),a=e("../../../core/fetch/value.js"),o=e("../../../core/console/print.js"),s=e("../../../client/rtl.js"),l=e("../../../textwrap/textwrap.js");t.exports=function(e){var t=e.size.value?e.size.value:"number"===e.color.type&&e.color.value;if(e.data.viz&&e.title.total.value&&!e.small)if(t){e.dev.value&&o.time("calculating total value");var n=e.data.pool;e.focus.value.length&&(n=e.data.viz.filter(function(t){return t[e.id.value]==e.focus.value[0]}));var u=e.aggs.value[t]||"sum";if(u.constructor===Function?p=u(n):(n=n.reduce(function(n,r){var i=a(e,r,t);return i instanceof Array?n=n.concat(i):n.push(i),n},[]),p=r.fromString(u)(n)),0!==p&&null!=p||(p=!1),"number"==typeof p){var c="";if(e.data.mute.length||e.data.solo.length||e.focus.value.length){var f=d3.sum(e.data.value,function(n){if(e.time.solo.value.length>0)var r=e.time.solo.value.indexOf(a(e,n,e.time.value))>=0;else if(e.time.mute.value.length>0)r=e.time.solo.value.indexOf(a(e,n,e.time.value))<0;else r=!0;if(r)return a(e,n,t)});if(f>p){c=p/f*100;var d=e.format.value(f,{key:e.size.value,vars:e});c=" ("+e.format.value(c,{key:"share",vars:e})+" "+e.format.locale.value.dev.of+" "+d+")"}}p=e.format.value(p,{key:e.size.value,vars:e});var h=e.title.total.value;p=(h.prefix||e.format.value(e.format.locale.value.ui.total)+": ")+p,h.suffix&&(p+=h.suffix),p+=c}e.dev.value&&o.timeEnd("calculating total value")}else p=!1;else var p=!1;var v=[];if(e.footer.value&&v.push({link:e.footer.link,style:e.footer,type:"footer",value:e.footer.value}),!e.small){var g;if(e.title.value)"function"==typeof(g=e.title.value)&&(g=g(e.self)),v.push({link:e.title.link,style:e.title,type:"title",value:g});if(e.title.sub.value)"function"==typeof(g=e.title.sub.value)&&(g=g(e.self)),v.push({link:e.title.sub.link,style:e.title.sub,type:"sub",value:g});e.title.total.value&&p&&v.push({link:e.title.total.link,style:e.title.total,type:"total",value:p})}function m(t){t.attr("font-size",function(e){return e.style.font.size}).attr("fill",function(t){return t.link?e.links.font.color:t.style.font.color}).attr("font-family",function(t){return t.link?e.links.font.family.value:t.style.font.family.value}).attr("font-weight",function(t){return t.link?e.links.font.weight:t.style.font.weight}).style("text-decoration",function(t){return t.link?e.links.font.decoration.value:t.style.font.decoration.value}).style("text-transform",function(t){return t.link?e.links.font.transform.value:t.style.font.transform.value})}e.dev.value&&o.time("drawing titles");var y=e.svg.selectAll("g.d3po_title").data(v,function(e){return e.type}),b=e.title.width||e.width.value-e.margin.left-e.margin.right;function x(e){var t=e.style.font.align;return"center"==t?"middle":"left"==t&&!s||"right"==t&&s?"start":"left"==t&&s||"right"==t&&!s?"end":t}y.enter().append("g").attr("class",function(e){return"d3po_title "+e.type}).attr("opacity",0).append("text").attr("stroke","none").call(m),y.each(function(t){var n=d3.select(this).select("text").call(m),r=x(t);l().align(r).container(n).height(e.height.value/2).size(!1).text(t.value).width(b).draw(),t.y=e.margin[t.style.position],e.margin[t.style.position]+=this.getBBox().height+2*t.style.padding}).on(i.over,function(t){t.link&&d3.select(this).transition().duration(e.timing.mouseevents).style("cursor","pointer").select("text").attr("fill",e.links.hover.color).attr("font-family",e.links.hover.family.value).attr("font-weight",e.links.hover.weight).style("text-decoration",e.links.hover.decoration.value).style("text-transform",e.links.hover.transform.value)}).on(i.out,function(t){t.link&&d3.select(this).transition().duration(e.timing.mouseevents).style("cursor","auto").select("text").call(m)}).on(i.click,function(e){if(e.link){var t="/"!=e.link.charAt(0)?"_blank":"_self";window.open(e.link,t)}}).attr("opacity",1).attr("transform",function(t){var n=t.style.position,r="top"==n?0+t.y:e.height.value-t.y;"bottom"==n?r-=this.getBBox().height+t.style.padding:r+=t.style.padding;var i=x(t);if("start"===i)var a=e.margin.left+e.title.padding;else{d3.select(this).select("text").node().getBBox().width;a="middle"===i?e.width.value/2-b/2:e.width.value-b-e.margin.right-e.title.padding}return"translate("+a+","+r+")"}),y.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),e.margin.top>0&&(e.margin.top+=e.title.padding),e.margin.bottom>0&&(e.margin.bottom+=e.title.padding);var _=e.title.height;_&&e.margin[e.title.position]<_&&(e.margin[e.title.position]=_),e.dev.value&&o.timeEnd("drawing titles")}},{"../../../client/pointer.js":69,"../../../client/rtl.js":71,"../../../core/console/print.js":83,"../../../core/fetch/value.js":99,"../../../textwrap/textwrap.js":235,"../d3functions/aggs.js":247}],290:[function(e,t,n){(function(){var n,r;n=e("./labels.js"),r=e("./transform.js"),t.exports=function(e,t,i){var a,o,s,l,u,c,f,d;return t||(t=e.zoom.bounds),"number"!=typeof i&&(i=e.timing.transitions),e.zoom.size={height:t[1][1]-t[0][1],width:t[1][0]-t[0][0]},d=e.types[e.type.value],a="auto"===(s=e.coords.fit.value)||d.requirements.indexOf("coords")<0?d3.max([e.zoom.size.width/e.width.viz,e.zoom.size.height/e.height.viz]):e.zoom.size[s]/e["app_"+s],c=((u=d3.min([e.width.viz,e.height.viz]))-(d.zoom?2*e.coords.padding:0))/u/a,(o=e.zoom.behavior.scaleExtent())[0]!==o[1]&&t!==e.zoom.bounds||e.zoom.behavior.scaleExtent([c,16*c]),c>(l=e.zoom.behavior.scaleExtent()[1])&&(c=l),e.zoom.scale=c,f=[e.width.viz/2-e.zoom.size.width*c/2-t[0][0]*c,e.height.viz/2-e.zoom.size.height*c/2-t[0][1]*c],e.zoom.translate=f,e.zoom.behavior.translate(f).scale(c),e.zoom.size={height:e.zoom.bounds[1][1]-e.zoom.bounds[0][1],width:e.zoom.bounds[1][0]-e.zoom.bounds[0][0]},e.zoom.reset=!1,(e.labels.value||e.labels.changed)&&n(e),r(e,i)}}).call(this)},{"./labels.js":292,"./transform.js":295}],291:[function(e,t,n){(function(){t.exports=function(e,t){var n,r,i;return r=t.id.nesting.length-1,n=t.depth.value,i=t.id.nesting[n+1],!1===t.types[t.type.value].nesting?0:(e.d3po.merged||i in e&&n<r)&&(!e||i in e)?1:!(n===r&&n>0||e&&i&&!(i in e))||!t.small&&t.tooltip.html.value?0:-1}}).call(this)},{}],292:[function(e,t,n){(function(){var n;n=e("../../../core/console/print.js"),t.exports=function(e){var t,r;if(e.dev.value&&n.time("determining label visibility"),r=e.zoom.behavior.scaleExtent(),t=function(t){return t.attr("opacity",function(t){var n;return t||(t={}),n=parseFloat(d3.select(this).attr("font-size"),10),t.visible=n*(e.zoom.scale/r[1])>=2,t.visible?1:0})},e.draw.timing?e.g.viz.selectAll("text.d3po_label").transition().duration(e.draw.timing).call(t):e.g.viz.selectAll("text.d3po_label").call(t),e.dev.value)return n.timeEnd("determining label visibility")}}).call(this)},{"../../../core/console/print.js":83}],293:[function(e,t,n){(function(){var n,r,i;n=e("./labels.js"),r=e("../../../tooltip/remove.js"),i=e("./transform.js"),t.exports=function(e){var t,a,o,s,l,u,c,f,d,h,p;return a=d3.event.sourceEvent?d3.event.sourceEvent.type:null,l=d3.event.translate,s=d3.event.scale,o=e.zoom.bounds,c=(f=(e.width.viz-e.zoom.size.width*s)/2)>0?f:0,u=f>0?e.width.viz-f:e.width.viz,h=(p=(e.height.viz-e.zoom.size.height*s)/2)>0?p:0,d=p>0?e.height.viz-p:e.height.viz,l[0]+o[0][0]*s>c?l[0]=-o[0][0]*s+c:l[0]+o[1][0]*s<u&&(l[0]=u-o[1][0]*s),l[1]+o[0][1]*s>h?l[1]=-o[0][1]*s+h:l[1]+o[1][1]*s<d&&(l[1]=d-o[1][1]*s),e.zoom.behavior.translate(l).scale(s),e.zoom.translate=l,e.zoom.scale=s,"wheel"===a&&r(e.type.value),(e.labels.value||e.labels.changed)&&("wheel"===a?(t=e.draw.timing?100:250,clearTimeout(e.zoom.wheel),e.zoom.wheel=setTimeout(function(){return n(e)},t)):n(e)),i(e,"dblclick"===a?e.timing.transitions:0)}}).call(this)},{"../../../tooltip/remove.js":238,"./labels.js":292,"./transform.js":295}],294:[function(e,t,n){(function(){t.exports=function(e,t){var n,r,i;r=e.zoom,t||(t=d3.event),i=r.scale>r.behavior.scaleExtent()[0],n=e.types[e.type.value].zoom&&r.value&&r.scroll.value,t.touches&&t.touches.length>1&&n||i||t.stopPropagation()}}).call(this)},{}],295:[function(e,t,n){(function(){t.exports=function(e,t){var n;return"number"!=typeof t&&(t=e.timing.transitions),n="translate("+e.zoom.translate+")",n+="scale("+e.zoom.scale+")",t?e.g.viz.transition().duration(t).attr("transform",n):e.g.viz.attr("transform",n)}}).call(this)},{}],296:[function(e,t,n){(function(){var n;n=e("../../core/methods/filter.js"),t.exports={accepted:[!1,Function,Object,String],mute:n(!0),solo:n(!0),spotlight:{accepted:[Boolean],value:!1},value:!1}}).call(this)},{"../../core/methods/filter.js":115}],297:[function(e,t,n){(function(){t.exports={accepted:[Object],objectAccess:!1,value:{}}}).call(this)},{}],298:[function(e,t,n){(function(){var n;n=e("../../core/methods/process/data.js"),t.exports={accepted:[!1,Array,Object,String],delimiter:{accepted:String,value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},keys:{},process:n,value:!1}}).call(this)},{"../../core/methods/process/data.js":121}],299:[function(e,t,n){(function(){var n,r;n=e("../../core/methods/process/margin.js"),r=e("../../core/methods/rendering.js"),t.exports={background:{color:"#fafafa",rendering:r(),stroke:{color:"#ccc",width:1}},margin:{accepted:[Number,Object,String],process:function(e){var t;return void 0===e&&(e=this.value),t=e,n(e,this),t},value:10},mirror:{accepted:[Boolean],value:!1},ticks:{accepted:[Boolean],value:!0}}}).call(this)},{"../../core/methods/process/margin.js":124,"../../core/methods/rendering.js":126}],300:[function(e,t,n){(function(){t.exports={accepted:[String],value:"#ffffff"}}).call(this)},{}],301:[function(e,t,n){(function(){t.exports={accepted:[Function,String],value:!1}}).call(this)},{}],302:[function(e,t,n){(function(){var n,r;n=e("../../core/methods/filter.js"),r=e("../../color/scale.js"),colorScales=e("../helpers/d3functions/colorscales.js"),t.exports={accepted:[!1,Array,Function,Object,String],domain:{accepted:[!1,Array],value:!1},focus:"#444444",heatmap:["#282F6B","#419391","#AFD5E8","#EACE3F","#B35C1E","#B22200"],missing:"#eeeeee",mute:n(!0),primary:"#d74b03",range:["#B22200","#FFEE8D","#759143"],scale:{accepted:[Array,Function,"d3po"].concat(colorScales.allowedStrings),process:function(e){return e instanceof Array?d3.scaleOrdinal().range(e):"d3po"===e?r:"string"==typeof e?colorScales.fromString(e)():e},value:"d3po"},solo:n(!0),secondary:"#e5b3bb",value:!1}}).call(this)},{"../../color/scale.js":79,"../../core/methods/filter.js":115,"../helpers/d3functions/colorscales.js":248}],303:[function(e,t,n){t.exports={accepted:[Array,Function,String],index:{accepted:[Boolean],value:!0},process:function(e,t){return"string"==typeof e&&(e=[e]),e},value:!1}},{}],304:[function(e,t,n){arguments[4][142][0].apply(n,arguments)},{dup:142}],305:[function(e,t,n){(function(){var n;n=e("../../util/d3selection.js"),t.exports={accepted:[!1,Array,Object,String],id:"default",process:function(e,t){return!1!==e&&("default"===t.container.id&&t.self.container({id:"d3po_"+ +new Date}),n(e)?e.append("div"):e instanceof Array?d3.select(e[0][0]).append("div"):(this.selector=e,d3.select(e).append("div")))},value:!1}}).call(this)},{"../../util/d3selection.js":243}],306:[function(e,t,n){(function(){var n,r;n=e("../../core/methods/filter.js"),r=e("../../core/methods/process/data.js"),projections=e("../helpers/d3functions/projections.js"),t.exports={accepted:[!1,Array,Function,Object,String],center:[0,0],filetype:{accepted:["json"],value:"json"},fit:{accepted:["auto","height","width"],value:"auto"},key:!1,mute:n(!1),padding:20,process:r,projection:{accepted:projections.allowedStrings.concat([Function]),value:projections.defaultString},simplify:{accepted:[Boolean],value:!0},solo:n(!1),threshold:{accepted:[Number],value:.9},value:!1}}).call(this)},{"../../core/methods/filter.js":115,"../../core/methods/process/data.js":121,"../helpers/d3functions/projections.js":251}],307:[function(e,t,n){(function(){var n,r,i;n=e("../../core/fetch/value.js"),r=e("../../client/ie.js"),i=e("../../string/strip.js"),t.exports={accepted:[void 0,!0,Array,String],chainable:!1,data:[],process:function(e,t){var a,o,s,l,u,c,f,d,h,p,v,g,m,y,b,x,_,w,j,k,z,M,A,E,S,O,T,C,N,P,F,q,B,D,I;if(void 0===t.returned)return[];if((e=e||t.cols.value)instanceof Array?l=e:"string"==typeof e&&(l=[e]),c=[],B=[],t.title.value?("function"==typeof(q=t.title.value)&&(q=q(t.self)),250,q=(q=i(q)).substr(0,250)):q="d3po Visualization Data",!0===e)for(l=d3.keys(t.data.keys),c.push(l),p=0,m=(C=t.data.value).length;p<m;p++){for(f=C[p],F=[],v=0,y=l.length;v<y;v++)I=f[o=l[v]],"string"===t.data.keys[o]&&(I='"'+I+'"'),F.push(I);c.push(F)}else{for(l||(l=[t.id.value],t.time.value&&l.push(t.time.value),t.size.value&&l.push(t.size.value),t.text.value&&l.push(t.text.value)),g=0,b=l.length;g<b;g++)o=l[g],B.push(t.format.value(o));for(c.push(B),M=0,x=(N=t.returned.nodes).length;M<x;M++)if(null!=(E=N[M]).values&&E.values instanceof Array)for(A=0,_=(P=E.values).length;A<_;A++){for(I=P[A],F=[],S=0,w=l.length;S<w;S++)s=l[S],"string"==typeof(I=n(t,I,s))&&(I='"'+I+'"'),F.push(I);c.push(F)}else{for(F=[],O=0,j=l.length;O<j;O++)s=l[O],F.push(n(t,E,s));c.push(F)}}for(u="",h=T=0,k=c.length;T<k;h=++T)d=(o=c[h]).join(","),u+=h<c.length?d+"\n":d;return a=new Blob([u],{type:"text/csv;charset=utf-8;"}),r?navigator.msSaveBlob(a,q+".csv"):(z=document.createElement("a"),D=URL.createObjectURL(a),z.setAttribute("href",D),z.setAttribute("download",q+".csv"),z.style="visibility:hidden",document.body.appendChild(z),z.click(),document.body.removeChild(z)),this.data=c,l},value:void 0}}).call(this)},{"../../client/ie.js":68,"../../core/fetch/value.js":99,"../../string/strip.js":210}],308:[function(e,t,n){(function(){var n;n=e("../../core/methods/process/data.js"),t.exports={accepted:[!1,Array,Function,String],cache:{},delimiter:{accepted:[String],value:"|"},donut:{size:.35},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},filters:[],keys:{},mute:[],large:400,opacity:.9,padding:{accepted:[Number],value:1},process:function(e,t){return n(e,t,this)},solo:[],stroke:{width:1},value:!1}}).call(this)},{"../../core/methods/process/data.js":121}],309:[function(e,t,n){(function(){t.exports={accepted:[Function,Number],value:0}}).call(this)},{}],310:[function(e,t,n){(function(){t.exports={accepted:[!1,Function,Object],value:!1}}).call(this)},{}],311:[function(e,t,n){arguments[4][146][0].apply(n,arguments)},{dup:146}],312:[function(e,t,n){var r=e("../../core/console/print.js"),i=e("../../string/format.js");t.exports={accepted:[void 0,Function],first:!0,frozen:!1,process:function(e,t){if(!1===this.initialized)return this.initialized=!0,e;if(void 0===e&&"function"==typeof this.value&&(e=this.value),!1===t.container.value){var n=t.format.locale.value.dev.setContainer;r.warning(n,"container")}else if(t.container.value.empty()){n=t.format.locale.value.dev.noContainer;var a=t.container.selector||"";r.warning(i(n,'"'+a+'"'),"container")}else t.dev.value&&r.time("total draw time"),t.container.value.call(t.self);if("function"==typeof e&&t.history.chain.length){var o={};t.history.chain.forEach(function(e){var t=e.method;delete e.method,o[t]=e}),e(o),t.history.chain=[]}return e},update:!0,value:void 0}},{"../../core/console/print.js":83,"../../string/format.js":208}],313:[function(e,t,n){var r=e("../../core/methods/process/data.js");t.exports={accepted:[!1,Array,Function,String],arrows:{accepted:[Boolean,Number],direction:{accepted:["source","target"],value:"target"},value:!1},color:"#d0d0d0",connections:function(e,t,n){var r=this;if(!r.value)return[];if(!t)t="id";var i=r.restricted||r.value,a=[];if(!e)return i;var o=i.filter(function(i){var o=!1;return i[r.source][t]==e?(o=!0,n&&a.push(i[r.target])):i[r.target][t]==e&&(o=!0,n&&a.push(i[r.source])),o});return n?a:o},delimiter:{accepted:[String],value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},interpolate:{accepted:["basis","cardinal","linear","monotone","step"],value:"basis"},label:!1,large:100,limit:{accepted:[!1,Function,Number],value:!1},opacity:{accepted:[Function,Number,String],min:{accepted:[Number],value:.25},scale:{accepted:[Function],value:d3.scaleLinear()},value:1},process:r,size:{accepted:[!1,Number,String],min:1,scale:.5,value:!1},source:"source",strength:{accepted:[!1,Function,Number,String],value:!1},target:"target",value:!1}},{"../../core/methods/process/data.js":121}],314:[function(e,t,n){(function(){t.exports={accepted:[Boolean,String],value:!1}}).call(this)},{}],315:[function(e,t,n){(function(){t.exports={accepted:[!1,Array,Function,Number,String],process:function(e){return!1===e?[]:e instanceof Array?e:[e]},tooltip:{accepted:[Boolean],value:!0},value:[]}}).call(this)},{}],316:[function(e,t,n){(function(){var n,r,i,a;n=e("../../core/methods/font/align.js"),r=e("../../core/methods/font/decoration.js"),i=e("../../core/methods/font/family.js"),a=e("../../core/methods/font/transform.js"),t.exports={align:n(),color:"#444444",decoration:r(),family:i(),secondary:{align:n(),color:"#444444",decoration:r(),family:i(),size:12,spacing:0,transform:a(),weight:400},size:12,spacing:0,transform:a(),weight:400}}).call(this)},{"../../core/methods/font/align.js":116,"../../core/methods/font/decoration.js":117,"../../core/methods/font/family.js":118,"../../core/methods/font/transform.js":120}],317:[function(e,t,n){(function(){var n,r,i;r=e("../../core/methods/font/family.js"),n=e("../../core/methods/font/decoration.js"),i=e("../../core/methods/font/transform.js"),t.exports={accepted:[!1,Number,String],font:{align:"center",color:"#444",decoration:n(),family:r(),size:11,transform:i(),weight:400},link:!1,padding:0,position:"bottom",value:!1}}).call(this)},{"../../core/methods/font/decoration.js":117,"../../core/methods/font/family.js":118,"../../core/methods/font/transform.js":120}],318:[function(e,t,n){(function(){var n,r,i,a;n=e("../../number/format.js"),r=e("../../core/locale/locale.js"),i=e("../../object/merge.js"),a=e("../../string/title.js"),t.exports={accepted:[Function,String],affixes:{accepted:[Object],objectAccess:!1,value:{}},locale:{accepted:function(){return d3.keys(r)},process:function(e){var t;return"en_US",t=r.en_US,"en_US"!==e&&(t=i(t,r[e])),this.language=e,t},value:"en_US"},number:{accepted:[!1,Function],value:!1},process:function(e,t){if("string"==typeof e)t.self.format({locale:e});else if("function"==typeof e)return e;return this.value},text:{accepted:[!1,Function],value:!1},value:function(e,t){var r,i;return t||(t={}),t.locale||(t.locale=this.locale.value),(i=t.vars||{}).time&&i.time.value&&t.key===i.time.value?(r=e.constructor===Date?e:new Date(e),i.data.time.format(r)):"number"==typeof e?(this.number.value||n)(e,t):"string"==typeof e?(this.text.value||a)(e,t):JSON.stringify(e)}}}).call(this)},{"../../core/locale/locale.js":113,"../../number/format.js":205,"../../object/merge.js":206,"../../string/title.js":211}],319:[function(e,t,n){(function(){t.exports={accepted:[!1,Number],max:600,secondary:!1,small:200,value:!1}}).call(this)},{}],320:[function(e,t,n){(function(){var n,r,i,a,o,s,l,u;n=e("../../../core/methods/font/align.js"),r=e("../../../core/methods/font/decoration.js"),i=e("../../../core/methods/font/family.js"),a=e("../../../core/methods/filter.js"),s=e("../../../core/methods/font/position.js"),l=e("../../../core/methods/rendering.js"),u=e("../../../core/methods/font/transform.js"),o={x:"bottom",x2:"top",y:"left",y2:"right"},t.exports=function(e){return{accepted:[Array,Boolean,Function,Object,String],affixes:{accepted:[Boolean],separator:{accepted:[Boolean,Array],value:!0},value:!1},axis:{accepted:[Boolean],color:"#444",font:{color:!1,decoration:r(!1),family:i(""),size:!1,spacing:0,transform:u(!1),weight:!1},rendering:l(),value:!0},dataFilter:!0,domain:{accepted:[!1,Array],value:!1},grid:{accepted:[Boolean],color:"#ccc",rendering:l(),value:!0},label:{accepted:[Boolean,String],fetch:function(t){return!0===this.value?t.format.value(t[e].value,{key:e,vars:t}):this.value},font:{color:"#444",decoration:r(),family:i(),size:12,spacing:0,transform:u(),weight:400},padding:3,value:!0},lines:{accept:[!1,Array,Number,Object],dasharray:{accepted:[Array,String],process:function(e){return e instanceof Array&&(e=(e=e.filter(function(e){return!isNaN(e)})).length?e.join(", "):"none"),e},value:"10, 10"},color:"#888",font:{align:n("right"),color:"#444",background:{accepted:[Boolean],value:!0},decoration:r(),family:i(),padding:{accepted:[Number],value:10},position:s("middle"),size:12,transform:u(),weight:400},process:Array,rendering:l(),width:1,value:[]},mouse:{accept:[Boolean],dasharray:{accepted:[Array,String],process:function(e){return e instanceof Array&&(e=(e=e.filter(function(e){return!isNaN(e)})).length?e.join(", "):"none"),e},value:"none"},rendering:l(),width:2,value:!0},mute:a(!0),orient:{accepted:["top","right","bottom","left"],value:o[e]},padding:{accepted:[Number],value:.1},persist:{position:{accepted:[Boolean],value:!1},size:{accepted:[Boolean],value:!0}},range:{accepted:[!1,Array],value:!1},scale:{accepted:["linear","log","discrete","share"],process:function(t,n){var r,i,a,o;for(r=0,i=(a=["log","discrete","share"]).length;r<i;r++)(o=a[r])===t?n.axes[o]=e:n.axes[o]===e&&(n.axes[o]=!1);return"discrete"===t&&(n.axes.opposite=0===e.indexOf("x")?"y":"x"),t},value:"linear"},solo:a(!0),stacked:{accepted:[Boolean],process:function(t,n){return t||n.axes.stacked!==e?t&&(n.axes.stacked=e):n.axes.stacked=!1,t},value:!1},ticks:{accepted:[!1,Array],color:"#ccc",font:{color:"#666",decoration:r(),family:i(),size:10,spacing:0,transform:u(),weight:400},labels:{accepted:[Boolean,Array],value:!0},rendering:l(),size:10,width:1,value:!1},value:!1,zerofill:{accepted:[Boolean],value:!1}}}}).call(this)},{"../../../core/methods/filter.js":115,"../../../core/methods/font/align.js":116,"../../../core/methods/font/decoration.js":117,"../../../core/methods/font/family.js":118,"../../../core/methods/font/position.js":119,"../../../core/methods/font/transform.js":120,"../../../core/methods/rendering.js":126}],321:[function(e,t,n){(function(){t.exports={accepted:[Boolean],back:function(){if(this.states.length)return this.states.pop()()},chain:[],reset:function(){var e;for(e=[];this.states.length;)e.push(this.states.pop()());return e},states:[],value:!0}}).call(this)},{}],322:[function(e,t,n){(function(){var n;n=e("../../core/methods/process/icon.js"),t.exports={accepted:[!1,Array,Function,Object,String],back:{accepted:[!1,String],fallback:"&#x276e;",opacity:1,process:n,rotate:0,value:"fa-angle-left"},style:{accepted:[Object,String],value:"default"},value:!1}}).call(this)},{"../../core/methods/process/icon.js":123}],323:[function(e,t,n){(function(){var n;n=e("../../core/methods/filter.js"),t.exports={accepted:[Array,String],dataFilter:!0,grouping:{accepted:[Boolean],value:!0},mute:n(!0),nesting:["id"],solo:n(!0),value:"id"}}).call(this)},{"../../core/methods/filter.js":115}],324:[function(e,t,n){(function(){var n,r,i;n=e("../../core/methods/font/decoration.js"),r=e("../../core/methods/font/family.js"),i=e("../../core/methods/font/transform.js"),t.exports={accepted:[Boolean],align:{accepted:["start","middle","end","left","center","right"],process:function(e){var t;return(t=["left","center","right"].indexOf(e))>=0&&(e=this.accepted[t]),e},value:"middle"},color:{accepted:[!1,String],value:!1},font:{decoration:n(),family:r(),size:11,transform:i(),weight:400},padding:7,resize:{accepted:[Boolean],value:!0},text:{accepted:[!1,Function,String],value:!1},segments:2,valign:{accepted:[!1,"top","middle","bottom"],value:"middle"},value:!0}}).call(this)},{"../../core/methods/font/decoration.js":117,"../../core/methods/font/family.js":118,"../../core/methods/font/transform.js":120}],325:[function(e,t,n){(function(){var n;n=e("../../core/methods/font/family.js"),t.exports={accepted:[Boolean],align:"middle",data:{accepted:[Boolean],value:!0},filters:{accepted:[Boolean],value:!1},font:{align:"middle",color:"#444444",family:n(),size:[8,14],weight:400},gradient:{height:10},icons:{accepted:[Boolean],value:!0},labels:{accepted:[Boolean],value:!0},order:{accepted:["color","id","size","text",Function],sort:{accepted:["asc","desc"],value:"asc"},value:"color"},size:[8,30],tooltip:{accepted:[Boolean],value:!0},text:{accepted:[!1,Function,String],value:!1},title:{accepted:[!1,Function,String],value:!1},value:!0}}).call(this)},{"../../core/methods/font/family.js":118}],326:[function(e,t,n){(function(){var n,r,i;n=e("../../core/methods/font/decoration.js"),r=e("../../core/methods/font/family.js"),i=e("../../core/methods/font/transform.js"),t.exports={font:{color:"#444444",decoration:n(),family:r(),transform:i(),weight:400},hover:{color:"#444444",decoration:n(),family:r(),transform:i(),weight:400}}}).call(this)},{"../../core/methods/font/decoration.js":117,"../../core/methods/font/family.js":118,"../../core/methods/font/transform.js":120}],327:[function(e,t,n){arguments[4][157][0].apply(n,arguments)},{"../../core/methods/process/margin.js":124,dup:157}],328:[function(e,t,n){(function(){var n,r,i;n=e("../../core/methods/font/decoration.js"),r=e("../../core/methods/font/family.js"),i=e("../../core/methods/font/transform.js"),t.exports={accepted:[Boolean,String],background:{accepted:[!1,String],value:!1},font:{color:"#444",decoration:n(),family:r(),size:16,transform:i(),weight:400},padding:5,style:{accepted:[!1,"small","large"],value:!1},value:!0}}).call(this)},{"../../core/methods/font/decoration.js":117,"../../core/methods/font/family.js":118,"../../core/methods/font/transform.js":120}],329:[function(e,t,n){(function(){t.exports={accepted:[Boolean],click:{accepted:[Boolean,Function],value:!0},move:{accepted:[Boolean,Function],value:!0},out:{accepted:[Boolean,Function],value:!0},over:{accepted:[Boolean,Function],value:!0},value:!0}}).call(this)},{}],330:[function(e,t,n){(function(){var n;n=e("../../core/methods/process/data.js"),t.exports={accepted:[!1,Array,Function,String],delimiter:{accepted:[String],value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},overlap:.6,process:n,value:!1}}).call(this)},{"../../core/methods/process/data.js":121}],331:[function(e,t,n){(function(){t.exports={accepted:[Boolean,Function,String],agg:{accepted:[!1,Function,"sum","min","max","mean","median"],value:!1},sort:{accepted:["asc","desc"],value:"desc"},value:!1}}).call(this)},{}],332:[function(e,t,n){(function(){t.exports={accepted:[Boolean],value:!1,timeout:400,process:function(e,t){var n,r,i;return!!e&&(n=null,r=function(){var e,n,r;if(r=(n=t.container.value.node().parentNode.getBoundingClientRect()).width,e=n.height,t.self.width(r),t.self.height(e),t.width.changed||t.height.changed)return t.self.draw()},d3.select(window).on("resize."+t.container.id,(i=this,function(e){return clearTimeout(n),n=setTimeout(r,i.timeout)})),e)}}}).call(this)},{}],333:[function(e,t,n){(function(){var n;n=e("../../core/methods/rendering.js"),t.exports={accepted:function(e){var t;return!(t=e.types[e.type.value].shapes)||t instanceof Array||(t=[t]),t.length?t:["square"]},interpolate:{accepted:["basis","basis-open","cardinal","cardinal-open","linear","monotone","step","step-before","step-after"],value:"linear"},rendering:n(),value:!1}}).call(this)},{"../../core/methods/rendering.js":126}],334:[function(e,t,n){(function(){var n;n=e("../../core/methods/filter.js"),t.exports={accepted:[!1,Function,Number,Object,String],dataFilter:!0,mute:n(!0),scale:{accepted:[Function],domain:{min:{accepted:[!1,Number],value:!1},max:{accepted:[!1,Number],value:!1}},range:{max:{accepted:[Function,Number],value:function(e){return Math.floor(d3.max([d3.min([e.width.viz,e.height.viz])/15,6]))}},min:{accepted:[Function,Number],value:3}},value:d3.scaleSqrt()},solo:n(!0),threshold:{accepted:[Boolean,Function,Number],value:!1},value:!1}}).call(this)},{"../../core/methods/filter.js":115}],335:[function(e,t,n){(function(){t.exports={value:!1}}).call(this)},{}],336:[function(e,t,n){(function(){var n;n=e("../../core/methods/filter.js"),t.exports={accepted:[!1,Function,Object,String],mute:n(!0),solo:n(!0),value:!1}}).call(this)},{"../../core/methods/filter.js":115}],337:[function(e,t,n){(function(){var n;n=e("../../core/methods/filter.js"),t.exports={accepted:[Array,Boolean,Function,Object,String],nesting:!0,mute:n(!0),solo:n(!0),value:!1}}).call(this)},{"../../core/methods/filter.js":115}],338:[function(e,t,n){(function(){var n;n=e("../../core/methods/filter.js"),t.exports={accepted:[Array,Boolean,Function,Object,String],dataFilter:!0,fixed:{accepted:[Boolean],value:!1},format:{accepted:[!1,Array,Function,String],value:!1},mute:n(!1),solo:n(!1),value:!1}}).call(this)},{"../../core/methods/filter.js":115}],339:[function(e,t,n){(function(){t.exports={accepted:[Boolean],align:"middle",hover:{accepted:["all-scroll","col-resize","crosshair","default","grab","grabbing","move","pointer"],value:"pointer"},handles:{accepted:[Boolean],color:"#666",opacity:1,size:3,stroke:"#666",value:!0},height:{accepted:[!1,Number],value:!1},play:{accepted:[Boolean],icon:{accepted:[!1,String],awesome:"",fallback:"►"},pause:{accepted:[!1,String],awesome:"",fallback:"❚❚"},timing:{accepted:[Number],value:1500},value:!0},value:!0}}).call(this)},{}],340:[function(e,t,n){(function(){t.exports={mouseevents:60,transitions:600,ui:200}}).call(this)},{}],341:[function(e,t,n){(function(){var n,r,i,a;n=e("../../core/methods/font/decoration.js"),r=e("../../core/methods/font/family.js"),a=e("../../core/methods/font/transform.js"),i=e("../../string/strip.js"),t.exports={accepted:[!1,Function,String],font:{align:"center",color:"#444444",decoration:n(),family:r(),size:16,transform:a(),weight:400},height:!1,link:!1,padding:2,position:"top",process:function(e,t){var n;return 0===t.container.id.indexOf("default")&&e&&(n=i(e).toLowerCase(),t.self.container({id:n})),e},sub:{accepted:[!1,Function,String],font:{align:"center",color:"#444444",decoration:n(),family:r(),size:12,transform:a(),weight:400},link:!1,padding:1,position:"top",value:!1},total:{accepted:[Boolean,Object],font:{align:"center",color:"#444444",decoration:n(),family:r(),size:12,transform:a(),weight:400,value:!1},link:!1,padding:1,position:"top",value:!1},width:!1,value:!1}}).call(this)},{"../../core/methods/font/decoration.js":117,"../../core/methods/font/family.js":118,"../../core/methods/font/transform.js":120,"../../string/strip.js":210}],342:[function(e,t,n){(function(){var n,r;n=e("../../core/methods/font/family.js"),r=e("../../core/methods/font/transform.js"),t.exports={accepted:[Boolean,Array,Function,Object,String],anchor:"top center",background:"#ffffff",children:{accepted:[Boolean,Number],value:!0},connections:{accepted:[Boolean],value:!0},curtain:{color:"#ffffff",opacity:.8},extent:{accepted:[Boolean],value:!0},font:{color:"#444",family:n(),size:12,transform:r(),weight:400},fullscreen:{accepted:[Boolean],value:!1},html:{accepted:[!1,Function,Object,String],value:!1},iqr:{accepted:[Boolean],value:!0},large:250,share:{accepted:[Boolean],value:!0},size:{accepted:[Boolean],value:!0},small:225,stacked:{accepted:[Boolean],value:!1},sub:{accepted:[!1,Function,String],value:!1},value:!0}}).call(this)},{"../../core/methods/font/family.js":118,"../../core/methods/font/transform.js":120}],343:[function(e,t,n){arguments[4][336][0].apply(n,arguments)},{"../../core/methods/filter.js":115,dup:336}],344:[function(e,t,n){(function(){t.exports={accepted:function(e){return d3.keys(e.types)},mode:{accepted:function(e){return e.types[e.type.value].modes||[!1]},value:!1},value:"treemap"}}).call(this)},{}],345:[function(e,t,n){(function(){var n,r,i,a;i=e("../../core/methods/font/family.js"),n=e("../../core/methods/font/align.js"),r=e("../../core/methods/font/decoration.js"),a=e("../../core/methods/font/transform.js"),t.exports={accepted:[Array,Boolean],align:n("center"),border:1,color:{primary:{process:function(e,t){var n;return n=this.value,t.ui.color.secondary.value||(t.ui.color.secondary.value=d3.rgb(n).darker(.75).formatHex()),e},value:"#ffffff"},secondary:{value:!1}},display:{acceped:["block","inline-block"],value:"inline-block"},font:{align:"center",color:"#444",decoration:r(),family:i(),size:11,transform:a(),weight:400},margin:5,padding:5,position:{accepted:["top","right","bottom","left"],value:"bottom"},value:!1}}).call(this)},{"../../core/methods/font/align.js":116,"../../core/methods/font/decoration.js":117,"../../core/methods/font/family.js":118,"../../core/methods/font/transform.js":120}],346:[function(e,t,n){(function(){t.exports={accepted:[!1,Number],secondary:!1,small:200,value:!1}}).call(this)},{}],347:[function(e,t,n){t.exports={accepted:[Boolean],behavior:d3.zoom().scaleExtent([1,1]).duration(0),click:{accepted:[Boolean],value:!0},pan:{accepted:[Boolean],value:!0},scroll:{accepted:[Boolean],value:!0},value:!0}},{}],348:[function(e,t,n){(function(){var n,r,i,a,o,s,l;e("../../util/closest.js"),r=e("../../core/fetch/value.js"),i=e("./helpers/graph/draw.js"),a=e("./helpers/graph/nest.js"),o=e("../../array/sort.js"),s=e("./helpers/graph/stack.js"),l=e("../../core/data/threshold.js"),(n=function(e){var t,n,a,l,u,c,f,d,h,p;if(i(e,{buffer:e.axes.opposite,zero:!0}),e.x.domain.viz.concat(e.y.domain.viz).indexOf(void 0)>=0)return[];for(n=o(e.data.viz,null,null,null,e),a=e[e.axes.discrete],d=e[e.axes.opposite],l=0,c=n.length;l<c;l++)for((h=n[l]).d3po||(h.d3po={}),u=0,f=(p=h.values).length;u<f;u++)(t=p[u]).d3po||(t.d3po={}),t.d3po.x=a.scale.viz(r(e,t,a.value)),t.d3po.x+=e.axes.margin.viz.left,t.d3po.y=d.scale.viz(r(e,t,d.value)),t.d3po.y+=e.axes.margin.viz.top,t.d3po.merged instanceof Array&&(h.d3po.merged||(h.d3po.merged=[]),h.d3po.merged=h.d3po.merged.concat(t.d3po.merged)),t.d3po.text&&!h.d3po.text&&(h.d3po.text=t.d3po.text);return s(e,n)}).filter=function(e,t){return a(e,l(e,t,e[e.axes.discrete].value))},n.requirements=["data","x","y"],n.setup=function(e){var t,n,r;return e.axes.discrete||(t=e.time.value===e.y.value?"y":"x",e.self[t]({scale:"discrete"})),e[e.axes.discrete].zerofill.value||e.self[e.axes.discrete]({zerofill:!0}),e[e.axes.opposite].stacked.value||"stacked"!==e.type.value||e.self[e.axes.opposite]({stacked:!0}),r=e[e.axes.opposite],n=e.size,!r.value&&n.value||n.changed&&n.previous===r.value?e.self[e.axes.opposite](n.value):!n.value&&r.value||r.changed&&r.previous===n.value?e.self.size(r.value):void 0},n.shapes=["area"],n.threshold=function(e){return 20/e.height.viz},n.tooltip="static",t.exports=n}).call(this)},{"../../array/sort.js":65,"../../core/data/threshold.js":93,"../../core/fetch/value.js":99,"../../util/closest.js":241,"./helpers/graph/draw.js":356,"./helpers/graph/nest.js":362,"./helpers/graph/stack.js":363}],349:[function(e,t,n){(function(){var n,r,i,a,o,s,l,u=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};r=e("../../util/buckets.js"),i=e("../../core/fetch/value.js"),a=e("./helpers/graph/draw.js"),o=e("./helpers/graph/nest.js"),s=e("./helpers/graph/stack.js"),l=e("../../util/uniques.js"),(n=function(e){var t,n,o,c,f,d,h,p,v,g,m,y,b,x,_,w,j,k,z,M,A,E,S,O,T,C,N,P,F,q,B,D,I,R,L,U,V,Y,H;if(v="x"===(d=e.axes.discrete)?"height":"width",V="x"===d?"width":"height",F=e.axes.opposite,o="x"===d?"left":"top",O="x"===d?"top":"left",a(e,{buffer:!0,zero:F}),e.x.domain.viz.concat(e.y.domain.viz).indexOf(void 0)>=0)return[];if(E=e.data.viz,e.axes.stacked)for(y=0,_=E.length;y<_;y++)D=E[y],s(e,D.values);for(L=e.axes[V]/e[e.axes.discrete].ticks.values.length,(B=e[e.axes.discrete].padding.value)<1&&(B*=L),2*B>L&&(B=.1*L),M=L-2*B,e.axes.stacked||(e[d].persist.position.value?(I=e[d].value,T=L/2-(M/=p=u.call(e.id.nesting,I)>=0?d3.max(E,function(e){return e.values.length}):l(E,e.id.value,i,e).length)/2-B,Y=d3.scaleOrdinal(),1===p?Y.domain([0]).range([0]):Y.domain([0,p-1]).range([-T,T])):Y=d3.scaleLinear()),f=[],C=(N=e[F]).scale.viz.domain().slice(),0===F.indexOf("y")&&(C=C.reverse()),C[0]<=0&&C[1]>=0?H=0:C[0]<0?H(d3.max(C)):H=d3.min(C),e[d].persist.position.value&&!e.axes.stacked&&(m=l(d3.merge(E.map(function(e){return e.values})),e.id.value,i,e,e.id.value,!1),Y.domain(m),1===m.length?Y.range([0]):Y.range(r(Y.range(),m.length))),z=d3.max(E,function(e){return e.values.length}),b=0,w=E.length;b<w;b++)for(q=E[b],e.axes.stacked?(t=1,S=M):e[d].persist.position.value?(t=p,S=M):(t=q.values.length,T=e[d].persist.size.value?L/2-(S=M/z)/2*(z-t)-S/2-B:L/2-(S=M/t)/2-B,Y.domain([0,t-1]),Y.range([-T,T])),g=x=0,j=(R=q.values).length;x<j;g=++x){if(c=R[g],N=e[F],A=e.axes.stacked?0:e[d].persist.position.value?Y(i(e,c,e.id.value)):Y(g%t),e.axes.stacked)U=c.d3po[F],n=c.d3po[F+"0"];else{if(null===(P=i(e,c,N.value))&&(N=e[F+"2"],P=i(e,c,N.value)),0===P)continue;"log"===N.scale.value&&(H=P<0?-1:1),U=N.scale.viz(P),n=N.scale.viz(H)}h=i(e,c,e[d].value),c.d3po[d]=e[d].scale.viz(h),c.d3po[d]+=e.axes.margin.viz[o]+A,k=n-U,c.d3po[F]=n-k/2,e.axes.stacked||(c.d3po[F]+=e.axes.margin.viz[O]),delete c.d3po.r,c.d3po[V]=S,c.d3po[v]=Math.abs(k),c.d3po.init={},c.d3po.init[F]=N.scale.viz(H),c.d3po.init[F]-=c.d3po[F],c.d3po.init[F]+=e.axes.margin.viz[O],c.d3po.init[V]=c.d3po[V],e.text.value?delete c.d3po.label:c.d3po.label=!1,f.push(c)}return f}).filter=function(e,t){return o(e,t,e[e.axes.discrete].value)},n.requirements=["data","x","y"],n.setup=function(e){var t,n,r;return e.axes.discrete||(t=e.time.value===e.y.value?"y":"x",e.self[t]({scale:"discrete"})),r=e[e.axes.opposite],n=e.size,!r.value&&n.value||n.changed&&n.previous===r.value?e.self[e.axes.opposite](n.value):!n.value&&r.value||r.changed&&r.previous===n.value?e.self.size(r.value):void 0},n.shapes=["square"],t.exports=n}).call(this)},{"../../core/fetch/value.js":99,"../../util/buckets.js":239,"../../util/uniques.js":245,"./helpers/graph/draw.js":356,"./helpers/graph/nest.js":362,"./helpers/graph/stack.js":363}],350:[function(e,t,n){(function(){var n,r,i,a,o,s;r=e("../../core/fetch/value.js"),i=e("./helpers/graph/draw.js"),a=e("../../string/format.js"),o=e("../../string/strip.js"),s=e("../../util/uniques.js"),(n=function(e){var t,n,l,u,c,f,d,h,p,v,g,m,y,b,x,_,w,j,k,z,M,A;return i(e,{buffer:!0}),e.x.domain.viz.concat(e.y.domain.viz).indexOf(void 0)>=0?[]:(l=e.axes.discrete,b=e.axes.opposite,n="x"===l?e.axes.margin.viz.left:e.axes.margin.viz.top,y="x"===b?e.axes.margin.viz.left:e.axes.margin.viz.top,u="x"===l?"height":"width",A="x"===l?"width":"height",z=e.axes[A]/e[l].ticks.values.length,k="number"==typeof(k=e.size.value)?k:100,z=d3.min([z-2*e.labels.padding,k]),(g=e.type.mode.value)instanceof Array||(g=[g,g]),p=function(t){var n,i,a;for(n in i={},e.data.keys)a=s(t,n,r,e),i[n]=1===a.length?a[0]:a;return i},m=!1,d=[],c=e.format.value(e.format.locale.value.ui.iqr),f=e.format.value(e.format.locale.value.ui.max),v=e.format.value(e.format.locale.value.ui.min),x=e.format.value(e.format.locale.value.ui.percentile),t=e.format.value(e.format.locale.value.ui.tukey_bottom),M=e.format.value(e.format.locale.value.ui.tukey_top),_=e.format.value(e.format.locale.value.ui.quartile_first),w=e.format.value(e.format.locale.value.ui.quartile_third),h=e.format.value(e.format.locale.value.ui.median),j=[],d3.nest().key(function(t){return r(e,t,e[l].value)}).rollup(function(i){var k,E,S,O,T,C,N,P,F,q,B,D,I,R,L,U,V,Y,H,G,X,W,Q,Z,$,J,K,ee,te;for(G=e[b].scale.viz,(K=i.map(function(t){return r(e,t,e[b].value)})).sort(function(e,t){return e-t}),s(K),P=d3.quantile(K,.25),L=d3.quantile(K,.5),X=d3.quantile(K,.75),W={},"tukey"===g[1]?(Q=X-1.5*(P-X),Z=M):"extent"===g[1]?(Q=d3.max(K),Z=f):"number"==typeof g[1]&&(Q=d3.quantile(K,(100-g[1])/100),Z=a(x,g[1])),Q=d3.min([d3.max(K),Q]),e.tooltip.extent.value&&(W[Z]={key:e[b].value,value:Q}),e.tooltip.iqr.value&&(W[w]={key:e[b].value,value:X},W[h]={key:e[b].value,value:L},W[_]={key:e[b].value,value:P}),"tukey"===g[0]?(k=P+1.5*(P-X),E=t):"extent"===g[0]?(k=d3.min(K),E=v):"number"==typeof g[0]&&(k=d3.quantile(K,g[0]/100),Z=a(x,g[0])),k=d3.max([d3.min(K),k]),e.tooltip.extent.value&&(W[E]={key:e[b].value,value:k}),O=[],S=[],$=[],H=[],F=0,I=i.length;F<I;F++)T=i[F],(J=r(e,T,e[b].value))>=P&&J<=X?O.push(T):J>=k&&J<P?S.push(T):J<=Q&&J>X?$.push(T):H.push(T);for(B=r(e,i[0],e[l].value),ee=e[l].scale.viz(B),ee+=n,D=e.format.value(B,{key:e[l].value,vars:e}),B.constructor===Date&&(B=B.getTime()),B=o(B),(O=p(O)).d3po={color:"white",id:"box_"+B,init:{},label:!1,shape:"square",stroke:"#444",text:a(c,D)},O.d3po[A]=z,O.d3po.init[A]=z,O.d3po[u]=Math.abs(G(P)-G(X)),O.d3po[l]=ee,te=d3.min([G(P),G(X)])+O.d3po[u]/2,te+=y,O.d3po[b]=te,O.d3po.tooltip=W,j.push(O),V={d3po:{id:"median_line_"+B,position:"height"===u?"top":"right",shape:"whisker",static:!0}},D={background:"#fff",names:[e.format.value(L,{key:e[b].value,vars:e})],padding:0,resize:!1,x:0,y:0},C=Math.abs(G(L)-G(P)),N=Math.abs(G(L)-G(X)),Y=2*d3.min([C,N]),U=2*e.data.stroke.width+2*e.labels.padding,D["width"===A?"w":"h"]=z-U,D["width"===u?"w":"h"]=Y-U,V.d3po.label=D,V.d3po[A]=z,V.d3po[l]=ee,V.d3po[b]=G(L)+y,j.push(V),(S=p(S)).d3po={id:"bottom_whisker_line_"+B,offset:O.d3po[u]/2,position:"height"===u?"bottom":"left",shape:"whisker",static:!0},"x"===b&&(S.d3po.offset*=-1),S.d3po[u]=Math.abs(G(k)-G(P)),S.d3po[A]=z,S.d3po[l]=ee,S.d3po[b]=te,j.push(S),($=p($)).d3po={id:"top_whisker_line_"+B,offset:O.d3po[u]/2,position:"height"===u?"top":"right",shape:"whisker",static:!0},"y"===b&&($.d3po.offset*=-1),$.d3po[u]=Math.abs(G(Q)-G(X)),$.d3po[A]=z,$.d3po[l]=ee,$.d3po[b]=te,j.push($),q=0,R=H.length;q<R;q++)(T=H[q]).d3po[l]=ee,T.d3po[b]=G(r(e,T,e.y.value)),T.d3po[b]+=y,T.d3po.r=4,T.d3po.shape=e.shape.value;return m=!H.length&&Q-k==0,d.push(L),j=j.concat(H),i}).entries(e.data.viz),m&&1===s(d).length?[]:j)}).modes=["tukey","extent",Array,Number],n.requirements=["data","x","y"],n.shapes=["circle","check","cross","diamond","square","triangle","triangle_up","triangle_down"],n.setup=function(e){var t;if(!e.axes.discrete)return t=e.time.value===e.y.value?"y":"x",e.self[t]({scale:"discrete"})},t.exports=n}).call(this)},{"../../core/fetch/value.js":99,"../../string/format.js":208,"../../string/strip.js":210,"../../util/uniques.js":245,"./helpers/graph/draw.js":356}],351:[function(e,t,n){(function(){var n,r,i,a,o,s,l;n=e("../../array/sort.js"),o=e("../../core/fetch/value.js"),i=e("../../core/fetch/color.js"),a=e("../../core/fetch/text.js"),l=e("../../color/legible.js"),s=e("../../core/data/group.js"),(r=function(e){var t,r,u,c,f,d,h,p,v,g,m,y,b,x,_,w,j,k,z,M,A,E,S,O,T,C,N,P,F,q,B,D,I,R;if(v=s(e,e.data.viz),(d=(v=n(v,null,null,null,e)).length)<4?(u=d,A=1):(E=e.width.viz/e.height.viz,u=Math.ceil(Math.sqrt(d*E)),A=Math.ceil(Math.sqrt(d/E))),d>0)for(;(A-1)*u>=d;)A--;for(r=e.width.viz/u,t=e.height.viz/A,e.size.value?(F=e.size.scale.domain.min.value,P=e.size.scale.domain.max.value,h=["number"==typeof F?F:d3.min(e.data.viz,function(t){return o(e,t,e.size.value,e.id.value,"min")}),"number"==typeof P?P:d3.max(e.data.viz,function(t){return o(e,t,e.size.value,e.id.value)})]):h=[0,0],5,O=d3.min([r,t])/2-10,O-=x=e.labels.value&&!e.small&&O>=40?d3.max([20,d3.min([.25*O,50])]):0,T=d3.min([O,e.size.scale.range.min.value]),S=e.size.scale.value.domain(h).rangeRound([T,O]),z=d3.layout.pack().children(function(e){return e.values}).padding(5).radius(function(e){return S(e)}).size([r-10,t-10-x]).value(function(e){return e.value}),f=[],M=0,g=m=0,_=v.length;m<_;g=++m){for(c=v[g],N=z.nodes(c),B=r*g%e.width.viz,R=t*M,y=0,w=N.length;y<w;y++)(C=N[y]).children?(k={d3po:{}})[e.id.value]=C.key:k=C.d3po,k.d3po.depth=e.id.grouping.value?C.depth:e.depth.value,k.d3po.x=C.x,k.d3po.xOffset=B,k.d3po.y=C.y,k.d3po.yOffset=R+x,k.d3po.r=C.r,f.push(k);(g+1)%u==0&&M++}for(p=O/d3.max(f,function(e){return e.d3po.r}),q=z.size()[0]/2,I=z.size()[1]/2,b=0,j=f.length;b<j;b++)(c=f[b]).d3po.x=(c.d3po.x-q)*p+q+c.d3po.xOffset,c.d3po.y=(c.d3po.y-I)*p+I+c.d3po.yOffset,c.d3po.r=c.d3po.r*p,delete c.d3po.xOffset,delete c.d3po.yOffset,c.d3po.static=c.d3po.depth<e.depth.value&&e.id.grouping.value,!x||0!==c.d3po.depth&&!1!==e.id.grouping.value?delete c.d3po.label:(c.d3po.text=a(e,c[e.id.value],c.d3po.depth),D=x>3*e.labels.padding?e.labels.padding:0,c.d3po.label={x:0,y:-(O+D+x/2),w:2*O,h:x-D,padding:0,resize:!0,color:l(i(e,c,c.d3po.depth)),force:!0});return f.sort(function(e,t){return e.d3po.depth-t.d3po.depth})}).fill=!0,r.requirements=["data"],r.scale=1.05,r.shapes=["circle","donut"],t.exports=r}).call(this)},{"../../array/sort.js":65,"../../color/legible.js":75,"../../core/data/group.js":88,"../../core/fetch/color.js":95,"../../core/fetch/text.js":98,"../../core/fetch/value.js":99}],352:[function(e,t,n){(function(){var n,r,i,a;n=e("../../array/comparator.js"),r=e("../../core/data/threshold.js"),a=e("../../core/data/group.js"),(i=function(e){var t,r,i,o,s,l,u;for(r=d3.pie().value(function(e){return e.value}).sort(function(t,r){return e.order.value?n(t.d3po,r.d3po,[e.order.value],e.order.sort.value,[],e):e.id.nesting.length>1?n(t.d3po,r.d3po,e.id.nesting.concat([e.size.value]),void 0,[],e):n(t.d3po,r.d3po,[e.size.value],"desc",[],e)})(a(e,e.data.viz,[])),u=[],l=d3.min([e.width.viz,e.height.viz])/2-2*e.labels.padding,i=0,s=r.length;i<s;i++)(o=(t=r[i]).data.d3po).d3po.startAngle=t.startAngle,o.d3po.endAngle=t.endAngle,o.d3po.r_inner=l/3,o.d3po.r_outer=l,o.d3po.x=e.width.viz/2,o.d3po.y=e.height.viz/2,o.d3po.share=(t.endAngle-t.startAngle)/(2*Math.PI),u.push(o);return u}).filter=r,i.requirements=["data","size"],i.shapes=["arc"],i.threshold=function(e){return 1600/(e.width.viz*e.height.viz)},t.exports=i}).call(this)},{"../../array/comparator.js":63,"../../core/data/group.js":88,"../../core/data/threshold.js":93}],353:[function(e,t,n){(function(){var e;(e=function(e){var t,n,r,i,a;return t=e.coords.value,r=e.coords.key||d3.keys(t.objects)[0],n=topojson.feature(t,t.objects[r]).features,a=e.coords.solo.value,i=e.coords.mute.value,n=n.filter(function(t){return t[e.id.value]=t.id,a.length?a.indexOf(t.id)>=0:!i.length||i.indexOf(t.id)<0})}).libs=["topojson"],e.nesting=!1,e.requirements=["coords"],e.scale=1,e.shapes=["coordinates"],e.zoom=!0,t.exports=e}).call(this)},{}],354:[function(e,t,n){(function(){var n,r,i,a;n=e("../../array/comparator.js"),r=e("../../core/data/threshold.js"),i=e("../../core/data/group.js"),(a=function(e){var t,r,a,o,s,l,u;for(r=d3.pie().value(function(e){return e.value}).startAngle(function(e){return Math.PI/180*-90}).endAngle(function(e){return Math.PI/180*90}).sort(function(t,r){return e.order.value?n(t.d3po,r.d3po,[e.order.value],e.order.sort.value,[],e):e.id.nesting.length>1?n(t.d3po,r.d3po,e.id.nesting.concat([e.size.value]),void 0,[],e):n(t.d3po,r.d3po,[e.size.value],"desc",[],e)})(i(e,e.data.viz,[])),u=[],l=d3.min([e.width.viz/2,e.height.viz])-2*e.labels.padding,a=0,s=r.length;a<s;a++)(o=(t=r[a]).data.d3po).d3po.startAngle=t.startAngle,o.d3po.endAngle=t.endAngle,o.d3po.r_inner=l/3,o.d3po.r_outer=l,o.d3po.x=e.width.viz/2,o.d3po.y=e.height.viz,o.d3po.share=(t.endAngle-t.startAngle)/(2*Math.PI),u.push(o);return u}).filter=r,a.requirements=["data","size"],a.shapes=["arc"],a.threshold=function(e){return 1600/(e.width.viz*e.height.viz)},t.exports=a}).call(this)},{"../../array/comparator.js":63,"../../core/data/group.js":88,"../../core/data/threshold.js":93}],355:[function(e,t,n){(function(){var n,r,i;n=e("../../../../core/fetch/color.js"),r=e("../../../../color/legible.js"),i=e("../../../../core/console/print.js"),t.exports=function(e){var t,a,o,s,l,u,c,f,d,h,p,v;for(t=e.axes,c=e.axes.margin.viz,v=2*(s=t.stacked||!t.ticks.value?[]:e.data.viz).length>e.data.large?0:e.draw.timing,d=function(i,a){return 0===a.indexOf("y")?i.attr("x1",-2).attr("x2",-8).attr("y1",function(e){return e.d3po.y-c.top}).attr("y2",function(e){return e.d3po.y-c.top}):i.attr("x1",function(e){return e.d3po.x-c.left}).attr("x2",function(e){return e.d3po.x-c.left}).attr("y1",t.height+2).attr("y2",t.height+8),i.style("stroke",function(t){return r(n(e,t))}).style("stroke-width",e.data.stroke.width).attr("shape-rendering",e.shape.rendering.value)},e.dev.value&&i.time("creating axis tick groups"),(p=e.group.select("g#d3po_graph_plane").selectAll("g.d3po_data_tick").data(s,function(n){var r;return r=t.discrete?"_"+n.d3po[t.discrete]:"","tick_"+n[e.id.value]+"_"+n.d3po.depth+r})).enter().append("g").attr("class","d3po_data_tick").attr("opacity",0),e.dev.value&&i.timeEnd("creating axis tick groups"),l=0,u=(f=["x","y"]).length;l<u;l++)a=f[l],e.dev.value&&v&&i.time("creating "+a+" ticks"),o=v&&a!==t.discrete?s:[],h=p.selectAll("line.d3po_data_"+a).data(o,function(t){return"tick_"+t[e.id.value]+"_"+t.d3po.depth}),e.dev.value&&v&&i.timeEnd("creating "+a+" ticks"),e.dev.value&&v&&i.time("styling "+a+" ticks"),v>0?h.transition().duration(v).call(d,a):h.call(d,a),h.enter().append("line").attr("class","d3po_data_"+a).call(d,a),e.dev.value&&v&&i.timeEnd("styling "+a+" ticks");v>0?(p.transition().duration(v).attr("opacity",1),p.exit().transition().duration(v).attr("opacity",0).remove()):(p.attr("opacity",1),p.exit().remove())}}).call(this)},{"../../../../color/legible.js":75,"../../../../core/console/print.js":83,"../../../../core/fetch/color.js":95}],356:[function(e,t,n){(function(){var n,r,i,a;n=e("./includes/axes.js"),r=e("./includes/svg.js"),i=e("./includes/mouse.js"),a=e("./includes/plot.js"),t.exports=function(e,t){void 0===t&&(t={}),n(e,t),a(e,t),r(e,t),e.mouse.viz=!0===t.mouse&&i}}).call(this)},{"./includes/axes.js":357,"./includes/mouse.js":359,"./includes/plot.js":360,"./includes/svg.js":361}],357:[function(e,t,n){(function(){var n,r,i,a,o,s,l,u,c,f,d,h,p;n=e("../../../../helpers/d3functions/aggs.js"),r=e("../../../../../array/sort.js"),o=e("./buffer.js"),a=e("../../../../../util/buckets.js"),l=e("../../../../../core/fetch/data.js"),u=e("../../../../../core/fetch/value.js"),d=e("../../../../../core/console/print.js"),scales=e("../../../../helpers/d3functions/scales.js"),p=e("../../../../../util/uniques.js"),t.exports=function(e,t){var n,r,a,l,v,g,m,y,b,x,_,w;for(!(a=s(e))&&e.axes.dataset||(e.axes.dataset=c(e)),e.axes.scale=!(!t.buffer||!0===t.buffer)&&h(e,t.buffer),v=0,m=(n=e.width.viz>e.height.viz?["y","y2","x","x2"]:["x","x2","y","y2"]).length;v<m;v++)b=0===(r=n[v]).indexOf("x")?"y":"x",_=e.order.changed||e.order.sort.changed||!0===e.order.value&&e[b].changed,e[r].value&&(!e[r].ticks.values||a||_||e[r].value===e.time.value&&e.time.fixed.value)&&(e.dev.value&&d.time("calculating "+r+" axis"),e[r].reset=!0,e[r].ticks.values=!1,r===e.axes.discrete&&e[r].value!==e.time.value&&(e[r].ticks.values=p(e.axes.dataset,e[r].value,u,e)),w=!0===t.zero||0===r.indexOf(t.zero),x=i(e,r,w),0===r.indexOf("y")&&(x=x.reverse()),e[r].scale.viz=f(e,r,x),e[r].domain.viz=x,e.dev.value&&d.timeEnd("calculating "+r+" axis"));if(e.axes.mirror.value&&(l=d3.extent(e.y.domain.viz.concat(e.x.domain.viz)),e.x.domain.viz=l,e.x.scale.viz.domain(l),l=l.slice().reverse(),e.y.domain.viz=l,e.y.scale.viz.domain(l)),t.buffer)for(g=0,y=n.length;g<y;g++)(r=n[g])!==e.axes.discrete&&o(e,r,t.buffer)},s=function(e){var t,n,r,i,a,o,s,l,u,c,f,d;if((n=!e.time.fixed.value&&(e.time.solo.changed||e.time.mute.changed))||(n=e.id.solo.changed||e.id.mute.changed),n)return n;for(i=0,s=(r=["data","time","id","depth","type","width","height","x","y","x2","y2"]).length;i<s;i++)if(e[r[i]].changed){n=!0;break}if(n)return n;for(d=["mute","range","scale","solo","stacked","zerofill"],a=0,l=(c=["x","y","x2","y2"]).length;a<l;a++)for(t=c[a],o=0,u=d.length;o<u;o++)if(f=d[o],e[t][f].changed){n=!0;break}return n},c=function(e){var t,n;return e.time.fixed.value?(n=d3.range(0,e.id.nesting.length),d3.merge(d3.merge([function(){var r,i,a;for(a=[],r=0,i=n.length;r<i;r++)t=n[r],a.push(l(e,"all",t));return a}()]))):e.data.viz},i=function(e,t,i,a){var o,s,l,c,f,d,h,v,g,m,y,b,x,_,w,j,k,z,M,A,E,S,O,T,C,N,P,F;if(z=0===t.indexOf("x")?"y":"x",e[t].range.value&&2===e[t].range.value.length)return e[t].range.value.slice();if("share"===e[t].scale.value)return e[t].ticks.values=d3.range(0,1.1,.1),[0,1];if(e[t].stacked.value){for(C=[],v=0,b=(M=e.axes.dataset).length;v<b;v++)(h=M[v]).values?C=C.concat(h.values):C.push(h);return f=d3.nest().key(function(t){return u(e,t,e[z].value)}).rollup(function(n){var r;return r=d3.sum(n,function(n){var r;return(r=u(e,n,e[t].value))>0?r:0}),[d3.sum(n,function(n){var r;return(r=u(e,n,e[t].value))<0?r:0}),r]}).entries(C),F=d3.merge(f.map(function(e){return e.values})),d3.extent(F)}if(e[t].value===e.time.value)return e.time.solo.value.length?d3.extent(e.time.solo.value).map(function(e){return e.constructor!==Date?(4===(e+="").length&&parseInt(e)+""===e&&(e+="/01/01"),new Date(e)):e}):d3.extent(e.data.time.ticks);for(F=[],g=0,x=(A=e.axes.dataset).length;g<x;g++)h=A[g],(P=u(e,h,e[t].value))instanceof Array?F=F.concat(P):F.push(P);if(F=F.filter(function(e){return null!==e}),t===e.axes.discrete){if(T=!0===e.order.value?e[z].value:e.order.value){for(O=e.order.sort.value,s=typeof(o=e.order.agg.value||e.aggs.value[T]||"max"),d=F.reduce(function(e,t){return e[t]=[],e},{}),y=0,_=(E=e.axes.dataset).length;y<_;y++)if((h=E[y]).values)for(j=0,w=(S=h.values).length;j<w;j++)N=S[j],d[u(e,N,e[t].value)].push(u(e,N,T));else d[u(e,h,e[t].value)].push(u(e,h,T));for(m in d)N=d[m],"string"===s?d[m]=n.fromString(o)(N):"function"===s&&(d[m]=o(N,T));return d=(d=r(d3.entries(d),"value",O)).reduce(function(e,t){return e.push(t.key),e},[])}return F[0].constructor===String?p(F).sort(function(e,t){return""+e.localeCompare(""+t)}):p(F).sort(function(e,t){return e-t})}return F.sort(function(e,t){return e-t}),"log"===e[t].scale.value&&(0===F[0]&&(F[0]=1),0===F[F.length-1]&&(F[F.length-1]=-1)),i&&(c=F.every(function(e){return e>0}),l=F.every(function(e){return e<0}),(c||l)&&(k=c?1:-1,F.push("log"===e[t].scale.value?k:0))),d3.extent(F)},f=function(e,t,n){var r,i,o,s,l;return i=0===t.indexOf("x")?e.width.viz:e.height.viz,s=e[t].scale.value,["discrete","share"].indexOf(s)>=0&&(s="linear"),l=10,"string"==typeof n[0]?(s="ordinal",r=a([0,i],n.length)):(r=[0,i],"linear"===e[t].scale.value&&(l=Math.floor(i/(4*e[t].ticks.font.size)))),e[t].scale.ticks=l,"clamp"in(o=scales.fromString(s)().domain(n).range(r))&&o.clamp(!0),o},h=function(e,t){var n,r,i;return!0===t&&(t="size"),t in e&&(t=e[t].value),"function"==typeof(i=e.size.scale.range.min.value)&&(i=i(e)),"function"==typeof(r=e.size.scale.range.max.value)&&(r=r(e)),!1===t?e.size.scale.value.domain([0,1]).rangeRound([r,r]):"number"==typeof t?e.size.scale.value.domain([0,1]).rangeRound([t,t]):t?(e.dev.value&&d.time("calculating buffer scale"),(n=d3.extent(e.axes.dataset,function(n){return u(e,n,t)||0}))[0]===n[1]&&(i=r),e.dev.value&&d.timeEnd("calculating buffer scale"),e.size.scale.value.domain(n).rangeRound([i,r])):void 0}}).call(this)},{"../../../../../array/sort.js":65,"../../../../../core/console/print.js":83,"../../../../../core/fetch/data.js":96,"../../../../../core/fetch/value.js":99,"../../../../../util/buckets.js":239,"../../../../../util/uniques.js":245,"../../../../helpers/d3functions/aggs.js":247,"../../../../helpers/d3functions/scales.js":252,"./buffer.js":358}],358:[function(e,t,n){(function(){var n,r;n=e("../../../../../util/buckets.js"),r=e("../../../../../util/closest.js"),t.exports=function(e,t,i){var a,o,s,l,u,c,f,d,h,p,v,g,m,y,b,x,_,w,j,k,z,M,A,E,S,O,T,C,N,P;if("share"!==e[t].scale.value&&!e[t].range.value&&e[t].reset){if("clamp"in(E=e[t].scale.viz.copy())&&E.clamp(!1),t===e.axes.discrete){if("string"==typeof(h=E.domain())[0]){for(m=h.length;m>=0;)h.splice(m,0,"d3po_buffer_"+m),m--;return k=E.range(),k=n(d3.extent(k),h.length),e[t].scale.viz.domain(h).range(k)}if(0===t.indexOf("y")&&(h=h.slice().reverse()),1===e[t].ticks.values.length)h=[h[0],h[0]],e[t].value===e.time.value&&1!==e.data.time.ticks.length?(u=r(e.data.time.ticks,h[0]),(S=e.data.time.ticks.indexOf(u))>0?h[0]=e.data.time.ticks[S-1]:(d=e.data.time.ticks[S+1]-u,h[0]=new Date(u.getTime()-d)),S<e.data.time.ticks.length-1?h[1]=e.data.time.ticks[S+1]:(d=u-e.data.time.ticks[S-1],h[1]=new Date(u.getTime()+d))):(h[0]-=1,h[1]+=1);else if(e.axes.scale)o=Math.abs(h[1]-h[0])/(e[t].ticks.values.length-1),o/=2,z=E.range()[1],w=1.5*e.axes.scale.range()[1],g=E.invert(-w),v=E.invert(z+w),h[0]-o<g?(h[0]=h[0]-o,h[h.length-1]=h[h.length-1]+o):(h=[g,v],0===t.indexOf("y")&&(h=h.reverse()),(p=(p=E.domain())[1]-p[0])||(h[0]-=1,h[1]+=1));else if(e[t].value===e.time.value)o=Math.abs(h[1]-h[0])/(e[t].ticks.values.length-1),o/=2,h[0]=h[0]-o,h[1]=h[1]+o;else{for(a=Math.abs(h[1]-h[0])/2,m=h.length,j=h.slice();m>=0;)f=m?j[m-1]+a:j[m]-a,h.splice(m,0,f),m--;k=E.range(),k=n(d3.extent(k),h.length),e[t].scale.viz.domain(h).range(k)}return 0===t.indexOf("y")&&(h=h.reverse()),e[t].scale.viz.domain(h)}if("x"===i&&0===t.indexOf("x")||"y"===i&&0===t.indexOf("y")||!0===i)return l=(h=E.domain())[0]>=0&&h[1]>=0,s=h[0]<=0&&h[1]<=0,"log"===e[t].scale.value?(P=l?1:-1,l&&0===t.indexOf("y")&&(h=h.slice().reverse()),x=Math.pow(10,parseInt(Math.abs(h[0])).toString().length-1)*P,y=b=h[0]%x,b&&y/x<=.1&&(y+=x*P),_=0===b?x:y,h[0]-=_,0===h[0]&&(h[0]=P),C=Math.pow(10,parseInt(Math.abs(h[1])).toString().length-1)*P,T=h[1]%C,O=Math.abs(C-T),T&&O/C<=.1&&(O+=C*P),N=0===T?C:O,h[1]+=N,0===h[1]&&(h[1]=P),l&&0===t.indexOf("y")&&(h=h.reverse())):(P=0,0===t.indexOf("y")&&(h=h.slice().reverse()),A=h.filter(function(e){return e.constructor===String}),o=.05*Math.abs(h[1]-h[0])||1,A.length||(h[0]=h[0]-o,h[1]=h[1]+o,(l&&h[0]<P||s&&h[0]>P)&&(h[0]=P),(l&&h[1]<P||s&&h[1]>P)&&(h[1]=P)),0===t.indexOf("y")&&(h=h.reverse())),e[t].scale.viz.domain(h);if(e.axes.scale)return c=!1,e.axes.mirror.value&&(c=e[0===t.indexOf("y")?"x":"y"].scale.viz,M=e.width.viz>e.height.viz?"x":"y"),t===M&&c?h=c.domain().slice().reverse():(z=E.range()[1],w=e.axes.scale.range()[1],h=[g=E.invert(1.5*-w),v=E.invert(z+1.5*w)],0===t.indexOf("y")&&(h=h.reverse()),(p=(p=E.domain())[1]-p[0])||(h[0]-=1,h[1]+=1),0===t.indexOf("y")&&(h=h.reverse())),e[t].scale.viz.domain(h)}}}).call(this)},{"../../../../../util/buckets.js":239,"../../../../../util/closest.js":241}],359:[function(e,t,n){(function(){var n,r,i,a,o;e("../../../../../util/copy.js"),n=e("../../../../../client/pointer.js"),r=e("../../../../../core/fetch/color.js"),i=e("../../../../../core/fetch/value.js"),a=e("../../../../../color/legible.js"),o=e("../../../../../color/text.js"),t.exports=function(e,t){var s,l,u,c,f,d,h,p,v,g,m,y,b,x,_,w,j,k,z;return s=d3.event.type===n.click&&(t.tooltip.value.long||t.tooltip.html.value),u=[n.over,n.move].indexOf(d3.event.type)>=0,k=e.d3po.x,z=e.d3po.y,m=e.d3po.r||0,x=t.types[t.type.value].scale||1,m*=x,c=t.axes,g=t.axes.margin.viz,j=t.draw.timing?t.timing.mouseevents:0,!s&&u?(l=a(r(t,e)),f=["x","y","x2","y2"].filter(function(n){var r;return(r=i(t,e,t[n].value))&&!(r instanceof Array)&&n!==t.axes.stacked&&t[n].mouse.value})):f=[],d=function(e){return e.attr("x1",function(e){return 0===e.indexOf("x")?k:k-m}).attr("y1",function(e){return 0===e.indexOf("y")?z:z+m}).attr("x2",function(e){return 0===e.indexOf("x")?k:k-m}).attr("y2",function(e){return 0===e.indexOf("y")?z:z+m}).attr("opacity",0)},h=function(e){return e.style("stroke",function(e){return"area"===t.shape.value?"white":l}).attr("stroke-dasharray",function(e){return t[e].mouse.dasharray.value}).attr("shape-rendering",function(e){return t[e].mouse.rendering.value}).style("stroke-width",function(e){return t[e].mouse.width})},p=function(n){return n.attr("x1",function(e){return 0===e.indexOf("x")?k:k-m}).attr("y1",function(e){return 0===e.indexOf("y")?z:z+m}).attr("x2",function(n){return 0===n.indexOf("x")?k:e.d3po.x0?e.d3po.x0:"y"===n?g.left-t[n].ticks.size:g.left+c.width+t[n].ticks.size}).attr("y2",function(n){return 0===n.indexOf("y")?z:e.d3po.y0?e.d3po.y0:"x"===n?c.height+g.top+t[n].ticks.size:g.top-t[n].ticks.size}).style("opacity",1)},v=t.g.labels.selectAll("line.d3po_mouse_axis_label").data(f),j?(v.enter().append("line").attr("class","d3po_mouse_axis_label").attr("pointer-events","none").call(d).call(h),v.transition().duration(j).call(p).call(h),v.exit().transition().duration(j).call(d).remove()):(v.call(p).call(h),v.enter().append("line").attr("class","d3po_mouse_axis_label").attr("pointer-events","none").call(d).call(h),v.exit().remove()),_=function(n){return n.attr("font-size",function(e){return t[e].ticks.font.size+"px"}).attr("font-family",function(e){return t[e].ticks.font.family.value}).attr("font-weight",function(e){return t[e].ticks.font.weight}).attr("x",function(e){return 0===e.indexOf("x")?k:"y"===e?g.left-5-t[e].ticks.size:g.left+c.width+5+t[e].ticks.size}).attr("y",function(n){return 0===n.indexOf("y")?z:e.d3po.y0?e.d3po.y+(e.d3po.y0-e.d3po.y)/2+g.top-6:"x"===n?c.height+g.top+5+t[n].ticks.size:g.top-5-t[n].ticks.size-1.35*t[n].ticks.font.size}).attr("fill","area"===t.shape.value?"white":o(l))},(w=t.g.labels.selectAll("text.d3po_mouse_axis_label").data(f)).enter().append("text").attr("class","d3po_mouse_axis_label").attr("id",function(e){return e+"_d3pomouseaxislabel"}).attr("dy",function(e){return 0===e.indexOf("y")?.35*t[e].ticks.font.size:t[e].ticks.font.size}).style("text-anchor",function(e){return"y"===e?"end":"y2"===e?"start":"middle"}).attr("opacity",0).attr("pointer-events","none").call(_),w.text(function(n){var r,a;return r=t.axes.stacked||n,a=i(t,e,t[r].value),t.format.value(a,{key:t[r].value,vars:t,labels:t[r].affixes.value})}),j?(w.transition().duration(j).delay(j).attr("opacity",1).call(_),w.exit().transition().duration(j).attr("opacity",0).remove()):(w.attr("opacity",1).call(_),w.exit().remove()),y=function(n){var r;return r=function(e){var t;return(t=d3.select("text#"+e+"_d3pomouseaxislabel")).size()?t.node().getBBox():{width:0,height:0}},n.attr("x",function(e){var n;return n=r(e).width,0===e.indexOf("x")?k-n/2-5:"y"===e?g.left-t[e].ticks.size-n-10:g.left+c.width+t[e].ticks.size}).attr("y",function(n){var i;return i=r(n).height,0===n.indexOf("y")?z-(i/2+5):e.d3po.y0?e.d3po.y+(e.d3po.y0-e.d3po.y)/2+g.top-(i/2+5):"x"===n?c.height+g.top+t[n].ticks.size:g.top-t[n].ticks.size-i-10}).attr("width",function(e){return r(e).width+10}).attr("height",function(e){return r(e).height+10}).style("stroke","area"===t.shape.value?"transparent":l).attr("fill",l).attr("shape-rendering",function(e){return t[e].mouse.rendering.value}).style("stroke-width",function(e){return t[e].mouse.width})},b=t.g.labels.selectAll("rect.d3po_mouse_axis_label").data(f),j?(b.enter().insert("rect","text.d3po_mouse_axis_label").attr("class","d3po_mouse_axis_label").attr("pointer-events","none").attr("opacity",0).call(y),b.transition().duration(j).delay(j).attr("opacity",1).call(y),b.exit().transition().duration(j).attr("opacity",0).remove()):(b.attr("opacity",1).call(y),b.enter().insert("rect","text.d3po_mouse_axis_label").attr("class","d3po_mouse_axis_label").attr("pointer-events","none").call(y),b.exit().remove())}}).call(this)},{"../../../../../client/pointer.js":69,"../../../../../color/legible.js":75,"../../../../../color/text.js":81,"../../../../../core/fetch/color.js":95,"../../../../../core/fetch/value.js":99,"../../../../../util/copy.js":242}],360:[function(e,t,n){(function(){var n,r,i,a,o,s,l,u,c;n=e("../../../../../util/buckets.js"),r=e("./buffer.js"),a=e("../../../../../core/fetch/value.js"),o=e("../../../../../font/sizes.js"),u=e("../../../../../textwrap/textwrap.js"),c=e("../../../../../core/data/time.js"),e("../../../../../util/uniques.js"),t.exports=function(e,t){var n,o,s,u,f,d,h,p,v,g,m,y,b,x,_,w,j,k,z,M;for(e.axes.margin.viz={top:e.axes.margin.top,right:e.axes.margin.right,bottom:e.axes.margin.bottom,left:e.axes.margin.left},e.axes.height=e.height.viz,e.axes.width=e.width.viz,f=0,p=(n=e.width.viz>e.height.viz?["y","y2","x","x2"]:["x","x2","y","y2"]).length;f<p;f++)if(e[o=n[f]].value){if(!1===e[o].ticks.values)if(e[o].value===e.time.value){for(k=(k=e.time.solo.value).length?k.map(function(e){return e.constructor!==Date&&(4===(e+="").length&&parseInt(e)+""===e&&(e+="/01/01"),e=new Date(e)),e}):e.data.time.values,u=d3.extent(k),_=e.data.time.stepType,k=[u[0]],j=u[0];j<u[1];)m=new Date(j),j=new Date(m["set"+_](m["get"+_]()+1)),k.push(j);e[o].ticks.values=k}else 1===o.indexOf("2")?(b=e[o.slice(0,1)].scale.viz,x=e[o].scale.viz,k=e[o.slice(0,1)].scale.ticks,e[o].ticks.values=b.ticks(k).map(function(e){return parseFloat(d3.format(".5f")(x.invert(b(e))))})):e[o].ticks.values=e[o].scale.viz.ticks(e[o].scale.ticks);e[o].ticks.values.length||((M=a(e,e.data.viz,e[o].value))instanceof Array||(M=[M]),e[o].ticks.values=M),y=0===o.indexOf("x")?"y":"x",(1===e[o].ticks.values.length||t.buffer&&t.buffer!==y&&o===e.axes.discrete&&!0===e[o].reset)&&r(e,o,t.buffer),e[o].reset=!1,e[o].value===e.time.value?(s={"font-family":e[o].ticks.font.family.value,"font-weight":e[o].ticks.font.weight,"font-size":e[o].ticks.font.size+"px","text-transform":e[o].ticks.font.transform.value,"letter-spacing":e[o].ticks.font.spacing+"px"},z=c(e,{values:e[o].ticks.values,limit:e.width.viz,style:s}),e[o].ticks.value?e[o].ticks.visible=e[o].ticks.value.map(Number):e[o].ticks.labels.value.constructor===Array?e[o].ticks.visible=e[o].ticks.labels.value.map(Number):e[o].ticks.visible=z.values.map(Number),e[o].ticks.format=z.format):e[o].ticks.value?(e[o].ticks.values=e[o].ticks.value,e[o].ticks.labels.value.constructor===Array?e[o].ticks.visible=e[o].ticks.labels.value:e[o].ticks.visible=e[o].ticks.value):e[o].ticks.labels.value.constructor===Array?e[o].ticks.visible=e[o].ticks.labels.value:"log"===e[o].scale.value?(w=(k=e[o].ticks.values).filter(function(e){return"1"===Math.abs(e).toString().charAt(0)})).length<3?e[o].ticks.visible=k:e[o].ticks.visible=w:e[o].ticks.visible=e[o].ticks.values,e[o].value===e.time.value&&(e[o].ticks.visible=e[o].ticks.visible.map(function(e){return e.constructor===Number&&(""+e).length>4?e:(4===(e+="").length&&parseInt(e)+""===e&&(e+="/01/01"),new Date(e).getTime())}))}if(e.small)for(e.axes.width-=e.axes.margin.viz.left+e.axes.margin.viz.right,e.axes.height-=e.axes.margin.viz.top+e.axes.margin.viz.bottom,d=0,v=n.length;d<v;d++)e[o=n[d]].label.height=0;else e.small||l(e);for(h=0,g=n.length;h<g;h++)e[o=n[h]].axis.svg=i(e,o)},l=function(e){var t,r,i,a,l,c,f,d,h,p,v,g,m,y,b,x,_,w,j,k,z,M,A,E,S,O,T,C,N,P;for(x=e.x.scale.viz.domain(),O=e.y.scale.viz.domain(),e.x2.value&&(g=e.x2.scale.viz.domain()),e.y2.value&&(A=e.y2.scale.viz.domain()),r=0,l=(d=["y","y2"]).length;r<l;r++)e[t=d[r]].value&&(f="y"===t?"left":"right",E={"font-size":e[t].ticks.font.size+"px","font-family":e[t].ticks.font.family.value,"font-weight":e[t].ticks.font.weight,"text-transform":e[t].ticks.font.transform.value,"letter-spacing":e[t].ticks.font.spacing+"px"},P=e[t].ticks.visible,"log"===e[t].scale.value?N=P.map(function(e){return s(e)}):"share"===e[t].scale.value?N=P.map(function(n){return e.format.value(100*n,{key:"share",vars:e,output:t})}):e[t].value===e.time.value?N=P.map(function(n,r){return e[t].ticks.format(new Date(n))}):("string"==typeof P[0]&&(P=e[t].scale.viz.domain().filter(function(e){return 0!==e.indexOf("d3po_buffer_")})),N=P.map(function(n){return e.format.value(n,{key:e[t].value,vars:e,labels:e[t].affixes.value,output:t})})),e[t].ticks.labels.value?(e[t].ticks.hidden=!1,(S=d3.max(o(N,E),function(e){return e.width}))&&(S=Math.ceil(S+e.labels.padding),e.axes.margin.viz[f]+=S)):e[t].ticks.hidden=!0,(T=e[t].label.fetch(e))?(C={"font-family":e[t].label.font.family.value,"font-weight":e[t].label.font.weight,"font-size":e[t].label.font.size+"px","text-transform":e[t].label.font.transform.value,"letter-spacing":e[t].label.font.spacing+"px"},e[t].label.height=o([T],C)[0].height):e[t].label.height=0,e[t].label.value&&(e.axes.margin.viz[f]+=e[t].label.height,e.axes.margin.viz[f]+=2*e[t].label.padding));for(e.axes.width-=e.axes.margin.viz.left+e.axes.margin.viz.right,e.x.scale.viz.range(n([0,e.axes.width],x.length)),g&&e.x2.scale.viz.range(n([0,e.axes.width],g.length)),i=0,c=(h=["x","x2"]).length;i<c;i++)e[t=h[i]].value&&(f="x"===t?"bottom":"top",e[t].ticks.labels.value?(e[t].ticks.hidden=!1,m={"font-size":e[t].ticks.font.size+"px","font-family":e[t].ticks.font.family.value,"font-weight":e[t].ticks.font.weight,"text-transform":e[t].ticks.font.transform.value,"letter-spacing":e[t].ticks.font.spacing+"px"},M=e[t].ticks.visible,"log"===e[t].scale.value?z=M.map(function(e){return s(e)}):"share"===e[t].scale.value?z=M.map(function(n){return e.format.value(100*n,{key:"share",vars:e,output:t})}):e[t].value===e.time.value?z=M.map(function(n,r){return e[t].ticks.format(new Date(n))}):("string"==typeof M[0]&&(M=e[t].scale.viz.domain().filter(function(e){return 0!==e.indexOf("d3po_buffer_")})),z=M.map(function(n){return e.format.value(n,{key:e[t].value,vars:e,labels:e[t].affixes.value,output:t})})),k=o(z,m),b=d3.max(k,function(e){return e.width}),y=d3.max(k,function(e){return e.height}),1===M.length?j=e.axes.width:(j=e[t].scale.viz(M[1])-e[t].scale.viz(M[0]),j=Math.abs(j)),b>j&&z.join("").indexOf(" ")>0?(e[t].ticks.wrap=!0,k=o(z,m,{mod:function(t){return u().container(d3.select(t)).height(e.axes.height/2).width(j).draw()}}),b=d3.max(k,function(e){return e.width}),y=d3.max(k,function(e){return e.height})):e[t].ticks.wrap=!1,e[t].ticks.baseline="auto",b<=j?e[t].ticks.rotate=0:b<e.axes.height/2?(k=o(z,m,{mod:function(t){return u().container(d3.select(t)).width(e.axes.height/2).height(j).draw()}}),y=d3.max(k,function(e){return e.width}),b=d3.max(k,function(e){return e.height}),e[t].ticks.rotate=-90):(b=0,y=0),b&&y||(e[t].ticks.hidden=!0,e[t].ticks.rotate=0),b=Math.ceil(b),y=Math.ceil(y),e[t].ticks.maxHeight=y,e[t].ticks.maxWidth=b,y&&(e.axes.margin.viz[f]+=y+e.labels.padding),a=e[t].ticks.visible[e[t].ticks.visible.length-1],p=e[t].scale.viz(a),(p+=b/2+e.axes.margin.viz.left)>e.width.value&&(v=p-e.width.value+e.axes.margin.viz.right,e.axes.width-=v,e.axes.margin.viz.right+=v)):e[t].ticks.hidden=!0,(_=e[t].label.fetch(e))?(w={"font-family":e[t].label.font.family.value,"font-weight":e[t].label.font.weight,"font-size":e[t].label.font.size+"px","text-transform":e[t].label.font.transform.value,"letter-spacing":e[t].label.font.spacing+"px"},e[t].label.height=o([_],w)[0].height):e[t].label.height=0,e[t].label.value&&(e.axes.margin.viz[f]+=e[t].label.height,e.axes.margin.viz[f]+=2*e[t].label.padding));if(e.axes.height-=e.axes.margin.viz.top+e.axes.margin.viz.bottom,e.x.scale.viz.range(n([0,e.axes.width],x.length)),g&&e.x2.scale.viz.range(n([0,e.axes.width],g.length)),e.y.scale.viz.range(n([0,e.axes.height],O.length)),A)return e.y2.scale.viz.range(n([0,e.axes.height],A.length))},i=function(e,t){return d3.svg.axis().tickSize(e[t].ticks.size).tickPadding(5).orient(e[t].orient.value).scale(e[t].scale.viz).tickValues(e[t].ticks.values).tickFormat(function(n,r){var i,a;return e[t].ticks.hidden?null:(a=e[t].scale.value,i=n.constructor===Date?+n:n,e[t].ticks.visible.indexOf(i)>=0?"share"===a?e.format.value(100*n,{key:"share",vars:e,labels:e[t].affixes.value,output:t}):n.constructor===Date?e[t].ticks.format(n):"log"===a?s(n):e.format.value(n,{key:e[t].value,vars:e,labels:e[t].affixes.value,output:t}):null)})},s=function(e){var t,n,r;return n=Math.round(Math.log(Math.abs(e))/Math.LN10),r=Math.abs(e).toString().charAt(0),t="10 "+(n+"").split("").map(function(e){return"⁰¹²³⁴⁵⁶⁷⁸⁹"[e]}).join(""),"1"!==r&&(t=r+" x "+t),e<0?"-"+t:t}}).call(this)},{"../../../../../core/data/time.js":94,"../../../../../core/fetch/value.js":99,"../../../../../font/sizes.js":136,"../../../../../textwrap/textwrap.js":235,"../../../../../util/buckets.js":239,"../../../../../util/uniques.js":245,"./buffer.js":358}],361:[function(e,t,n){(function(){var n,r,i;n=e("../../../../../color/mix.js"),r=e("../../../../../textwrap/textwrap.js"),i=e("../../../../../object/validate.js"),t.exports=function(e){var t,a,o,s,l,u,c,f,d,h,p,v,g,m,y,b,x,_,w,j,k,z,M,A,E,S,O,T,C,N,P,F,q,B,D,I,R,L,U,V,Y,H,G,X,W,Q,Z,$,J,K,ee,te,ne,re,ie,ae,oe,se,le;if(e.x.domain.viz.concat(e.y.domain.viz).indexOf(void 0)>=0)return null;for(f={width:e.axes.width,height:e.axes.height,fill:e.axes.background.color,stroke:e.axes.background.stroke.color,"stroke-width":e.axes.background.stroke.width,"shape-rendering":e.axes.background.rendering.value},a={left:"start",center:"middle",right:"end"},s=e.small?[]:[0],ie=function(t,n){return t.attr("x1",function(t){return 0===n.indexOf("x")?e.x.scale.viz(t):0}).attr("x2",function(t){return 0===n.indexOf("x")?e.x.scale.viz(t):e.axes.width}).attr("y1",function(t){return 0===n.indexOf("y")?e.y.scale.viz(t):0}).attr("y2",function(t){return 0===n.indexOf("y")?e.y.scale.viz(t):e.axes.height})},ae=function(t,r,i){var a,o,s;return a=i?e[r].grid.color:e[r].ticks.color,o="log"===e[r].scale.value,s=e[r].ticks.visible||[],t.attr("stroke",function(t){return 0===t?e[r].axis.color:(t.constructor===Date&&(t=+t),!(s.indexOf(t)>=0)||o&&"1"!==Math.abs(t).toString().charAt(0)?i&&"transparent"!==e.axes.background.color?n(a,e.axes.background.color,.4,1):"transparent"!==e.background.value?n(a,e.background.value,.4,1):n(a,"white",.4,1):a)}).attr("stroke-width",e[r].ticks.width).attr("shape-rendering",e[r].ticks.rendering.value)},p=function(t,n,r){var i;return i=0===n?"axis":"ticks",(n=e[t][i].font[r])&&(n.length||"number"==typeof n)?n:e[t].ticks.font[r]},re=function(t,r){var i;return i="log"===e[r].scale.value,t.attr("font-size",function(e){return p(r,e,"size")+"px"}).attr("stroke","none").attr("fill",function(t){var a;return a=p(r,t,"color"),i&&"1"!==Math.abs(t).toString().charAt(0)?n(a,e.background.value,.4,1):a}).attr("font-family",function(e){return p(r,e,"family").value}).attr("font-weight",function(e){return p(r,e,"weight")}).style("text-transform",function(e){return p(r,e,"transform").value}).style("letter-spacing",function(e){return p(r,e,"spacing")+"px"})},P=function(t,n){var r,i;return r=0===n.indexOf("x")?"height":"width",i=0===n.indexOf("x")?"y":"x",t.attr(i+"1",0).attr(i+"2",e.axes[r]).attr(n+"1",function(e){return e.coords.line}).attr(n+"2",function(e){return e.coords.line}).attr("stroke",function(t){return t.color||e[n].lines.color}).attr("stroke-width",e[n].lines.width).attr("shape-rendering",e[n].lines.rendering.value).attr("stroke-dasharray",e[n].lines.dasharray.value)},T=function(t,n){var r;return r=0===n.indexOf("x")?"y":"x",t.attr(r,function(e){return e.coords.text[r]+"px"}).attr(n,function(e){return e.coords.text[n]+"px"}).attr("dy",e[n].lines.font.position.value).attr("text-anchor",a[e[n].lines.font.align.value]).attr("transform",function(e){return e.transform}).attr("font-size",e[n].lines.font.size+"px").attr("fill",function(t){return t.color||e[n].lines.color}).attr("font-family",e[n].lines.font.family.value).attr("font-weight",e[n].lines.font.weight)},U="translate("+e.axes.margin.viz.left+","+e.axes.margin.viz.top+")",(L=e.group.selectAll("g#d3po_graph_plane").data([0])).transition().duration(e.draw.timing).attr("transform",U),L.enter().append("g").attr("id","d3po_graph_plane").attr("transform",U),(c=L.selectAll("rect#d3po_graph_background").data([0])).transition().duration(e.draw.timing).attr(f),c.enter().append("rect").attr("id","d3po_graph_background").attr("x",0).attr("y",0).attr(f),(D=L.selectAll("path#d3po_graph_mirror").data([0])).enter().append("path").attr("id","d3po_graph_mirror").attr("fill","#000").attr("fill-opacity",.03).attr("stroke-width",1).attr("stroke","#ccc").attr("stroke-dasharray","10,10").attr("opacity",0),D.transition().duration(e.draw.timing).attr("opacity",function(){return e.axes.mirror.value?1:0}).attr("d",function(){var e,t;return"M "+(t=f.width)+" "+(e=f.height)+" L 0 "+e+" L "+t+" 0 Z"}),$=0!==e.x.ticks.rotate,se=function(t,n){var i,a;return a="x"===n?e.axes.height:0,(i=t.attr("transform","translate(0,"+a+")").call(e[n].axis.svg.scale(e[n].scale.viz)).selectAll("g.tick")).selectAll("line").attr("y2",function(t){var r;return t.constructor===Date&&(t=+t),r=d3.select(this).attr("y2"),e[n].ticks.visible.indexOf(t)>=0?r:r/2}),i.select("text").style("text-anchor",$&&"x"===n?"end":$?"start":"middle").call(re,n).each(function(t){if(d3.select(this).attr("dy","0px").attr("font-size",function(e){return p(n,e,"size")+"px"}),t.constructor===Date&&(t=+t),!e[n].ticks.hidden&&e[n].ticks.visible.indexOf(t)>=0)return r().container(d3.select(this)).rotate(e[n].ticks.rotate).align($?"end":"center").valign($?"middle":"x"===n?"top":"bottom").width(e[n].ticks.maxWidth+2).height(e[n].ticks.maxHeight).padding(0).x(-e[n].ticks.maxWidth/2).y("x2"===n?-(e[n].ticks.maxHeight+2*e.labels.padding):0).draw()})},le=function(t,n){var r,i;return i="y2"===n?e.axes.width:0,(r=t.attr("transform","translate("+i+", 0)").call(e[n].axis.svg.scale(e[n].scale.viz)).selectAll("g.tick")).selectAll("line").attr("y2",function(t){var n;return t.constructor===Date&&(t=+t),n=d3.select(this).attr("y2"),e.x.ticks.visible.indexOf(t)>=0?n:n/2}),r.select("text").call(re,n)},y=0,k=(X=["x","x2","y","y2"]).length;y<k;y++)K=0===(o=X[y]).indexOf("x")?se:le,Y=s.length&&e[o].value?[0]:[],(l=L.selectAll("g#d3po_graph_"+o+"ticks").data(Y)).transition().duration(e.draw.timing).call(K,o),l.selectAll("line").transition().duration(e.draw.timing).call(ae,o),(m=l.enter().append("g").attr("id","d3po_graph_"+o+"ticks").call(K,o)).selectAll("path").attr("fill","none").attr("stroke","none"),m.selectAll("line").call(ae,o),l.exit().transition().duration(e.data.timing).attr("opacity",0).remove();for(j=function(t,n){return t.attr("x",0===n.indexOf("x")?e.width.viz/2:-(e.axes.height/2+e.axes.margin.viz.top)).attr("y","x"===n?e.height.viz-e[n].label.height/2-e[n].label.padding:"y2"===n?e.width.viz-e[n].label.height/2-e[n].label.padding:e[n].label.height/2+e[n].label.padding).attr("transform",0===n.indexOf("y")?"rotate(-90)":null).attr("font-family",e[n].label.font.family.value).attr("font-weight",e[n].label.font.weight).attr("font-size",e[n].label.font.size+"px").attr("fill",e[n].label.font.color).style("text-anchor","middle").attr("dominant-baseline","central").style("text-transform",e[n].label.font.transform.value).style("letter-spacing",e[n].label.font.spacing+"px")},b=0,z=(W=["x","y"]).length;b<z;b++)e[o=W[b]].grid.value?g=e[o].ticks.value?e[o].ticks.value:e[o].ticks.values:(g=[],R="x"===o?"y":"x",e[o].ticks.values.indexOf(0)>=0&&e[R].axis.value&&(g=[0])),e[o].value===e.time.value&&(g=g.map(function(e){return 4===(e+="").length&&parseInt(e)+""===e&&(e+="/01/01"),new Date(e).getTime()})),(v=L.selectAll("g#d3po_graph_"+o+"grid").data([0])).enter().append("g").attr("id","d3po_graph_"+o+"grid"),(F=v.selectAll("line").data(g,function(e,t){return e.constructor===Date?e.getTime():e})).transition().duration(e.draw.timing).call(ie,o).call(ae,o,!0),F.enter().append("line").style("opacity",0).call(ie,o).call(ae,o,!0).transition().duration(e.draw.timing).delay(e.draw.timing/2).style("opacity",1),F.exit().transition().duration(e.draw.timing/2).style("opacity",0).remove();for(x=0,M=(Q=["x","x2","y","y2"]).length;x<M;x++)e[o=Q[x]].value?(u=e[o].label.fetch(e),w=s&&u&&!e.small?[0]:[],t=e.format.affixes.value[e[o].value],u&&!e[o].affixes.value&&t&&(!0===(J=e[o].affixes.separator.value)?J=["[","]"]:!1===J&&(J=["",""]),u+=" "+J[0]+t[0]+" "+t[1]+J[1])):(u="",w=[]),(_=e.group.selectAll("text#d3po_graph_"+o+"label").data(w)).text(u).transition().duration(e.draw.timing).call(j,o),_.enter().append("text").attr("stroke","none").attr("id","d3po_graph_"+o+"label").text(u).call(j,o),_.exit().transition().duration(e.data.timing).attr("opacity",0).remove();for(B=0,A=(Z=["x","y","x2","y2"]).length;B<A;B++)if(e[o=Z[B]].value){for((C=L.selectAll("g#d3po_graph_"+o+"_userlines").data([0])).enter().append("g").attr("id","d3po_graph_"+o+"_userlines"),h=e[o].scale.viz.domain(),0===o.indexOf("y")&&(h=h.slice().reverse()),ee=[],O=[],I=0,E=(oe=e[o].lines.value||[]).length;I<E;I++)S=oe[I],d=i(S)?S.position:S,(o===e.axes.discrete?h.indexOf(d)>=0:d>=h[0]&&d<=h[1])&&((d=i(S)?S:{position:d}).coords={line:e[o].scale.viz(d.position)},O.push(d),d.text&&(d.axis=o,d.padding=.5*e[o].lines.font.padding.value,d.align=e[o].lines.font.align.value,te="middle"===(V=e[o].lines.font.position.text)?0:2*d.padding,"top"===V&&(te=-te),0===o.indexOf("x")?(ne="left"===d.align?e.axes.height:"center"===d.align?e.axes.height/2:0,"left"===d.align&&(ne-=2*d.padding),"right"===d.align&&(ne+=2*d.padding)):(ne="left"===d.align?0:"center"===d.align?e.axes.width/2:e.axes.width,"right"===d.align&&(ne-=2*d.padding),"left"===d.align&&(ne+=2*d.padding)),d.coords.text={},d.coords.text[0===o.indexOf("x")?"y":"x"]=ne,d.coords.text[o]=e[o].scale.viz(d.position)+te,d.transform=0===o.indexOf("x")?"rotate(-90,"+d.coords.text.x+","+d.coords.text.y+")":null,ee.push(d)));(F=C.selectAll("line.d3po_graph_"+o+"line").data(O,function(e){return e.position})).enter().append("line").attr("class","d3po_graph_"+o+"line").attr("opacity",0).call(P,o),F.transition().duration(e.draw.timing).attr("opacity",1).call(P,o),F.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),(q=C.selectAll("text.d3po_graph_"+o+"line_text").data(ee,function(e){return e.position})).enter().append("text").attr("class","d3po_graph_"+o+"line_text").attr("id",function(e){var t;return t=(t=(t=e.position+"").replace("-","neg")).replace(".","p"),"d3po_graph_"+o+"line_text_"+t}).attr("opacity",0).call(T,o),q.text(function(e){return e.text}).transition().duration(e.draw.timing).attr("opacity",1).call(T,o),q.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),G=function(t){var n;return n=function(e){var t;return t=(t=(t=e.position+"").replace("-","neg")).replace(".","p"),L.select("text#d3po_graph_"+e.axis+"line_text_"+t).node().getBBox()},t.attr("x",function(e){return n(e).x-e.padding}).attr("y",function(e){return n(e).y-e.padding}).attr("transform",function(e){return e.transform}).attr("width",function(e){return n(e).width+2*e.padding}).attr("height",function(e){return n(e).height+2*e.padding}).attr("fill","transparent"!==e.axes.background.color?e.axes.background.color:"white")},H=e[o].lines.font.background.value?ee:[],(N=C.selectAll("rect.d3po_graph_"+o+"line_rect").data(H,function(e){return e.position})).enter().insert("rect","text.d3po_graph_"+o+"line_text").attr("class","d3po_graph_"+o+"line_rect").attr("pointer-events","none").attr("opacity",0).call(G),N.transition().delay(e.draw.timing).each("end",function(t){return d3.select(this).transition().duration(e.draw.timing).attr("opacity",1).call(G)}),N.exit().transition().duration(e.draw.timing).attr("opacity",0).remove()}}}).call(this)},{"../../../../../color/mix.js":77,"../../../../../object/validate.js":207,"../../../../../textwrap/textwrap.js":235}],362:[function(e,t,n){(function(){var n,r,i;n=e("../../../../core/fetch/value.js"),r=e("../../../../string/strip.js"),i=e("../../../../util/uniques.js"),t.exports=function(e,t,a){var o,s,l,u,c,f,d;return void 0===a?a=e.id.nesting.slice(0,e.depth.value+1):a.constructor!==Array&&(a=[a]),void 0===s&&(s=[]),t||(t=e.data.viz),o=e[e.axes.discrete],u=e[e.axes.opposite],(d=o.value===e.time.value)?(f=e.data.time.ticks,l=e.time.solo.value.length?"solo":"mute",e.time[l].value.length&&(c=e.time[l].value.slice().map(function(e){return e.constructor!==Date&&(4===(e+="").length&&parseInt(e)+""===e&&(e+="/01/01"),e=new Date(e)),+e}),f=f.filter(function(e){return"solo"===l?c.indexOf(+e)>=0:c.indexOf(+e)<0}))):f=o.ticks.values?o.ticks.values:i(t,o.value,n,e),d3.nest().key(function(t){var i,o,s,l,u;for(l="nesting",o=0,s=a.length;o<s;o++)i=a[o],(u=n(e,t,i))instanceof Array&&(u=u.join("_")),l+="_"+r(u);return l}).rollup(function(t){var r,a,s,c,h,p,v,g,m,y,b;if((r=i(t,o.value,n,e)).length&&r[0].constructor===Date&&(r=r.map(Number)),o.zerofill.value)for(a="log"===o.scale.value?u.scale.viz.domain().every(function(e){return e<0})?-1:1:0,s=c=0,p=f.length;c<p;s=++c)if(b=f[s],y=d?+b:b,r.indexOf(y)<0){for(g={d3po:{}},h=0,v=(m=e.id.nesting).length;h<v;h++)(l=m[h])in t[0]&&(g[l]=t[0][l]);g[o.value]=b,g[u.value]=0,g[u.value]=a,t.splice(s,0,g)}return"string"==typeof t[0][o.value]?t:t.sort(function(t,r){var i;return(i=n(e,t,o.value)-n(e,r,o.value))?i:n(e,t,u.value)-n(e,r,u.value)})}).entries(t)}}).call(this)},{"../../../../core/fetch/value.js":99,"../../../../string/strip.js":210,"../../../../util/uniques.js":245}],363:[function(e,t,n){(function(){var n;n=e("../../../../core/fetch/value.js"),t.exports=function(e,t){var r,i,a,o,s,l,u,c,f,d,h,p,v,g,m,y;for(m=e.axes.stacked||e.axes.opposite,i=e[m].scale.viz(0),v=e[m].scale.value,h="x"===m?"y":"x",u="y"===m?e.axes.margin.viz.top:e.axes.margin.viz.left,d="share"===v?"expand":"zero",g=d3.layout.stack().values(function(e){return e.values||[e]}).offset(d).x(function(e){return e.d3po[h]}).y(function(t){return i-e[m].scale.viz(n(e,t,e[m].value))}).out(function(t,r,a){return n(e,t,e[m].value)<0,"share"===v?(t.d3po[m+"0"]=(1-r)*i,t.d3po[m]=t.d3po[m+"0"]-a*i):(t.d3po[m+"0"]=i,e.axes.stacked&&(t.d3po[m+"0"]-=r),t.d3po[m]=t.d3po[m+"0"]-a),t.d3po[m]+=u,t.d3po[m+"0"]+=u}),p=[],f=[],a=0,s=t.length;a<s;a++)if(r=t[a],(y=n(e,r,e[m].value))instanceof Array){for(c=!0,o=0,l=y.length;o<l;o++)if(y[o]>=0){c=!1;break}c?f.push(r):p.push(r)}else y>=0&&p.push(r),y<0&&f.push(r);return 0===p.length||0===f.length?g(t):(p.length&&(p=g(p)),f.length&&(f=g(f)),p.concat(f))}}).call(this)},{"../../../../core/fetch/value.js":99}],364:[function(e,t,n){(function(){var n,r,i,a,o,s;n=e("../../core/fetch/value.js"),r=e("./helpers/graph/draw.js"),a=e("./helpers/graph/nest.js"),o=e("../../array/sort.js"),s=e("./helpers/graph/stack.js"),(i=function(e){var t,i,a,l,u,c,f,d,h;if(r(e,{buffer:e.axes.opposite,mouse:!0}),e.x.domain.viz.concat(e.y.domain.viz).indexOf(void 0)>=0)return[];for(a=0,u=(i=o(e.data.viz,null,null,null,e)).length;a<u;a++)for(l=0,c=(f=i[a].values).length;l<c;l++)t=f[l],null!==(d=n(e,t,e.x.value))?(t.d3po.x2=!1,t.d3po.x=e.x.scale.viz(d)):(t.d3po.x2=!0,t.d3po.x=e.x2.scale.viz(n(e,t,e.x2.value))),t.d3po.x+=e.axes.margin.viz.left,null!==(h=n(e,t,e.y.value))?(t.d3po.y2=!1,t.d3po.y=e.y.scale.viz(h)):(t.d3po.y2=!0,t.d3po.y=e.y2.scale.viz(n(e,t,e.y2.value))),t.d3po.y+=e.axes.margin.viz.top;return e.axes.stacked?s(e,i):i}).filter=function(e,t){return a(e,t)},i.requirements=["data","x","y"],i.setup=function(e){var t;e.axes.discrete||(t=e.time.value===e.y.value?"y":"x",e.self[t]({scale:"discrete"}))},i.shapes=["line"],i.tooltip="static",t.exports=i}).call(this)},{"../../array/sort.js":65,"../../core/fetch/value.js":99,"./helpers/graph/draw.js":356,"./helpers/graph/nest.js":362,"./helpers/graph/stack.js":363}],365:[function(e,t,n){var r=e("../../network/smallestgap.js"),i=e("../../core/fetch/value.js"),a=function(e){var t=e.nodes.restricted||e.nodes.value,n=e.edges.restricted||e.edges.value||[],a=d3.extent(t,function(e){return e.x}),o=d3.extent(t,function(e){return e.y}),s=[1,1];if("number"==typeof e.size.value?s=[e.size.value,e.size.value]:e.size.value&&(s=d3.extent(t,function(t){var n=i(e,t,e.size.value);return 0===n?null:n})),void 0===s[0]&&(s=[1,1]),"number"==typeof e.size.value)var l=e.size.value,u=e.size.value;else{var c=(l=r(t,{accessor:function(e){return[e.x,e.y]}}))/2;if(l*=e.size.value?e.nodes.overlap:.4,e.edges.arrows.value&&(l*=.5),s[0]===s[1]){u=c;l=c}else{var f=a[1]+1.1*l-(a[0]-1.1*l),d=o[1]+1.1*l-(o[0]-1.1*l),h=f/d;if(e.width.viz/e.height.viz>h)var p=e.height.viz/d;else p=e.width.viz/f;(u=.25*l)*p<2&&(u=2/p)}}var v=e.size.scale.value.domain(s).range([u,l]);e.zoom.bounds=[[a[0]-1.1*l,o[0]-1.1*l],[a[1]+1.1*l,o[1]+1.1*l]];var g=[],m={};return t.forEach(function(t){var n=e.data.viz.filter(function(n){return n[e.id.value]==t[e.id.value]})[0]||{};n[e.id.value]=t[e.id.value],n.d3po={},n.d3po.x=t.x,n.d3po.y=t.y;var r=i(e,n,e.size.value);n.d3po.r=r?v(r):v.range()[0],m[n[e.id.value]]={x:n.d3po.x,y:n.d3po.y,r:n.d3po.r},g.push(n)}),g.sort(function(e,t){return t.d3po.r-e.d3po.r}),n.forEach(function(t,n){t.d3po&&delete t.d3po.spline,t[e.edges.source].d3po={};var r=m[t[e.edges.source][e.id.value]];void 0!==r?(t[e.edges.source].d3po.r=r.r,t[e.edges.source].d3po.x=r.x,t[e.edges.source].d3po.y=r.y):delete t[e.edges.source].d3po,t[e.edges.target].d3po={};var i=m[t[e.edges.target][e.id.value]];void 0!==i?(t[e.edges.target].d3po.r=i.r,t[e.edges.target].d3po.x=i.x,t[e.edges.target].d3po.y=i.y):delete t[e.edges.target].d3po}),{nodes:g,edges:n}};a.nesting=!1,a.requirements=["nodes"],a.scale=1.05,a.shapes=["circle"],a.tooltip="static",a.zoom=!0,t.exports=a},{"../../core/fetch/value.js":99,"../../network/smallestgap.js":203}],366:[function(e,t,n){(function(){var n,r,i,a,o=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};r=e("../../network/shortestpath.js"),n=e("../../core/fetch/value.js"),i=e("../../util/uniques.js"),(a=function(e){var t,r,i,s,l,u,c,f,d,h,p,v,g,m,y,b,x,_,w,j,k,z,M,A,E,S,O,T,C,N,P,F,q,B,D,I,R,L,U,V,Y,H,G,X,W,Q,Z,$,J,K,ee,te,ne,re,ie,ae,oe,se,le,ue,ce,fe;for(p=[],(Y={})[e.focus.value[0]]=0,Y[e.focus.value[1]]=0,H={all:[[e.focus.value[0]],[e.focus.value[1]]]},V=m=0,j=(Q=a.paths).length;m<j;V=++m)for(U=Q[V],p=p.concat(U.edges),w=e.focus.value[0],H[V]=[w],h=y=0,k=(Z=U.edges).length;y<k;h=++y)(d=Z[h])[e.edges.source]=e.data.viz.filter(function(t){return d[e.edges.source][e.id.value]===t[e.id.value]})[0],d[e.edges.target]=e.data.viz.filter(function(t){return d[e.edges.target][e.id.value]===t[e.id.value]})[0],q=d[e.edges.source][e.id.value]===w?"target":"source",void 0===Y[B=d[e.edges[q]][e.id.value]]&&(Y[B]=V),H[V].push(B),w=B;for(V in ie=0,H)if(U=H[V],"all"!==V){for(P=0,v=b=0,z=U.length;b<z;v=++b)if(g=U[v],0!==v&&v!==U.length-1&&Y[g]===parseFloat(V)){for(P=1,G=U[v-1],F=U[v+1],X=null,D=null,u=T=0,M=($=H.all).length;T<M;u=++T)l=$[u],o.call(l,G)>=0&&(X=u),o.call(l,F)>=0&&(D=u);null!==X&&null===D?X+1===H.all.length-1?H.all.splice(X+1,0,[g]):H.all[X+1].push(g):D-X==1?H.all.splice(D,0,[g]):D-X>1&&H.all[D-1].push(g)}ie+=P}for(re=Math.floor(e.height.viz/ie),fe=[],v=0;v<ie;)v%2==0?fe.push(v):fe.unshift(v),v++;for(x=e.size.value&&!e.small?30:0,ce=d3.scaleOrdinal().domain(fe).range(d3.range(re/2-x,e.height.viz+re/2-x,(e.height.viz-re)/(ie-1))),f=H.all.length,c=Math.floor(e.width.viz/f),le=d3.scaleLinear().domain([0,f-1]).rangeRound([c/2,e.width.viz-c/2]),5,C=.4*d3.min([c,re-x]),oe=d3.extent(e.data.viz,function(t){return n(e,t,e.size.value)||0}),ae=e.size.scale.value.domain(oe).rangeRound([5,C]),N=0,A=(J=e.data.viz).length;N<A;N++){for(null==(I=J[N]).d3po&&(I.d3po={}),u=R=0,E=(K=H.all).length;R<E;u=++R)l=K[u],ee=I[e.id.value],o.call(l,ee)>=0&&(I.d3po.x=le(u));I.d3po.y=ce(Y[I[e.id.value]]),e.size.value?(se=n(e,I,e.size.value),I.d3po.r=se?ae(se):5):I.d3po.r=C,I.d3po.r<.1*c&&!e.small?I.d3po.label={x:0,y:I.d3po.r+2*e.labels.padding,w:.6*c,h:x+C-I.d3po.r,resize:!1}:delete I.d3po.label}for(V=L=0,S=(te=a.paths).length;L<S;V=++L)for(U=te[V],w=e.focus.value[0],h=W=0,O=(ne=U.edges).length;W<O;h=++W)_="target"===(q=(d=ne[h])[e.edges.source][e.id.value]===w?"target":"source")?"source":"target",B=d[e.edges[q]][e.id.value],Y[w]!==Y[B]?(d.d3po={spline:!0},null==(t=d[e.edges.source]).d3po&&(t.d3po={}),null==(r=d[e.edges.source].d3po).edges&&(r.edges={}),null==(i=d[e.edges.target]).d3po&&(i.d3po={}),null==(s=d[e.edges.target].d3po).edges&&(s.edges={}),ue=d[q].d3po.x-d[_].d3po.x,d[_].d3po.edges[d[q][e.id.value]]={angle:Math.PI,radius:c/2},d[q].d3po.edges[d[_][e.id.value]]={angle:0,radius:c/2,offset:ue-c}):delete d.d3po,w=B;return{nodes:e.data.viz,edges:p}}).filter=function(e,t){var o,s,l,u,c,f,d,h,p,v,g,m,y,b,x,_,w,j;for(u=e.edges.filtered||e.edges.value,a.paths=r(u,e.focus.value[0],{target:e.focus.value[1],distance:e.edges.size.value||void 0,nodeid:e.id.value,startpoint:e.edges.source,endpoint:e.edges.target,K:e.edges.limit.value||5}),a.nodes=[],o=[],d=0,v=(b=a.paths).length;d<v;d++)for(h=0,g=(x=b[d].edges).length;h<g;h++)w=(l=x[h])[e.edges.source],j=l[e.edges.target],o.indexOf(w[e.id.value])<0&&(a.nodes.push(w),o.push(w[e.id.value])),o.indexOf(j[e.id.value])<0&&(a.nodes.push(j),o.push(j[e.id.value]));for(_=[],p=0,m=(f=i(a.nodes,e.id.value,n,e)).length;p<m;p++)c=f[p],(s=t.filter(function(t){return t[e.id.value]===c}))[0]?_.push(s[0]):((y={d3po:{}})[e.id.value]=c,_.push(y));return _},a.nesting=!1,a.requirements=[function(e){return{status:2===e.focus.value.length,text:e.format.locale.value.method.focus+" x 2"}},"edges"],a.scale=1,a.shapes=["circle","square","donut"],a.tooltip="static",t.exports=a}).call(this)},{"../../core/fetch/value.js":99,"../../network/shortestpath.js":202,"../../util/uniques.js":245}],367:[function(e,t,n){(function(){var n,r,i,a;n=e("../../array/comparator.js"),r=e("../../core/data/threshold.js"),i=e("../../core/data/group.js"),(a=function(e){var t,r,a,o,s,l,u;for(s=d3.pie().value(function(e){return e.value}).sort(function(t,r){return e.order.value?n(t.d3po,r.d3po,[e.order.value],e.order.sort.value,[],e):e.id.nesting.length>1?n(t.d3po,r.d3po,e.id.nesting.concat([e.size.value]),void 0,[],e):n(t.d3po,r.d3po,[e.size.value],"desc",[],e)})(i(e,e.data.viz,[])),u=[],l=d3.min([e.width.viz,e.height.viz])/2-2*e.labels.padding,r=0,o=s.length;r<o;r++)(a=(t=s[r]).data.d3po).d3po.startAngle=t.startAngle,a.d3po.endAngle=t.endAngle,a.d3po.r_inner=0,a.d3po.r_outer=l,a.d3po.x=e.width.viz/2,a.d3po.y=e.height.viz/2,a.d3po.share=(t.endAngle-t.startAngle)/(2*Math.PI),u.push(a);return u}).filter=r,a.requirements=["data","size"],a.shapes=["arc"],a.threshold=function(e){return 1600/(e.width.viz*e.height.viz)},t.exports=a}).call(this)},{"../../array/comparator.js":63,"../../core/data/group.js":88,"../../core/data/threshold.js":93}],368:[function(e,t,n){(function(){var n,r,i,a,o,s,l,u;e("../../array/comparator.js"),e("../../array/sort.js"),e("../../core/data/threshold.js"),r=e("../../core/fetch/text.js"),i=e("../../core/fetch/value.js"),a=e("../../font/sizes.js"),o=e("../../geom/offset.js"),l=e("../../textwrap/textwrap.js"),n=e("../../util/buckets.js"),u=e("../../util/uniques.js"),(s=function(e){var t,s,c,f,d,h,p,v,g,m,y,b,x,_,w,j,k,z,M,A,E,S,O,T,C,N,P,F,q,B,D,I,R,L,U,V,Y,H,G,X,W,Q,Z,$,J,K,ee,te,ne,re,ie;for(g=e.data.viz,U=e.depth.value+1,V=e.id.nesting[U],p=function(){var e,t,n;for(n=[],e=0,t=g.length;e<t;e++)v=g[e],n.push(v[V]);return n}(),ie=function(){var t,n,r;for(r=[],t=0,n=g.length;t<n;t++)v=g[t],r.push(u(g,V,i,e,U));return r}(),ie=u(d3.merge(ie)).length,f=2*Math.PI/ie,R=d3.min([e.width.viz,e.height.viz])/2,S=0,C=0,N=function(){var t,n,i;for(i=[],t=0,n=p.length;t<n;t++)h=p[t],i.push(r(e,h,U)[0]);return i}(),N=u(d3.merge(N)),e.labels.value&&(m=o(Math.PI/2,R),K=o(f+Math.PI/2,R),S=m.x-K.x-2*e.labels.padding,ne={fill:e.x.ticks.font.color,"font-family":e.x.ticks.font.family.value,"font-weight":e.x.ticks.font.weight,"font-size":e.x.ticks.font.size+"px"},ee=a(N,ne,{mod:function(t){return l().container(d3.select(t)).width(e.height.viz/8).height(S).draw()}}),R-=C=d3.max(ee,function(e){return e.width}),R-=2*e.labels.padding),I=function(){var t,n,r;for(r=[],t=0,n=p.length;t<n;t++)h=p[t],r.push(function(){var t,n,r;for(r=[],t=0,n=h.length;t<n;t++)v=h[t],r.push(i(e,v,e.size.value));return r}());return r}(),I=d3.max(d3.merge(I)),G=d3.scaleLinear().domain([0,I]).range([0,R]),w=function(){var t,n,r;for(r=[],t=0,n=p.length;t<n;t++)h=p[t],r.push(i(e,h,V));return r}(),w=u(d3.merge(w)),_=d3.scaleOrdinal().domain(w).range(d3.range(0,w.length)),k=0,P=g.length;k<P;k++)for((v=g[k]).d3po.x=e.width.viz/2+e.margin.top,v.d3po.y=e.height.viz/2+e.margin.left,x=z=0,F=(X=v[V]).length;z<F;x=++z)(t=X[x]).d3po||(t.d3po={}),t.d3po.r=G(i(e,t,e.size.value)),t.d3po.a=_(i(e,t,V))*f;for(j=1,D=0,q=(W=[10,5,4,2]).length;D<q;D++)if(R/(x=W[D])>=20){j=x;break}for((Z=n([R/j,R],j-1).reverse()).length===j&&Z.shift(),$=function(t){return t.attr("fill",function(t,n){return 0===n?e.axes.background.color:"transparent"}).attr("cx",e.width.viz/2+e.margin.top).attr("cy",e.height.viz/2+e.margin.left).attr("stroke",e.x.grid.value?e.x.grid.color:"transparent")},(J=e.group.selectAll(".d3po_radar_rings").data(Z,function(e,t){return t})).enter().append("circle").attr("class","d3po_radar_rings").call($).attr("r",0),J.transition().duration(e.draw.timing).call($).attr("r",function(e){return e}),J.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),O=d3.scaleOrdinal().domain(N).range(d3.range(0,N.length)),A=[],L=0,B=N.length;L<B;L++)(t=(s=f*O(M=N[L])-Math.PI/2)*(180/Math.PI))<-90||t>90?(t-=180,d=-(R+2*e.labels.padding+C),c="end"):(d=R+2*e.labels.padding,c="start"),re=s<0||s>Math.PI,Q=s<Math.PI/2,H=R,e.labels.value&&(H+=e.labels.padding),(Y=o(s,H)).x,Y.y,Q||C,re&&S,[0,Math.PI].indexOf(f*O(M))>=0&&C/2,A.push({text:M,angle:t,x:d,anchor:c,offset:Y});return(E=e.group.selectAll("g.d3po_radar_label_group").data([0])).enter().append("g").attr("class","d3po_radar_label_group").attr("transform","translate("+e.width.viz/2+","+e.height.viz/2+")"),E.transition().duration(e.draw.timing).attr("transform","translate("+e.width.viz/2+","+e.height.viz/2+")"),T=function(e){return e.attr(ne).each(function(e,t){return l().container(d3.select(this)).height(S).width(C).align(e.anchor).text(e.text).padding(0).valign("middle").x(e.x).y(-S/2).draw()}).attr("transform",function(e){var t;return(t=d3.select(this).attr("transform")||"").length&&(t=t.split(")").slice(-3).join(")")),"rotate("+e.angle+")"+t})},(te=E.selectAll(".d3po_radar_labels").data(e.labels.value?A:[],function(e,t){return t})).call(T),te.enter().append("text").attr("class","d3po_radar_labels").attr("opacity",0).call(T).transition().duration(e.draw.timing).attr("opacity",1),te.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),b=function(t){return t.attr("stroke",e.x.grid.color).attr("x1",e.width.viz/2+e.margin.left).attr("y1",e.height.viz/2+e.margin.top)},(y=e.group.selectAll(".d3po_radar_lines").data(A,function(e,t){return t})).enter().append("line").attr("class","d3po_radar_lines").call(b).attr("x2",e.width.viz/2+e.margin.left).attr("y2",e.height.viz/2+e.margin.top),y.transition().duration(e.draw.timing).call(b).attr("x2",function(t){return e.width.viz/2+e.margin.left+t.offset.x}).attr("y2",function(t){return e.height.viz/2+e.margin.top+t.offset.y}),y.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),e.mouse.viz={click:!1},g}).requirements=["data","size"],s.shapes=["radial"],t.exports=s}).call(this)},{"../../array/comparator.js":63,"../../array/sort.js":65,"../../core/data/threshold.js":93,"../../core/fetch/text.js":98,"../../core/fetch/value.js":99,"../../font/sizes.js":136,"../../geom/offset.js":195,"../../textwrap/textwrap.js":235,"../../util/buckets.js":239,"../../util/uniques.js":245}],369:[function(e,t,n){var r=e("../../array/sort.js"),i=e("../../client/pointer.js"),o=e("../../core/fetch/value.js"),s=e("../../core/fetch/color.js"),l=e("../../color/legible.js"),u=e("../../tooltip/remove.js"),c=e("../../network/smallestgap.js"),f=e("../../color/text.js"),d=e("../../util/uniques.js"),h=function(e){var t=d3.min([e.height.viz,e.width.viz])/2,n=e.small||!e.labels.value?(t-2*e.labels.padding)/2:t/3,h=e.small||!e.labels.value?1.4*n:n,p=2*n,v=[],g=[],m=e.data.viz.filter(function(t){return t[e.id.value]===e.focus.value[0]})[0];m||((m={d3po:{}})[e.id.value]=e.focus.value[0]),m.d3po.x=e.width.viz/2,m.d3po.y=e.height.viz/2,m.d3po.r=.65*h;var y=[],b=[e.focus.value[0]];e.edges.connections(e.focus.value[0],e.id.value).forEach(function(t){var n=t[e.edges.source][e.id.value]==e.focus.value[0]?t[e.edges.target]:t[e.edges.source],r=e.data.viz.filter(function(t){return t[e.id.value]===n[e.id.value]})[0];r||((r={d3po:{}})[e.id.value]=n[e.id.value]),r.d3po.edges=e.edges.connections(r[e.id.value],e.id.value).filter(function(t){return t[e.edges.source][e.id.value]!=e.focus.value[0]&&t[e.edges.target][e.id.value]!=e.focus.value[0]}),r.d3po.edge=t,b.push(r[e.id.value]),y.push(r)});var x=e.order.value||e.color.value||e.size.value||e.id.value;y.sort(function(t,n){var i=t.d3po.edges.length-n.d3po.edges.length;return i||r([t,n],x,e.order.sort.value,e.color.value||[],e)}),"number"==typeof e.edges.limit.value?y=y.slice(0,e.edges.limit.value):"function"==typeof e.edges.limit.value&&(y=e.edges.limit.value(y));var _=[],w=0;y.forEach(function(t){var n=t[e.id.value];t.d3po.edges=t.d3po.edges.filter(function(t){var r=t[e.edges.source][e.id.value],i=t[e.edges.target][e.id.value];return b.indexOf(r)<0&&i==n||b.indexOf(i)<0&&r==n}),w+=t.d3po.edges.length||1,t.d3po.edges.forEach(function(t){var r=t[e.edges.source],i=t[e.edges.target],a=i[e.id.value]==n?r:i;b.push(a[e.id.value])})}),r(y,x,e.order.sort.value,e.color.value||[],e);var j=0,k=2*Math.PI;y.forEach(function(t,n){var i=t.d3po.edges.length||1,o=k/w*i;0==n&&(s,j-=o/2);var s=j+o/2;s-=k/4,t.d3po.radians=s,t.d3po.x=e.width.viz/2+h*Math.cos(s),t.d3po.y=e.height.viz/2+h*Math.sin(s),j+=o,t.d3po.edges.sort(function(n,i){n=n[e.edges.source][e.id.value]==t[e.id.value]?n[e.edges.target]:n[e.edges.source],i=i[e.edges.source][e.id.value]==t[e.id.value]?i[e.edges.target]:i[e.edges.source];return r([n,i],x,e.order.sort.value,e.color.value||[],e)}),t.d3po.edges.forEach(function(n,r){var o=n[e.edges.source][e.id.value]==t[e.id.value]?n[e.edges.target]:n[e.edges.source],l=k/w,u=e.data.viz.filter(function(t){return t[e.id.value]===o[e.id.value]})[0];u||((u={d3po:{}})[e.id.value]=o[e.id.value]),a=s-l*i/2+l/2+l*r,u.d3po.radians=a,u.d3po.x=e.width.viz/2+p*Math.cos(a),u.d3po.y=e.height.viz/2+p*Math.sin(a),_.push(u)})});var z=c(y,{accessor:function(e){return[e.d3po.x,e.d3po.y]}}),M=c(_,{accessor:function(e){return[e.d3po.x,e.d3po.y]}});if(z||(z=n/2),M||(M=n/4),z/2-4<8)var A=d3.min([z/2,8]);else A=z/2-4;if(M/2-4<4)var E=d3.min([M/2,4]);else E=M/2-4;E>n/10&&(E=n/10),E>A&&E>10&&(E=.75*A),A>1.5*E&&(A=1.5*E),A=Math.floor(A),E=Math.floor(E);var S=d(y,e.id.value,o,e);(S=S.concat(d(_,e.id.value,o,e))).push(e.focus.value[0]);var O=e.data.viz.filter(function(t){return S.indexOf(t[e.id.value])>=0});if(e.size.value){var T=d3.extent(O,function(t){return o(e,t,e.size.value)});T[0]==T[1]&&(T[0]=0);t=d3.scaleLinear().domain(T).rangeRound([3,d3.min([A,E])]);var C=o(e,m,e.size.value);m.d3po.r=t(C)}else{t=d3.scaleLinear().domain([1,2]).rangeRound([A,E]);e.edges.label&&(m.d3po.r=1.5*t(1))}_.forEach(function(n){n.d3po.ring=2;var r=e.size.value?o(e,n,e.size.value):2;n.d3po.r=t(r)}),y.forEach(function(n){n.d3po.ring=1;var r=e.size.value?o(e,n,e.size.value):1;n.d3po.r=t(r)}),g=[m].concat(y).concat(_),y.forEach(function(t,r){var i=[e.edges.source,e.edges.target],a=t.d3po.edge;i.forEach(function(t){a[t]=g.filter(function(n){return n[e.id.value]==a[t][e.id.value]})[0]}),delete a.d3po,v.push(a),e.edges.connections(t[e.id.value],e.id.value).forEach(function(r){var i=r[e.edges.source][e.id.value]==t[e.id.value]?r[e.edges.target]:r[e.edges.source];if(i[e.id.value]!=m[e.id.value]){var a=_.filter(function(t){return t[e.id.value]==i[e.id.value]})[0];if(a);else{a=y.filter(function(t){return t[e.id.value]==i[e.id.value]})[0]}if(a)r.d3po={spline:!0,translate:{x:e.width.viz/2,y:e.height.viz/2}},[e.edges.source,e.edges.target].forEach(function(i,o){r[i]=g.filter(function(t){return t[e.id.value]==r[i][e.id.value]})[0],void 0===r[i].d3po.edges&&(r[i].d3po.edges={});var s=0===o?r[e.edges.target][e.id.value]:r[e.edges.source][e.id.value];r[i][e.id.value]==t[e.id.value]?r[i].d3po.edges[s]={angle:t.d3po.radians+Math.PI,radius:n/2}:r[i].d3po.edges[s]={angle:a.d3po.radians,radius:n/2}}),v.push(r)}})});var N=!1;return e.background.value&&["transparent","none"].indexOf(e.background.value)<0&&d3.hsl(e.background.value).l<.5&&(N=f(e.background.value)),g.forEach(function(t){if(!e.small&&e.labels.value)if(t[e.id.value]!=e.focus.value[0]){t.d3po.rotate=t.d3po.radians*(180/Math.PI);var r=t.d3po.rotate,i=n-3*e.labels.padding-t.d3po.r;if(r<-90||r>90){r-=180;var a=-(t.d3po.r+i/2+e.labels.padding),o="end"}else a=t.d3po.r+i/2+e.labels.padding,o="start";var u=y.indexOf(t)>=0,c=1==t.d3po.ring?z:M;t.d3po.label={x:a,y:0,w:i,h:c,angle:r,anchor:o,valign:"center",color:N||l(s(e,t)),resize:[8,e.labels.font.size],background:u,mouse:!0}}else if(e.size.value||e.edges.label){c=h-2*t.d3po.r-2*e.labels.padding;t.d3po.label={x:0,y:t.d3po.r+c/2,w:h,h:c,color:N||l(s(e,t)),resize:[10,40],background:!0,mouse:!0}}else delete t.d3po.rotate,delete t.d3po.label;else delete t.d3po.rotate,delete t.d3po.label}),e.mouse.viz={},e.mouse.viz[i.click]=function(t){if(t[e.id.value]!=e.focus.value[0]){u(e.type.value);var n=e.focus.value[0];e.history.states.push(function(){e.self.focus(n).draw()}),e.self.focus(t[e.id.value]).draw()}},{edges:v,nodes:g,data:O}};h.filter=function(e,t){var n=e.edges.connections(e.focus.value[0],e.id.value,!0),r=[];n.forEach(function(t){r=r.concat(e.edges.connections(t[e.id.value],e.id.value,!0))});var i=n.concat(r),a=d(i,e.id.value,o,e),s=[];return a.forEach(function(n){var r=t.filter(function(t){return t[e.id.value]==n})[0];if(r)s.push(r);else{var i={d3po:{}};i[e.id.value]=n,s.push(i)}}),s},h.nesting=!1,h.scale=1,h.shapes=["circle","square","donut"],h.requirements=["edges","focus"],h.tooltip="static",t.exports=h},{"../../array/sort.js":65,"../../client/pointer.js":69,"../../color/legible.js":75,"../../color/text.js":81,"../../core/fetch/color.js":95,"../../core/fetch/value.js":99,"../../network/smallestgap.js":203,"../../tooltip/remove.js":238,"../../util/uniques.js":245}],370:[function(e,t,n){(function(){var n,r,i,a;n=e("./sankey.js"),r=e("../../client/pointer.js"),i=e("../../tooltip/remove.js"),e("../../util/uniques.js"),(a=function(e){var t,a,o,s,l,u,c,f,d,h,p,v,g,m;for(o=e.focus.value[0],p=2*e.data.stroke.width,m=e.size.value.constructor===Number?e.size.value:20,a=e.edges.connections(o,e.id.value).filter(function(t){return t[e.edges.source][e.id.value]!==o||t[e.edges.target][e.id.value]!==o}),h=[],v=[],a=a.map(function(t){var n,r;return t[e.edges.target][e.id.value]===o?(n={id:"left_"+t[e.edges.source][e.id.value],dupe:"left",data:t[e.edges.source],value:t[e.edges.strength.value]},r=t[e.edges.target]):(n=t[e.edges.source],r={id:"right_"+t[e.edges.target][e.id.value],dupe:"right",data:t[e.edges.target],value:t[e.edges.strength.value]}),v.indexOf(n.id)<0&&h.push(n),v.indexOf(r.id)<0&&h.push(r),v.push(n.id),v.push(r.id),{source:n,target:r,value:t[e.edges.strength.value]||1}}),u=n().nodeWidth(m).nodePadding(e.data.padding.value).size([e.width.viz-2*p,e.height.viz-2*p]).nodes(h).links(a).layout(2),g=[],s=0,c=h.length;s<c;s++)(t={id:(t=(d=h[s]).data||d)[e.id.value]}).d3po={x:d.x+d.dx/2+p,y:d.y+d.dy/2+p,width:d.dx,height:d.dy,suffix:d.dupe},t.id!==o&&(t[e.edges.strength.value]=d.value),g.push(t);for(e.edges.path=u.link(),l=0,f=a.length;l<f;l++)a[l].d3po={x:p,y:p};return e.mouse.viz={},e.mouse.viz[r.click]=function(t){var n;if(t[e.id.value]!==e.focus.value[0])return i(e.type.value),n=e.focus.value[0],e.history.states.push(function(){return e.self.focus(n).draw()}),e.self.focus(t[e.id.value]).draw()},{nodes:g,edges:a}}).requirements=["edges","focus","nodes"],a.shapes=["square"],t.exports=a}).call(this)},{"../../client/pointer.js":69,"../../tooltip/remove.js":238,"../../util/uniques.js":245,"./sankey.js":370}],371:[function(e,t,n){(function(){var n,r,i,a,o;n=e("../../core/fetch/value.js"),r=e("./helpers/graph/draw.js"),e("../../core/console/print.js"),a=e("../../array/sort.js"),o=e("./helpers/graph/dataticks.js"),(i=function(e){var t,i,s,l;if(r(e,{buffer:"size",mouse:!0}),e.x.domain.viz.concat(e.y.domain.viz).indexOf(void 0)>=0)return[];for(i=0,s=(l=e.data.viz).length;i<s;i++)(t=l[i]).d3po.x=e.x.scale.viz(n(e,t,e.x.value)),t.d3po.x+=e.axes.margin.viz.left,t.d3po.y=e.y.scale.viz(n(e,t,e.y.value)),t.d3po.y+=e.axes.margin.viz.top,"number"!=typeof e.size.value&&e.size.value?t.d3po.r=e.axes.scale(n(e,t,e.size.value)):t.d3po.r=e.axes.scale(0);return o(e),a(e.data.viz,e.order.value||e.size.value||e.id.value,"desc"===e.order.sort.value?"asc":"desc",e.color.value||[],e)}).fill=!0,i.requirements=["data","x","y"],i.scale=1.1,i.setup=function(e){if(e.time.value&&!e.axes.discrete&&(e.time.value===e.x.value&&e.self.x({scale:"discrete"}),e.time.value===e.y.value))return e.self.y({scale:"discrete"})},i.shapes=["circle"],i.tooltip="static",t.exports=i}).call(this)},{"../../array/sort.js":65,"../../core/console/print.js":83,"../../core/fetch/value.js":99,"./helpers/graph/dataticks.js":355,"./helpers/graph/draw.js":356}],372:[function(e,t,n){var r=e("../../core/fetch/value.js"),i=e("../../util/uniques.js"),a=e("../../util/copy.js"),o=e("../../color/random.js"),s=function(e){var t=i(e.data.viz,e.id.value,r,e),n=i(e.cols.value);n.indexOf("label")<0&&e.cols.index.value&&n.unshift("label");var s=e.height.viz/(t.length+1),l=e.width.viz/n.length;e.group.selectAll("rect").data([0]).enter().append("rect").attr("class","background").attr("height",e.height.viz).attr("width",e.width.viz).style("fill",e.color.missing);var u=e.group.selectAll("line.horiz").data(e.data.viz);u.enter().append("line").attr("class","horiz"),u.attr("x1",0).attr("y1",function(e,t){return s*t+s}).attr("x2",e.width.viz).attr("y2",function(e,t){return s*t+s}).style("fill","#fff").style("stroke","#fff"),u.exit().remove();var c=e.group.selectAll("line.vert").data(n);c.enter().append("line").attr("class","vert"),c.attr("x1",function(e,t){return l*t+l}).attr("y1",0).attr("x2",function(e,t){return l*t+l}).attr("y2",e.height.viz).style("fill","#fff").style("stroke","#fff"),c.exit().remove();var f=[],d={};return n.forEach(function(t,n){var r={d3po:{x:l*n+l/2,y:s/2,width:l,height:s,id:"d3p_header_"+t.toString().replace(/ /g,"_"),shape:"square",color:"#fff",text:e.format.value(t)}};if(t==e.id.value&&(r.d3po.color="#fff"),"label"==t&&(r.d3po.label=!1,r.d3po.color="#fff",r.d3po.stroke="#fff"),f.push(r),"number"==e.data.keys[t]){var i=d3.extent(e.data.viz,function(e){return e[t]});i[0]==i[1]&&(i=[i[0]-1,i[1]]),d[t]=d3.scaleLinear().domain(i).range([e.color.missing,o(t)])}else"boolean"==e.data.keys[t]&&(d[t]=function(n){return n?o(t):e.color.missing})}),e.data.viz.forEach(function(t,r){r+=1,n.forEach(function(n,i){var o=a(t);o.d3po.id="d3p_"+o[e.id.value].toString().replace(/ /g,"_")+"_"+n,o.d3po.x=l*i+l/2,o.d3po.y=s*r+s/2,o.d3po.width=l,o.d3po.height=s,"label"==n&&(o.d3po.shape="square",o.d3po.color="#fff",f.push(o)),d3.keys(t).indexOf(n)>=0&&n in t&&(d[n]&&(o.d3po.color=d[n](o[n])),o.d3po.text=e.format.value(o[n]),"boolean"==e.data.keys[n]?o.d3po.label=!1:"string"==e.data.keys[n]&&(o.d3po.color=e.color.missing,o.d3po.stroke="#fff",o.d3po.shape="square"),f.push(o))})}),f};s.shapes=["check","cross","diamond","square","triangle","triangle_up","triangle_down"],s.requirements=["data","cols"],t.exports=s},{"../../color/random.js":78,"../../core/fetch/value.js":99,"../../util/copy.js":242,"../../util/uniques.js":245}],373:[function(e,t,n){(function(){var n,r,i,a;n=e("../../core/data/threshold.js"),r=e("../../core/data/group.js"),i=e("../../object/merge.js"),(a=function(e){var t,n,a,o,s,l,u;if(a=r(e,e.data.viz),(n=d3.layout.treemap().mode(e.type.mode.value).round(!0).size([e.width.viz,e.height.viz]).children(function(e){return e.values}).padding(e.data.padding.value).sort(function(e,t){var n;return 0===(n=e.value-t.value)?e.id<t.id:n}).nodes({name:"root",values:a}).filter(function(e){return!e.values&&e.area})).length){for(u=n[0];u.parent;)u=u.parent;for(l=[],o=0,s=n.length;o<s;o++)(t=n[o]).d3po.d3po=i(t.d3po.d3po,{x:t.x+t.dx/2,y:t.y+t.dy/2,width:t.dx,height:t.dy,share:t.value/u.value}),l.push(t.d3po)}return l}).filter=n,a.modes=["squarify","slice","dice","slice-dice"],a.requirements=["data","size"],a.shapes=["square"],a.threshold=function(e){return 1600/(e.width.viz*e.height.viz)},t.exports=a}).call(this)},{"../../core/data/group.js":88,"../../core/data/threshold.js":93,"../../object/merge.js":206}],374:[function(e,t,n){(function(){var n,r,i,a,o,s;n=e("../core/methods/attach.js"),r=e("./methods/helpers/axis.js"),a=e("./helpers/ui/message.js"),o=e("./helpers/drawSteps.js"),s=e("../core/console/print.js"),i=e("./helpers/container.js"),e("../object/validate.js"),t.exports=function(){var t;return(t={g:{apps:{}},types:{area:e("./types/area.js"),bar:e("./types/bar.js"),bubbles:e("./types/bubbles.js"),box:e("./types/box.js"),donut:e("./types/donut.js"),geomap:e("./types/geomap.js"),halfdonut:e("./types/halfdonut.js"),line:e("./types/line.js"),network:e("./types/network.js"),paths:e("./types/paths.js"),pie:e("./types/pie.js"),radar:e("./types/radar.js"),rings:e("./types/rings.js"),sankey:e("./types/sankey.js"),scatter:e("./types/scatter.js"),stacked:e("./types/area.js"),table:e("./types/table.js"),treemap:e("./types/treemap.js")}}).self=function(e){return e.each(function(){var e,n,r,l,u,c,f;t.draw.frozen=!0,t.error.internal=null,"timing"in t.draw||(t.draw.timing=t.timing.transitions),t.error.value&&(t.draw.timing=0),i(t),c=t.width.value<=t.width.small,u=t.height.value<=t.height.small,t.small=c||u,t.width.viz=t.width.value,t.height.viz=t.height.value,e=!1,n=function(){f.length?l():t.dev.value&&(s.groupEnd(),s.timeEnd("total draw time"),s.log("\n"))},r=function(e,r){e[r=r||"function"]instanceof Array?e[r].forEach(function(e){e(t,n)}):"function"==typeof e[r]&&e[r](t,n),e.wait||n()},l=function(){var i,o,l,u;u=f.shift(),l=t.g.message&&e===u.message,"function"==typeof(o=!("check"in u)||u.check)&&(o=o(t)),o?l?r(u):(t.dev.value&&(!1!==e&&s.groupEnd(),s.group(u.message)),"string"==typeof t.messages.value?(e=t.messages.value,i=t.messages.value):(e=u.message,i=t.format.value(u.message)),t.draw.update?(a(t,i),t.error.value?r(u):setTimeout(function(){return r(u)},10)):r(u)):"otherwise"in u?t.error.value?r(u,"otherwise"):setTimeout(function(){return r(u,"otherwise")},10):n()},t.messages.style.backup=t.group&&"1"===t.group.attr("opacity")?"small":"large",f=o(t),l()}),t.self},n(t,{active:e("./methods/active.js"),aggs:e("./methods/aggs.js"),attrs:e("./methods/attrs.js"),axes:e("./methods/axes.js"),background:e("./methods/background.js"),class:e("./methods/class.js"),color:e("./methods/color.js"),cols:e("./methods/cols.js"),config:e("./methods/config.js"),container:e("./methods/container.js"),coords:e("./methods/coords.js"),csv:e("./methods/csv.js"),data:e("./methods/data.js"),depth:e("./methods/depth.js"),descs:e("./methods/descs.js"),dev:e("./methods/dev.js"),draw:e("./methods/draw.js"),edges:e("./methods/edges.js"),error:e("./methods/error.js"),focus:e("./methods/focus.js"),font:e("./methods/font.js"),footer:e("./methods/footer.js"),format:e("./methods/format.js"),height:e("./methods/height.js"),history:e("./methods/history.js"),icon:e("./methods/icon.js"),id:e("./methods/id.js"),labels:e("./methods/labels.js"),legend:e("./methods/legend.js"),links:e("./methods/links.js"),margin:e("./methods/margin.js"),messages:e("./methods/messages.js"),mouse:e("./methods/mouse.js"),nodes:e("./methods/nodes.js"),order:e("./methods/order.js"),resize:e("./methods/resize.js"),shape:e("./methods/shape.js"),size:e("./methods/size.js"),style:e("./methods/style.js"),temp:e("./methods/temp.js"),text:e("./methods/text.js"),time:e("./methods/time.js"),timeline:e("./methods/timeline.js"),timing:e("./methods/timing.js"),title:e("./methods/title.js"),tooltip:e("./methods/tooltip.js"),total:e("./methods/total.js"),type:e("./methods/type.js"),ui:e("./methods/ui.js"),width:e("./methods/width.js"),x:r("x"),x2:r("x2"),y:r("y"),y2:r("y2"),zoom:e("./methods/zoom.js")}),t.self}}).call(this)},{"../core/console/print.js":83,"../core/methods/attach.js":114,"../object/validate.js":207,"./helpers/container.js":246,"./helpers/drawSteps.js":253,"./helpers/ui/message.js":287,"./methods/active.js":296,"./methods/aggs.js":297,"./methods/attrs.js":298,"./methods/axes.js":299,"./methods/background.js":300,"./methods/class.js":301,"./methods/color.js":302,"./methods/cols.js":303,"./methods/config.js":304,"./methods/container.js":305,"./methods/coords.js":306,"./methods/csv.js":307,"./methods/data.js":308,"./methods/depth.js":309,"./methods/descs.js":310,"./methods/dev.js":311,"./methods/draw.js":312,"./methods/edges.js":313,"./methods/error.js":314,"./methods/focus.js":315,"./methods/font.js":316,"./methods/footer.js":317,"./methods/format.js":318,"./methods/height.js":319,"./methods/helpers/axis.js":320,"./methods/history.js":321,"./methods/icon.js":322,"./methods/id.js":323,"./methods/labels.js":324,"./methods/legend.js":325,"./methods/links.js":326,"./methods/margin.js":327,"./methods/messages.js":328,"./methods/mouse.js":329,"./methods/nodes.js":330,"./methods/order.js":331,"./methods/resize.js":332,"./methods/shape.js":333,"./methods/size.js":334,"./methods/style.js":335,"./methods/temp.js":336,"./methods/text.js":337,"./methods/time.js":338,"./methods/timeline.js":339,"./methods/timing.js":340,"./methods/title.js":341,"./methods/tooltip.js":342,"./methods/total.js":343,"./methods/type.js":344,"./methods/ui.js":345,"./methods/width.js":346,"./methods/zoom.js":347,"./types/area.js":348,"./types/bar.js":349,"./types/box.js":350,"./types/bubbles.js":351,"./types/donut.js":352,"./types/geomap.js":353,"./types/halfdonut.js":354,"./types/line.js":364,"./types/network.js":365,"./types/paths.js":366,"./types/pie.js":367,"./types/radar.js":368,"./types/rings.js":369,"./types/sankey.js":370,"./types/scatter.js":371,"./types/table.js":372,"./types/treemap.js":373}]},{},[198,197]);